var Zj=Object.defineProperty;var Qj=(s,u,c)=>u in s?Zj(s,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[u]=c;var qj=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports);var AP=(s,u,c)=>(Qj(s,typeof u!="symbol"?u+"":u,c),c);var dD=qj((yD,ly)=>{(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))g(v);new MutationObserver(v=>{for(const w of v)if(w.type==="childList")for(const P of w.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&g(P)}).observe(document,{childList:!0,subtree:!0});function c(v){const w={};return v.integrity&&(w.integrity=v.integrity),v.referrerPolicy&&(w.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?w.credentials="include":v.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function g(v){if(v.ep)return;v.ep=!0;const w=c(v);fetch(v.href,w)}})();function bj(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var uC={exports:{}},By={},hC={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=Symbol.for("react.element"),tO=Symbol.for("react.portal"),eO=Symbol.for("react.fragment"),iO=Symbol.for("react.strict_mode"),nO=Symbol.for("react.profiler"),rO=Symbol.for("react.provider"),oO=Symbol.for("react.context"),sO=Symbol.for("react.forward_ref"),lO=Symbol.for("react.suspense"),uO=Symbol.for("react.memo"),hO=Symbol.for("react.lazy"),DP=Symbol.iterator;function aO(s){return s===null||typeof s!="object"?null:(s=DP&&s[DP]||s["@@iterator"],typeof s=="function"?s:null)}var aC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fC=Object.assign,cC={};function Wa(s,u,c){this.props=s,this.context=u,this.refs=cC,this.updater=c||aC}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(s,u){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,u,"setState")};Wa.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function pC(){}pC.prototype=Wa.prototype;function dw(s,u,c){this.props=s,this.context=u,this.refs=cC,this.updater=c||aC}var gw=dw.prototype=new pC;gw.constructor=dw;fC(gw,Wa.prototype);gw.isPureReactComponent=!0;var IP=Array.isArray,dC=Object.prototype.hasOwnProperty,yw={current:null},gC={key:!0,ref:!0,__self:!0,__source:!0};function yC(s,u,c){var g,v={},w=null,P=null;if(u!=null)for(g in u.ref!==void 0&&(P=u.ref),u.key!==void 0&&(w=""+u.key),u)dC.call(u,g)&&!gC.hasOwnProperty(g)&&(v[g]=u[g]);var F=arguments.length-2;if(F===1)v.children=c;else if(1<F){for(var E=Array(F),R=0;R<F;R++)E[R]=arguments[R+2];v.children=E}if(s&&s.defaultProps)for(g in F=s.defaultProps,F)v[g]===void 0&&(v[g]=F[g]);return{$$typeof:sp,type:s,key:w,ref:P,props:v,_owner:yw.current}}function fO(s,u){return{$$typeof:sp,type:s.type,key:u,ref:s.ref,props:s.props,_owner:s._owner}}function mw(s){return typeof s=="object"&&s!==null&&s.$$typeof===sp}function cO(s){var u={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(c){return u[c]})}var RP=/\/+/g;function A1(s,u){return typeof s=="object"&&s!==null&&s.key!=null?cO(""+s.key):u.toString(36)}function Jg(s,u,c,g,v){var w=typeof s;(w==="undefined"||w==="boolean")&&(s=null);var P=!1;if(s===null)P=!0;else switch(w){case"string":case"number":P=!0;break;case"object":switch(s.$$typeof){case sp:case tO:P=!0}}if(P)return P=s,v=v(P),s=g===""?"."+A1(P,0):g,IP(v)?(c="",s!=null&&(c=s.replace(RP,"$&/")+"/"),Jg(v,u,c,"",function(R){return R})):v!=null&&(mw(v)&&(v=fO(v,c+(!v.key||P&&P.key===v.key?"":(""+v.key).replace(RP,"$&/")+"/")+s)),u.push(v)),1;if(P=0,g=g===""?".":g+":",IP(s))for(var F=0;F<s.length;F++){w=s[F];var E=g+A1(w,F);P+=Jg(w,u,c,E,v)}else if(E=aO(s),typeof E=="function")for(s=E.call(s),F=0;!(w=s.next()).done;)w=w.value,E=g+A1(w,F++),P+=Jg(w,u,c,E,v);else if(w==="object")throw u=String(s),Error("Objects are not valid as a React child (found: "+(u==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":u)+"). If you meant to render a collection of children, use an array instead.");return P}function Eg(s,u,c){if(s==null)return s;var g=[],v=0;return Jg(s,g,"","",function(w){return u.call(c,w,v++)}),g}function pO(s){if(s._status===-1){var u=s._result;u=u(),u.then(function(c){(s._status===0||s._status===-1)&&(s._status=1,s._result=c)},function(c){(s._status===0||s._status===-1)&&(s._status=2,s._result=c)}),s._status===-1&&(s._status=0,s._result=u)}if(s._status===1)return s._result.default;throw s._result}var or={current:null},Zg={transition:null},dO={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Zg,ReactCurrentOwner:yw};fe.Children={map:Eg,forEach:function(s,u,c){Eg(s,function(){u.apply(this,arguments)},c)},count:function(s){var u=0;return Eg(s,function(){u++}),u},toArray:function(s){return Eg(s,function(u){return u})||[]},only:function(s){if(!mw(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};fe.Component=Wa;fe.Fragment=eO;fe.Profiler=nO;fe.PureComponent=dw;fe.StrictMode=iO;fe.Suspense=lO;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dO;fe.cloneElement=function(s,u,c){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var g=fC({},s.props),v=s.key,w=s.ref,P=s._owner;if(u!=null){if(u.ref!==void 0&&(w=u.ref,P=yw.current),u.key!==void 0&&(v=""+u.key),s.type&&s.type.defaultProps)var F=s.type.defaultProps;for(E in u)dC.call(u,E)&&!gC.hasOwnProperty(E)&&(g[E]=u[E]===void 0&&F!==void 0?F[E]:u[E])}var E=arguments.length-2;if(E===1)g.children=c;else if(1<E){F=Array(E);for(var R=0;R<E;R++)F[R]=arguments[R+2];g.children=F}return{$$typeof:sp,type:s.type,key:v,ref:w,props:g,_owner:P}};fe.createContext=function(s){return s={$$typeof:oO,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:rO,_context:s},s.Consumer=s};fe.createElement=yC;fe.createFactory=function(s){var u=yC.bind(null,s);return u.type=s,u};fe.createRef=function(){return{current:null}};fe.forwardRef=function(s){return{$$typeof:sO,render:s}};fe.isValidElement=mw;fe.lazy=function(s){return{$$typeof:hO,_payload:{_status:-1,_result:s},_init:pO}};fe.memo=function(s,u){return{$$typeof:uO,type:s,compare:u===void 0?null:u}};fe.startTransition=function(s){var u=Zg.transition;Zg.transition={};try{s()}finally{Zg.transition=u}};fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fe.useCallback=function(s,u){return or.current.useCallback(s,u)};fe.useContext=function(s){return or.current.useContext(s)};fe.useDebugValue=function(){};fe.useDeferredValue=function(s){return or.current.useDeferredValue(s)};fe.useEffect=function(s,u){return or.current.useEffect(s,u)};fe.useId=function(){return or.current.useId()};fe.useImperativeHandle=function(s,u,c){return or.current.useImperativeHandle(s,u,c)};fe.useInsertionEffect=function(s,u){return or.current.useInsertionEffect(s,u)};fe.useLayoutEffect=function(s,u){return or.current.useLayoutEffect(s,u)};fe.useMemo=function(s,u){return or.current.useMemo(s,u)};fe.useReducer=function(s,u,c){return or.current.useReducer(s,u,c)};fe.useRef=function(s){return or.current.useRef(s)};fe.useState=function(s){return or.current.useState(s)};fe.useSyncExternalStore=function(s,u,c){return or.current.useSyncExternalStore(s,u,c)};fe.useTransition=function(){return or.current.useTransition()};fe.version="18.2.0";hC.exports=fe;var ve=hC.exports;const gO=bj(ve);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO=ve,mO=Symbol.for("react.element"),vO=Symbol.for("react.fragment"),xO=Object.prototype.hasOwnProperty,wO=yO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MO={key:!0,ref:!0,__self:!0,__source:!0};function mC(s,u,c){var g,v={},w=null,P=null;c!==void 0&&(w=""+c),u.key!==void 0&&(w=""+u.key),u.ref!==void 0&&(P=u.ref);for(g in u)xO.call(u,g)&&!MO.hasOwnProperty(g)&&(v[g]=u[g]);if(s&&s.defaultProps)for(g in u=s.defaultProps,u)v[g]===void 0&&(v[g]=u[g]);return{$$typeof:mO,type:s,key:w,ref:P,props:v,_owner:wO.current}}By.Fragment=vO;By.jsx=mC;By.jsxs=mC;uC.exports=By;var Br=uC.exports,gx={},vC={exports:{}},Xr={},xC={exports:{}},wC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function u(Nt,pt){var ee=Nt.length;Nt.push(pt);t:for(;0<ee;){var we=ee-1>>>1,ai=Nt[we];if(0<v(ai,pt))Nt[we]=pt,Nt[ee]=ai,ee=we;else break t}}function c(Nt){return Nt.length===0?null:Nt[0]}function g(Nt){if(Nt.length===0)return null;var pt=Nt[0],ee=Nt.pop();if(ee!==pt){Nt[0]=ee;t:for(var we=0,ai=Nt.length,Q=ai>>>1;we<Q;){var Xn=2*(we+1)-1,hl=Nt[Xn],Ke=Xn+1,Cs=Nt[Ke];if(0>v(hl,ee))Ke<ai&&0>v(Cs,hl)?(Nt[we]=Cs,Nt[Ke]=ee,we=Ke):(Nt[we]=hl,Nt[Xn]=ee,we=Xn);else if(Ke<ai&&0>v(Cs,ee))Nt[we]=Cs,Nt[Ke]=ee,we=Ke;else break t}}return pt}function v(Nt,pt){var ee=Nt.sortIndex-pt.sortIndex;return ee!==0?ee:Nt.id-pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;s.unstable_now=function(){return w.now()}}else{var P=Date,F=P.now();s.unstable_now=function(){return P.now()-F}}var E=[],R=[],V=1,B=null,J=3,st=!1,ut=!1,G=!1,Ot=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Nt){for(var pt=c(R);pt!==null;){if(pt.callback===null)g(R);else if(pt.startTime<=Nt)g(R),pt.sortIndex=pt.expirationTime,u(E,pt);else break;pt=c(R)}}function I(Nt){if(G=!1,W(Nt),!ut)if(c(E)!==null)ut=!0,Xi(nt);else{var pt=c(R);pt!==null&&nh(I,pt.startTime-Nt)}}function nt(Nt,pt){ut=!1,G&&(G=!1,X(yt),yt=-1),st=!0;var ee=J;try{for(W(pt),B=c(E);B!==null&&(!(B.expirationTime>pt)||Nt&&!He());){var we=B.callback;if(typeof we=="function"){B.callback=null,J=B.priorityLevel;var ai=we(B.expirationTime<=pt);pt=s.unstable_now(),typeof ai=="function"?B.callback=ai:B===c(E)&&g(E),W(pt)}else g(E);B=c(E)}if(B!==null)var Q=!0;else{var Xn=c(R);Xn!==null&&nh(I,Xn.startTime-pt),Q=!1}return Q}finally{B=null,J=ee,st=!1}}var at=!1,kt=null,yt=-1,Bt=5,Gt=-1;function He(){return!(s.unstable_now()-Gt<Bt)}function Tr(){if(kt!==null){var Nt=s.unstable_now();Gt=Nt;var pt=!0;try{pt=kt(!0,Nt)}finally{pt?Vt():(at=!1,kt=null)}}else at=!1}var Vt;if(typeof U=="function")Vt=function(){U(Tr)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,Ns=zt.port2;zt.port1.onmessage=Tr,Vt=function(){Ns.postMessage(null)}}else Vt=function(){Ot(Tr,0)};function Xi(Nt){kt=Nt,at||(at=!0,Vt())}function nh(Nt,pt){yt=Ot(function(){Nt(s.unstable_now())},pt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Nt){Nt.callback=null},s.unstable_continueExecution=function(){ut||st||(ut=!0,Xi(nt))},s.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bt=0<Nt?Math.floor(1e3/Nt):5},s.unstable_getCurrentPriorityLevel=function(){return J},s.unstable_getFirstCallbackNode=function(){return c(E)},s.unstable_next=function(Nt){switch(J){case 1:case 2:case 3:var pt=3;break;default:pt=J}var ee=J;J=pt;try{return Nt()}finally{J=ee}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Nt,pt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var ee=J;J=Nt;try{return pt()}finally{J=ee}},s.unstable_scheduleCallback=function(Nt,pt,ee){var we=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?we+ee:we):ee=we,Nt){case 1:var ai=-1;break;case 2:ai=250;break;case 5:ai=1073741823;break;case 4:ai=1e4;break;default:ai=5e3}return ai=ee+ai,Nt={id:V++,callback:pt,priorityLevel:Nt,startTime:ee,expirationTime:ai,sortIndex:-1},ee>we?(Nt.sortIndex=ee,u(R,Nt),c(E)===null&&Nt===c(R)&&(G?(X(yt),yt=-1):G=!0,nh(I,ee-we))):(Nt.sortIndex=ai,u(E,Nt),ut||st||(ut=!0,Xi(nt))),Nt},s.unstable_shouldYield=He,s.unstable_wrapCallback=function(Nt){var pt=J;return function(){var ee=J;J=pt;try{return Nt.apply(this,arguments)}finally{J=ee}}}})(wC);xC.exports=wC;var SO=xC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MC=ve,Ur=SO;function xt(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SC=new Set,Yc={};function eh(s,u){za(s,u),za(s+"Capture",u)}function za(s,u){for(Yc[s]=u,s=0;s<u.length;s++)SC.add(u[s])}var nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yx=Object.prototype.hasOwnProperty,kO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BP={},zP={};function PO(s){return yx.call(zP,s)?!0:yx.call(BP,s)?!1:kO.test(s)?zP[s]=!0:(BP[s]=!0,!1)}function NO(s,u,c,g){if(c!==null&&c.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return g?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function CO(s,u,c,g){if(u===null||typeof u>"u"||NO(s,u,c,g))return!0;if(g)return!1;if(c!==null)switch(c.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function sr(s,u,c,g,v,w,P){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=s,this.type=u,this.sanitizeURL=w,this.removeEmptyString=P}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Cn[s]=new sr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var u=s[0];Cn[u]=new sr(u,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Cn[s]=new sr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Cn[s]=new sr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Cn[s]=new sr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Cn[s]=new sr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Cn[s]=new sr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Cn[s]=new sr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Cn[s]=new sr(s,5,!1,s.toLowerCase(),null,!1,!1)});var vw=/[\-:]([a-z])/g;function xw(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var u=s.replace(vw,xw);Cn[u]=new sr(u,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var u=s.replace(vw,xw);Cn[u]=new sr(u,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var u=s.replace(vw,xw);Cn[u]=new sr(u,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Cn[s]=new sr(s,1,!1,s.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Cn[s]=new sr(s,1,!1,s.toLowerCase(),null,!0,!0)});function ww(s,u,c,g){var v=Cn.hasOwnProperty(u)?Cn[u]:null;(v!==null?v.type!==0:g||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(CO(u,c,v,g)&&(c=null),g||v===null?PO(u)&&(c===null?s.removeAttribute(u):s.setAttribute(u,""+c)):v.mustUseProperty?s[v.propertyName]=c===null?v.type===3?!1:"":c:(u=v.attributeName,g=v.attributeNamespace,c===null?s.removeAttribute(u):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,g?s.setAttributeNS(g,u,c):s.setAttribute(u,c))))}var ul=MC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ag=Symbol.for("react.element"),ma=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),mx=Symbol.for("react.profiler"),kC=Symbol.for("react.provider"),PC=Symbol.for("react.context"),Sw=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),xx=Symbol.for("react.suspense_list"),kw=Symbol.for("react.memo"),Rl=Symbol.for("react.lazy"),NC=Symbol.for("react.offscreen"),VP=Symbol.iterator;function mc(s){return s===null||typeof s!="object"?null:(s=VP&&s[VP]||s["@@iterator"],typeof s=="function"?s:null)}var hi=Object.assign,D1;function Cc(s){if(D1===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);D1=u&&u[1]||""}return`
`+D1+s}var I1=!1;function R1(s,u){if(!s||I1)return"";I1=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(R){var g=R}Reflect.construct(s,[],u)}else{try{u.call()}catch(R){g=R}s.call(u.prototype)}else{try{throw Error()}catch(R){g=R}s()}}catch(R){if(R&&g&&typeof R.stack=="string"){for(var v=R.stack.split(`
`),w=g.stack.split(`
`),P=v.length-1,F=w.length-1;1<=P&&0<=F&&v[P]!==w[F];)F--;for(;1<=P&&0<=F;P--,F--)if(v[P]!==w[F]){if(P!==1||F!==1)do if(P--,F--,0>F||v[P]!==w[F]){var E=`
`+v[P].replace(" at new "," at ");return s.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",s.displayName)),E}while(1<=P&&0<=F);break}}}finally{I1=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?Cc(s):""}function TO(s){switch(s.tag){case 5:return Cc(s.type);case 16:return Cc("Lazy");case 13:return Cc("Suspense");case 19:return Cc("SuspenseList");case 0:case 2:case 15:return s=R1(s.type,!1),s;case 11:return s=R1(s.type.render,!1),s;case 1:return s=R1(s.type,!0),s;default:return""}}function wx(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case va:return"Fragment";case ma:return"Portal";case mx:return"Profiler";case Mw:return"StrictMode";case vx:return"Suspense";case xx:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case PC:return(s.displayName||"Context")+".Consumer";case kC:return(s._context.displayName||"Context")+".Provider";case Sw:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case kw:return u=s.displayName||null,u!==null?u:wx(s.type)||"Memo";case Rl:u=s._payload,s=s._init;try{return wx(s(u))}catch{}}return null}function LO(s){var u=s.type;switch(s.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=u.render,s=s.displayName||s.name||"",u.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wx(u);case 8:return u===Mw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function bl(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function CC(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function jO(s){var u=CC(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),g=""+s[u];if(!s.hasOwnProperty(u)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,w=c.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return v.call(this)},set:function(P){g=""+P,w.call(this,P)}}),Object.defineProperty(s,u,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Dg(s){s._valueTracker||(s._valueTracker=jO(s))}function TC(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var c=u.getValue(),g="";return s&&(g=CC(s)?s.checked?"true":"false":s.value),s=g,s!==c?(u.setValue(s),!0):!1}function uy(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Mx(s,u){var c=u.checked;return hi({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function YP(s,u){var c=u.defaultValue==null?"":u.defaultValue,g=u.checked!=null?u.checked:u.defaultChecked;c=bl(u.value!=null?u.value:c),s._wrapperState={initialChecked:g,initialValue:c,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function LC(s,u){u=u.checked,u!=null&&ww(s,"checked",u,!1)}function Sx(s,u){LC(s,u);var c=bl(u.value),g=u.type;if(c!=null)g==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}u.hasOwnProperty("value")?kx(s,u.type,c):u.hasOwnProperty("defaultValue")&&kx(s,u.type,bl(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(s.defaultChecked=!!u.defaultChecked)}function UP(s,u,c){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var g=u.type;if(!(g!=="submit"&&g!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+s._wrapperState.initialValue,c||u===s.value||(s.value=u),s.defaultValue=u}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function kx(s,u,c){(u!=="number"||uy(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Tc=Array.isArray;function ja(s,u,c,g){if(s=s.options,u){u={};for(var v=0;v<c.length;v++)u["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=u.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&g&&(s[c].defaultSelected=!0)}else{for(c=""+bl(c),u=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,g&&(s[v].defaultSelected=!0);return}u!==null||s[v].disabled||(u=s[v])}u!==null&&(u.selected=!0)}}function Px(s,u){if(u.dangerouslySetInnerHTML!=null)throw Error(xt(91));return hi({},u,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function GP(s,u){var c=u.value;if(c==null){if(c=u.children,u=u.defaultValue,c!=null){if(u!=null)throw Error(xt(92));if(Tc(c)){if(1<c.length)throw Error(xt(93));c=c[0]}u=c}u==null&&(u=""),c=u}s._wrapperState={initialValue:bl(c)}}function jC(s,u){var c=bl(u.value),g=bl(u.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),u.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),g!=null&&(s.defaultValue=""+g)}function XP(s){var u=s.textContent;u===s._wrapperState.initialValue&&u!==""&&u!==null&&(s.value=u)}function OC(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nx(s,u){return s==null||s==="http://www.w3.org/1999/xhtml"?OC(u):s==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ig,FC=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,c,g,v){MSApp.execUnsafeLocalFunction(function(){return s(u,c,g,v)})}:s}(function(s,u){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=u;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ig.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}});function Uc(s,u){if(u){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=u;return}}s.textContent=u}var Fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OO=["Webkit","ms","Moz","O"];Object.keys(Fc).forEach(function(s){OO.forEach(function(u){u=u+s.charAt(0).toUpperCase()+s.substring(1),Fc[u]=Fc[s]})});function EC(s,u,c){return u==null||typeof u=="boolean"||u===""?"":c||typeof u!="number"||u===0||Fc.hasOwnProperty(s)&&Fc[s]?(""+u).trim():u+"px"}function AC(s,u){s=s.style;for(var c in u)if(u.hasOwnProperty(c)){var g=c.indexOf("--")===0,v=EC(c,u[c],g);c==="float"&&(c="cssFloat"),g?s.setProperty(c,v):s[c]=v}}var FO=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cx(s,u){if(u){if(FO[s]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(xt(137,s));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(xt(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(xt(61))}if(u.style!=null&&typeof u.style!="object")throw Error(xt(62))}}function Tx(s,u){if(s.indexOf("-")===-1)return typeof u.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lx=null;function Pw(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jx=null,Oa=null,Fa=null;function _P(s){if(s=hp(s)){if(typeof jx!="function")throw Error(xt(280));var u=s.stateNode;u&&(u=Gy(u),jx(s.stateNode,s.type,u))}}function DC(s){Oa?Fa?Fa.push(s):Fa=[s]:Oa=s}function IC(){if(Oa){var s=Oa,u=Fa;if(Fa=Oa=null,_P(s),u)for(s=0;s<u.length;s++)_P(u[s])}}function RC(s,u){return s(u)}function BC(){}var B1=!1;function zC(s,u,c){if(B1)return s(u,c);B1=!0;try{return RC(s,u,c)}finally{B1=!1,(Oa!==null||Fa!==null)&&(BC(),IC())}}function Gc(s,u){var c=s.stateNode;if(c===null)return null;var g=Gy(c);if(g===null)return null;c=g[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(xt(231,u,typeof c));return c}var Ox=!1;if(nl)try{var vc={};Object.defineProperty(vc,"passive",{get:function(){Ox=!0}}),window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{Ox=!1}function EO(s,u,c,g,v,w,P,F,E){var R=Array.prototype.slice.call(arguments,3);try{u.apply(c,R)}catch(V){this.onError(V)}}var Ec=!1,hy=null,ay=!1,Fx=null,AO={onError:function(s){Ec=!0,hy=s}};function DO(s,u,c,g,v,w,P,F,E){Ec=!1,hy=null,EO.apply(AO,arguments)}function IO(s,u,c,g,v,w,P,F,E){if(DO.apply(this,arguments),Ec){if(Ec){var R=hy;Ec=!1,hy=null}else throw Error(xt(198));ay||(ay=!0,Fx=R)}}function ih(s){var u=s,c=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,u.flags&4098&&(c=u.return),s=u.return;while(s)}return u.tag===3?c:null}function VC(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function HP(s){if(ih(s)!==s)throw Error(xt(188))}function RO(s){var u=s.alternate;if(!u){if(u=ih(s),u===null)throw Error(xt(188));return u!==s?null:s}for(var c=s,g=u;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(g=v.return,g!==null){c=g;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return HP(v),s;if(w===g)return HP(v),u;w=w.sibling}throw Error(xt(188))}if(c.return!==g.return)c=v,g=w;else{for(var P=!1,F=v.child;F;){if(F===c){P=!0,c=v,g=w;break}if(F===g){P=!0,g=v,c=w;break}F=F.sibling}if(!P){for(F=w.child;F;){if(F===c){P=!0,c=w,g=v;break}if(F===g){P=!0,g=w,c=v;break}F=F.sibling}if(!P)throw Error(xt(189))}}if(c.alternate!==g)throw Error(xt(190))}if(c.tag!==3)throw Error(xt(188));return c.stateNode.current===c?s:u}function YC(s){return s=RO(s),s!==null?UC(s):null}function UC(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var u=UC(s);if(u!==null)return u;s=s.sibling}return null}var GC=Ur.unstable_scheduleCallback,KP=Ur.unstable_cancelCallback,BO=Ur.unstable_shouldYield,zO=Ur.unstable_requestPaint,Ii=Ur.unstable_now,VO=Ur.unstable_getCurrentPriorityLevel,Nw=Ur.unstable_ImmediatePriority,XC=Ur.unstable_UserBlockingPriority,fy=Ur.unstable_NormalPriority,YO=Ur.unstable_LowPriority,_C=Ur.unstable_IdlePriority,zy=null,Ss=null;function UO(s){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(zy,s,void 0,(s.current.flags&128)===128)}catch{}}var Uo=Math.clz32?Math.clz32:_O,GO=Math.log,XO=Math.LN2;function _O(s){return s>>>=0,s===0?32:31-(GO(s)/XO|0)|0}var Rg=64,Bg=4194304;function Lc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function cy(s,u){var c=s.pendingLanes;if(c===0)return 0;var g=0,v=s.suspendedLanes,w=s.pingedLanes,P=c&268435455;if(P!==0){var F=P&~v;F!==0?g=Lc(F):(w&=P,w!==0&&(g=Lc(w)))}else P=c&~v,P!==0?g=Lc(P):w!==0&&(g=Lc(w));if(g===0)return 0;if(u!==0&&u!==g&&!(u&v)&&(v=g&-g,w=u&-u,v>=w||v===16&&(w&4194240)!==0))return u;if(g&4&&(g|=c&16),u=s.entangledLanes,u!==0)for(s=s.entanglements,u&=g;0<u;)c=31-Uo(u),v=1<<c,g|=s[c],u&=~v;return g}function HO(s,u){switch(s){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KO(s,u){for(var c=s.suspendedLanes,g=s.pingedLanes,v=s.expirationTimes,w=s.pendingLanes;0<w;){var P=31-Uo(w),F=1<<P,E=v[P];E===-1?(!(F&c)||F&g)&&(v[P]=HO(F,u)):E<=u&&(s.expiredLanes|=F),w&=~F}}function Ex(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function HC(){var s=Rg;return Rg<<=1,!(Rg&4194240)&&(Rg=64),s}function z1(s){for(var u=[],c=0;31>c;c++)u.push(s);return u}function lp(s,u,c){s.pendingLanes|=u,u!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,u=31-Uo(u),s[u]=c}function WO(s,u){var c=s.pendingLanes&~u;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=u,s.mutableReadLanes&=u,s.entangledLanes&=u,u=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<c;){var v=31-Uo(c),w=1<<v;u[v]=0,g[v]=-1,s[v]=-1,c&=~w}}function Cw(s,u){var c=s.entangledLanes|=u;for(s=s.entanglements;c;){var g=31-Uo(c),v=1<<g;v&u|s[g]&u&&(s[g]|=u),c&=~v}}var je=0;function KC(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var WC,Tw,$C,JC,ZC,Ax=!1,zg=[],Xl=null,_l=null,Hl=null,Xc=new Map,_c=new Map,zl=[],$O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WP(s,u){switch(s){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":Xc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(u.pointerId)}}function xc(s,u,c,g,v,w){return s===null||s.nativeEvent!==w?(s={blockedOn:u,domEventName:c,eventSystemFlags:g,nativeEvent:w,targetContainers:[v]},u!==null&&(u=hp(u),u!==null&&Tw(u)),s):(s.eventSystemFlags|=g,u=s.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),s)}function JO(s,u,c,g,v){switch(u){case"focusin":return Xl=xc(Xl,s,u,c,g,v),!0;case"dragenter":return _l=xc(_l,s,u,c,g,v),!0;case"mouseover":return Hl=xc(Hl,s,u,c,g,v),!0;case"pointerover":var w=v.pointerId;return Xc.set(w,xc(Xc.get(w)||null,s,u,c,g,v)),!0;case"gotpointercapture":return w=v.pointerId,_c.set(w,xc(_c.get(w)||null,s,u,c,g,v)),!0}return!1}function QC(s){var u=_u(s.target);if(u!==null){var c=ih(u);if(c!==null){if(u=c.tag,u===13){if(u=VC(c),u!==null){s.blockedOn=u,ZC(s.priority,function(){$C(c)});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qg(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var c=Dx(s.domEventName,s.eventSystemFlags,u[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var g=new c.constructor(c.type,c);Lx=g,c.target.dispatchEvent(g),Lx=null}else return u=hp(c),u!==null&&Tw(u),s.blockedOn=c,!1;u.shift()}return!0}function $P(s,u,c){Qg(s)&&c.delete(u)}function ZO(){Ax=!1,Xl!==null&&Qg(Xl)&&(Xl=null),_l!==null&&Qg(_l)&&(_l=null),Hl!==null&&Qg(Hl)&&(Hl=null),Xc.forEach($P),_c.forEach($P)}function wc(s,u){s.blockedOn===u&&(s.blockedOn=null,Ax||(Ax=!0,Ur.unstable_scheduleCallback(Ur.unstable_NormalPriority,ZO)))}function Hc(s){function u(v){return wc(v,s)}if(0<zg.length){wc(zg[0],s);for(var c=1;c<zg.length;c++){var g=zg[c];g.blockedOn===s&&(g.blockedOn=null)}}for(Xl!==null&&wc(Xl,s),_l!==null&&wc(_l,s),Hl!==null&&wc(Hl,s),Xc.forEach(u),_c.forEach(u),c=0;c<zl.length;c++)g=zl[c],g.blockedOn===s&&(g.blockedOn=null);for(;0<zl.length&&(c=zl[0],c.blockedOn===null);)QC(c),c.blockedOn===null&&zl.shift()}var Ea=ul.ReactCurrentBatchConfig,py=!0;function QO(s,u,c,g){var v=je,w=Ea.transition;Ea.transition=null;try{je=1,Lw(s,u,c,g)}finally{je=v,Ea.transition=w}}function qO(s,u,c,g){var v=je,w=Ea.transition;Ea.transition=null;try{je=4,Lw(s,u,c,g)}finally{je=v,Ea.transition=w}}function Lw(s,u,c,g){if(py){var v=Dx(s,u,c,g);if(v===null)$1(s,u,g,dy,c),WP(s,g);else if(JO(v,s,u,c,g))g.stopPropagation();else if(WP(s,g),u&4&&-1<$O.indexOf(s)){for(;v!==null;){var w=hp(v);if(w!==null&&WC(w),w=Dx(s,u,c,g),w===null&&$1(s,u,g,dy,c),w===v)break;v=w}v!==null&&g.stopPropagation()}else $1(s,u,g,null,c)}}var dy=null;function Dx(s,u,c,g){if(dy=null,s=Pw(g),s=_u(s),s!==null)if(u=ih(s),u===null)s=null;else if(c=u.tag,c===13){if(s=VC(u),s!==null)return s;s=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null);return dy=s,null}function qC(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VO()){case Nw:return 1;case XC:return 4;case fy:case YO:return 16;case _C:return 536870912;default:return 16}default:return 16}}var Ul=null,jw=null,qg=null;function bC(){if(qg)return qg;var s,u=jw,c=u.length,g,v="value"in Ul?Ul.value:Ul.textContent,w=v.length;for(s=0;s<c&&u[s]===v[s];s++);var P=c-s;for(g=1;g<=P&&u[c-g]===v[w-g];g++);return qg=v.slice(s,1<g?1-g:void 0)}function bg(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Vg(){return!0}function JP(){return!1}function _r(s){function u(c,g,v,w,P){this._reactName=c,this._targetInst=v,this.type=g,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(c=s[F],this[F]=c?c(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Vg:JP,this.isPropagationStopped=JP,this}return hi(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Vg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Vg)},persist:function(){},isPersistent:Vg}),u}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ow=_r($a),up=hi({},$a,{view:0,detail:0}),bO=_r(up),V1,Y1,Mc,Vy=hi({},up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fw,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mc&&(Mc&&s.type==="mousemove"?(V1=s.screenX-Mc.screenX,Y1=s.screenY-Mc.screenY):Y1=V1=0,Mc=s),V1)},movementY:function(s){return"movementY"in s?s.movementY:Y1}}),ZP=_r(Vy),tF=hi({},Vy,{dataTransfer:0}),eF=_r(tF),iF=hi({},up,{relatedTarget:0}),U1=_r(iF),nF=hi({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),rF=_r(nF),oF=hi({},$a,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sF=_r(oF),lF=hi({},$a,{data:0}),QP=_r(lF),uF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fF(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=aF[s])?!!u[s]:!1}function Fw(){return fF}var cF=hi({},up,{key:function(s){if(s.key){var u=uF[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=bg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hF[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fw,charCode:function(s){return s.type==="keypress"?bg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?bg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pF=_r(cF),dF=hi({},Vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qP=_r(dF),gF=hi({},up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fw}),yF=_r(gF),mF=hi({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),vF=_r(mF),xF=hi({},Vy,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),wF=_r(xF),MF=[9,13,27,32],Ew=nl&&"CompositionEvent"in window,Ac=null;nl&&"documentMode"in document&&(Ac=document.documentMode);var SF=nl&&"TextEvent"in window&&!Ac,tT=nl&&(!Ew||Ac&&8<Ac&&11>=Ac),bP=String.fromCharCode(32),tN=!1;function eT(s,u){switch(s){case"keyup":return MF.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iT(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xa=!1;function kF(s,u){switch(s){case"compositionend":return iT(u);case"keypress":return u.which!==32?null:(tN=!0,bP);case"textInput":return s=u.data,s===bP&&tN?null:s;default:return null}}function PF(s,u){if(xa)return s==="compositionend"||!Ew&&eT(s,u)?(s=bC(),qg=jw=Ul=null,xa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return tT&&u.locale!=="ko"?null:u.data;default:return null}}var NF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eN(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!NF[s.type]:u==="textarea"}function nT(s,u,c,g){DC(g),u=gy(u,"onChange"),0<u.length&&(c=new Ow("onChange","change",null,c,g),s.push({event:c,listeners:u}))}var Dc=null,Kc=null;function CF(s){dT(s,0)}function Yy(s){var u=Sa(s);if(TC(u))return s}function TF(s,u){if(s==="change")return u}var rT=!1;if(nl){var G1;if(nl){var X1="oninput"in document;if(!X1){var iN=document.createElement("div");iN.setAttribute("oninput","return;"),X1=typeof iN.oninput=="function"}G1=X1}else G1=!1;rT=G1&&(!document.documentMode||9<document.documentMode)}function nN(){Dc&&(Dc.detachEvent("onpropertychange",oT),Kc=Dc=null)}function oT(s){if(s.propertyName==="value"&&Yy(Kc)){var u=[];nT(u,Kc,s,Pw(s)),zC(CF,u)}}function LF(s,u,c){s==="focusin"?(nN(),Dc=u,Kc=c,Dc.attachEvent("onpropertychange",oT)):s==="focusout"&&nN()}function jF(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yy(Kc)}function OF(s,u){if(s==="click")return Yy(u)}function FF(s,u){if(s==="input"||s==="change")return Yy(u)}function EF(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Xo=typeof Object.is=="function"?Object.is:EF;function Wc(s,u){if(Xo(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var c=Object.keys(s),g=Object.keys(u);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var v=c[g];if(!yx.call(u,v)||!Xo(s[v],u[v]))return!1}return!0}function rN(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function oN(s,u){var c=rN(s);s=0;for(var g;c;){if(c.nodeType===3){if(g=s+c.textContent.length,s<=u&&g>=u)return{node:c,offset:u-s};s=g}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=rN(c)}}function sT(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?sT(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function lT(){for(var s=window,u=uy();u instanceof s.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)s=u.contentWindow;else break;u=uy(s.document)}return u}function Aw(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}function AF(s){var u=lT(),c=s.focusedElem,g=s.selectionRange;if(u!==c&&c&&c.ownerDocument&&sT(c.ownerDocument.documentElement,c)){if(g!==null&&Aw(c)){if(u=g.start,s=g.end,s===void 0&&(s=u),"selectionStart"in c)c.selectionStart=u,c.selectionEnd=Math.min(s,c.value.length);else if(s=(u=c.ownerDocument||document)&&u.defaultView||window,s.getSelection){s=s.getSelection();var v=c.textContent.length,w=Math.min(g.start,v);g=g.end===void 0?w:Math.min(g.end,v),!s.extend&&w>g&&(v=g,g=w,w=v),v=oN(c,w);var P=oN(c,g);v&&P&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==P.node||s.focusOffset!==P.offset)&&(u=u.createRange(),u.setStart(v.node,v.offset),s.removeAllRanges(),w>g?(s.addRange(u),s.extend(P.node,P.offset)):(u.setEnd(P.node,P.offset),s.addRange(u)))}}for(u=[],s=c;s=s.parentNode;)s.nodeType===1&&u.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<u.length;c++)s=u[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var DF=nl&&"documentMode"in document&&11>=document.documentMode,wa=null,Ix=null,Ic=null,Rx=!1;function sN(s,u,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Rx||wa==null||wa!==uy(g)||(g=wa,"selectionStart"in g&&Aw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ic&&Wc(Ic,g)||(Ic=g,g=gy(Ix,"onSelect"),0<g.length&&(u=new Ow("onSelect","select",null,u,c),s.push({event:u,listeners:g}),u.target=wa)))}function Yg(s,u){var c={};return c[s.toLowerCase()]=u.toLowerCase(),c["Webkit"+s]="webkit"+u,c["Moz"+s]="moz"+u,c}var Ma={animationend:Yg("Animation","AnimationEnd"),animationiteration:Yg("Animation","AnimationIteration"),animationstart:Yg("Animation","AnimationStart"),transitionend:Yg("Transition","TransitionEnd")},_1={},uT={};nl&&(uT=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Uy(s){if(_1[s])return _1[s];if(!Ma[s])return s;var u=Ma[s],c;for(c in u)if(u.hasOwnProperty(c)&&c in uT)return _1[s]=u[c];return s}var hT=Uy("animationend"),aT=Uy("animationiteration"),fT=Uy("animationstart"),cT=Uy("transitionend"),pT=new Map,lN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iu(s,u){pT.set(s,u),eh(u,[s])}for(var H1=0;H1<lN.length;H1++){var K1=lN[H1],IF=K1.toLowerCase(),RF=K1[0].toUpperCase()+K1.slice(1);iu(IF,"on"+RF)}iu(hT,"onAnimationEnd");iu(aT,"onAnimationIteration");iu(fT,"onAnimationStart");iu("dblclick","onDoubleClick");iu("focusin","onFocus");iu("focusout","onBlur");iu(cT,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);eh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eh("onBeforeInput",["compositionend","keypress","textInput","paste"]);eh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function uN(s,u,c){var g=s.type||"unknown-event";s.currentTarget=c,IO(g,u,void 0,s),s.currentTarget=null}function dT(s,u){u=(u&4)!==0;for(var c=0;c<s.length;c++){var g=s[c],v=g.event;g=g.listeners;t:{var w=void 0;if(u)for(var P=g.length-1;0<=P;P--){var F=g[P],E=F.instance,R=F.currentTarget;if(F=F.listener,E!==w&&v.isPropagationStopped())break t;uN(v,F,R),w=E}else for(P=0;P<g.length;P++){if(F=g[P],E=F.instance,R=F.currentTarget,F=F.listener,E!==w&&v.isPropagationStopped())break t;uN(v,F,R),w=E}}}if(ay)throw s=Fx,ay=!1,Fx=null,s}function Xe(s,u){var c=u[Ux];c===void 0&&(c=u[Ux]=new Set);var g=s+"__bubble";c.has(g)||(gT(u,s,2,!1),c.add(g))}function W1(s,u,c){var g=0;u&&(g|=4),gT(c,s,g,u)}var Ug="_reactListening"+Math.random().toString(36).slice(2);function $c(s){if(!s[Ug]){s[Ug]=!0,SC.forEach(function(c){c!=="selectionchange"&&(BF.has(c)||W1(c,!1,s),W1(c,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[Ug]||(u[Ug]=!0,W1("selectionchange",!1,u))}}function gT(s,u,c,g){switch(qC(u)){case 1:var v=QO;break;case 4:v=qO;break;default:v=Lw}c=v.bind(null,u,c,s),v=void 0,!Ox||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),g?v!==void 0?s.addEventListener(u,c,{capture:!0,passive:v}):s.addEventListener(u,c,!0):v!==void 0?s.addEventListener(u,c,{passive:v}):s.addEventListener(u,c,!1)}function $1(s,u,c,g,v){var w=g;if(!(u&1)&&!(u&2)&&g!==null)t:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var F=g.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(P===4)for(P=g.return;P!==null;){var E=P.tag;if((E===3||E===4)&&(E=P.stateNode.containerInfo,E===v||E.nodeType===8&&E.parentNode===v))return;P=P.return}for(;F!==null;){if(P=_u(F),P===null)return;if(E=P.tag,E===5||E===6){g=w=P;continue t}F=F.parentNode}}g=g.return}zC(function(){var R=w,V=Pw(c),B=[];t:{var J=pT.get(s);if(J!==void 0){var st=Ow,ut=s;switch(s){case"keypress":if(bg(c)===0)break t;case"keydown":case"keyup":st=pF;break;case"focusin":ut="focus",st=U1;break;case"focusout":ut="blur",st=U1;break;case"beforeblur":case"afterblur":st=U1;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=ZP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=eF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=yF;break;case hT:case aT:case fT:st=rF;break;case cT:st=vF;break;case"scroll":st=bO;break;case"wheel":st=wF;break;case"copy":case"cut":case"paste":st=sF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=qP}var G=(u&4)!==0,Ot=!G&&s==="scroll",X=G?J!==null?J+"Capture":null:J;G=[];for(var U=R,W;U!==null;){W=U;var I=W.stateNode;if(W.tag===5&&I!==null&&(W=I,X!==null&&(I=Gc(U,X),I!=null&&G.push(Jc(U,I,W)))),Ot)break;U=U.return}0<G.length&&(J=new st(J,ut,null,c,V),B.push({event:J,listeners:G}))}}if(!(u&7)){t:{if(J=s==="mouseover"||s==="pointerover",st=s==="mouseout"||s==="pointerout",J&&c!==Lx&&(ut=c.relatedTarget||c.fromElement)&&(_u(ut)||ut[rl]))break t;if((st||J)&&(J=V.window===V?V:(J=V.ownerDocument)?J.defaultView||J.parentWindow:window,st?(ut=c.relatedTarget||c.toElement,st=R,ut=ut?_u(ut):null,ut!==null&&(Ot=ih(ut),ut!==Ot||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(st=null,ut=R),st!==ut)){if(G=ZP,I="onMouseLeave",X="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(G=qP,I="onPointerLeave",X="onPointerEnter",U="pointer"),Ot=st==null?J:Sa(st),W=ut==null?J:Sa(ut),J=new G(I,U+"leave",st,c,V),J.target=Ot,J.relatedTarget=W,I=null,_u(V)===R&&(G=new G(X,U+"enter",ut,c,V),G.target=W,G.relatedTarget=Ot,I=G),Ot=I,st&&ut)e:{for(G=st,X=ut,U=0,W=G;W;W=ya(W))U++;for(W=0,I=X;I;I=ya(I))W++;for(;0<U-W;)G=ya(G),U--;for(;0<W-U;)X=ya(X),W--;for(;U--;){if(G===X||X!==null&&G===X.alternate)break e;G=ya(G),X=ya(X)}G=null}else G=null;st!==null&&hN(B,J,st,G,!1),ut!==null&&Ot!==null&&hN(B,Ot,ut,G,!0)}}t:{if(J=R?Sa(R):window,st=J.nodeName&&J.nodeName.toLowerCase(),st==="select"||st==="input"&&J.type==="file")var nt=TF;else if(eN(J))if(rT)nt=FF;else{nt=jF;var at=LF}else(st=J.nodeName)&&st.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(nt=OF);if(nt&&(nt=nt(s,R))){nT(B,nt,c,V);break t}at&&at(s,J,R),s==="focusout"&&(at=J._wrapperState)&&at.controlled&&J.type==="number"&&kx(J,"number",J.value)}switch(at=R?Sa(R):window,s){case"focusin":(eN(at)||at.contentEditable==="true")&&(wa=at,Ix=R,Ic=null);break;case"focusout":Ic=Ix=wa=null;break;case"mousedown":Rx=!0;break;case"contextmenu":case"mouseup":case"dragend":Rx=!1,sN(B,c,V);break;case"selectionchange":if(DF)break;case"keydown":case"keyup":sN(B,c,V)}var kt;if(Ew)t:{switch(s){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else xa?eT(s,c)&&(yt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(yt="onCompositionStart");yt&&(tT&&c.locale!=="ko"&&(xa||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&xa&&(kt=bC()):(Ul=V,jw="value"in Ul?Ul.value:Ul.textContent,xa=!0)),at=gy(R,yt),0<at.length&&(yt=new QP(yt,s,null,c,V),B.push({event:yt,listeners:at}),kt?yt.data=kt:(kt=iT(c),kt!==null&&(yt.data=kt)))),(kt=SF?kF(s,c):PF(s,c))&&(R=gy(R,"onBeforeInput"),0<R.length&&(V=new QP("onBeforeInput","beforeinput",null,c,V),B.push({event:V,listeners:R}),V.data=kt))}dT(B,u)})}function Jc(s,u,c){return{instance:s,listener:u,currentTarget:c}}function gy(s,u){for(var c=u+"Capture",g=[];s!==null;){var v=s,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=Gc(s,c),w!=null&&g.unshift(Jc(s,w,v)),w=Gc(s,u),w!=null&&g.push(Jc(s,w,v))),s=s.return}return g}function ya(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hN(s,u,c,g,v){for(var w=u._reactName,P=[];c!==null&&c!==g;){var F=c,E=F.alternate,R=F.stateNode;if(E!==null&&E===g)break;F.tag===5&&R!==null&&(F=R,v?(E=Gc(c,w),E!=null&&P.unshift(Jc(c,E,F))):v||(E=Gc(c,w),E!=null&&P.push(Jc(c,E,F)))),c=c.return}P.length!==0&&s.push({event:u,listeners:P})}var zF=/\r\n?/g,VF=/\u0000|\uFFFD/g;function aN(s){return(typeof s=="string"?s:""+s).replace(zF,`
`).replace(VF,"")}function Gg(s,u,c){if(u=aN(u),aN(s)!==u&&c)throw Error(xt(425))}function yy(){}var Bx=null,zx=null;function Vx(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Yx=typeof setTimeout=="function"?setTimeout:void 0,YF=typeof clearTimeout=="function"?clearTimeout:void 0,fN=typeof Promise=="function"?Promise:void 0,UF=typeof queueMicrotask=="function"?queueMicrotask:typeof fN<"u"?function(s){return fN.resolve(null).then(s).catch(GF)}:Yx;function GF(s){setTimeout(function(){throw s})}function J1(s,u){var c=u,g=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(g===0){s.removeChild(v),Hc(u);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=v}while(c);Hc(u)}function Kl(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return s}function cN(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(u===0)return s;u--}else c==="/$"&&u++}s=s.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),Ms="__reactFiber$"+Ja,Zc="__reactProps$"+Ja,rl="__reactContainer$"+Ja,Ux="__reactEvents$"+Ja,XF="__reactListeners$"+Ja,_F="__reactHandles$"+Ja;function _u(s){var u=s[Ms];if(u)return u;for(var c=s.parentNode;c;){if(u=c[rl]||c[Ms]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(s=cN(s);s!==null;){if(c=s[Ms])return c;s=cN(s)}return u}s=c,c=s.parentNode}return null}function hp(s){return s=s[Ms]||s[rl],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Sa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(xt(33))}function Gy(s){return s[Zc]||null}var Gx=[],ka=-1;function nu(s){return{current:s}}function _e(s){0>ka||(s.current=Gx[ka],Gx[ka]=null,ka--)}function Ue(s,u){ka++,Gx[ka]=s.current,s.current=u}var tu={},Gn=nu(tu),Pr=nu(!1),Ju=tu;function Va(s,u){var c=s.type.contextTypes;if(!c)return tu;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in c)v[w]=u[w];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=u,s.__reactInternalMemoizedMaskedChildContext=v),v}function Nr(s){return s=s.childContextTypes,s!=null}function my(){_e(Pr),_e(Gn)}function pN(s,u,c){if(Gn.current!==tu)throw Error(xt(168));Ue(Gn,u),Ue(Pr,c)}function yT(s,u,c){var g=s.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var v in g)if(!(v in u))throw Error(xt(108,LO(s)||"Unknown",v));return hi({},c,g)}function vy(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||tu,Ju=Gn.current,Ue(Gn,s),Ue(Pr,Pr.current),!0}function dN(s,u,c){var g=s.stateNode;if(!g)throw Error(xt(169));c?(s=yT(s,u,Ju),g.__reactInternalMemoizedMergedChildContext=s,_e(Pr),_e(Gn),Ue(Gn,s)):_e(Pr),Ue(Pr,c)}var bs=null,Xy=!1,Z1=!1;function mT(s){bs===null?bs=[s]:bs.push(s)}function HF(s){Xy=!0,mT(s)}function ru(){if(!Z1&&bs!==null){Z1=!0;var s=0,u=je;try{var c=bs;for(je=1;s<c.length;s++){var g=c[s];do g=g(!0);while(g!==null)}bs=null,Xy=!1}catch(v){throw bs!==null&&(bs=bs.slice(s+1)),GC(Nw,ru),v}finally{je=u,Z1=!1}}return null}var Pa=[],Na=0,xy=null,wy=0,ao=[],fo=0,Zu=null,tl=1,el="";function Uu(s,u){Pa[Na++]=wy,Pa[Na++]=xy,xy=s,wy=u}function vT(s,u,c){ao[fo++]=tl,ao[fo++]=el,ao[fo++]=Zu,Zu=s;var g=tl;s=el;var v=32-Uo(g)-1;g&=~(1<<v),c+=1;var w=32-Uo(u)+v;if(30<w){var P=v-v%5;w=(g&(1<<P)-1).toString(32),g>>=P,v-=P,tl=1<<32-Uo(u)+v|c<<v|g,el=w+s}else tl=1<<w|c<<v|g,el=s}function Dw(s){s.return!==null&&(Uu(s,1),vT(s,1,0))}function Iw(s){for(;s===xy;)xy=Pa[--Na],Pa[Na]=null,wy=Pa[--Na],Pa[Na]=null;for(;s===Zu;)Zu=ao[--fo],ao[fo]=null,el=ao[--fo],ao[fo]=null,tl=ao[--fo],ao[fo]=null}var Yr=null,Vr=null,be=!1,Vo=null;function xT(s,u){var c=co(5,null,null,0);c.elementType="DELETED",c.stateNode=u,c.return=s,u=s.deletions,u===null?(s.deletions=[c],s.flags|=16):u.push(c)}function gN(s,u){switch(s.tag){case 5:var c=s.type;return u=u.nodeType!==1||c.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(s.stateNode=u,Yr=s,Vr=Kl(u.firstChild),!0):!1;case 6:return u=s.pendingProps===""||u.nodeType!==3?null:u,u!==null?(s.stateNode=u,Yr=s,Vr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(c=Zu!==null?{id:tl,overflow:el}:null,s.memoizedState={dehydrated:u,treeContext:c,retryLane:1073741824},c=co(18,null,null,0),c.stateNode=u,c.return=s,s.child=c,Yr=s,Vr=null,!0):!1;default:return!1}}function Xx(s){return(s.mode&1)!==0&&(s.flags&128)===0}function _x(s){if(be){var u=Vr;if(u){var c=u;if(!gN(s,u)){if(Xx(s))throw Error(xt(418));u=Kl(c.nextSibling);var g=Yr;u&&gN(s,u)?xT(g,c):(s.flags=s.flags&-4097|2,be=!1,Yr=s)}}else{if(Xx(s))throw Error(xt(418));s.flags=s.flags&-4097|2,be=!1,Yr=s}}}function yN(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Yr=s}function Xg(s){if(s!==Yr)return!1;if(!be)return yN(s),be=!0,!1;var u;if((u=s.tag!==3)&&!(u=s.tag!==5)&&(u=s.type,u=u!=="head"&&u!=="body"&&!Vx(s.type,s.memoizedProps)),u&&(u=Vr)){if(Xx(s))throw wT(),Error(xt(418));for(;u;)xT(s,u),u=Kl(u.nextSibling)}if(yN(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(xt(317));t:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(u===0){Vr=Kl(s.nextSibling);break t}u--}else c!=="$"&&c!=="$!"&&c!=="$?"||u++}s=s.nextSibling}Vr=null}}else Vr=Yr?Kl(s.stateNode.nextSibling):null;return!0}function wT(){for(var s=Vr;s;)s=Kl(s.nextSibling)}function Ya(){Vr=Yr=null,be=!1}function Rw(s){Vo===null?Vo=[s]:Vo.push(s)}var KF=ul.ReactCurrentBatchConfig;function Bo(s,u){if(s&&s.defaultProps){u=hi({},u),s=s.defaultProps;for(var c in s)u[c]===void 0&&(u[c]=s[c]);return u}return u}var My=nu(null),Sy=null,Ca=null,Bw=null;function zw(){Bw=Ca=Sy=null}function Vw(s){var u=My.current;_e(My),s._currentValue=u}function Hx(s,u,c){for(;s!==null;){var g=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),s===c)break;s=s.return}}function Aa(s,u){Sy=s,Bw=Ca=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&u&&(kr=!0),s.firstContext=null)}function go(s){var u=s._currentValue;if(Bw!==s)if(s={context:s,memoizedValue:u,next:null},Ca===null){if(Sy===null)throw Error(xt(308));Ca=s,Sy.dependencies={lanes:0,firstContext:s}}else Ca=Ca.next=s;return u}var Hu=null;function Yw(s){Hu===null?Hu=[s]:Hu.push(s)}function MT(s,u,c,g){var v=u.interleaved;return v===null?(c.next=c,Yw(u)):(c.next=v.next,v.next=c),u.interleaved=c,ol(s,g)}function ol(s,u){s.lanes|=u;var c=s.alternate;for(c!==null&&(c.lanes|=u),c=s,s=s.return;s!==null;)s.childLanes|=u,c=s.alternate,c!==null&&(c.childLanes|=u),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Bl=!1;function Uw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ST(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function il(s,u){return{eventTime:s,lane:u,tag:0,payload:null,callback:null,next:null}}function Wl(s,u,c){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,xe&2){var v=g.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),g.pending=u,ol(s,c)}return v=g.interleaved,v===null?(u.next=u,Yw(g)):(u.next=v.next,v.next=u),g.interleaved=u,ol(s,c)}function ty(s,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194240)!==0)){var g=u.lanes;g&=s.pendingLanes,c|=g,u.lanes=c,Cw(s,c)}}function mN(s,u){var c=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var P={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?v=w=P:w=w.next=P,c=c.next}while(c!==null);w===null?v=w=u:w=w.next=u}else v=w=u;c={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:g.shared,effects:g.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=u}function ky(s,u,c,g){var v=s.updateQueue;Bl=!1;var w=v.firstBaseUpdate,P=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var E=F,R=E.next;E.next=null,P===null?w=R:P.next=R,P=E;var V=s.alternate;V!==null&&(V=V.updateQueue,F=V.lastBaseUpdate,F!==P&&(F===null?V.firstBaseUpdate=R:F.next=R,V.lastBaseUpdate=E))}if(w!==null){var B=v.baseState;P=0,V=R=E=null,F=w;do{var J=F.lane,st=F.eventTime;if((g&J)===J){V!==null&&(V=V.next={eventTime:st,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});t:{var ut=s,G=F;switch(J=u,st=c,G.tag){case 1:if(ut=G.payload,typeof ut=="function"){B=ut.call(st,B,J);break t}B=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=G.payload,J=typeof ut=="function"?ut.call(st,B,J):ut,J==null)break t;B=hi({},B,J);break t;case 2:Bl=!0}}F.callback!==null&&F.lane!==0&&(s.flags|=64,J=v.effects,J===null?v.effects=[F]:J.push(F))}else st={eventTime:st,lane:J,tag:F.tag,payload:F.payload,callback:F.callback,next:null},V===null?(R=V=st,E=B):V=V.next=st,P|=J;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;J=F,F=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(1);if(V===null&&(E=B),v.baseState=E,v.firstBaseUpdate=R,v.lastBaseUpdate=V,u=v.shared.interleaved,u!==null){v=u;do P|=v.lane,v=v.next;while(v!==u)}else w===null&&(v.shared.lanes=0);qu|=P,s.lanes=P,s.memoizedState=B}}function vN(s,u,c){if(s=u.effects,u.effects=null,s!==null)for(u=0;u<s.length;u++){var g=s[u],v=g.callback;if(v!==null){if(g.callback=null,g=c,typeof v!="function")throw Error(xt(191,v));v.call(g)}}}var kT=new MC.Component().refs;function Kx(s,u,c,g){u=s.memoizedState,c=c(g,u),c=c==null?u:hi({},u,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var _y={isMounted:function(s){return(s=s._reactInternals)?ih(s)===s:!1},enqueueSetState:function(s,u,c){s=s._reactInternals;var g=rr(),v=Jl(s),w=il(g,v);w.payload=u,c!=null&&(w.callback=c),u=Wl(s,w,v),u!==null&&(Go(u,s,v,g),ty(u,s,v))},enqueueReplaceState:function(s,u,c){s=s._reactInternals;var g=rr(),v=Jl(s),w=il(g,v);w.tag=1,w.payload=u,c!=null&&(w.callback=c),u=Wl(s,w,v),u!==null&&(Go(u,s,v,g),ty(u,s,v))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var c=rr(),g=Jl(s),v=il(c,g);v.tag=2,u!=null&&(v.callback=u),u=Wl(s,v,g),u!==null&&(Go(u,s,g,c),ty(u,s,g))}};function xN(s,u,c,g,v,w,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,w,P):u.prototype&&u.prototype.isPureReactComponent?!Wc(c,g)||!Wc(v,w):!0}function PT(s,u,c){var g=!1,v=tu,w=u.contextType;return typeof w=="object"&&w!==null?w=go(w):(v=Nr(u)?Ju:Gn.current,g=u.contextTypes,w=(g=g!=null)?Va(s,v):tu),u=new u(c,w),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=_y,s.stateNode=u,u._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=w),u}function wN(s,u,c,g){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,g),u.state!==s&&_y.enqueueReplaceState(u,u.state,null)}function Wx(s,u,c,g){var v=s.stateNode;v.props=c,v.state=s.memoizedState,v.refs=kT,Uw(s);var w=u.contextType;typeof w=="object"&&w!==null?v.context=go(w):(w=Nr(u)?Ju:Gn.current,v.context=Va(s,w)),v.state=s.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Kx(s,u,w,c),v.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(u=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),u!==v.state&&_y.enqueueReplaceState(v,v.state,null),ky(s,c,v,g),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function Sc(s,u,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(xt(309));var g=c.stateNode}if(!g)throw Error(xt(147,s));var v=g,w=""+s;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===w?u.ref:(u=function(P){var F=v.refs;F===kT&&(F=v.refs={}),P===null?delete F[w]:F[w]=P},u._stringRef=w,u)}if(typeof s!="string")throw Error(xt(284));if(!c._owner)throw Error(xt(290,s))}return s}function _g(s,u){throw s=Object.prototype.toString.call(u),Error(xt(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s))}function MN(s){var u=s._init;return u(s._payload)}function NT(s){function u(X,U){if(s){var W=X.deletions;W===null?(X.deletions=[U],X.flags|=16):W.push(U)}}function c(X,U){if(!s)return null;for(;U!==null;)u(X,U),U=U.sibling;return null}function g(X,U){for(X=new Map;U!==null;)U.key!==null?X.set(U.key,U):X.set(U.index,U),U=U.sibling;return X}function v(X,U){return X=Zl(X,U),X.index=0,X.sibling=null,X}function w(X,U,W){return X.index=W,s?(W=X.alternate,W!==null?(W=W.index,W<U?(X.flags|=2,U):W):(X.flags|=2,U)):(X.flags|=1048576,U)}function P(X){return s&&X.alternate===null&&(X.flags|=2),X}function F(X,U,W,I){return U===null||U.tag!==6?(U=nx(W,X.mode,I),U.return=X,U):(U=v(U,W),U.return=X,U)}function E(X,U,W,I){var nt=W.type;return nt===va?V(X,U,W.props.children,I,W.key):U!==null&&(U.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===Rl&&MN(nt)===U.type)?(I=v(U,W.props),I.ref=Sc(X,U,W),I.return=X,I):(I=sy(W.type,W.key,W.props,null,X.mode,I),I.ref=Sc(X,U,W),I.return=X,I)}function R(X,U,W,I){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=rx(W,X.mode,I),U.return=X,U):(U=v(U,W.children||[]),U.return=X,U)}function V(X,U,W,I,nt){return U===null||U.tag!==7?(U=$u(W,X.mode,I,nt),U.return=X,U):(U=v(U,W),U.return=X,U)}function B(X,U,W){if(typeof U=="string"&&U!==""||typeof U=="number")return U=nx(""+U,X.mode,W),U.return=X,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ag:return W=sy(U.type,U.key,U.props,null,X.mode,W),W.ref=Sc(X,null,U),W.return=X,W;case ma:return U=rx(U,X.mode,W),U.return=X,U;case Rl:var I=U._init;return B(X,I(U._payload),W)}if(Tc(U)||mc(U))return U=$u(U,X.mode,W,null),U.return=X,U;_g(X,U)}return null}function J(X,U,W,I){var nt=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return nt!==null?null:F(X,U,""+W,I);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Ag:return W.key===nt?E(X,U,W,I):null;case ma:return W.key===nt?R(X,U,W,I):null;case Rl:return nt=W._init,J(X,U,nt(W._payload),I)}if(Tc(W)||mc(W))return nt!==null?null:V(X,U,W,I,null);_g(X,W)}return null}function st(X,U,W,I,nt){if(typeof I=="string"&&I!==""||typeof I=="number")return X=X.get(W)||null,F(U,X,""+I,nt);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ag:return X=X.get(I.key===null?W:I.key)||null,E(U,X,I,nt);case ma:return X=X.get(I.key===null?W:I.key)||null,R(U,X,I,nt);case Rl:var at=I._init;return st(X,U,W,at(I._payload),nt)}if(Tc(I)||mc(I))return X=X.get(W)||null,V(U,X,I,nt,null);_g(U,I)}return null}function ut(X,U,W,I){for(var nt=null,at=null,kt=U,yt=U=0,Bt=null;kt!==null&&yt<W.length;yt++){kt.index>yt?(Bt=kt,kt=null):Bt=kt.sibling;var Gt=J(X,kt,W[yt],I);if(Gt===null){kt===null&&(kt=Bt);break}s&&kt&&Gt.alternate===null&&u(X,kt),U=w(Gt,U,yt),at===null?nt=Gt:at.sibling=Gt,at=Gt,kt=Bt}if(yt===W.length)return c(X,kt),be&&Uu(X,yt),nt;if(kt===null){for(;yt<W.length;yt++)kt=B(X,W[yt],I),kt!==null&&(U=w(kt,U,yt),at===null?nt=kt:at.sibling=kt,at=kt);return be&&Uu(X,yt),nt}for(kt=g(X,kt);yt<W.length;yt++)Bt=st(kt,X,yt,W[yt],I),Bt!==null&&(s&&Bt.alternate!==null&&kt.delete(Bt.key===null?yt:Bt.key),U=w(Bt,U,yt),at===null?nt=Bt:at.sibling=Bt,at=Bt);return s&&kt.forEach(function(He){return u(X,He)}),be&&Uu(X,yt),nt}function G(X,U,W,I){var nt=mc(W);if(typeof nt!="function")throw Error(xt(150));if(W=nt.call(W),W==null)throw Error(xt(151));for(var at=nt=null,kt=U,yt=U=0,Bt=null,Gt=W.next();kt!==null&&!Gt.done;yt++,Gt=W.next()){kt.index>yt?(Bt=kt,kt=null):Bt=kt.sibling;var He=J(X,kt,Gt.value,I);if(He===null){kt===null&&(kt=Bt);break}s&&kt&&He.alternate===null&&u(X,kt),U=w(He,U,yt),at===null?nt=He:at.sibling=He,at=He,kt=Bt}if(Gt.done)return c(X,kt),be&&Uu(X,yt),nt;if(kt===null){for(;!Gt.done;yt++,Gt=W.next())Gt=B(X,Gt.value,I),Gt!==null&&(U=w(Gt,U,yt),at===null?nt=Gt:at.sibling=Gt,at=Gt);return be&&Uu(X,yt),nt}for(kt=g(X,kt);!Gt.done;yt++,Gt=W.next())Gt=st(kt,X,yt,Gt.value,I),Gt!==null&&(s&&Gt.alternate!==null&&kt.delete(Gt.key===null?yt:Gt.key),U=w(Gt,U,yt),at===null?nt=Gt:at.sibling=Gt,at=Gt);return s&&kt.forEach(function(Tr){return u(X,Tr)}),be&&Uu(X,yt),nt}function Ot(X,U,W,I){if(typeof W=="object"&&W!==null&&W.type===va&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Ag:t:{for(var nt=W.key,at=U;at!==null;){if(at.key===nt){if(nt=W.type,nt===va){if(at.tag===7){c(X,at.sibling),U=v(at,W.props.children),U.return=X,X=U;break t}}else if(at.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===Rl&&MN(nt)===at.type){c(X,at.sibling),U=v(at,W.props),U.ref=Sc(X,at,W),U.return=X,X=U;break t}c(X,at);break}else u(X,at);at=at.sibling}W.type===va?(U=$u(W.props.children,X.mode,I,W.key),U.return=X,X=U):(I=sy(W.type,W.key,W.props,null,X.mode,I),I.ref=Sc(X,U,W),I.return=X,X=I)}return P(X);case ma:t:{for(at=W.key;U!==null;){if(U.key===at)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){c(X,U.sibling),U=v(U,W.children||[]),U.return=X,X=U;break t}else{c(X,U);break}else u(X,U);U=U.sibling}U=rx(W,X.mode,I),U.return=X,X=U}return P(X);case Rl:return at=W._init,Ot(X,U,at(W._payload),I)}if(Tc(W))return ut(X,U,W,I);if(mc(W))return G(X,U,W,I);_g(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,U!==null&&U.tag===6?(c(X,U.sibling),U=v(U,W),U.return=X,X=U):(c(X,U),U=nx(W,X.mode,I),U.return=X,X=U),P(X)):c(X,U)}return Ot}var Ua=NT(!0),CT=NT(!1),ap={},ks=nu(ap),Qc=nu(ap),qc=nu(ap);function Ku(s){if(s===ap)throw Error(xt(174));return s}function Gw(s,u){switch(Ue(qc,u),Ue(Qc,s),Ue(ks,ap),s=u.nodeType,s){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Nx(null,"");break;default:s=s===8?u.parentNode:u,u=s.namespaceURI||null,s=s.tagName,u=Nx(u,s)}_e(ks),Ue(ks,u)}function Ga(){_e(ks),_e(Qc),_e(qc)}function TT(s){Ku(qc.current);var u=Ku(ks.current),c=Nx(u,s.type);u!==c&&(Ue(Qc,s),Ue(ks,c))}function Xw(s){Qc.current===s&&(_e(ks),_e(Qc))}var li=nu(0);function Py(s){for(var u=s;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Q1=[];function _w(){for(var s=0;s<Q1.length;s++)Q1[s]._workInProgressVersionPrimary=null;Q1.length=0}var ey=ul.ReactCurrentDispatcher,q1=ul.ReactCurrentBatchConfig,Qu=0,ui=null,bi=null,un=null,Ny=!1,Rc=!1,bc=0,WF=0;function zn(){throw Error(xt(321))}function Hw(s,u){if(u===null)return!1;for(var c=0;c<u.length&&c<s.length;c++)if(!Xo(s[c],u[c]))return!1;return!0}function Kw(s,u,c,g,v,w){if(Qu=w,ui=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ey.current=s===null||s.memoizedState===null?QF:qF,s=c(g,v),Rc){w=0;do{if(Rc=!1,bc=0,25<=w)throw Error(xt(301));w+=1,un=bi=null,u.updateQueue=null,ey.current=bF,s=c(g,v)}while(Rc)}if(ey.current=Cy,u=bi!==null&&bi.next!==null,Qu=0,un=bi=ui=null,Ny=!1,u)throw Error(xt(300));return s}function Ww(){var s=bc!==0;return bc=0,s}function ws(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?ui.memoizedState=un=s:un=un.next=s,un}function yo(){if(bi===null){var s=ui.alternate;s=s!==null?s.memoizedState:null}else s=bi.next;var u=un===null?ui.memoizedState:un.next;if(u!==null)un=u,bi=s;else{if(s===null)throw Error(xt(310));bi=s,s={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},un===null?ui.memoizedState=un=s:un=un.next=s}return un}function tp(s,u){return typeof u=="function"?u(s):u}function b1(s){var u=yo(),c=u.queue;if(c===null)throw Error(xt(311));c.lastRenderedReducer=s;var g=bi,v=g.baseQueue,w=c.pending;if(w!==null){if(v!==null){var P=v.next;v.next=w.next,w.next=P}g.baseQueue=v=w,c.pending=null}if(v!==null){w=v.next,g=g.baseState;var F=P=null,E=null,R=w;do{var V=R.lane;if((Qu&V)===V)E!==null&&(E=E.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),g=R.hasEagerState?R.eagerState:s(g,R.action);else{var B={lane:V,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};E===null?(F=E=B,P=g):E=E.next=B,ui.lanes|=V,qu|=V}R=R.next}while(R!==null&&R!==w);E===null?P=g:E.next=F,Xo(g,u.memoizedState)||(kr=!0),u.memoizedState=g,u.baseState=P,u.baseQueue=E,c.lastRenderedState=g}if(s=c.interleaved,s!==null){v=s;do w=v.lane,ui.lanes|=w,qu|=w,v=v.next;while(v!==s)}else v===null&&(c.lanes=0);return[u.memoizedState,c.dispatch]}function tx(s){var u=yo(),c=u.queue;if(c===null)throw Error(xt(311));c.lastRenderedReducer=s;var g=c.dispatch,v=c.pending,w=u.memoizedState;if(v!==null){c.pending=null;var P=v=v.next;do w=s(w,P.action),P=P.next;while(P!==v);Xo(w,u.memoizedState)||(kr=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),c.lastRenderedState=w}return[w,g]}function LT(){}function jT(s,u){var c=ui,g=yo(),v=u(),w=!Xo(g.memoizedState,v);if(w&&(g.memoizedState=v,kr=!0),g=g.queue,$w(ET.bind(null,c,g,s),[s]),g.getSnapshot!==u||w||un!==null&&un.memoizedState.tag&1){if(c.flags|=2048,ep(9,FT.bind(null,c,g,v,u),void 0,null),hn===null)throw Error(xt(349));Qu&30||OT(c,u,v)}return v}function OT(s,u,c){s.flags|=16384,s={getSnapshot:u,value:c},u=ui.updateQueue,u===null?(u={lastEffect:null,stores:null},ui.updateQueue=u,u.stores=[s]):(c=u.stores,c===null?u.stores=[s]:c.push(s))}function FT(s,u,c,g){u.value=c,u.getSnapshot=g,AT(u)&&DT(s)}function ET(s,u,c){return c(function(){AT(u)&&DT(s)})}function AT(s){var u=s.getSnapshot;s=s.value;try{var c=u();return!Xo(s,c)}catch{return!0}}function DT(s){var u=ol(s,1);u!==null&&Go(u,s,1,-1)}function SN(s){var u=ws();return typeof s=="function"&&(s=s()),u.memoizedState=u.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:s},u.queue=s,s=s.dispatch=ZF.bind(null,ui,s),[u.memoizedState,s]}function ep(s,u,c,g){return s={tag:s,create:u,destroy:c,deps:g,next:null},u=ui.updateQueue,u===null?(u={lastEffect:null,stores:null},ui.updateQueue=u,u.lastEffect=s.next=s):(c=u.lastEffect,c===null?u.lastEffect=s.next=s:(g=c.next,c.next=s,s.next=g,u.lastEffect=s)),s}function IT(){return yo().memoizedState}function iy(s,u,c,g){var v=ws();ui.flags|=s,v.memoizedState=ep(1|u,c,void 0,g===void 0?null:g)}function Hy(s,u,c,g){var v=yo();g=g===void 0?null:g;var w=void 0;if(bi!==null){var P=bi.memoizedState;if(w=P.destroy,g!==null&&Hw(g,P.deps)){v.memoizedState=ep(u,c,w,g);return}}ui.flags|=s,v.memoizedState=ep(1|u,c,w,g)}function kN(s,u){return iy(8390656,8,s,u)}function $w(s,u){return Hy(2048,8,s,u)}function RT(s,u){return Hy(4,2,s,u)}function BT(s,u){return Hy(4,4,s,u)}function zT(s,u){if(typeof u=="function")return s=s(),u(s),function(){u(null)};if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function VT(s,u,c){return c=c!=null?c.concat([s]):null,Hy(4,4,zT.bind(null,u,s),c)}function Jw(){}function YT(s,u){var c=yo();u=u===void 0?null:u;var g=c.memoizedState;return g!==null&&u!==null&&Hw(u,g[1])?g[0]:(c.memoizedState=[s,u],s)}function UT(s,u){var c=yo();u=u===void 0?null:u;var g=c.memoizedState;return g!==null&&u!==null&&Hw(u,g[1])?g[0]:(s=s(),c.memoizedState=[s,u],s)}function GT(s,u,c){return Qu&21?(Xo(c,u)||(c=HC(),ui.lanes|=c,qu|=c,s.baseState=!0),u):(s.baseState&&(s.baseState=!1,kr=!0),s.memoizedState=c)}function $F(s,u){var c=je;je=c!==0&&4>c?c:4,s(!0);var g=q1.transition;q1.transition={};try{s(!1),u()}finally{je=c,q1.transition=g}}function XT(){return yo().memoizedState}function JF(s,u,c){var g=Jl(s);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},_T(s))HT(u,c);else if(c=MT(s,u,c,g),c!==null){var v=rr();Go(c,s,g,v),KT(c,u,g)}}function ZF(s,u,c){var g=Jl(s),v={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(_T(s))HT(u,v);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var P=u.lastRenderedState,F=w(P,c);if(v.hasEagerState=!0,v.eagerState=F,Xo(F,P)){var E=u.interleaved;E===null?(v.next=v,Yw(u)):(v.next=E.next,E.next=v),u.interleaved=v;return}}catch{}finally{}c=MT(s,u,v,g),c!==null&&(v=rr(),Go(c,s,g,v),KT(c,u,g))}}function _T(s){var u=s.alternate;return s===ui||u!==null&&u===ui}function HT(s,u){Rc=Ny=!0;var c=s.pending;c===null?u.next=u:(u.next=c.next,c.next=u),s.pending=u}function KT(s,u,c){if(c&4194240){var g=u.lanes;g&=s.pendingLanes,c|=g,u.lanes=c,Cw(s,c)}}var Cy={readContext:go,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},QF={readContext:go,useCallback:function(s,u){return ws().memoizedState=[s,u===void 0?null:u],s},useContext:go,useEffect:kN,useImperativeHandle:function(s,u,c){return c=c!=null?c.concat([s]):null,iy(4194308,4,zT.bind(null,u,s),c)},useLayoutEffect:function(s,u){return iy(4194308,4,s,u)},useInsertionEffect:function(s,u){return iy(4,2,s,u)},useMemo:function(s,u){var c=ws();return u=u===void 0?null:u,s=s(),c.memoizedState=[s,u],s},useReducer:function(s,u,c){var g=ws();return u=c!==void 0?c(u):u,g.memoizedState=g.baseState=u,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},g.queue=s,s=s.dispatch=JF.bind(null,ui,s),[g.memoizedState,s]},useRef:function(s){var u=ws();return s={current:s},u.memoizedState=s},useState:SN,useDebugValue:Jw,useDeferredValue:function(s){return ws().memoizedState=s},useTransition:function(){var s=SN(!1),u=s[0];return s=$F.bind(null,s[1]),ws().memoizedState=s,[u,s]},useMutableSource:function(){},useSyncExternalStore:function(s,u,c){var g=ui,v=ws();if(be){if(c===void 0)throw Error(xt(407));c=c()}else{if(c=u(),hn===null)throw Error(xt(349));Qu&30||OT(g,u,c)}v.memoizedState=c;var w={value:c,getSnapshot:u};return v.queue=w,kN(ET.bind(null,g,w,s),[s]),g.flags|=2048,ep(9,FT.bind(null,g,w,c,u),void 0,null),c},useId:function(){var s=ws(),u=hn.identifierPrefix;if(be){var c=el,g=tl;c=(g&~(1<<32-Uo(g)-1)).toString(32)+c,u=":"+u+"R"+c,c=bc++,0<c&&(u+="H"+c.toString(32)),u+=":"}else c=WF++,u=":"+u+"r"+c.toString(32)+":";return s.memoizedState=u},unstable_isNewReconciler:!1},qF={readContext:go,useCallback:YT,useContext:go,useEffect:$w,useImperativeHandle:VT,useInsertionEffect:RT,useLayoutEffect:BT,useMemo:UT,useReducer:b1,useRef:IT,useState:function(){return b1(tp)},useDebugValue:Jw,useDeferredValue:function(s){var u=yo();return GT(u,bi.memoizedState,s)},useTransition:function(){var s=b1(tp)[0],u=yo().memoizedState;return[s,u]},useMutableSource:LT,useSyncExternalStore:jT,useId:XT,unstable_isNewReconciler:!1},bF={readContext:go,useCallback:YT,useContext:go,useEffect:$w,useImperativeHandle:VT,useInsertionEffect:RT,useLayoutEffect:BT,useMemo:UT,useReducer:tx,useRef:IT,useState:function(){return tx(tp)},useDebugValue:Jw,useDeferredValue:function(s){var u=yo();return bi===null?u.memoizedState=s:GT(u,bi.memoizedState,s)},useTransition:function(){var s=tx(tp)[0],u=yo().memoizedState;return[s,u]},useMutableSource:LT,useSyncExternalStore:jT,useId:XT,unstable_isNewReconciler:!1};function Xa(s,u){try{var c="",g=u;do c+=TO(g),g=g.return;while(g);var v=c}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:u,stack:v,digest:null}}function ex(s,u,c){return{value:s,source:null,stack:c??null,digest:u??null}}function $x(s,u){try{console.error(u.value)}catch(c){setTimeout(function(){throw c})}}var tE=typeof WeakMap=="function"?WeakMap:Map;function WT(s,u,c){c=il(-1,c),c.tag=3,c.payload={element:null};var g=u.value;return c.callback=function(){Ly||(Ly=!0,rw=g),$x(s,u)},c}function $T(s,u,c){c=il(-1,c),c.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;c.payload=function(){return g(v)},c.callback=function(){$x(s,u)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){$x(s,u),typeof g!="function"&&($l===null?$l=new Set([this]):$l.add(this));var P=u.stack;this.componentDidCatch(u.value,{componentStack:P!==null?P:""})}),c}function PN(s,u,c){var g=s.pingCache;if(g===null){g=s.pingCache=new tE;var v=new Set;g.set(u,v)}else v=g.get(u),v===void 0&&(v=new Set,g.set(u,v));v.has(c)||(v.add(c),s=dE.bind(null,s,u,c),u.then(s,s))}function NN(s){do{var u;if((u=s.tag===13)&&(u=s.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return s;s=s.return}while(s!==null);return null}function CN(s,u,c,g,v){return s.mode&1?(s.flags|=65536,s.lanes=v,s):(s===u?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(u=il(-1,1),u.tag=2,Wl(c,u,1))),c.lanes|=1),s)}var eE=ul.ReactCurrentOwner,kr=!1;function nr(s,u,c,g){u.child=s===null?CT(u,null,c,g):Ua(u,s.child,c,g)}function TN(s,u,c,g,v){c=c.render;var w=u.ref;return Aa(u,v),g=Kw(s,u,c,g,w,v),c=Ww(),s!==null&&!kr?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~v,sl(s,u,v)):(be&&c&&Dw(u),u.flags|=1,nr(s,u,g,v),u.child)}function LN(s,u,c,g,v){if(s===null){var w=c.type;return typeof w=="function"&&!nM(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(u.tag=15,u.type=w,JT(s,u,w,g,v)):(s=sy(c.type,null,g,u,u.mode,v),s.ref=u.ref,s.return=u,u.child=s)}if(w=s.child,!(s.lanes&v)){var P=w.memoizedProps;if(c=c.compare,c=c!==null?c:Wc,c(P,g)&&s.ref===u.ref)return sl(s,u,v)}return u.flags|=1,s=Zl(w,g),s.ref=u.ref,s.return=u,u.child=s}function JT(s,u,c,g,v){if(s!==null){var w=s.memoizedProps;if(Wc(w,g)&&s.ref===u.ref)if(kr=!1,u.pendingProps=g=w,(s.lanes&v)!==0)s.flags&131072&&(kr=!0);else return u.lanes=s.lanes,sl(s,u,v)}return Jx(s,u,c,g,v)}function ZT(s,u,c){var g=u.pendingProps,v=g.children,w=s!==null?s.memoizedState:null;if(g.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(La,zr),zr|=c;else{if(!(c&1073741824))return s=w!==null?w.baseLanes|c:c,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:s,cachePool:null,transitions:null},u.updateQueue=null,Ue(La,zr),zr|=s,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=w!==null?w.baseLanes:c,Ue(La,zr),zr|=g}else w!==null?(g=w.baseLanes|c,u.memoizedState=null):g=c,Ue(La,zr),zr|=g;return nr(s,u,v,c),u.child}function QT(s,u){var c=u.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(u.flags|=512,u.flags|=2097152)}function Jx(s,u,c,g,v){var w=Nr(c)?Ju:Gn.current;return w=Va(u,w),Aa(u,v),c=Kw(s,u,c,g,w,v),g=Ww(),s!==null&&!kr?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~v,sl(s,u,v)):(be&&g&&Dw(u),u.flags|=1,nr(s,u,c,v),u.child)}function jN(s,u,c,g,v){if(Nr(c)){var w=!0;vy(u)}else w=!1;if(Aa(u,v),u.stateNode===null)ny(s,u),PT(u,c,g),Wx(u,c,g,v),g=!0;else if(s===null){var P=u.stateNode,F=u.memoizedProps;P.props=F;var E=P.context,R=c.contextType;typeof R=="object"&&R!==null?R=go(R):(R=Nr(c)?Ju:Gn.current,R=Va(u,R));var V=c.getDerivedStateFromProps,B=typeof V=="function"||typeof P.getSnapshotBeforeUpdate=="function";B||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==g||E!==R)&&wN(u,P,g,R),Bl=!1;var J=u.memoizedState;P.state=J,ky(u,g,P,v),E=u.memoizedState,F!==g||J!==E||Pr.current||Bl?(typeof V=="function"&&(Kx(u,c,V,g),E=u.memoizedState),(F=Bl||xN(u,c,F,g,J,E,R))?(B||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(u.flags|=4194308)):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=E),P.props=g,P.state=E,P.context=R,g=F):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{P=u.stateNode,ST(s,u),F=u.memoizedProps,R=u.type===u.elementType?F:Bo(u.type,F),P.props=R,B=u.pendingProps,J=P.context,E=c.contextType,typeof E=="object"&&E!==null?E=go(E):(E=Nr(c)?Ju:Gn.current,E=Va(u,E));var st=c.getDerivedStateFromProps;(V=typeof st=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==B||J!==E)&&wN(u,P,g,E),Bl=!1,J=u.memoizedState,P.state=J,ky(u,g,P,v);var ut=u.memoizedState;F!==B||J!==ut||Pr.current||Bl?(typeof st=="function"&&(Kx(u,c,st,g),ut=u.memoizedState),(R=Bl||xN(u,c,R,g,J,ut,E)||!1)?(V||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,ut,E),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,ut,E)),typeof P.componentDidUpdate=="function"&&(u.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof P.componentDidUpdate!="function"||F===s.memoizedProps&&J===s.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&J===s.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=ut),P.props=g,P.state=ut,P.context=E,g=R):(typeof P.componentDidUpdate!="function"||F===s.memoizedProps&&J===s.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&J===s.memoizedState||(u.flags|=1024),g=!1)}return Zx(s,u,c,g,w,v)}function Zx(s,u,c,g,v,w){QT(s,u);var P=(u.flags&128)!==0;if(!g&&!P)return v&&dN(u,c,!1),sl(s,u,w);g=u.stateNode,eE.current=u;var F=P&&typeof c.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,s!==null&&P?(u.child=Ua(u,s.child,null,w),u.child=Ua(u,null,F,w)):nr(s,u,F,w),u.memoizedState=g.state,v&&dN(u,c,!0),u.child}function qT(s){var u=s.stateNode;u.pendingContext?pN(s,u.pendingContext,u.pendingContext!==u.context):u.context&&pN(s,u.context,!1),Gw(s,u.containerInfo)}function ON(s,u,c,g,v){return Ya(),Rw(v),u.flags|=256,nr(s,u,c,g),u.child}var Qx={dehydrated:null,treeContext:null,retryLane:0};function qx(s){return{baseLanes:s,cachePool:null,transitions:null}}function bT(s,u,c){var g=u.pendingProps,v=li.current,w=!1,P=(u.flags&128)!==0,F;if((F=P)||(F=s!==null&&s.memoizedState===null?!1:(v&2)!==0),F?(w=!0,u.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),Ue(li,v&1),s===null)return _x(u),s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(u.mode&1?s.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(P=g.children,s=g.fallback,w?(g=u.mode,w=u.child,P={mode:"hidden",children:P},!(g&1)&&w!==null?(w.childLanes=0,w.pendingProps=P):w=$y(P,g,0,null),s=$u(s,g,c,null),w.return=u,s.return=u,w.sibling=s,u.child=w,u.child.memoizedState=qx(c),u.memoizedState=Qx,s):Zw(u,P));if(v=s.memoizedState,v!==null&&(F=v.dehydrated,F!==null))return iE(s,u,P,g,F,v,c);if(w){w=g.fallback,P=u.mode,v=s.child,F=v.sibling;var E={mode:"hidden",children:g.children};return!(P&1)&&u.child!==v?(g=u.child,g.childLanes=0,g.pendingProps=E,u.deletions=null):(g=Zl(v,E),g.subtreeFlags=v.subtreeFlags&14680064),F!==null?w=Zl(F,w):(w=$u(w,P,c,null),w.flags|=2),w.return=u,g.return=u,g.sibling=w,u.child=g,g=w,w=u.child,P=s.child.memoizedState,P=P===null?qx(c):{baseLanes:P.baseLanes|c,cachePool:null,transitions:P.transitions},w.memoizedState=P,w.childLanes=s.childLanes&~c,u.memoizedState=Qx,g}return w=s.child,s=w.sibling,g=Zl(w,{mode:"visible",children:g.children}),!(u.mode&1)&&(g.lanes=c),g.return=u,g.sibling=null,s!==null&&(c=u.deletions,c===null?(u.deletions=[s],u.flags|=16):c.push(s)),u.child=g,u.memoizedState=null,g}function Zw(s,u){return u=$y({mode:"visible",children:u},s.mode,0,null),u.return=s,s.child=u}function Hg(s,u,c,g){return g!==null&&Rw(g),Ua(u,s.child,null,c),s=Zw(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function iE(s,u,c,g,v,w,P){if(c)return u.flags&256?(u.flags&=-257,g=ex(Error(xt(422))),Hg(s,u,P,g)):u.memoizedState!==null?(u.child=s.child,u.flags|=128,null):(w=g.fallback,v=u.mode,g=$y({mode:"visible",children:g.children},v,0,null),w=$u(w,v,P,null),w.flags|=2,g.return=u,w.return=u,g.sibling=w,u.child=g,u.mode&1&&Ua(u,s.child,null,P),u.child.memoizedState=qx(P),u.memoizedState=Qx,w);if(!(u.mode&1))return Hg(s,u,P,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var F=g.dgst;return g=F,w=Error(xt(419)),g=ex(w,g,void 0),Hg(s,u,P,g)}if(F=(P&s.childLanes)!==0,kr||F){if(g=hn,g!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(g.suspendedLanes|P)?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,ol(s,v),Go(g,s,v,-1))}return iM(),g=ex(Error(xt(421))),Hg(s,u,P,g)}return v.data==="$?"?(u.flags|=128,u.child=s.child,u=gE.bind(null,s),v._reactRetry=u,null):(s=w.treeContext,Vr=Kl(v.nextSibling),Yr=u,be=!0,Vo=null,s!==null&&(ao[fo++]=tl,ao[fo++]=el,ao[fo++]=Zu,tl=s.id,el=s.overflow,Zu=u),u=Zw(u,g.children),u.flags|=4096,u)}function FN(s,u,c){s.lanes|=u;var g=s.alternate;g!==null&&(g.lanes|=u),Hx(s.return,u,c)}function ix(s,u,c,g,v){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:v}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=c,w.tailMode=v)}function tL(s,u,c){var g=u.pendingProps,v=g.revealOrder,w=g.tail;if(nr(s,u,g.children,c),g=li.current,g&2)g=g&1|2,u.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&FN(s,c,u);else if(s.tag===19)FN(s,c,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break t;for(;s.sibling===null;){if(s.return===null||s.return===u)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Ue(li,g),!(u.mode&1))u.memoizedState=null;else switch(v){case"forwards":for(c=u.child,v=null;c!==null;)s=c.alternate,s!==null&&Py(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=u.child,u.child=null):(v=c.sibling,c.sibling=null),ix(u,!1,v,c,w);break;case"backwards":for(c=null,v=u.child,u.child=null;v!==null;){if(s=v.alternate,s!==null&&Py(s)===null){u.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}ix(u,!0,c,null,w);break;case"together":ix(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ny(s,u){!(u.mode&1)&&s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2)}function sl(s,u,c){if(s!==null&&(u.dependencies=s.dependencies),qu|=u.lanes,!(c&u.childLanes))return null;if(s!==null&&u.child!==s.child)throw Error(xt(153));if(u.child!==null){for(s=u.child,c=Zl(s,s.pendingProps),u.child=c,c.return=u;s.sibling!==null;)s=s.sibling,c=c.sibling=Zl(s,s.pendingProps),c.return=u;c.sibling=null}return u.child}function nE(s,u,c){switch(u.tag){case 3:qT(u),Ya();break;case 5:TT(u);break;case 1:Nr(u.type)&&vy(u);break;case 4:Gw(u,u.stateNode.containerInfo);break;case 10:var g=u.type._context,v=u.memoizedProps.value;Ue(My,g._currentValue),g._currentValue=v;break;case 13:if(g=u.memoizedState,g!==null)return g.dehydrated!==null?(Ue(li,li.current&1),u.flags|=128,null):c&u.child.childLanes?bT(s,u,c):(Ue(li,li.current&1),s=sl(s,u,c),s!==null?s.sibling:null);Ue(li,li.current&1);break;case 19:if(g=(c&u.childLanes)!==0,s.flags&128){if(g)return tL(s,u,c);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ue(li,li.current),g)break;return null;case 22:case 23:return u.lanes=0,ZT(s,u,c)}return sl(s,u,c)}var eL,bx,iL,nL;eL=function(s,u){for(var c=u.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};bx=function(){};iL=function(s,u,c,g){var v=s.memoizedProps;if(v!==g){s=u.stateNode,Ku(ks.current);var w=null;switch(c){case"input":v=Mx(s,v),g=Mx(s,g),w=[];break;case"select":v=hi({},v,{value:void 0}),g=hi({},g,{value:void 0}),w=[];break;case"textarea":v=Px(s,v),g=Px(s,g),w=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=yy)}Cx(c,g);var P;c=null;for(R in v)if(!g.hasOwnProperty(R)&&v.hasOwnProperty(R)&&v[R]!=null)if(R==="style"){var F=v[R];for(P in F)F.hasOwnProperty(P)&&(c||(c={}),c[P]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(Yc.hasOwnProperty(R)?w||(w=[]):(w=w||[]).push(R,null));for(R in g){var E=g[R];if(F=v!=null?v[R]:void 0,g.hasOwnProperty(R)&&E!==F&&(E!=null||F!=null))if(R==="style")if(F){for(P in F)!F.hasOwnProperty(P)||E&&E.hasOwnProperty(P)||(c||(c={}),c[P]="");for(P in E)E.hasOwnProperty(P)&&F[P]!==E[P]&&(c||(c={}),c[P]=E[P])}else c||(w||(w=[]),w.push(R,c)),c=E;else R==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,F=F?F.__html:void 0,E!=null&&F!==E&&(w=w||[]).push(R,E)):R==="children"?typeof E!="string"&&typeof E!="number"||(w=w||[]).push(R,""+E):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(R)?(E!=null&&R==="onScroll"&&Xe("scroll",s),w||F===E||(w=[])):(w=w||[]).push(R,E))}c&&(w=w||[]).push("style",c);var R=w;(u.updateQueue=R)&&(u.flags|=4)}};nL=function(s,u,c,g){c!==g&&(u.flags|=4)};function kc(s,u){if(!be)switch(s.tailMode){case"hidden":u=s.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Vn(s){var u=s.alternate!==null&&s.alternate.child===s.child,c=0,g=0;if(u)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=g,s.childLanes=c,u}function rE(s,u,c){var g=u.pendingProps;switch(Iw(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(u),null;case 1:return Nr(u.type)&&my(),Vn(u),null;case 3:return g=u.stateNode,Ga(),_e(Pr),_e(Gn),_w(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Xg(u)?u.flags|=4:s===null||s.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,Vo!==null&&(lw(Vo),Vo=null))),bx(s,u),Vn(u),null;case 5:Xw(u);var v=Ku(qc.current);if(c=u.type,s!==null&&u.stateNode!=null)iL(s,u,c,g,v),s.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(xt(166));return Vn(u),null}if(s=Ku(ks.current),Xg(u)){g=u.stateNode,c=u.type;var w=u.memoizedProps;switch(g[Ms]=u,g[Zc]=w,s=(u.mode&1)!==0,c){case"dialog":Xe("cancel",g),Xe("close",g);break;case"iframe":case"object":case"embed":Xe("load",g);break;case"video":case"audio":for(v=0;v<jc.length;v++)Xe(jc[v],g);break;case"source":Xe("error",g);break;case"img":case"image":case"link":Xe("error",g),Xe("load",g);break;case"details":Xe("toggle",g);break;case"input":YP(g,w),Xe("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!w.multiple},Xe("invalid",g);break;case"textarea":GP(g,w),Xe("invalid",g)}Cx(c,w),v=null;for(var P in w)if(w.hasOwnProperty(P)){var F=w[P];P==="children"?typeof F=="string"?g.textContent!==F&&(w.suppressHydrationWarning!==!0&&Gg(g.textContent,F,s),v=["children",F]):typeof F=="number"&&g.textContent!==""+F&&(w.suppressHydrationWarning!==!0&&Gg(g.textContent,F,s),v=["children",""+F]):Yc.hasOwnProperty(P)&&F!=null&&P==="onScroll"&&Xe("scroll",g)}switch(c){case"input":Dg(g),UP(g,w,!0);break;case"textarea":Dg(g),XP(g);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(g.onclick=yy)}g=v,u.updateQueue=g,g!==null&&(u.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=OC(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=P.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=P.createElement(c,{is:g.is}):(s=P.createElement(c),c==="select"&&(P=s,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):s=P.createElementNS(s,c),s[Ms]=u,s[Zc]=g,eL(s,u,!1,!1),u.stateNode=s;t:{switch(P=Tx(c,g),c){case"dialog":Xe("cancel",s),Xe("close",s),v=g;break;case"iframe":case"object":case"embed":Xe("load",s),v=g;break;case"video":case"audio":for(v=0;v<jc.length;v++)Xe(jc[v],s);v=g;break;case"source":Xe("error",s),v=g;break;case"img":case"image":case"link":Xe("error",s),Xe("load",s),v=g;break;case"details":Xe("toggle",s),v=g;break;case"input":YP(s,g),v=Mx(s,g),Xe("invalid",s);break;case"option":v=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},v=hi({},g,{value:void 0}),Xe("invalid",s);break;case"textarea":GP(s,g),v=Px(s,g),Xe("invalid",s);break;default:v=g}Cx(c,v),F=v;for(w in F)if(F.hasOwnProperty(w)){var E=F[w];w==="style"?AC(s,E):w==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&FC(s,E)):w==="children"?typeof E=="string"?(c!=="textarea"||E!=="")&&Uc(s,E):typeof E=="number"&&Uc(s,""+E):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Yc.hasOwnProperty(w)?E!=null&&w==="onScroll"&&Xe("scroll",s):E!=null&&ww(s,w,E,P))}switch(c){case"input":Dg(s),UP(s,g,!1);break;case"textarea":Dg(s),XP(s);break;case"option":g.value!=null&&s.setAttribute("value",""+bl(g.value));break;case"select":s.multiple=!!g.multiple,w=g.value,w!=null?ja(s,!!g.multiple,w,!1):g.defaultValue!=null&&ja(s,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=yy)}switch(c){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}}g&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Vn(u),null;case 6:if(s&&u.stateNode!=null)nL(s,u,s.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(xt(166));if(c=Ku(qc.current),Ku(ks.current),Xg(u)){if(g=u.stateNode,c=u.memoizedProps,g[Ms]=u,(w=g.nodeValue!==c)&&(s=Yr,s!==null))switch(s.tag){case 3:Gg(g.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Gg(g.nodeValue,c,(s.mode&1)!==0)}w&&(u.flags|=4)}else g=(c.nodeType===9?c:c.ownerDocument).createTextNode(g),g[Ms]=u,u.stateNode=g}return Vn(u),null;case 13:if(_e(li),g=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(be&&Vr!==null&&u.mode&1&&!(u.flags&128))wT(),Ya(),u.flags|=98560,w=!1;else if(w=Xg(u),g!==null&&g.dehydrated!==null){if(s===null){if(!w)throw Error(xt(318));if(w=u.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(xt(317));w[Ms]=u}else Ya(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;Vn(u),w=!1}else Vo!==null&&(lw(Vo),Vo=null),w=!0;if(!w)return u.flags&65536?u:null}return u.flags&128?(u.lanes=c,u):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(u.child.flags|=8192,u.mode&1&&(s===null||li.current&1?tn===0&&(tn=3):iM())),u.updateQueue!==null&&(u.flags|=4),Vn(u),null);case 4:return Ga(),bx(s,u),s===null&&$c(u.stateNode.containerInfo),Vn(u),null;case 10:return Vw(u.type._context),Vn(u),null;case 17:return Nr(u.type)&&my(),Vn(u),null;case 19:if(_e(li),w=u.memoizedState,w===null)return Vn(u),null;if(g=(u.flags&128)!==0,P=w.rendering,P===null)if(g)kc(w,!1);else{if(tn!==0||s!==null&&s.flags&128)for(s=u.child;s!==null;){if(P=Py(s),P!==null){for(u.flags|=128,kc(w,!1),g=P.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),u.subtreeFlags=0,g=c,c=u.child;c!==null;)w=c,s=g,w.flags&=14680066,P=w.alternate,P===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=P.childLanes,w.lanes=P.lanes,w.child=P.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=P.memoizedProps,w.memoizedState=P.memoizedState,w.updateQueue=P.updateQueue,w.type=P.type,s=P.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Ue(li,li.current&1|2),u.child}s=s.sibling}w.tail!==null&&Ii()>_a&&(u.flags|=128,g=!0,kc(w,!1),u.lanes=4194304)}else{if(!g)if(s=Py(P),s!==null){if(u.flags|=128,g=!0,c=s.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),kc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!be)return Vn(u),null}else 2*Ii()-w.renderingStartTime>_a&&c!==1073741824&&(u.flags|=128,g=!0,kc(w,!1),u.lanes=4194304);w.isBackwards?(P.sibling=u.child,u.child=P):(c=w.last,c!==null?c.sibling=P:u.child=P,w.last=P)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=Ii(),u.sibling=null,c=li.current,Ue(li,g?c&1|2:c&1),u):(Vn(u),null);case 22:case 23:return eM(),g=u.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(u.flags|=8192),g&&u.mode&1?zr&1073741824&&(Vn(u),u.subtreeFlags&6&&(u.flags|=8192)):Vn(u),null;case 24:return null;case 25:return null}throw Error(xt(156,u.tag))}function oE(s,u){switch(Iw(u),u.tag){case 1:return Nr(u.type)&&my(),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Ga(),_e(Pr),_e(Gn),_w(),s=u.flags,s&65536&&!(s&128)?(u.flags=s&-65537|128,u):null;case 5:return Xw(u),null;case 13:if(_e(li),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(xt(340));Ya()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return _e(li),null;case 4:return Ga(),null;case 10:return Vw(u.type._context),null;case 22:case 23:return eM(),null;case 24:return null;default:return null}}var Kg=!1,Un=!1,sE=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function Ta(s,u){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){ji(s,u,g)}else c.current=null}function tw(s,u,c){try{c()}catch(g){ji(s,u,g)}}var EN=!1;function lE(s,u){if(Bx=py,s=lT(),Aw(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var v=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break t}var P=0,F=-1,E=-1,R=0,V=0,B=s,J=null;e:for(;;){for(var st;B!==c||v!==0&&B.nodeType!==3||(F=P+v),B!==w||g!==0&&B.nodeType!==3||(E=P+g),B.nodeType===3&&(P+=B.nodeValue.length),(st=B.firstChild)!==null;)J=B,B=st;for(;;){if(B===s)break e;if(J===c&&++R===v&&(F=P),J===w&&++V===g&&(E=P),(st=B.nextSibling)!==null)break;B=J,J=B.parentNode}B=st}c=F===-1||E===-1?null:{start:F,end:E}}else c=null}c=c||{start:0,end:0}}else c=null;for(zx={focusedElem:s,selectionRange:c},py=!1,Ft=u;Ft!==null;)if(u=Ft,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,Ft=s;else for(;Ft!==null;){u=Ft;try{var ut=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var G=ut.memoizedProps,Ot=ut.memoizedState,X=u.stateNode,U=X.getSnapshotBeforeUpdate(u.elementType===u.type?G:Bo(u.type,G),Ot);X.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var W=u.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(I){ji(u,u.return,I)}if(s=u.sibling,s!==null){s.return=u.return,Ft=s;break}Ft=u.return}return ut=EN,EN=!1,ut}function Bc(s,u,c){var g=u.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&s)===s){var w=v.destroy;v.destroy=void 0,w!==void 0&&tw(u,c,w)}v=v.next}while(v!==g)}}function Ky(s,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var c=u=u.next;do{if((c.tag&s)===s){var g=c.create;c.destroy=g()}c=c.next}while(c!==u)}}function ew(s){var u=s.ref;if(u!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof u=="function"?u(s):u.current=s}}function rL(s){var u=s.alternate;u!==null&&(s.alternate=null,rL(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&(delete u[Ms],delete u[Zc],delete u[Ux],delete u[XF],delete u[_F])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function oL(s){return s.tag===5||s.tag===3||s.tag===4}function AN(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||oL(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function iw(s,u,c){var g=s.tag;if(g===5||g===6)s=s.stateNode,u?c.nodeType===8?c.parentNode.insertBefore(s,u):c.insertBefore(s,u):(c.nodeType===8?(u=c.parentNode,u.insertBefore(s,c)):(u=c,u.appendChild(s)),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=yy));else if(g!==4&&(s=s.child,s!==null))for(iw(s,u,c),s=s.sibling;s!==null;)iw(s,u,c),s=s.sibling}function nw(s,u,c){var g=s.tag;if(g===5||g===6)s=s.stateNode,u?c.insertBefore(s,u):c.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(nw(s,u,c),s=s.sibling;s!==null;)nw(s,u,c),s=s.sibling}var Pn=null,zo=!1;function Il(s,u,c){for(c=c.child;c!==null;)sL(s,u,c),c=c.sibling}function sL(s,u,c){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(zy,c)}catch{}switch(c.tag){case 5:Un||Ta(c,u);case 6:var g=Pn,v=zo;Pn=null,Il(s,u,c),Pn=g,zo=v,Pn!==null&&(zo?(s=Pn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Pn.removeChild(c.stateNode));break;case 18:Pn!==null&&(zo?(s=Pn,c=c.stateNode,s.nodeType===8?J1(s.parentNode,c):s.nodeType===1&&J1(s,c),Hc(s)):J1(Pn,c.stateNode));break;case 4:g=Pn,v=zo,Pn=c.stateNode.containerInfo,zo=!0,Il(s,u,c),Pn=g,zo=v;break;case 0:case 11:case 14:case 15:if(!Un&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var w=v,P=w.destroy;w=w.tag,P!==void 0&&(w&2||w&4)&&tw(c,u,P),v=v.next}while(v!==g)}Il(s,u,c);break;case 1:if(!Un&&(Ta(c,u),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(F){ji(c,u,F)}Il(s,u,c);break;case 21:Il(s,u,c);break;case 22:c.mode&1?(Un=(g=Un)||c.memoizedState!==null,Il(s,u,c),Un=g):Il(s,u,c);break;default:Il(s,u,c)}}function DN(s){var u=s.updateQueue;if(u!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new sE),u.forEach(function(g){var v=yE.bind(null,s,g);c.has(g)||(c.add(g),g.then(v,v))})}}function Ro(s,u){var c=u.deletions;if(c!==null)for(var g=0;g<c.length;g++){var v=c[g];try{var w=s,P=u,F=P;t:for(;F!==null;){switch(F.tag){case 5:Pn=F.stateNode,zo=!1;break t;case 3:Pn=F.stateNode.containerInfo,zo=!0;break t;case 4:Pn=F.stateNode.containerInfo,zo=!0;break t}F=F.return}if(Pn===null)throw Error(xt(160));sL(w,P,v),Pn=null,zo=!1;var E=v.alternate;E!==null&&(E.return=null),v.return=null}catch(R){ji(v,u,R)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)lL(u,s),u=u.sibling}function lL(s,u){var c=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ro(u,s),xs(s),g&4){try{Bc(3,s,s.return),Ky(3,s)}catch(G){ji(s,s.return,G)}try{Bc(5,s,s.return)}catch(G){ji(s,s.return,G)}}break;case 1:Ro(u,s),xs(s),g&512&&c!==null&&Ta(c,c.return);break;case 5:if(Ro(u,s),xs(s),g&512&&c!==null&&Ta(c,c.return),s.flags&32){var v=s.stateNode;try{Uc(v,"")}catch(G){ji(s,s.return,G)}}if(g&4&&(v=s.stateNode,v!=null)){var w=s.memoizedProps,P=c!==null?c.memoizedProps:w,F=s.type,E=s.updateQueue;if(s.updateQueue=null,E!==null)try{F==="input"&&w.type==="radio"&&w.name!=null&&LC(v,w),Tx(F,P);var R=Tx(F,w);for(P=0;P<E.length;P+=2){var V=E[P],B=E[P+1];V==="style"?AC(v,B):V==="dangerouslySetInnerHTML"?FC(v,B):V==="children"?Uc(v,B):ww(v,V,B,R)}switch(F){case"input":Sx(v,w);break;case"textarea":jC(v,w);break;case"select":var J=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var st=w.value;st!=null?ja(v,!!w.multiple,st,!1):J!==!!w.multiple&&(w.defaultValue!=null?ja(v,!!w.multiple,w.defaultValue,!0):ja(v,!!w.multiple,w.multiple?[]:"",!1))}v[Zc]=w}catch(G){ji(s,s.return,G)}}break;case 6:if(Ro(u,s),xs(s),g&4){if(s.stateNode===null)throw Error(xt(162));v=s.stateNode,w=s.memoizedProps;try{v.nodeValue=w}catch(G){ji(s,s.return,G)}}break;case 3:if(Ro(u,s),xs(s),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Hc(u.containerInfo)}catch(G){ji(s,s.return,G)}break;case 4:Ro(u,s),xs(s);break;case 13:Ro(u,s),xs(s),v=s.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(bw=Ii())),g&4&&DN(s);break;case 22:if(V=c!==null&&c.memoizedState!==null,s.mode&1?(Un=(R=Un)||V,Ro(u,s),Un=R):Ro(u,s),xs(s),g&8192){if(R=s.memoizedState!==null,(s.stateNode.isHidden=R)&&!V&&s.mode&1)for(Ft=s,V=s.child;V!==null;){for(B=Ft=V;Ft!==null;){switch(J=Ft,st=J.child,J.tag){case 0:case 11:case 14:case 15:Bc(4,J,J.return);break;case 1:Ta(J,J.return);var ut=J.stateNode;if(typeof ut.componentWillUnmount=="function"){g=J,c=J.return;try{u=g,ut.props=u.memoizedProps,ut.state=u.memoizedState,ut.componentWillUnmount()}catch(G){ji(g,c,G)}}break;case 5:Ta(J,J.return);break;case 22:if(J.memoizedState!==null){RN(B);continue}}st!==null?(st.return=J,Ft=st):RN(B)}V=V.sibling}t:for(V=null,B=s;;){if(B.tag===5){if(V===null){V=B;try{v=B.stateNode,R?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(F=B.stateNode,E=B.memoizedProps.style,P=E!=null&&E.hasOwnProperty("display")?E.display:null,F.style.display=EC("display",P))}catch(G){ji(s,s.return,G)}}}else if(B.tag===6){if(V===null)try{B.stateNode.nodeValue=R?"":B.memoizedProps}catch(G){ji(s,s.return,G)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===s)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===s)break t;for(;B.sibling===null;){if(B.return===null||B.return===s)break t;V===B&&(V=null),B=B.return}V===B&&(V=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Ro(u,s),xs(s),g&4&&DN(s);break;case 21:break;default:Ro(u,s),xs(s)}}function xs(s){var u=s.flags;if(u&2){try{t:{for(var c=s.return;c!==null;){if(oL(c)){var g=c;break t}c=c.return}throw Error(xt(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Uc(v,""),g.flags&=-33);var w=AN(s);nw(s,w,v);break;case 3:case 4:var P=g.stateNode.containerInfo,F=AN(s);iw(s,F,P);break;default:throw Error(xt(161))}}catch(E){ji(s,s.return,E)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function uE(s,u,c){Ft=s,uL(s)}function uL(s,u,c){for(var g=(s.mode&1)!==0;Ft!==null;){var v=Ft,w=v.child;if(v.tag===22&&g){var P=v.memoizedState!==null||Kg;if(!P){var F=v.alternate,E=F!==null&&F.memoizedState!==null||Un;F=Kg;var R=Un;if(Kg=P,(Un=E)&&!R)for(Ft=v;Ft!==null;)P=Ft,E=P.child,P.tag===22&&P.memoizedState!==null?BN(v):E!==null?(E.return=P,Ft=E):BN(v);for(;w!==null;)Ft=w,uL(w),w=w.sibling;Ft=v,Kg=F,Un=R}IN(s)}else v.subtreeFlags&8772&&w!==null?(w.return=v,Ft=w):IN(s)}}function IN(s){for(;Ft!==null;){var u=Ft;if(u.flags&8772){var c=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:Un||Ky(5,u);break;case 1:var g=u.stateNode;if(u.flags&4&&!Un)if(c===null)g.componentDidMount();else{var v=u.elementType===u.type?c.memoizedProps:Bo(u.type,c.memoizedProps);g.componentDidUpdate(v,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var w=u.updateQueue;w!==null&&vN(u,w,g);break;case 3:var P=u.updateQueue;if(P!==null){if(c=null,u.child!==null)switch(u.child.tag){case 5:c=u.child.stateNode;break;case 1:c=u.child.stateNode}vN(u,P,c)}break;case 5:var F=u.stateNode;if(c===null&&u.flags&4){c=F;var E=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&c.focus();break;case"img":E.src&&(c.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var R=u.alternate;if(R!==null){var V=R.memoizedState;if(V!==null){var B=V.dehydrated;B!==null&&Hc(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}Un||u.flags&512&&ew(u)}catch(J){ji(u,u.return,J)}}if(u===s){Ft=null;break}if(c=u.sibling,c!==null){c.return=u.return,Ft=c;break}Ft=u.return}}function RN(s){for(;Ft!==null;){var u=Ft;if(u===s){Ft=null;break}var c=u.sibling;if(c!==null){c.return=u.return,Ft=c;break}Ft=u.return}}function BN(s){for(;Ft!==null;){var u=Ft;try{switch(u.tag){case 0:case 11:case 15:var c=u.return;try{Ky(4,u)}catch(E){ji(u,c,E)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var v=u.return;try{g.componentDidMount()}catch(E){ji(u,v,E)}}var w=u.return;try{ew(u)}catch(E){ji(u,w,E)}break;case 5:var P=u.return;try{ew(u)}catch(E){ji(u,P,E)}}}catch(E){ji(u,u.return,E)}if(u===s){Ft=null;break}var F=u.sibling;if(F!==null){F.return=u.return,Ft=F;break}Ft=u.return}}var hE=Math.ceil,Ty=ul.ReactCurrentDispatcher,Qw=ul.ReactCurrentOwner,po=ul.ReactCurrentBatchConfig,xe=0,hn=null,Gi=null,Nn=0,zr=0,La=nu(0),tn=0,ip=null,qu=0,Wy=0,qw=0,zc=null,Sr=null,bw=0,_a=1/0,qs=null,Ly=!1,rw=null,$l=null,Wg=!1,Gl=null,jy=0,Vc=0,ow=null,ry=-1,oy=0;function rr(){return xe&6?Ii():ry!==-1?ry:ry=Ii()}function Jl(s){return s.mode&1?xe&2&&Nn!==0?Nn&-Nn:KF.transition!==null?(oy===0&&(oy=HC()),oy):(s=je,s!==0||(s=window.event,s=s===void 0?16:qC(s.type)),s):1}function Go(s,u,c,g){if(50<Vc)throw Vc=0,ow=null,Error(xt(185));lp(s,c,g),(!(xe&2)||s!==hn)&&(s===hn&&(!(xe&2)&&(Wy|=c),tn===4&&Vl(s,Nn)),Cr(s,g),c===1&&xe===0&&!(u.mode&1)&&(_a=Ii()+500,Xy&&ru()))}function Cr(s,u){var c=s.callbackNode;KO(s,u);var g=cy(s,s===hn?Nn:0);if(g===0)c!==null&&KP(c),s.callbackNode=null,s.callbackPriority=0;else if(u=g&-g,s.callbackPriority!==u){if(c!=null&&KP(c),u===1)s.tag===0?HF(zN.bind(null,s)):mT(zN.bind(null,s)),UF(function(){!(xe&6)&&ru()}),c=null;else{switch(KC(g)){case 1:c=Nw;break;case 4:c=XC;break;case 16:c=fy;break;case 536870912:c=_C;break;default:c=fy}c=yL(c,hL.bind(null,s))}s.callbackPriority=u,s.callbackNode=c}}function hL(s,u){if(ry=-1,oy=0,xe&6)throw Error(xt(327));var c=s.callbackNode;if(Da()&&s.callbackNode!==c)return null;var g=cy(s,s===hn?Nn:0);if(g===0)return null;if(g&30||g&s.expiredLanes||u)u=Oy(s,g);else{u=g;var v=xe;xe|=2;var w=fL();(hn!==s||Nn!==u)&&(qs=null,_a=Ii()+500,Wu(s,u));do try{cE();break}catch(F){aL(s,F)}while(1);zw(),Ty.current=w,xe=v,Gi!==null?u=0:(hn=null,Nn=0,u=tn)}if(u!==0){if(u===2&&(v=Ex(s),v!==0&&(g=v,u=sw(s,v))),u===1)throw c=ip,Wu(s,0),Vl(s,g),Cr(s,Ii()),c;if(u===6)Vl(s,g);else{if(v=s.current.alternate,!(g&30)&&!aE(v)&&(u=Oy(s,g),u===2&&(w=Ex(s),w!==0&&(g=w,u=sw(s,w))),u===1))throw c=ip,Wu(s,0),Vl(s,g),Cr(s,Ii()),c;switch(s.finishedWork=v,s.finishedLanes=g,u){case 0:case 1:throw Error(xt(345));case 2:Gu(s,Sr,qs);break;case 3:if(Vl(s,g),(g&130023424)===g&&(u=bw+500-Ii(),10<u)){if(cy(s,0)!==0)break;if(v=s.suspendedLanes,(v&g)!==g){rr(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=Yx(Gu.bind(null,s,Sr,qs),u);break}Gu(s,Sr,qs);break;case 4:if(Vl(s,g),(g&4194240)===g)break;for(u=s.eventTimes,v=-1;0<g;){var P=31-Uo(g);w=1<<P,P=u[P],P>v&&(v=P),g&=~w}if(g=v,g=Ii()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*hE(g/1960))-g,10<g){s.timeoutHandle=Yx(Gu.bind(null,s,Sr,qs),g);break}Gu(s,Sr,qs);break;case 5:Gu(s,Sr,qs);break;default:throw Error(xt(329))}}}return Cr(s,Ii()),s.callbackNode===c?hL.bind(null,s):null}function sw(s,u){var c=zc;return s.current.memoizedState.isDehydrated&&(Wu(s,u).flags|=256),s=Oy(s,u),s!==2&&(u=Sr,Sr=c,u!==null&&lw(u)),s}function lw(s){Sr===null?Sr=s:Sr.push.apply(Sr,s)}function aE(s){for(var u=s;;){if(u.flags&16384){var c=u.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var v=c[g],w=v.getSnapshot;v=v.value;try{if(!Xo(w(),v))return!1}catch{return!1}}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Vl(s,u){for(u&=~qw,u&=~Wy,s.suspendedLanes|=u,s.pingedLanes&=~u,s=s.expirationTimes;0<u;){var c=31-Uo(u),g=1<<c;s[c]=-1,u&=~g}}function zN(s){if(xe&6)throw Error(xt(327));Da();var u=cy(s,0);if(!(u&1))return Cr(s,Ii()),null;var c=Oy(s,u);if(s.tag!==0&&c===2){var g=Ex(s);g!==0&&(u=g,c=sw(s,g))}if(c===1)throw c=ip,Wu(s,0),Vl(s,u),Cr(s,Ii()),c;if(c===6)throw Error(xt(345));return s.finishedWork=s.current.alternate,s.finishedLanes=u,Gu(s,Sr,qs),Cr(s,Ii()),null}function tM(s,u){var c=xe;xe|=1;try{return s(u)}finally{xe=c,xe===0&&(_a=Ii()+500,Xy&&ru())}}function bu(s){Gl!==null&&Gl.tag===0&&!(xe&6)&&Da();var u=xe;xe|=1;var c=po.transition,g=je;try{if(po.transition=null,je=1,s)return s()}finally{je=g,po.transition=c,xe=u,!(xe&6)&&ru()}}function eM(){zr=La.current,_e(La)}function Wu(s,u){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,YF(c)),Gi!==null)for(c=Gi.return;c!==null;){var g=c;switch(Iw(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&my();break;case 3:Ga(),_e(Pr),_e(Gn),_w();break;case 5:Xw(g);break;case 4:Ga();break;case 13:_e(li);break;case 19:_e(li);break;case 10:Vw(g.type._context);break;case 22:case 23:eM()}c=c.return}if(hn=s,Gi=s=Zl(s.current,null),Nn=zr=u,tn=0,ip=null,qw=Wy=qu=0,Sr=zc=null,Hu!==null){for(u=0;u<Hu.length;u++)if(c=Hu[u],g=c.interleaved,g!==null){c.interleaved=null;var v=g.next,w=c.pending;if(w!==null){var P=w.next;w.next=v,g.next=P}c.pending=g}Hu=null}return s}function aL(s,u){do{var c=Gi;try{if(zw(),ey.current=Cy,Ny){for(var g=ui.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Ny=!1}if(Qu=0,un=bi=ui=null,Rc=!1,bc=0,Qw.current=null,c===null||c.return===null){tn=1,ip=u,Gi=null;break}t:{var w=s,P=c.return,F=c,E=u;if(u=Nn,F.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var R=E,V=F,B=V.tag;if(!(V.mode&1)&&(B===0||B===11||B===15)){var J=V.alternate;J?(V.updateQueue=J.updateQueue,V.memoizedState=J.memoizedState,V.lanes=J.lanes):(V.updateQueue=null,V.memoizedState=null)}var st=NN(P);if(st!==null){st.flags&=-257,CN(st,P,F,w,u),st.mode&1&&PN(w,R,u),u=st,E=R;var ut=u.updateQueue;if(ut===null){var G=new Set;G.add(E),u.updateQueue=G}else ut.add(E);break t}else{if(!(u&1)){PN(w,R,u),iM();break t}E=Error(xt(426))}}else if(be&&F.mode&1){var Ot=NN(P);if(Ot!==null){!(Ot.flags&65536)&&(Ot.flags|=256),CN(Ot,P,F,w,u),Rw(Xa(E,F));break t}}w=E=Xa(E,F),tn!==4&&(tn=2),zc===null?zc=[w]:zc.push(w),w=P;do{switch(w.tag){case 3:w.flags|=65536,u&=-u,w.lanes|=u;var X=WT(w,E,u);mN(w,X);break t;case 1:F=E;var U=w.type,W=w.stateNode;if(!(w.flags&128)&&(typeof U.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&($l===null||!$l.has(W)))){w.flags|=65536,u&=-u,w.lanes|=u;var I=$T(w,F,u);mN(w,I);break t}}w=w.return}while(w!==null)}pL(c)}catch(nt){u=nt,Gi===c&&c!==null&&(Gi=c=c.return);continue}break}while(1)}function fL(){var s=Ty.current;return Ty.current=Cy,s===null?Cy:s}function iM(){(tn===0||tn===3||tn===2)&&(tn=4),hn===null||!(qu&268435455)&&!(Wy&268435455)||Vl(hn,Nn)}function Oy(s,u){var c=xe;xe|=2;var g=fL();(hn!==s||Nn!==u)&&(qs=null,Wu(s,u));do try{fE();break}catch(v){aL(s,v)}while(1);if(zw(),xe=c,Ty.current=g,Gi!==null)throw Error(xt(261));return hn=null,Nn=0,tn}function fE(){for(;Gi!==null;)cL(Gi)}function cE(){for(;Gi!==null&&!BO();)cL(Gi)}function cL(s){var u=gL(s.alternate,s,zr);s.memoizedProps=s.pendingProps,u===null?pL(s):Gi=u,Qw.current=null}function pL(s){var u=s;do{var c=u.alternate;if(s=u.return,u.flags&32768){if(c=oE(c,u),c!==null){c.flags&=32767,Gi=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{tn=6,Gi=null;return}}else if(c=rE(c,u,zr),c!==null){Gi=c;return}if(u=u.sibling,u!==null){Gi=u;return}Gi=u=s}while(u!==null);tn===0&&(tn=5)}function Gu(s,u,c){var g=je,v=po.transition;try{po.transition=null,je=1,pE(s,u,c,g)}finally{po.transition=v,je=g}return null}function pE(s,u,c,g){do Da();while(Gl!==null);if(xe&6)throw Error(xt(327));c=s.finishedWork;var v=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(xt(177));s.callbackNode=null,s.callbackPriority=0;var w=c.lanes|c.childLanes;if(WO(s,w),s===hn&&(Gi=hn=null,Nn=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Wg||(Wg=!0,yL(fy,function(){return Da(),null})),w=(c.flags&15990)!==0,c.subtreeFlags&15990||w){w=po.transition,po.transition=null;var P=je;je=1;var F=xe;xe|=4,Qw.current=null,lE(s,c),lL(c,s),AF(zx),py=!!Bx,zx=Bx=null,s.current=c,uE(c),zO(),xe=F,je=P,po.transition=w}else s.current=c;if(Wg&&(Wg=!1,Gl=s,jy=v),w=s.pendingLanes,w===0&&($l=null),UO(c.stateNode),Cr(s,Ii()),u!==null)for(g=s.onRecoverableError,c=0;c<u.length;c++)v=u[c],g(v.value,{componentStack:v.stack,digest:v.digest});if(Ly)throw Ly=!1,s=rw,rw=null,s;return jy&1&&s.tag!==0&&Da(),w=s.pendingLanes,w&1?s===ow?Vc++:(Vc=0,ow=s):Vc=0,ru(),null}function Da(){if(Gl!==null){var s=KC(jy),u=po.transition,c=je;try{if(po.transition=null,je=16>s?16:s,Gl===null)var g=!1;else{if(s=Gl,Gl=null,jy=0,xe&6)throw Error(xt(331));var v=xe;for(xe|=4,Ft=s.current;Ft!==null;){var w=Ft,P=w.child;if(Ft.flags&16){var F=w.deletions;if(F!==null){for(var E=0;E<F.length;E++){var R=F[E];for(Ft=R;Ft!==null;){var V=Ft;switch(V.tag){case 0:case 11:case 15:Bc(8,V,w)}var B=V.child;if(B!==null)B.return=V,Ft=B;else for(;Ft!==null;){V=Ft;var J=V.sibling,st=V.return;if(rL(V),V===R){Ft=null;break}if(J!==null){J.return=st,Ft=J;break}Ft=st}}}var ut=w.alternate;if(ut!==null){var G=ut.child;if(G!==null){ut.child=null;do{var Ot=G.sibling;G.sibling=null,G=Ot}while(G!==null)}}Ft=w}}if(w.subtreeFlags&2064&&P!==null)P.return=w,Ft=P;else t:for(;Ft!==null;){if(w=Ft,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Bc(9,w,w.return)}var X=w.sibling;if(X!==null){X.return=w.return,Ft=X;break t}Ft=w.return}}var U=s.current;for(Ft=U;Ft!==null;){P=Ft;var W=P.child;if(P.subtreeFlags&2064&&W!==null)W.return=P,Ft=W;else t:for(P=U;Ft!==null;){if(F=Ft,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:Ky(9,F)}}catch(nt){ji(F,F.return,nt)}if(F===P){Ft=null;break t}var I=F.sibling;if(I!==null){I.return=F.return,Ft=I;break t}Ft=F.return}}if(xe=v,ru(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(zy,s)}catch{}g=!0}return g}finally{je=c,po.transition=u}}return!1}function VN(s,u,c){u=Xa(c,u),u=WT(s,u,1),s=Wl(s,u,1),u=rr(),s!==null&&(lp(s,1,u),Cr(s,u))}function ji(s,u,c){if(s.tag===3)VN(s,s,c);else for(;u!==null;){if(u.tag===3){VN(u,s,c);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($l===null||!$l.has(g))){s=Xa(c,s),s=$T(u,s,1),u=Wl(u,s,1),s=rr(),u!==null&&(lp(u,1,s),Cr(u,s));break}}u=u.return}}function dE(s,u,c){var g=s.pingCache;g!==null&&g.delete(u),u=rr(),s.pingedLanes|=s.suspendedLanes&c,hn===s&&(Nn&c)===c&&(tn===4||tn===3&&(Nn&130023424)===Nn&&500>Ii()-bw?Wu(s,0):qw|=c),Cr(s,u)}function dL(s,u){u===0&&(s.mode&1?(u=Bg,Bg<<=1,!(Bg&130023424)&&(Bg=4194304)):u=1);var c=rr();s=ol(s,u),s!==null&&(lp(s,u,c),Cr(s,c))}function gE(s){var u=s.memoizedState,c=0;u!==null&&(c=u.retryLane),dL(s,c)}function yE(s,u){var c=0;switch(s.tag){case 13:var g=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(xt(314))}g!==null&&g.delete(u),dL(s,c)}var gL;gL=function(s,u,c){if(s!==null)if(s.memoizedProps!==u.pendingProps||Pr.current)kr=!0;else{if(!(s.lanes&c)&&!(u.flags&128))return kr=!1,nE(s,u,c);kr=!!(s.flags&131072)}else kr=!1,be&&u.flags&1048576&&vT(u,wy,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;ny(s,u),s=u.pendingProps;var v=Va(u,Gn.current);Aa(u,c),v=Kw(null,u,g,s,v,c);var w=Ww();return u.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Nr(g)?(w=!0,vy(u)):w=!1,u.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Uw(u),v.updater=_y,u.stateNode=v,v._reactInternals=u,Wx(u,g,s,c),u=Zx(null,u,g,!0,w,c)):(u.tag=0,be&&w&&Dw(u),nr(null,u,v,c),u=u.child),u;case 16:g=u.elementType;t:{switch(ny(s,u),s=u.pendingProps,v=g._init,g=v(g._payload),u.type=g,v=u.tag=vE(g),s=Bo(g,s),v){case 0:u=Jx(null,u,g,s,c);break t;case 1:u=jN(null,u,g,s,c);break t;case 11:u=TN(null,u,g,s,c);break t;case 14:u=LN(null,u,g,Bo(g.type,s),c);break t}throw Error(xt(306,g,""))}return u;case 0:return g=u.type,v=u.pendingProps,v=u.elementType===g?v:Bo(g,v),Jx(s,u,g,v,c);case 1:return g=u.type,v=u.pendingProps,v=u.elementType===g?v:Bo(g,v),jN(s,u,g,v,c);case 3:t:{if(qT(u),s===null)throw Error(xt(387));g=u.pendingProps,w=u.memoizedState,v=w.element,ST(s,u),ky(u,g,null,c);var P=u.memoizedState;if(g=P.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){v=Xa(Error(xt(423)),u),u=ON(s,u,g,c,v);break t}else if(g!==v){v=Xa(Error(xt(424)),u),u=ON(s,u,g,c,v);break t}else for(Vr=Kl(u.stateNode.containerInfo.firstChild),Yr=u,be=!0,Vo=null,c=CT(u,null,g,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ya(),g===v){u=sl(s,u,c);break t}nr(s,u,g,c)}u=u.child}return u;case 5:return TT(u),s===null&&_x(u),g=u.type,v=u.pendingProps,w=s!==null?s.memoizedProps:null,P=v.children,Vx(g,v)?P=null:w!==null&&Vx(g,w)&&(u.flags|=32),QT(s,u),nr(s,u,P,c),u.child;case 6:return s===null&&_x(u),null;case 13:return bT(s,u,c);case 4:return Gw(u,u.stateNode.containerInfo),g=u.pendingProps,s===null?u.child=Ua(u,null,g,c):nr(s,u,g,c),u.child;case 11:return g=u.type,v=u.pendingProps,v=u.elementType===g?v:Bo(g,v),TN(s,u,g,v,c);case 7:return nr(s,u,u.pendingProps,c),u.child;case 8:return nr(s,u,u.pendingProps.children,c),u.child;case 12:return nr(s,u,u.pendingProps.children,c),u.child;case 10:t:{if(g=u.type._context,v=u.pendingProps,w=u.memoizedProps,P=v.value,Ue(My,g._currentValue),g._currentValue=P,w!==null)if(Xo(w.value,P)){if(w.children===v.children&&!Pr.current){u=sl(s,u,c);break t}}else for(w=u.child,w!==null&&(w.return=u);w!==null;){var F=w.dependencies;if(F!==null){P=w.child;for(var E=F.firstContext;E!==null;){if(E.context===g){if(w.tag===1){E=il(-1,c&-c),E.tag=2;var R=w.updateQueue;if(R!==null){R=R.shared;var V=R.pending;V===null?E.next=E:(E.next=V.next,V.next=E),R.pending=E}}w.lanes|=c,E=w.alternate,E!==null&&(E.lanes|=c),Hx(w.return,c,u),F.lanes|=c;break}E=E.next}}else if(w.tag===10)P=w.type===u.type?null:w.child;else if(w.tag===18){if(P=w.return,P===null)throw Error(xt(341));P.lanes|=c,F=P.alternate,F!==null&&(F.lanes|=c),Hx(P,c,u),P=w.sibling}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===u){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}nr(s,u,v.children,c),u=u.child}return u;case 9:return v=u.type,g=u.pendingProps.children,Aa(u,c),v=go(v),g=g(v),u.flags|=1,nr(s,u,g,c),u.child;case 14:return g=u.type,v=Bo(g,u.pendingProps),v=Bo(g.type,v),LN(s,u,g,v,c);case 15:return JT(s,u,u.type,u.pendingProps,c);case 17:return g=u.type,v=u.pendingProps,v=u.elementType===g?v:Bo(g,v),ny(s,u),u.tag=1,Nr(g)?(s=!0,vy(u)):s=!1,Aa(u,c),PT(u,g,v),Wx(u,g,v,c),Zx(null,u,g,!0,s,c);case 19:return tL(s,u,c);case 22:return ZT(s,u,c)}throw Error(xt(156,u.tag))};function yL(s,u){return GC(s,u)}function mE(s,u,c,g){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(s,u,c,g){return new mE(s,u,c,g)}function nM(s){return s=s.prototype,!(!s||!s.isReactComponent)}function vE(s){if(typeof s=="function")return nM(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Sw)return 11;if(s===kw)return 14}return 2}function Zl(s,u){var c=s.alternate;return c===null?(c=co(s.tag,u,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=u,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,u=s.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function sy(s,u,c,g,v,w){var P=2;if(g=s,typeof s=="function")nM(s)&&(P=1);else if(typeof s=="string")P=5;else t:switch(s){case va:return $u(c.children,v,w,u);case Mw:P=8,v|=8;break;case mx:return s=co(12,c,u,v|2),s.elementType=mx,s.lanes=w,s;case vx:return s=co(13,c,u,v),s.elementType=vx,s.lanes=w,s;case xx:return s=co(19,c,u,v),s.elementType=xx,s.lanes=w,s;case NC:return $y(c,v,w,u);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case kC:P=10;break t;case PC:P=9;break t;case Sw:P=11;break t;case kw:P=14;break t;case Rl:P=16,g=null;break t}throw Error(xt(130,s==null?s:typeof s,""))}return u=co(P,c,u,v),u.elementType=s,u.type=g,u.lanes=w,u}function $u(s,u,c,g){return s=co(7,s,g,u),s.lanes=c,s}function $y(s,u,c,g){return s=co(22,s,g,u),s.elementType=NC,s.lanes=c,s.stateNode={isHidden:!1},s}function nx(s,u,c){return s=co(6,s,null,u),s.lanes=c,s}function rx(s,u,c){return u=co(4,s.children!==null?s.children:[],s.key,u),u.lanes=c,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function xE(s,u,c,g,v){this.tag=u,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z1(0),this.expirationTimes=z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z1(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function rM(s,u,c,g,v,w,P,F,E){return s=new xE(s,u,c,F,E),u===1?(u=1,w===!0&&(u|=8)):u=0,w=co(3,null,null,u),s.current=w,w.stateNode=s,w.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uw(w),s}function wE(s,u,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:g==null?null:""+g,children:s,containerInfo:u,implementation:c}}function mL(s){if(!s)return tu;s=s._reactInternals;t:{if(ih(s)!==s||s.tag!==1)throw Error(xt(170));var u=s;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Nr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(xt(171))}if(s.tag===1){var c=s.type;if(Nr(c))return yT(s,c,u)}return u}function vL(s,u,c,g,v,w,P,F,E){return s=rM(c,g,!0,s,v,w,P,F,E),s.context=mL(null),c=s.current,g=rr(),v=Jl(c),w=il(g,v),w.callback=u??null,Wl(c,w,v),s.current.lanes=v,lp(s,v,g),Cr(s,g),s}function Jy(s,u,c,g){var v=u.current,w=rr(),P=Jl(v);return c=mL(c),u.context===null?u.context=c:u.pendingContext=c,u=il(w,P),u.payload={element:s},g=g===void 0?null:g,g!==null&&(u.callback=g),s=Wl(v,u,P),s!==null&&(Go(s,v,P,w),ty(s,v,P)),P}function Fy(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function YN(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<u?c:u}}function oM(s,u){YN(s,u),(s=s.alternate)&&YN(s,u)}function ME(){return null}var xL=typeof reportError=="function"?reportError:function(s){console.error(s)};function sM(s){this._internalRoot=s}Zy.prototype.render=sM.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(xt(409));Jy(s,u,null,null)};Zy.prototype.unmount=sM.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;bu(function(){Jy(null,s,null,null)}),u[rl]=null}};function Zy(s){this._internalRoot=s}Zy.prototype.unstable_scheduleHydration=function(s){if(s){var u=JC();s={blockedOn:null,target:s,priority:u};for(var c=0;c<zl.length&&u!==0&&u<zl[c].priority;c++);zl.splice(c,0,s),c===0&&QC(s)}};function lM(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Qy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function UN(){}function SE(s,u,c,g,v){if(v){if(typeof g=="function"){var w=g;g=function(){var R=Fy(P);w.call(R)}}var P=vL(u,g,s,0,null,!1,!1,"",UN);return s._reactRootContainer=P,s[rl]=P.current,$c(s.nodeType===8?s.parentNode:s),bu(),P}for(;v=s.lastChild;)s.removeChild(v);if(typeof g=="function"){var F=g;g=function(){var R=Fy(E);F.call(R)}}var E=rM(s,0,!1,null,null,!1,!1,"",UN);return s._reactRootContainer=E,s[rl]=E.current,$c(s.nodeType===8?s.parentNode:s),bu(function(){Jy(u,E,c,g)}),E}function qy(s,u,c,g,v){var w=c._reactRootContainer;if(w){var P=w;if(typeof v=="function"){var F=v;v=function(){var E=Fy(P);F.call(E)}}Jy(u,P,s,v)}else P=SE(c,u,s,v,g);return Fy(P)}WC=function(s){switch(s.tag){case 3:var u=s.stateNode;if(u.current.memoizedState.isDehydrated){var c=Lc(u.pendingLanes);c!==0&&(Cw(u,c|1),Cr(u,Ii()),!(xe&6)&&(_a=Ii()+500,ru()))}break;case 13:bu(function(){var g=ol(s,1);if(g!==null){var v=rr();Go(g,s,1,v)}}),oM(s,1)}};Tw=function(s){if(s.tag===13){var u=ol(s,134217728);if(u!==null){var c=rr();Go(u,s,134217728,c)}oM(s,134217728)}};$C=function(s){if(s.tag===13){var u=Jl(s),c=ol(s,u);if(c!==null){var g=rr();Go(c,s,u,g)}oM(s,u)}};JC=function(){return je};ZC=function(s,u){var c=je;try{return je=s,u()}finally{je=c}};jx=function(s,u,c){switch(u){case"input":if(Sx(s,c),u=c.name,c.type==="radio"&&u!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<c.length;u++){var g=c[u];if(g!==s&&g.form===s.form){var v=Gy(g);if(!v)throw Error(xt(90));TC(g),Sx(g,v)}}}break;case"textarea":jC(s,c);break;case"select":u=c.value,u!=null&&ja(s,!!c.multiple,u,!1)}};RC=tM;BC=bu;var kE={usingClientEntryPoint:!1,Events:[hp,Sa,Gy,DC,IC,tM]},Pc={findFiberByHostInstance:_u,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PE={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ul.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=YC(s),s===null?null:s.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||ME,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$g.isDisabled&&$g.supportsFiber)try{zy=$g.inject(PE),Ss=$g}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;Xr.createPortal=function(s,u){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lM(u))throw Error(xt(200));return wE(s,u,null,c)};Xr.createRoot=function(s,u){if(!lM(s))throw Error(xt(299));var c=!1,g="",v=xL;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(v=u.onRecoverableError)),u=rM(s,1,!1,null,null,c,!1,g,v),s[rl]=u.current,$c(s.nodeType===8?s.parentNode:s),new sM(u)};Xr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(xt(188)):(s=Object.keys(s).join(","),Error(xt(268,s)));return s=YC(u),s=s===null?null:s.stateNode,s};Xr.flushSync=function(s){return bu(s)};Xr.hydrate=function(s,u,c){if(!Qy(u))throw Error(xt(200));return qy(null,s,u,!0,c)};Xr.hydrateRoot=function(s,u,c){if(!lM(s))throw Error(xt(405));var g=c!=null&&c.hydratedSources||null,v=!1,w="",P=xL;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),u=vL(u,null,s,1,c??null,v,!1,w,P),s[rl]=u.current,$c(s),g)for(s=0;s<g.length;s++)c=g[s],v=c._getVersion,v=v(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,v]:u.mutableSourceEagerHydrationData.push(c,v);return new Zy(u)};Xr.render=function(s,u,c){if(!Qy(u))throw Error(xt(200));return qy(null,s,u,!1,c)};Xr.unmountComponentAtNode=function(s){if(!Qy(s))throw Error(xt(40));return s._reactRootContainer?(bu(function(){qy(null,null,s,!1,function(){s._reactRootContainer=null,s[rl]=null})}),!0):!1};Xr.unstable_batchedUpdates=tM;Xr.unstable_renderSubtreeIntoContainer=function(s,u,c,g){if(!Qy(c))throw Error(xt(200));if(s==null||s._reactInternals===void 0)throw Error(xt(38));return qy(s,u,c,!1,g)};Xr.version="18.2.0-next-9e3b772b8-20220608";function wL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wL)}catch(s){console.error(s)}}wL(),vC.exports=Xr;var ML=vC.exports,GN=ML;gx.createRoot=GN.createRoot,gx.hydrateRoot=GN.hydrateRoot;var SL={exports:{}},kL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=ve;function NE(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var CE=typeof Object.is=="function"?Object.is:NE,TE=Ha.useState,LE=Ha.useEffect,jE=Ha.useLayoutEffect,OE=Ha.useDebugValue;function FE(s,u){var c=u(),g=TE({inst:{value:c,getSnapshot:u}}),v=g[0].inst,w=g[1];return jE(function(){v.value=c,v.getSnapshot=u,ox(v)&&w({inst:v})},[s,c,u]),LE(function(){return ox(v)&&w({inst:v}),s(function(){ox(v)&&w({inst:v})})},[s]),OE(c),c}function ox(s){var u=s.getSnapshot;s=s.value;try{var c=u();return!CE(s,c)}catch{return!0}}function EE(s,u){return u()}var AE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EE:FE;kL.useSyncExternalStore=Ha.useSyncExternalStore!==void 0?Ha.useSyncExternalStore:AE;SL.exports=kL;var DE=SL.exports,IE={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by=ve,RE=DE;function BE(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var zE=typeof Object.is=="function"?Object.is:BE,VE=RE.useSyncExternalStore,YE=by.useRef,UE=by.useEffect,GE=by.useMemo,XE=by.useDebugValue;IE.useSyncExternalStoreWithSelector=function(s,u,c,g,v){var w=YE(null);if(w.current===null){var P={hasValue:!1,value:null};w.current=P}else P=w.current;w=GE(function(){function E(st){if(!R){if(R=!0,V=st,st=g(st),v!==void 0&&P.hasValue){var ut=P.value;if(v(ut,st))return B=ut}return B=st}if(ut=B,zE(V,st))return ut;var G=g(st);return v!==void 0&&v(ut,G)?ut:(V=st,B=G)}var R=!1,V,B,J=c===void 0?null:c;return[function(){return E(u())},J===null?void 0:function(){return E(J())}]},[u,c,g,v]);var F=VE(s,w[0],w[1]);return UE(function(){P.hasValue=!0,P.value=F},[F]),XE(F),F};function _E(s){s()}let PL=_E;const HE=s=>PL=s,KE=()=>PL,XN=Symbol.for("react-redux-context"),_N=typeof globalThis<"u"?globalThis:{};function WE(){var s;if(!ve.createContext)return{};const u=(s=_N[XN])!=null?s:_N[XN]=new Map;let c=u.get(ve.createContext);return c||(c=ve.createContext(null),u.set(ve.createContext,c)),c}const $E=WE();var NL={exports:{}},Oe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=typeof Symbol=="function"&&Symbol.for,uM=an?Symbol.for("react.element"):60103,hM=an?Symbol.for("react.portal"):60106,t0=an?Symbol.for("react.fragment"):60107,e0=an?Symbol.for("react.strict_mode"):60108,i0=an?Symbol.for("react.profiler"):60114,n0=an?Symbol.for("react.provider"):60109,r0=an?Symbol.for("react.context"):60110,aM=an?Symbol.for("react.async_mode"):60111,o0=an?Symbol.for("react.concurrent_mode"):60111,s0=an?Symbol.for("react.forward_ref"):60112,l0=an?Symbol.for("react.suspense"):60113,JE=an?Symbol.for("react.suspense_list"):60120,u0=an?Symbol.for("react.memo"):60115,h0=an?Symbol.for("react.lazy"):60116,ZE=an?Symbol.for("react.block"):60121,QE=an?Symbol.for("react.fundamental"):60117,qE=an?Symbol.for("react.responder"):60118,bE=an?Symbol.for("react.scope"):60119;function Hr(s){if(typeof s=="object"&&s!==null){var u=s.$$typeof;switch(u){case uM:switch(s=s.type,s){case aM:case o0:case t0:case i0:case e0:case l0:return s;default:switch(s=s&&s.$$typeof,s){case r0:case s0:case h0:case u0:case n0:return s;default:return u}}case hM:return u}}}function CL(s){return Hr(s)===o0}Oe.AsyncMode=aM;Oe.ConcurrentMode=o0;Oe.ContextConsumer=r0;Oe.ContextProvider=n0;Oe.Element=uM;Oe.ForwardRef=s0;Oe.Fragment=t0;Oe.Lazy=h0;Oe.Memo=u0;Oe.Portal=hM;Oe.Profiler=i0;Oe.StrictMode=e0;Oe.Suspense=l0;Oe.isAsyncMode=function(s){return CL(s)||Hr(s)===aM};Oe.isConcurrentMode=CL;Oe.isContextConsumer=function(s){return Hr(s)===r0};Oe.isContextProvider=function(s){return Hr(s)===n0};Oe.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===uM};Oe.isForwardRef=function(s){return Hr(s)===s0};Oe.isFragment=function(s){return Hr(s)===t0};Oe.isLazy=function(s){return Hr(s)===h0};Oe.isMemo=function(s){return Hr(s)===u0};Oe.isPortal=function(s){return Hr(s)===hM};Oe.isProfiler=function(s){return Hr(s)===i0};Oe.isStrictMode=function(s){return Hr(s)===e0};Oe.isSuspense=function(s){return Hr(s)===l0};Oe.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===t0||s===o0||s===i0||s===e0||s===l0||s===JE||typeof s=="object"&&s!==null&&(s.$$typeof===h0||s.$$typeof===u0||s.$$typeof===n0||s.$$typeof===r0||s.$$typeof===s0||s.$$typeof===QE||s.$$typeof===qE||s.$$typeof===bE||s.$$typeof===ZE)};Oe.typeOf=Hr;NL.exports=Oe;var tA=NL.exports,TL=tA,eA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},iA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LL={};LL[TL.ForwardRef]=eA;LL[TL.Memo]=iA;var Ie={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM=Symbol.for("react.element"),cM=Symbol.for("react.portal"),a0=Symbol.for("react.fragment"),f0=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),nA=Symbol.for("react.server_context"),g0=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),m0=Symbol.for("react.suspense_list"),v0=Symbol.for("react.memo"),x0=Symbol.for("react.lazy"),rA=Symbol.for("react.offscreen"),jL;jL=Symbol.for("react.module.reference");function mo(s){if(typeof s=="object"&&s!==null){var u=s.$$typeof;switch(u){case fM:switch(s=s.type,s){case a0:case c0:case f0:case y0:case m0:return s;default:switch(s=s&&s.$$typeof,s){case nA:case d0:case g0:case x0:case v0:case p0:return s;default:return u}}case cM:return u}}}Ie.ContextConsumer=d0;Ie.ContextProvider=p0;Ie.Element=fM;Ie.ForwardRef=g0;Ie.Fragment=a0;Ie.Lazy=x0;Ie.Memo=v0;Ie.Portal=cM;Ie.Profiler=c0;Ie.StrictMode=f0;Ie.Suspense=y0;Ie.SuspenseList=m0;Ie.isAsyncMode=function(){return!1};Ie.isConcurrentMode=function(){return!1};Ie.isContextConsumer=function(s){return mo(s)===d0};Ie.isContextProvider=function(s){return mo(s)===p0};Ie.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===fM};Ie.isForwardRef=function(s){return mo(s)===g0};Ie.isFragment=function(s){return mo(s)===a0};Ie.isLazy=function(s){return mo(s)===x0};Ie.isMemo=function(s){return mo(s)===v0};Ie.isPortal=function(s){return mo(s)===cM};Ie.isProfiler=function(s){return mo(s)===c0};Ie.isStrictMode=function(s){return mo(s)===f0};Ie.isSuspense=function(s){return mo(s)===y0};Ie.isSuspenseList=function(s){return mo(s)===m0};Ie.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===a0||s===c0||s===f0||s===y0||s===m0||s===rA||typeof s=="object"&&s!==null&&(s.$$typeof===x0||s.$$typeof===v0||s.$$typeof===p0||s.$$typeof===d0||s.$$typeof===g0||s.$$typeof===jL||s.getModuleId!==void 0)};Ie.typeOf=mo;function oA(){const s=KE();let u=null,c=null;return{clear(){u=null,c=null},notify(){s(()=>{let g=u;for(;g;)g.callback(),g=g.next})},get(){let g=[],v=u;for(;v;)g.push(v),v=v.next;return g},subscribe(g){let v=!0,w=c={callback:g,next:null,prev:c};return w.prev?w.prev.next=w:u=w,function(){!v||u===null||(v=!1,w.next?w.next.prev=w.prev:c=w.prev,w.prev?w.prev.next=w.next:u=w.next)}}}}const HN={notify(){},get:()=>[]};function sA(s,u){let c,g=HN;function v(B){return E(),g.subscribe(B)}function w(){g.notify()}function P(){V.onStateChange&&V.onStateChange()}function F(){return!!c}function E(){c||(c=u?u.addNestedSub(P):s.subscribe(P),g=oA())}function R(){c&&(c(),c=void 0,g.clear(),g=HN)}const V={addNestedSub:v,notifyNestedSubs:w,handleChangeWrapper:P,isSubscribed:F,trySubscribe:E,tryUnsubscribe:R,getListeners:()=>g};return V}const lA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uA=lA?ve.useLayoutEffect:ve.useEffect;function hA({store:s,context:u,children:c,serverState:g,stabilityCheck:v="once",noopCheck:w="once"}){const P=ve.useMemo(()=>{const R=sA(s);return{store:s,subscription:R,getServerState:g?()=>g:void 0,stabilityCheck:v,noopCheck:w}},[s,g,v,w]),F=ve.useMemo(()=>s.getState(),[s]);uA(()=>{const{subscription:R}=P;return R.onStateChange=R.notifyNestedSubs,R.trySubscribe(),F!==s.getState()&&R.notifyNestedSubs(),()=>{R.tryUnsubscribe(),R.onStateChange=void 0}},[P,F]);const E=u||$E;return ve.createElement(E.Provider,{value:P},c)}HE(ML.unstable_batchedUpdates);function Yo(s){for(var u=arguments.length,c=Array(u>1?u-1:0),g=1;g<u;g++)c[g-1]=arguments[g];throw Error("[Immer] minified error nr: "+s+(c.length?" "+c.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function eu(s){return!!s&&!!s[qe]}function ll(s){var u;return!!s&&(function(c){if(!c||typeof c!="object")return!1;var g=Object.getPrototypeOf(c);if(g===null)return!0;var v=Object.hasOwnProperty.call(g,"constructor")&&g.constructor;return v===Object||typeof v=="function"&&Function.toString.call(v)===vA}(s)||Array.isArray(s)||!!s[qN]||!!(!((u=s.constructor)===null||u===void 0)&&u[qN])||pM(s)||dM(s))}function th(s,u,c){c===void 0&&(c=!1),Za(s)===0?(c?Object.keys:Ra)(s).forEach(function(g){c&&typeof g=="symbol"||u(g,s[g],s)}):s.forEach(function(g,v){return u(v,g,s)})}function Za(s){var u=s[qe];return u?u.i>3?u.i-4:u.i:Array.isArray(s)?1:pM(s)?2:dM(s)?3:0}function Ia(s,u){return Za(s)===2?s.has(u):Object.prototype.hasOwnProperty.call(s,u)}function aA(s,u){return Za(s)===2?s.get(u):s[u]}function OL(s,u,c){var g=Za(s);g===2?s.set(u,c):g===3?s.add(c):s[u]=c}function FL(s,u){return s===u?s!==0||1/s==1/u:s!=s&&u!=u}function pM(s){return yA&&s instanceof Map}function dM(s){return mA&&s instanceof Set}function Xu(s){return s.o||s.t}function gM(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var u=AL(s);delete u[qe];for(var c=Ra(u),g=0;g<c.length;g++){var v=c[g],w=u[v];w.writable===!1&&(w.writable=!0,w.configurable=!0),(w.get||w.set)&&(u[v]={configurable:!0,writable:!0,enumerable:w.enumerable,value:s[v]})}return Object.create(Object.getPrototypeOf(s),u)}function yM(s,u){return u===void 0&&(u=!1),mM(s)||eu(s)||!ll(s)||(Za(s)>1&&(s.set=s.add=s.clear=s.delete=fA),Object.freeze(s),u&&th(s,function(c,g){return yM(g,!0)},!0)),s}function fA(){Yo(2)}function mM(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Ps(s){var u=fw[s];return u||Yo(18,s),u}function cA(s,u){fw[s]||(fw[s]=u)}function uw(){return np}function sx(s,u){u&&(Ps("Patches"),s.u=[],s.s=[],s.v=u)}function Ey(s){hw(s),s.p.forEach(pA),s.p=null}function hw(s){s===np&&(np=s.l)}function KN(s){return np={p:[],l:np,h:s,m:!0,_:0}}function pA(s){var u=s[qe];u.i===0||u.i===1?u.j():u.g=!0}function lx(s,u){u._=u.p.length;var c=u.p[0],g=s!==void 0&&s!==c;return u.h.O||Ps("ES5").S(u,s,g),g?(c[qe].P&&(Ey(u),Yo(4)),ll(s)&&(s=Ay(u,s),u.l||Dy(u,s)),u.u&&Ps("Patches").M(c[qe].t,s,u.u,u.s)):s=Ay(u,c,[]),Ey(u),u.u&&u.v(u.u,u.s),s!==EL?s:void 0}function Ay(s,u,c){if(mM(u))return u;var g=u[qe];if(!g)return th(u,function(F,E){return WN(s,g,u,F,E,c)},!0),u;if(g.A!==s)return u;if(!g.P)return Dy(s,g.t,!0),g.t;if(!g.I){g.I=!0,g.A._--;var v=g.i===4||g.i===5?g.o=gM(g.k):g.o,w=v,P=!1;g.i===3&&(w=new Set(v),v.clear(),P=!0),th(w,function(F,E){return WN(s,g,v,F,E,c,P)}),Dy(s,v,!1),c&&s.u&&Ps("Patches").N(g,c,s.u,s.s)}return g.o}function WN(s,u,c,g,v,w,P){if(eu(v)){var F=Ay(s,v,w&&u&&u.i!==3&&!Ia(u.R,g)?w.concat(g):void 0);if(OL(c,g,F),!eu(F))return;s.m=!1}else P&&c.add(v);if(ll(v)&&!mM(v)){if(!s.h.D&&s._<1)return;Ay(s,v),u&&u.A.l||Dy(s,v)}}function Dy(s,u,c){c===void 0&&(c=!1),!s.l&&s.h.D&&s.m&&yM(u,c)}function ux(s,u){var c=s[qe];return(c?Xu(c):s)[u]}function $N(s,u){if(u in s)for(var c=Object.getPrototypeOf(s);c;){var g=Object.getOwnPropertyDescriptor(c,u);if(g)return g;c=Object.getPrototypeOf(c)}}function Yl(s){s.P||(s.P=!0,s.l&&Yl(s.l))}function hx(s){s.o||(s.o=gM(s.t))}function aw(s,u,c){var g=pM(u)?Ps("MapSet").F(u,c):dM(u)?Ps("MapSet").T(u,c):s.O?function(v,w){var P=Array.isArray(v),F={i:P?1:0,A:w?w.A:uw(),P:!1,I:!1,R:{},l:w,t:v,k:null,o:null,j:null,C:!1},E=F,R=rp;P&&(E=[F],R=Oc);var V=Proxy.revocable(E,R),B=V.revoke,J=V.proxy;return F.k=J,F.j=B,J}(u,c):Ps("ES5").J(u,c);return(c?c.A:uw()).p.push(g),g}function dA(s){return eu(s)||Yo(22,s),function u(c){if(!ll(c))return c;var g,v=c[qe],w=Za(c);if(v){if(!v.P&&(v.i<4||!Ps("ES5").K(v)))return v.t;v.I=!0,g=JN(c,w),v.I=!1}else g=JN(c,w);return th(g,function(P,F){v&&aA(v.t,P)===F||OL(g,P,u(F))}),w===3?new Set(g):g}(s)}function JN(s,u){switch(u){case 2:return new Map(s);case 3:return Array.from(s)}return gM(s)}function gA(){function s(w,P){var F=v[w];return F?F.enumerable=P:v[w]=F={configurable:!0,enumerable:P,get:function(){var E=this[qe];return rp.get(E,w)},set:function(E){var R=this[qe];rp.set(R,w,E)}},F}function u(w){for(var P=w.length-1;P>=0;P--){var F=w[P][qe];if(!F.P)switch(F.i){case 5:g(F)&&Yl(F);break;case 4:c(F)&&Yl(F)}}}function c(w){for(var P=w.t,F=w.k,E=Ra(F),R=E.length-1;R>=0;R--){var V=E[R];if(V!==qe){var B=P[V];if(B===void 0&&!Ia(P,V))return!0;var J=F[V],st=J&&J[qe];if(st?st.t!==B:!FL(J,B))return!0}}var ut=!!P[qe];return E.length!==Ra(P).length+(ut?0:1)}function g(w){var P=w.k;if(P.length!==w.t.length)return!0;var F=Object.getOwnPropertyDescriptor(P,P.length-1);if(F&&!F.get)return!0;for(var E=0;E<P.length;E++)if(!P.hasOwnProperty(E))return!0;return!1}var v={};cA("ES5",{J:function(w,P){var F=Array.isArray(w),E=function(V,B){if(V){for(var J=Array(B.length),st=0;st<B.length;st++)Object.defineProperty(J,""+st,s(st,!0));return J}var ut=AL(B);delete ut[qe];for(var G=Ra(ut),Ot=0;Ot<G.length;Ot++){var X=G[Ot];ut[X]=s(X,V||!!ut[X].enumerable)}return Object.create(Object.getPrototypeOf(B),ut)}(F,w),R={i:F?5:4,A:P?P.A:uw(),P:!1,I:!1,R:{},l:P,t:w,k:E,o:null,g:!1,C:!1};return Object.defineProperty(E,qe,{value:R,writable:!0}),E},S:function(w,P,F){F?eu(P)&&P[qe].A===w&&u(w.p):(w.u&&function E(R){if(R&&typeof R=="object"){var V=R[qe];if(V){var B=V.t,J=V.k,st=V.R,ut=V.i;if(ut===4)th(J,function(W){W!==qe&&(B[W]!==void 0||Ia(B,W)?st[W]||E(J[W]):(st[W]=!0,Yl(V)))}),th(B,function(W){J[W]!==void 0||Ia(J,W)||(st[W]=!1,Yl(V))});else if(ut===5){if(g(V)&&(Yl(V),st.length=!0),J.length<B.length)for(var G=J.length;G<B.length;G++)st[G]=!1;else for(var Ot=B.length;Ot<J.length;Ot++)st[Ot]=!0;for(var X=Math.min(J.length,B.length),U=0;U<X;U++)J.hasOwnProperty(U)||(st[U]=!0),st[U]===void 0&&E(J[U])}}}}(w.p[0]),u(w.p))},K:function(w){return w.i===4?c(w):g(w)}})}var ZN,np,vM=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",yA=typeof Map<"u",mA=typeof Set<"u",QN=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",EL=vM?Symbol.for("immer-nothing"):((ZN={})["immer-nothing"]=!0,ZN),qN=vM?Symbol.for("immer-draftable"):"__$immer_draftable",qe=vM?Symbol.for("immer-state"):"__$immer_state",vA=""+Object.prototype.constructor,Ra=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,AL=Object.getOwnPropertyDescriptors||function(s){var u={};return Ra(s).forEach(function(c){u[c]=Object.getOwnPropertyDescriptor(s,c)}),u},fw={},rp={get:function(s,u){if(u===qe)return s;var c=Xu(s);if(!Ia(c,u))return function(v,w,P){var F,E=$N(w,P);return E?"value"in E?E.value:(F=E.get)===null||F===void 0?void 0:F.call(v.k):void 0}(s,c,u);var g=c[u];return s.I||!ll(g)?g:g===ux(s.t,u)?(hx(s),s.o[u]=aw(s.A.h,g,s)):g},has:function(s,u){return u in Xu(s)},ownKeys:function(s){return Reflect.ownKeys(Xu(s))},set:function(s,u,c){var g=$N(Xu(s),u);if(g!=null&&g.set)return g.set.call(s.k,c),!0;if(!s.P){var v=ux(Xu(s),u),w=v==null?void 0:v[qe];if(w&&w.t===c)return s.o[u]=c,s.R[u]=!1,!0;if(FL(c,v)&&(c!==void 0||Ia(s.t,u)))return!0;hx(s),Yl(s)}return s.o[u]===c&&(c!==void 0||u in s.o)||Number.isNaN(c)&&Number.isNaN(s.o[u])||(s.o[u]=c,s.R[u]=!0),!0},deleteProperty:function(s,u){return ux(s.t,u)!==void 0||u in s.t?(s.R[u]=!1,hx(s),Yl(s)):delete s.R[u],s.o&&delete s.o[u],!0},getOwnPropertyDescriptor:function(s,u){var c=Xu(s),g=Reflect.getOwnPropertyDescriptor(c,u);return g&&{writable:!0,configurable:s.i!==1||u!=="length",enumerable:g.enumerable,value:c[u]}},defineProperty:function(){Yo(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Yo(12)}},Oc={};th(rp,function(s,u){Oc[s]=function(){return arguments[0]=arguments[0][0],u.apply(this,arguments)}}),Oc.deleteProperty=function(s,u){return Oc.set.call(this,s,u,void 0)},Oc.set=function(s,u,c){return rp.set.call(this,s[0],u,c,s[0])};var xA=function(){function s(c){var g=this;this.O=QN,this.D=!0,this.produce=function(v,w,P){if(typeof v=="function"&&typeof w!="function"){var F=w;w=v;var E=g;return function(G){var Ot=this;G===void 0&&(G=F);for(var X=arguments.length,U=Array(X>1?X-1:0),W=1;W<X;W++)U[W-1]=arguments[W];return E.produce(G,function(I){var nt;return(nt=w).call.apply(nt,[Ot,I].concat(U))})}}var R;if(typeof w!="function"&&Yo(6),P!==void 0&&typeof P!="function"&&Yo(7),ll(v)){var V=KN(g),B=aw(g,v,void 0),J=!0;try{R=w(B),J=!1}finally{J?Ey(V):hw(V)}return typeof Promise<"u"&&R instanceof Promise?R.then(function(G){return sx(V,P),lx(G,V)},function(G){throw Ey(V),G}):(sx(V,P),lx(R,V))}if(!v||typeof v!="object"){if((R=w(v))===void 0&&(R=v),R===EL&&(R=void 0),g.D&&yM(R,!0),P){var st=[],ut=[];Ps("Patches").M(v,R,st,ut),P(st,ut)}return R}Yo(21,v)},this.produceWithPatches=function(v,w){if(typeof v=="function")return function(R){for(var V=arguments.length,B=Array(V>1?V-1:0),J=1;J<V;J++)B[J-1]=arguments[J];return g.produceWithPatches(R,function(st){return v.apply(void 0,[st].concat(B))})};var P,F,E=g.produce(v,w,function(R,V){P=R,F=V});return typeof Promise<"u"&&E instanceof Promise?E.then(function(R){return[R,P,F]}):[E,P,F]},typeof(c==null?void 0:c.useProxies)=="boolean"&&this.setUseProxies(c.useProxies),typeof(c==null?void 0:c.autoFreeze)=="boolean"&&this.setAutoFreeze(c.autoFreeze)}var u=s.prototype;return u.createDraft=function(c){ll(c)||Yo(8),eu(c)&&(c=dA(c));var g=KN(this),v=aw(this,c,void 0);return v[qe].C=!0,hw(g),v},u.finishDraft=function(c,g){var v=c&&c[qe],w=v.A;return sx(w,g),lx(void 0,w)},u.setAutoFreeze=function(c){this.D=c},u.setUseProxies=function(c){c&&!QN&&Yo(20),this.O=c},u.applyPatches=function(c,g){var v;for(v=g.length-1;v>=0;v--){var w=g[v];if(w.path.length===0&&w.op==="replace"){c=w.value;break}}v>-1&&(g=g.slice(v+1));var P=Ps("Patches").$;return eu(c)?P(c,g):this.produce(c,function(F){return P(F,g)})},s}(),Gr=new xA,DL=Gr.produce;Gr.produceWithPatches.bind(Gr);Gr.setAutoFreeze.bind(Gr);Gr.setUseProxies.bind(Gr);Gr.applyPatches.bind(Gr);Gr.createDraft.bind(Gr);Gr.finishDraft.bind(Gr);function op(s){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},op(s)}function wA(s,u){if(op(s)!=="object"||s===null)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var g=c.call(s,u||"default");if(op(g)!=="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(s)}function MA(s){var u=wA(s,"string");return op(u)==="symbol"?u:String(u)}function SA(s,u,c){return u=MA(u),u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,s}function bN(s,u){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);u&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,g)}return c}function tC(s){for(var u=1;u<arguments.length;u++){var c=arguments[u]!=null?arguments[u]:{};u%2?bN(Object(c),!0).forEach(function(g){SA(s,g,c[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):bN(Object(c)).forEach(function(g){Object.defineProperty(s,g,Object.getOwnPropertyDescriptor(c,g))})}return s}function Yn(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var eC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ax=function(){return Math.random().toString(36).substring(7).split("").join(".")},Iy={INIT:"@@redux/INIT"+ax(),REPLACE:"@@redux/REPLACE"+ax(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ax()}};function kA(s){if(typeof s!="object"||s===null)return!1;for(var u=s;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(s)===u}function IL(s,u,c){var g;if(typeof u=="function"&&typeof c=="function"||typeof c=="function"&&typeof arguments[3]=="function")throw new Error(Yn(0));if(typeof u=="function"&&typeof c>"u"&&(c=u,u=void 0),typeof c<"u"){if(typeof c!="function")throw new Error(Yn(1));return c(IL)(s,u)}if(typeof s!="function")throw new Error(Yn(2));var v=s,w=u,P=[],F=P,E=!1;function R(){F===P&&(F=P.slice())}function V(){if(E)throw new Error(Yn(3));return w}function B(G){if(typeof G!="function")throw new Error(Yn(4));if(E)throw new Error(Yn(5));var Ot=!0;return R(),F.push(G),function(){if(Ot){if(E)throw new Error(Yn(6));Ot=!1,R();var U=F.indexOf(G);F.splice(U,1),P=null}}}function J(G){if(!kA(G))throw new Error(Yn(7));if(typeof G.type>"u")throw new Error(Yn(8));if(E)throw new Error(Yn(9));try{E=!0,w=v(w,G)}finally{E=!1}for(var Ot=P=F,X=0;X<Ot.length;X++){var U=Ot[X];U()}return G}function st(G){if(typeof G!="function")throw new Error(Yn(10));v=G,J({type:Iy.REPLACE})}function ut(){var G,Ot=B;return G={subscribe:function(U){if(typeof U!="object"||U===null)throw new Error(Yn(11));function W(){U.next&&U.next(V())}W();var I=Ot(W);return{unsubscribe:I}}},G[eC]=function(){return this},G}return J({type:Iy.INIT}),g={dispatch:J,subscribe:B,getState:V,replaceReducer:st},g[eC]=ut,g}function PA(s){Object.keys(s).forEach(function(u){var c=s[u],g=c(void 0,{type:Iy.INIT});if(typeof g>"u")throw new Error(Yn(12));if(typeof c(void 0,{type:Iy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yn(13))})}function NA(s){for(var u=Object.keys(s),c={},g=0;g<u.length;g++){var v=u[g];typeof s[v]=="function"&&(c[v]=s[v])}var w=Object.keys(c),P;try{PA(c)}catch(F){P=F}return function(E,R){if(E===void 0&&(E={}),P)throw P;for(var V=!1,B={},J=0;J<w.length;J++){var st=w[J],ut=c[st],G=E[st],Ot=ut(G,R);if(typeof Ot>"u")throw R&&R.type,new Error(Yn(14));B[st]=Ot,V=V||Ot!==G}return V=V||w.length!==Object.keys(E).length,V?B:E}}function Ry(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];return u.length===0?function(g){return g}:u.length===1?u[0]:u.reduce(function(g,v){return function(){return g(v.apply(void 0,arguments))}})}function CA(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];return function(g){return function(){var v=g.apply(void 0,arguments),w=function(){throw new Error(Yn(15))},P={getState:v.getState,dispatch:function(){return w.apply(void 0,arguments)}},F=u.map(function(E){return E(P)});return w=Ry.apply(void 0,F)(v.dispatch),tC(tC({},v),{},{dispatch:w})}}}function RL(s){var u=function(g){var v=g.dispatch,w=g.getState;return function(P){return function(F){return typeof F=="function"?F(v,w,s):P(F)}}};return u}var BL=RL();BL.withExtraArgument=RL;const iC=BL;var zL=globalThis&&globalThis.__extends||function(){var s=function(u,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(g[w]=v[w])},s(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(u,c);function g(){this.constructor=u}u.prototype=c===null?Object.create(c):(g.prototype=c.prototype,new g)}}(),TA=globalThis&&globalThis.__generator||function(s,u){var c={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,P;return P={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function F(R){return function(V){return E([R,V])}}function E(R){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,v&&(w=R[0]&2?v.return:R[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,R[1])).done)return w;switch(v=0,w&&(R=[R[0]&2,w.value]),R[0]){case 0:case 1:w=R;break;case 4:return c.label++,{value:R[1],done:!1};case 5:c.label++,v=R[1],R=[0];continue;case 7:R=c.ops.pop(),c.trys.pop();continue;default:if(w=c.trys,!(w=w.length>0&&w[w.length-1])&&(R[0]===6||R[0]===2)){c=0;continue}if(R[0]===3&&(!w||R[1]>w[0]&&R[1]<w[3])){c.label=R[1];break}if(R[0]===6&&c.label<w[1]){c.label=w[1],w=R;break}if(w&&c.label<w[2]){c.label=w[2],c.ops.push(R);break}w[2]&&c.ops.pop(),c.trys.pop();continue}R=u.call(s,c)}catch(V){R=[6,V],v=0}finally{g=w=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},Ka=globalThis&&globalThis.__spreadArray||function(s,u){for(var c=0,g=u.length,v=s.length;c<g;c++,v++)s[v]=u[c];return s},LA=Object.defineProperty,jA=Object.defineProperties,OA=Object.getOwnPropertyDescriptors,nC=Object.getOwnPropertySymbols,FA=Object.prototype.hasOwnProperty,EA=Object.prototype.propertyIsEnumerable,rC=function(s,u,c){return u in s?LA(s,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[u]=c},Ql=function(s,u){for(var c in u||(u={}))FA.call(u,c)&&rC(s,c,u[c]);if(nC)for(var g=0,v=nC(u);g<v.length;g++){var c=v[g];EA.call(u,c)&&rC(s,c,u[c])}return s},fx=function(s,u){return jA(s,OA(u))},AA=function(s,u,c){return new Promise(function(g,v){var w=function(E){try{F(c.next(E))}catch(R){v(R)}},P=function(E){try{F(c.throw(E))}catch(R){v(R)}},F=function(E){return E.done?g(E.value):Promise.resolve(E.value).then(w,P)};F((c=c.apply(s,u)).next())})},DA=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ry:Ry.apply(null,arguments)};function IA(s){if(typeof s!="object"||s===null)return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;for(var c=u;Object.getPrototypeOf(c)!==null;)c=Object.getPrototypeOf(c);return u===c}var RA=function(s){zL(u,s);function u(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];var v=s.apply(this,c)||this;return Object.setPrototypeOf(v,u.prototype),v}return Object.defineProperty(u,Symbol.species,{get:function(){return u},enumerable:!1,configurable:!0}),u.prototype.concat=function(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];return s.prototype.concat.apply(this,c)},u.prototype.prepend=function(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];return c.length===1&&Array.isArray(c[0])?new(u.bind.apply(u,Ka([void 0],c[0].concat(this)))):new(u.bind.apply(u,Ka([void 0],c.concat(this))))},u}(Array),BA=function(s){zL(u,s);function u(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];var v=s.apply(this,c)||this;return Object.setPrototypeOf(v,u.prototype),v}return Object.defineProperty(u,Symbol.species,{get:function(){return u},enumerable:!1,configurable:!0}),u.prototype.concat=function(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];return s.prototype.concat.apply(this,c)},u.prototype.prepend=function(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];return c.length===1&&Array.isArray(c[0])?new(u.bind.apply(u,Ka([void 0],c[0].concat(this)))):new(u.bind.apply(u,Ka([void 0],c.concat(this))))},u}(Array);function cw(s){return ll(s)?DL(s,function(){}):s}function zA(s){return typeof s=="boolean"}function VA(){return function(u){return YA(u)}}function YA(s){s===void 0&&(s={});var u=s.thunk,c=u===void 0?!0:u;s.immutableCheck,s.serializableCheck;var g=new RA;return c&&(zA(c)?g.push(iC):g.push(iC.withExtraArgument(c.extraArgument))),g}var UA=!0;function GA(s){var u=VA(),c=s||{},g=c.reducer,v=g===void 0?void 0:g,w=c.middleware,P=w===void 0?u():w,F=c.devTools,E=F===void 0?!0:F,R=c.preloadedState,V=R===void 0?void 0:R,B=c.enhancers,J=B===void 0?void 0:B,st;if(typeof v=="function")st=v;else if(IA(v))st=NA(v);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var ut=P;typeof ut=="function"&&(ut=ut(u));var G=CA.apply(void 0,ut),Ot=Ry;E&&(Ot=DA(Ql({trace:!UA},typeof E=="object"&&E)));var X=new BA(G),U=X;Array.isArray(J)?U=Ka([G],J):typeof J=="function"&&(U=J(X));var W=Ot.apply(void 0,U);return IL(st,V,W)}function ql(s,u){function c(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];if(u){var w=u.apply(void 0,g);if(!w)throw new Error("prepareAction did not return an object");return Ql(Ql({type:s,payload:w.payload},"meta"in w&&{meta:w.meta}),"error"in w&&{error:w.error})}return{type:s,payload:g[0]}}return c.toString=function(){return""+s},c.type=s,c.match=function(g){return g.type===s},c}function VL(s){var u={},c=[],g,v={addCase:function(w,P){var F=typeof w=="string"?w:w.type;if(F in u)throw new Error("addCase cannot be called with two reducers for the same action type");return u[F]=P,v},addMatcher:function(w,P){return c.push({matcher:w,reducer:P}),v},addDefaultCase:function(w){return g=w,v}};return s(v),[u,c,g]}function XA(s){return typeof s=="function"}function _A(s,u,c,g){c===void 0&&(c=[]);var v=typeof u=="function"?VL(u):[u,c,g],w=v[0],P=v[1],F=v[2],E;if(XA(s))E=function(){return cw(s())};else{var R=cw(s);E=function(){return R}}function V(B,J){B===void 0&&(B=E());var st=Ka([w[J.type]],P.filter(function(ut){var G=ut.matcher;return G(J)}).map(function(ut){var G=ut.reducer;return G}));return st.filter(function(ut){return!!ut}).length===0&&(st=[F]),st.reduce(function(ut,G){if(G)if(eu(ut)){var Ot=ut,X=G(Ot,J);return X===void 0?ut:X}else{if(ll(ut))return DL(ut,function(U){return G(U,J)});var X=G(ut,J);if(X===void 0){if(ut===null)return ut;throw Error("A case reducer on a non-draftable value must not return undefined")}return X}return ut},B)}return V.getInitialState=E,V}function HA(s,u){return s+"/"+u}function KA(s){var u=s.name;if(!u)throw new Error("`name` is a required option for createSlice");typeof process<"u";var c=typeof s.initialState=="function"?s.initialState:cw(s.initialState),g=s.reducers||{},v=Object.keys(g),w={},P={},F={};v.forEach(function(V){var B=g[V],J=HA(u,V),st,ut;"reducer"in B?(st=B.reducer,ut=B.prepare):st=B,w[V]=st,P[J]=st,F[V]=ut?ql(J,ut):ql(J)});function E(){var V=typeof s.extraReducers=="function"?VL(s.extraReducers):[s.extraReducers],B=V[0],J=B===void 0?{}:B,st=V[1],ut=st===void 0?[]:st,G=V[2],Ot=G===void 0?void 0:G,X=Ql(Ql({},J),P);return _A(c,function(U){for(var W in X)U.addCase(W,X[W]);for(var I=0,nt=ut;I<nt.length;I++){var at=nt[I];U.addMatcher(at.matcher,at.reducer)}Ot&&U.addDefaultCase(Ot)})}var R;return{name:u,reducer:function(V,B){return R||(R=E()),R(V,B)},actions:F,caseReducers:w,getInitialState:function(){return R||(R=E()),R.getInitialState()}}}var WA="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$A=function(s){s===void 0&&(s=21);for(var u="",c=s;c--;)u+=WA[Math.random()*64|0];return u},JA=["name","message","stack","code"],cx=function(){function s(u,c){this.payload=u,this.meta=c}return s}(),oC=function(){function s(u,c){this.payload=u,this.meta=c}return s}(),ZA=function(s){if(typeof s=="object"&&s!==null){for(var u={},c=0,g=JA;c<g.length;c++){var v=g[c];typeof s[v]=="string"&&(u[v]=s[v])}return u}return{message:String(s)}},QA=function(){function s(u,c,g){var v=ql(u+"/fulfilled",function(R,V,B,J){return{payload:R,meta:fx(Ql({},J||{}),{arg:B,requestId:V,requestStatus:"fulfilled"})}}),w=ql(u+"/pending",function(R,V,B){return{payload:void 0,meta:fx(Ql({},B||{}),{arg:V,requestId:R,requestStatus:"pending"})}}),P=ql(u+"/rejected",function(R,V,B,J,st){return{payload:J,error:(g&&g.serializeError||ZA)(R||"Rejected"),meta:fx(Ql({},st||{}),{arg:B,requestId:V,rejectedWithValue:!!J,requestStatus:"rejected",aborted:(R==null?void 0:R.name)==="AbortError",condition:(R==null?void 0:R.name)==="ConditionError"})}}),F=typeof AbortController<"u"?AbortController:function(){function R(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return R.prototype.abort=function(){},R}();function E(R){return function(V,B,J){var st=g!=null&&g.idGenerator?g.idGenerator(R):$A(),ut=new F,G;function Ot(U){G=U,ut.abort()}var X=function(){return AA(this,null,function(){var U,W,I,nt,at,kt,yt;return TA(this,function(Bt){switch(Bt.label){case 0:return Bt.trys.push([0,4,,5]),nt=(U=g==null?void 0:g.condition)==null?void 0:U.call(g,R,{getState:B,extra:J}),bA(nt)?[4,nt]:[3,2];case 1:nt=Bt.sent(),Bt.label=2;case 2:if(nt===!1||ut.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return at=new Promise(function(Gt,He){return ut.signal.addEventListener("abort",function(){return He({name:"AbortError",message:G||"Aborted"})})}),V(w(st,R,(W=g==null?void 0:g.getPendingMeta)==null?void 0:W.call(g,{requestId:st,arg:R},{getState:B,extra:J}))),[4,Promise.race([at,Promise.resolve(c(R,{dispatch:V,getState:B,extra:J,requestId:st,signal:ut.signal,abort:Ot,rejectWithValue:function(Gt,He){return new cx(Gt,He)},fulfillWithValue:function(Gt,He){return new oC(Gt,He)}})).then(function(Gt){if(Gt instanceof cx)throw Gt;return Gt instanceof oC?v(Gt.payload,st,R,Gt.meta):v(Gt,st,R)})])];case 3:return I=Bt.sent(),[3,5];case 4:return kt=Bt.sent(),I=kt instanceof cx?P(null,st,R,kt.payload,kt.meta):P(kt,st,R),[3,5];case 5:return yt=g&&!g.dispatchConditionRejection&&P.match(I)&&I.meta.condition,yt||V(I),[2,I]}})})}();return Object.assign(X,{abort:Ot,requestId:st,arg:R,unwrap:function(){return X.then(qA)}})}}return Object.assign(E,{pending:w,rejected:P,fulfilled:v,typePrefix:u})}return s.withTypes=function(){return s},s}();function qA(s){if(s.meta&&s.meta.rejectedWithValue)throw s.payload;if(s.error)throw s.error;return s.payload}function bA(s){return s!==null&&typeof s=="object"&&typeof s.then=="function"}var xM="listenerMiddleware";ql(xM+"/add");ql(xM+"/removeAll");ql(xM+"/remove");var sC;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);gA();function tD(s=1){return new Promise(u=>setTimeout(()=>u({data:s}),500))}const eD={value:0,status:"idle"},px=QA("counter/fetchCount",async s=>(await tD(s)).data),iD=KA({name:"counter",initialState:eD,reducers:{increment:s=>{s.value+=1},decrement:s=>{s.value-=1},incrementByAmount:(s,u)=>{s.value+=u.payload}},extraReducers:s=>{s.addCase(px.pending,u=>{u.status="loading"}).addCase(px.fulfilled,(u,c)=>{u.status="idle",u.value+=c.payload}).addCase(px.rejected,u=>{u.status="failed"})}}),nD=iD.reducer,rD=GA({reducer:{counter:nD}});(function(){var s;function u(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function c(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:u(t)}}function g(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var v=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},w;if(typeof Object.setPrototypeOf=="function")w=Object.setPrototypeOf;else{var P;t:{var F={a:!0},E={};try{E.__proto__=F,P=E.a;break t}catch{}P=!1}w=P?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var R=w;function V(t,e){if(t.prototype=v(e.prototype),t.prototype.constructor=t,R)R(t,e);else for(var i in e)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.QA=e.prototype}var B=typeof global<"u"&&global!=null?global:self,J=typeof Object.assign=="function"?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function ut(t,e){if(e){var i=B;t=t.split(".");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}t=t[t.length-1],n=i[t],e=e(n),e!=n&&e!=null&&st(i,t,{writable:!0,value:e})}}ut("Object.assign",function(t){return t||J}),ut("Array.prototype.fill",function(t){return t||function(e,i,n){var r=this.length||0;for(0>i&&(i=Math.max(0,r+i)),(n==null||n>r)&&(n=r),n=Number(n),0>n&&(n=Math.max(0,r+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var G=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};G.requestAnimationFrame===void 0&&(G.setImmediate===void 0?G.requestAnimationFrame=function(t){G.setTimeout(t,0)}:G.requestAnimationFrame=G.setImmediate);function Ot(){}function X(t,e){var i=-1;return function(){var n=this,r=arguments;i!==-1&&G.clearTimeout(i),i=U(function(){i=-1,t.apply(n,r)},e)}}function U(t,e){return G.setTimeout(t,e)}function W(t){return G.document.createElement(t)}function I(t){throw Error(t)}function nt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),I(t)}function at(t,e,i,n){i=i===null?"*":typeof i=="string"?i:typeof i=="function"&&typeof i.className=="string"?i.className:"",n!==void 0&&(i+="."+n),I(i+" is not in the range "+e+": "+t)}function kt(t){G.console&&G.console.log(t)}function yt(t){return typeof t=="object"&&t!==null}function Bt(t){return Array.isArray(t)||G.NodeList&&t instanceof G.NodeList||G.HTMLCollection&&t instanceof G.HTMLCollection}function Gt(t){return Array.prototype.slice.call(t)}function He(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):I("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function Tr(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):I("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Vt(){var t=ai.pop();return t===void 0?[]:t}function zt(t){t.length=0,ai.push(t)}function Ns(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(yt(t)&&t.constructor)return Ns(t.constructor);return typeof t}function Xi(t){var e=t;return yt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function nh(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.CA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Nt(t,e,i){Object.defineProperty(bt.prototype,t,{get:e,set:i})}function pt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(i&15)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=i.join(""),t=t===""?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var o="",l=0;l<t.length;l++)i=(i+1)%256,n=(n+e[i])%256,r=e[i],e[i]=e[n],e[n]=r,o+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return o}var ee=G.navigator!==void 0&&0<G.navigator.userAgent.indexOf("Trident/7"),we=G.navigator!==void 0&&G.navigator.platform!==void 0&&G.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,ai=[];Ot.className="Util",Ot.Dx="32ab5ff3b26f42dc0ed90f21472913b5",Ot.adym="gojs.net",Ot.vfo="28e645fdba",Ot.className="Util";function Q(t,e,i){Le(this),this.j=t,this.xa=e,this.m=i}Q.prototype.toString=function(){return"EnumValue."+this.xa};function Xn(t,e){return e==null||e===""?null:t[e]}B.Object.defineProperties(Q.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.xa}},value:{get:function(){return this.m}}}),Q.className="EnumValue";function hl(){this.ew=[]}hl.prototype.toString=function(){return this.ew.join("")},hl.prototype.add=function(t){t!==""&&this.ew.push(t)},hl.className="StringBuilder";function Ke(){}Ke.className="PropertyCollection";var Cs={EA:!1,JA:!1,GA:!1,IA:!1,NA:!1,LA:!1,ox:!1,FA:null,trace:function(t){G.console&&G.console.log(t)},HA:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},DA:function(t){var e={},i;for(i in t){if(e.x=i,e.x!=="licenseKey"){var n=t[e.x];if(n.prototype!==void 0){e.Zl=Object.getOwnPropertyNames(n.prototype);for(var r={Tj:0};r.Tj<e.Zl.length;r={Tj:r.Tj},r.Tj++){var o=Object.getOwnPropertyDescriptor(n.prototype,e.Zl[r.Tj]);o.get!==void 0&&o.set===void 0&&Object.defineProperty(n.prototype,e.Zl[r.Tj],{set:function(l,h){return function(){throw Error("Property "+l.Zl[h.Tj]+" of "+l.x+" is read-only.")}}(e,r)})}}}e={Zl:e.Zl,x:e.x}}}};function fi(){}fi.prototype.reset=function(){},fi.prototype.next=function(){return!1},fi.prototype.Ad=function(){return!1},fi.prototype.first=function(){return null},fi.prototype.any=function(){return!1},fi.prototype.all=function(){return!0},fi.prototype.each=function(){return this},fi.prototype.map=function(){return this},fi.prototype.filter=function(){return this},fi.prototype.de=function(){},fi.prototype.toString=function(){return"EmptyIterator"},B.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.Ad,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset;var _n=null;fi.className="EmptyIterator",_n=new fi;function Re(t){this.key=-1,this.value=t}Re.prototype.reset=function(){this.key=-1},Re.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},Re.prototype.Ad=function(){return this.next()},Re.prototype.first=function(){return this.key=0,this.value},Re.prototype.any=function(t){return this.key=-1,t(this.value)},Re.prototype.all=function(t){return this.key=-1,t(this.value)},Re.prototype.each=function(t){return this.key=-1,t(this.value),this},Re.prototype.map=function(t){return new Re(t(this.value))},Re.prototype.filter=function(t){return t(this.value)?new Re(this.value):_n},Re.prototype.de=function(){this.value=null},Re.prototype.toString=function(){return"SingletonIterator("+this.value+")"},B.Object.defineProperties(Re.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Re.prototype.first=Re.prototype.first,Re.prototype.hasNext=Re.prototype.Ad,Re.prototype.next=Re.prototype.next,Re.prototype.reset=Re.prototype.reset,Re.className="SingletonIterator";function Fe(t){this.Bb=t,this.qf=null,t.Sa=null,this.qa=t.Ja,this.Za=-1}Fe.prototype.reset=function(){var t=this.Bb;t.Sa=null,this.qa=t.Ja,this.Za=-1},Fe.prototype.next=function(){var t=this.Bb;if(t.Ja!==this.qa&&0>this.key)return!1;t=t.s;var e=t.length,i=++this.Za,n=this.qf;if(n!==null)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Za=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.de()}return!1},Fe.prototype.Ad=function(){return this.next()},Fe.prototype.first=function(){var t=this.Bb;this.qa=t.Ja,this.Za=0,t=t.s;var e=t.length,i=this.qf;if(i!==null){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Za=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Fe.prototype.any=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&t(o))return!0}return!1},Fe.prototype.all=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&!t(o))return!1}return!0},Fe.prototype.each=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];(n===null||n(o))&&t(o)}return this},Fe.prototype.map=function(t){var e=this.Bb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.qf,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&i.push(t(l))}return t=new tt,t.s=i,t.xb(),t.iterator},Fe.prototype.filter=function(t){var e=this.Bb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.qf,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&t(l)&&i.push(l)}return t=new tt,t.s=i,t.xb(),t.iterator},Fe.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.qf=null,this.Bb.Sa=this},Fe.prototype.toString=function(){return"ListIterator@"+this.Za+"/"+this.Bb.count},B.Object.defineProperties(Fe.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.qf},set:function(t){this.qf=t}},count:{get:function(){var t=this.qf;if(t!==null){for(var e=0,i=this.Bb.s,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.Bb.s.length}}}),Fe.prototype.first=Fe.prototype.first,Fe.prototype.hasNext=Fe.prototype.Ad,Fe.prototype.next=Fe.prototype.next,Fe.prototype.reset=Fe.prototype.reset,Fe.className="ListIterator";function ci(t){this.Bb=t,t.Hg=null,this.qa=t.Ja,this.Za=t.s.length}ci.prototype.reset=function(){var t=this.Bb;t.Hg=null,this.qa=t.Ja,this.Za=t.s.length},ci.prototype.next=function(){var t=this.Bb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=--this.Za;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.de(),!1)},ci.prototype.Ad=function(){return this.next()},ci.prototype.first=function(){var t=this.Bb;this.qa=t.Ja;var e=t.s;return this.Za=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},ci.prototype.any=function(t){var e=this.Bb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},ci.prototype.all=function(t){var e=this.Bb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},ci.prototype.each=function(t){var e=this.Bb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)t(e[i]);return this},ci.prototype.map=function(t){var e=this.Bb;e.Hg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--)i.push(t(e[n]));return t=new tt,t.s=i,t.xb(),t.iterator},ci.prototype.filter=function(t){var e=this.Bb;e.Hg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return t=new tt,t.s=i,t.xb(),t.iterator},ci.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.Bb.Hg=this},ci.prototype.toString=function(){return"ListIteratorBackwards("+this.Za+"/"+this.Bb.count+")"},B.Object.defineProperties(ci.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Bb.s.length}}}),ci.prototype.first=ci.prototype.first,ci.prototype.hasNext=ci.prototype.Ad,ci.prototype.next=ci.prototype.next,ci.prototype.reset=ci.prototype.reset,ci.className="ListIteratorBackwards";function tt(t){Le(this),this._isFrozen=!1,this.s=[],this.Ja=0,this.Hg=this.Sa=null,typeof t=="string"&&I("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=tt.prototype,s.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"List()#"+Oi(this)},s.add=function(t){return t===null?this:(this._isFrozen&&nt(this,t),this.s.push(t),this.xb(),this)},s.push=function(t){this.add(t)},s.addAll=function(t){if(t===null)return this;this._isFrozen&&nt(this);var e=this.s;if(Bt(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.xb(),this},s.clear=function(){this._isFrozen&&nt(this),this.s.length=0,this.xb()},s.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},s.has=function(t){return this.contains(t)},s.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},s.M=function(t){var e=this.s;return(0>t||t>=e.length)&&at(t,"0 <= i < length",tt,"elt:i"),e[t]},s.get=function(t){return this.M(t)},s.bd=function(t,e){var i=this.s;(0>t||t>=i.length)&&at(t,"0 <= i < length",tt,"setElt:i"),this._isFrozen&&nt(this,t),i[t]=e},s.set=function(t,e){this.bd(t,e)},s.first=function(){var t=this.s;return t.length===0?null:t[0]},s.ic=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},s.pop=function(){this._isFrozen&&nt(this);var t=this.s;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)t(e[n]);return this},tt.prototype.map=function(t){for(var e=new tt,i=[],n=this.s,r=n.length,o=0;o<r;o++)i.push(t(n[o]));return e.s=i,e.xb(),e},tt.prototype.filter=function(t){for(var e=new tt,i=[],n=this.s,r=n.length,o=0;o<r;o++){var l=n[o];t(l)&&i.push(l)}return e.s=i,e.xb(),e},s=tt.prototype,s.Gb=function(t,e){0>t&&at(t,">= 0",tt,"insertAt:i"),this._isFrozen&&nt(this,t);var i=this.s;t>=i.length?i.push(e):i.splice(t,0,e),this.xb()},s.remove=function(t){if(t===null)return!1;this._isFrozen&&nt(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.xb(),!0)},s.delete=function(t){return this.remove(t)},s.mb=function(t){var e=this.s;(0>t||t>=e.length)&&at(t,"0 <= i < length",tt,"removeAt:i"),this._isFrozen&&nt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.xb()},s.removeRange=function(t,e){var i=this.s,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this._isFrozen&&nt(this);for(var r=t,o=e+1;o<n;)i[r++]=i[o++];return i.length=n-(e-t+1),this.xb(),this},tt.prototype.copy=function(){var t=new tt,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},s=tt.prototype,s.Fa=function(){for(var t=this.s,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},s.Iv=function(){for(var t=new q,e=this.s,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},s.sort=function(t){return this._isFrozen&&nt(this),this.s.sort(t),this.xb(),this},s.zi=function(t,e,i){var n=this.s,r=n.length;e===void 0&&(e=0),i===void 0&&(i=r),this._isFrozen&&nt(this);var o=i-e;if(1>=o)return this;if((0>e||e>=r-1)&&at(e,"0 <= from < length",tt,"sortRange:from"),o===2)return i=n[e],r=n[e+1],0<t(i,r)&&(n[e]=r,n[e+1]=i,this.xb()),this;if(e===0)if(i>=r)n.sort(t);else for(e=n.slice(0,i),e.sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for(i=n.slice(e),i.sort(t),t=e;t<r;t++)n[t]=i[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.xb(),this},s.reverse=function(){return this._isFrozen&&nt(this),this.s.reverse(),this.xb(),this},B.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return _n;var t=this.Sa;return t!==null?(t.reset(),t):new Fe(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return _n;var t=this.Hg;return t!==null?(t.reset(),t):new ci(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.zi,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.Iv,tt.prototype.toArray=tt.prototype.Fa,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.mb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.Gb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.ic,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.bd,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.M,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ka,tt.prototype.freeze=tt.prototype.freeze,tt.className="List";function pi(t){this.eg=t,t.Sa=null,this.qa=t.Ja,this.sa=null}pi.prototype.reset=function(){var t=this.eg;t.Sa=null,this.qa=t.Ja,this.sa=null},pi.prototype.next=function(){var t=this.eg;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},pi.prototype.Ad=function(){return this.next()},pi.prototype.first=function(){var t=this.eg;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},pi.prototype.any=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},pi.prototype.all=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},pi.prototype.each=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e.value),e=e.va;return this},pi.prototype.map=function(t){var e=this.eg;e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.va;return i.iterator},pi.prototype.filter=function(t){var e=this.eg;e.Sa=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},pi.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.eg.Sa=this},pi.prototype.toString=function(){return this.sa!==null?"SetIterator@"+this.sa.value:"SetIterator"},B.Object.defineProperties(pi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.eg.Rb}}}),pi.prototype.first=pi.prototype.first,pi.prototype.hasNext=pi.prototype.Ad,pi.prototype.next=pi.prototype.next,pi.prototype.reset=pi.prototype.reset,pi.className="SetIterator";function q(t){Le(this),this._isFrozen=!1,this.Sb={},this.Rb=0,this.Sa=null,this.Ja=0,this.kf=this.ea=null,typeof t=="string"&&I("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=q.prototype,s.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"Set()#"+Oi(this)},s.add=function(t){if(t===null)return this;this._isFrozen&&nt(this,t);var e=t;return yt(t)&&(e=ou(t)),this.Sb[e]===void 0&&(this.Rb++,t=new Qa(t,t),this.Sb[e]=t,e=this.kf,e===null?this.ea=t:(t.ll=e,e.va=t),this.kf=t,this.xb()),this},s.addAll=function(t){if(t===null)return this;if(this._isFrozen&&nt(this),Bt(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},s.contains=function(t){if(t===null)return!1;var e=t;return yt(t)&&(e=Oi(t),e===void 0)?!1:this.Sb[e]!==void 0},s.has=function(t){return this.contains(t)},s.Uy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},s.Vy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},s.first=function(){var t=this.ea;return t===null?null:t.value},q.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},q.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},q.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.va;return this},q.prototype.map=function(t){for(var e=new q,i=this.ea;i!==null;)e.add(t(i.value)),i=i.va;return e},q.prototype.filter=function(t){for(var e=new q,i=this.ea;i!==null;){var n=i.value;t(n)&&e.add(n),i=i.va}return e},s=q.prototype,s.remove=function(t){if(t===null)return!1;this._isFrozen&&nt(this,t);var e=t;if(yt(t)&&(e=Oi(t),e===void 0)||(t=this.Sb[e],t===void 0))return!1;var i=t.va,n=t.ll;return i!==null&&(i.ll=n),n!==null&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Sb[e],this.Rb--,this.xb(),!0},s.delete=function(t){return this.remove(t)},s.hp=function(t){if(t===null)return this;if(this._isFrozen&&nt(this),Bt(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},s.pA=function(t){if(t===null||this.count===0)return this;this._isFrozen&&nt(this);var e=new q;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.hp(t),this},s.clear=function(){this._isFrozen&&nt(this),this.Sb={},this.Rb=0,this.Sa!==null&&this.Sa.reset(),this.kf=this.ea=null,this.xb()},q.prototype.copy=function(){var t=new q,e=this.Sb,i;for(i in e)t.add(e[i].value);return t},q.prototype.Fa=function(){var t=Array(this.Rb),e=this.Sb,i=0,n;for(n in e)t[i]=e[n].value,i++;return t},q.prototype.Hv=function(){var t=new tt,e=this.Sb,i;for(i in e)t.add(e[i].value);return t};function Le(t){t.__gohashid=su++}function ou(t){var e=t.__gohashid;return e===void 0&&(e=su++,t.__gohashid=e),e}function Oi(t){return t.__gohashid}B.Object.defineProperties(q.prototype,{count:{get:function(){return this.Rb}},size:{get:function(){return this.Rb}},iterator:{get:function(){if(0>=this.Rb)return _n;var t=this.Sa;return t!==null?(t.reset(),t):new pi(this)}}}),q.prototype.toList=q.prototype.Hv,q.prototype.toArray=q.prototype.Fa,q.prototype.clear=q.prototype.clear,q.prototype.retainAll=q.prototype.pA,q.prototype.removeAll=q.prototype.hp,q.prototype.delete=q.prototype.delete,q.prototype.remove=q.prototype.remove,q.prototype.first=q.prototype.first,q.prototype.containsAny=q.prototype.Vy,q.prototype.containsAll=q.prototype.Uy,q.prototype.has=q.prototype.has,q.prototype.contains=q.prototype.contains,q.prototype.addAll=q.prototype.addAll,q.prototype.add=q.prototype.add,q.prototype.thaw=q.prototype.ka,q.prototype.freeze=q.prototype.freeze;var su=1;q.className="Set",q.uniqueHash=Le,q.hashIdUnique=ou,q.hashId=Oi;function ti(t){this.ma=t,this.qa=t.Ja,this.sa=null}ti.prototype.reset=function(){this.qa=this.ma.Ja,this.sa=null},ti.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=this.key=t=e.key,!0):(this.de(),!1)},ti.prototype.Ad=function(){return this.next()},ti.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.value=this.key=t=t.key):null},ti.prototype.any=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.va}return!1},ti.prototype.all=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.va}return!0},ti.prototype.each=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;)t(e.key),e=e.va;return this},ti.prototype.map=function(t){var e=this.ma;this.sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.key)),e=e.va;return i.iterator},ti.prototype.filter=function(t){var e=this.ma;this.sa=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.key;t(n)&&i.add(n),e=e.va}return i.iterator},ti.prototype.de=function(){this.value=this.key=null,this.qa=-1},ti.prototype.toString=function(){return this.sa!==null?"MapKeySetIterator@"+this.sa.value:"MapKeySetIterator"},B.Object.defineProperties(ti.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Rb}}}),ti.prototype.first=ti.prototype.first,ti.prototype.hasNext=ti.prototype.Ad,ti.prototype.next=ti.prototype.next,ti.prototype.reset=ti.prototype.reset,ti.className="MapKeySetIterator";function ne(t){q.call(this),Le(this),this._isFrozen=!0,this.ma=t}V(ne,q),s=ne.prototype,s.freeze=function(){return this},s.ka=function(){return this},s.toString=function(){return"MapKeySet("+this.ma.toString()+")"},s.add=function(){I("This Set is read-only: "+this.toString())},s.contains=function(t){return this.ma.contains(t)},s.has=function(t){return this.contains(t)},s.remove=function(){I("This Set is read-only: "+this.toString())},s.delete=function(t){return this.remove(t)},s.clear=function(){I("This Set is read-only: "+this.toString())},s.first=function(){var t=this.ma.ea;return t!==null?t.key:null},ne.prototype.any=function(t){for(var e=this.ma.ea;e!==null;){if(t(e.key))return!0;e=e.va}return!1},ne.prototype.all=function(t){for(var e=this.ma.ea;e!==null;){if(!t(e.key))return!1;e=e.va}return!0},ne.prototype.each=function(t){for(var e=this.ma.ea;e!==null;)t(e.key),e=e.va;return this},ne.prototype.map=function(t){for(var e=new q,i=this.ma.ea;i!==null;)e.add(t(i.key)),i=i.va;return e},ne.prototype.filter=function(t){for(var e=new q,i=this.ma.ea;i!==null;){var n=i.key;t(n)&&e.add(n),i=i.va}return e},ne.prototype.copy=function(){return new ne(this.ma)},ne.prototype.Iv=function(){var t=new q,e=this.ma.Sb,i;for(i in e)t.add(e[i].key);return t},ne.prototype.Fa=function(){var t=this.ma.Sb,e=Array(this.ma.Rb),i=0,n;for(n in t)e[i]=t[n].key,i++;return e},ne.prototype.Hv=function(){var t=new tt,e=this.ma.Sb,i;for(i in e)t.add(e[i].key);return t},B.Object.defineProperties(ne.prototype,{count:{get:function(){return this.ma.Rb}},size:{get:function(){return this.ma.Rb}},iterator:{get:function(){return 0>=this.ma.Rb?_n:new ti(this.ma)}}}),ne.prototype.toList=ne.prototype.Hv,ne.prototype.toArray=ne.prototype.Fa,ne.prototype.toSet=ne.prototype.Iv,ne.prototype.first=ne.prototype.first,ne.prototype.clear=ne.prototype.clear,ne.prototype.delete=ne.prototype.delete,ne.prototype.remove=ne.prototype.remove,ne.prototype.has=ne.prototype.has,ne.prototype.contains=ne.prototype.contains,ne.prototype.add=ne.prototype.add,ne.prototype.thaw=ne.prototype.ka,ne.prototype.freeze=ne.prototype.freeze,ne.className="MapKeySet";function di(t){this.ma=t,t.jf=null,this.qa=t.Ja,this.sa=null}di.prototype.reset=function(){var t=this.ma;t.jf=null,this.qa=t.Ja,this.sa=null},di.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},di.prototype.Ad=function(){return this.next()},di.prototype.first=function(){var t=this.ma;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},di.prototype.any=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},di.prototype.all=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},di.prototype.each=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;)t(e.value),e=e.va;return this},di.prototype.map=function(t){var e=this.ma;this.sa=e.jf=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.va;return i.iterator},di.prototype.filter=function(t){var e=this.ma;this.sa=e.jf=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},di.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.jf=this},di.prototype.toString=function(){return this.sa!==null?"MapValueSetIterator@"+this.sa.value:"MapValueSetIterator"},B.Object.defineProperties(di.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Rb}}}),di.prototype.first=di.prototype.first,di.prototype.hasNext=di.prototype.Ad,di.prototype.next=di.prototype.next,di.prototype.reset=di.prototype.reset,di.className="MapValueSetIterator";function Qa(t,e){this.key=t,this.value=e,this.ll=this.va=null}Qa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Qa.className="KeyValuePair";function gi(t){this.ma=t,t.Sa=null,this.qa=t.Ja,this.sa=null}gi.prototype.reset=function(){var t=this.ma;t.Sa=null,this.qa=t.Ja,this.sa=null},gi.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.key=e.key,this.value=e.value,!0):(this.de(),!1)},gi.prototype.Ad=function(){return this.next()},gi.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.key=t.key,this.value=t.value,t):null},gi.prototype.any=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.va}return!1},gi.prototype.all=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.va}return!0},gi.prototype.each=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e),e=e.va;return this},gi.prototype.map=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e)),e=e.va;return i.iterator},gi.prototype.filter=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)t(e)&&i.add(e),e=e.va;return i.iterator},gi.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.Sa=this},gi.prototype.toString=function(){return this.sa!==null?"MapIterator@"+this.sa:"MapIterator"},B.Object.defineProperties(gi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Rb}}}),gi.prototype.first=gi.prototype.first,gi.prototype.hasNext=gi.prototype.Ad,gi.prototype.next=gi.prototype.next,gi.prototype.reset=gi.prototype.reset,gi.className="MapIterator";function mt(t){Le(this),this._isFrozen=!1,this.Sb={},this.Rb=0,this.jf=this.Sa=null,this.Ja=0,this.kf=this.ea=null,typeof t=="string"&&I("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=mt.prototype,s.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"Map()#"+Oi(this)},s.add=function(t,e){this._isFrozen&&nt(this,t);var i=t;yt(t)&&(i=ou(t));var n=this.Sb[i];return n===void 0?(this.Rb++,t=new Qa(t,e),this.Sb[i]=t,i=this.kf,i===null?this.ea=t:(t.ll=i,i.va=t),this.kf=t,this.xb()):n.value=e,this},s.set=function(t,e){return this.add(t,e)},s.addAll=function(t){if(t===null)return this;if(Bt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof mt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},s.first=function(){return this.ea},mt.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.va}return!1},mt.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.va}return!0},mt.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.va;return this},mt.prototype.map=function(t){for(var e=new mt,i=this.ea;i!==null;)e.add(i.key,t(i)),i=i.va;return e},mt.prototype.filter=function(t){for(var e=new mt,i=this.ea;i!==null;)t(i)&&e.add(i.key,i.value),i=i.va;return e},s=mt.prototype,s.contains=function(t){var e=t;return yt(t)&&(e=Oi(t),e===void 0)?!1:this.Sb[e]!==void 0},s.has=function(t){return this.contains(t)},s.I=function(t){var e=t;return yt(t)&&(e=Oi(t),e===void 0)?null:(t=this.Sb[e],t===void 0?null:t.value)},s.get=function(t){return this.I(t)},s.remove=function(t){if(t===null)return!1;this._isFrozen&&nt(this,t);var e=t;if(yt(t)&&(e=Oi(t),e===void 0)||(t=this.Sb[e],t===void 0))return!1;var i=t.va,n=t.ll;return i!==null&&(i.ll=n),n!==null&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Sb[e],this.Rb--,this.xb(),!0},s.delete=function(t){return this.remove(t)},s.clear=function(){this._isFrozen&&nt(this),this.Sb={},this.Rb=0,this.Sa!==null&&this.Sa.reset(),this.jf!==null&&this.jf.reset(),this.kf=this.ea=null,this.xb()},mt.prototype.copy=function(){var t=new mt,e=this.Sb,i;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},mt.prototype.Fa=function(){var t=this.Sb,e=Array(this.Rb),i=0,n;for(n in t){var r=t[n];e[i]=new Qa(r.key,r.value),i++}return e},mt.prototype.Lf=function(){return new ne(this)},B.Object.defineProperties(mt.prototype,{count:{get:function(){return this.Rb}},size:{get:function(){return this.Rb}},iterator:{get:function(){if(0>=this.count)return _n;var t=this.Sa;return t!==null?(t.reset(),t):new gi(this)}},iteratorKeys:{get:function(){return 0>=this.count?_n:new ti(this)}},iteratorValues:{get:function(){if(0>=this.count)return _n;var t=this.jf;return t!==null?(t.reset(),t):new di(this)}}}),mt.prototype.toKeySet=mt.prototype.Lf,mt.prototype.toArray=mt.prototype.Fa,mt.prototype.clear=mt.prototype.clear,mt.prototype.delete=mt.prototype.delete,mt.prototype.remove=mt.prototype.remove,mt.prototype.get=mt.prototype.get,mt.prototype.getValue=mt.prototype.I,mt.prototype.has=mt.prototype.has,mt.prototype.contains=mt.prototype.contains,mt.prototype.first=mt.prototype.first,mt.prototype.addAll=mt.prototype.addAll,mt.prototype.set=mt.prototype.set,mt.prototype.add=mt.prototype.add,mt.prototype.thaw=mt.prototype.ka,mt.prototype.freeze=mt.prototype.freeze,mt.className="Map";function N(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):I("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var vo,w0,M0,S0,fp;N.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.h=function(t,e){return this.x=t,this.y=e,this},N.prototype.sg=function(t,e){return this.x=t,this.y=e,this},N.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.copy=function(){var t=new N;return t.x=this.x,t.y=this.y,t},s=N.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this};function SM(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new N(i,r)}return new N}function kM(t){return t.x.toString()+" "+t.y.toString()}s.toString=function(){return"Point("+this.x+","+this.y+")"},s.D=function(t){return t instanceof N?this.x===t.x&&this.y===t.y:!1},s.hi=function(t,e){return this.x===t&&this.y===e},s.Xa=function(t){return O.B(this.x,t.x)&&O.B(this.y,t.y)},s.add=function(t){return this.x+=t.x,this.y+=t.y,this},s.re=function(t){return this.x-=t.x,this.y-=t.y,this},s.offset=function(t,e){return this.x+=t,this.y+=e,this},N.prototype.rotate=function(t){if(t===0)return this;var e=this.x,i=this.y;if(e===0&&i===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},s=N.prototype,s.scale=function(t,e){return this.x*=t,this.y*=e,this},s.Bf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},s.zd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},s.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},s.ab=function(t){return PM(t.x-this.x,t.y-this.y)},s.direction=function(t,e){return PM(t-this.x,e-this.y)};function PM(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}s.Ty=function(t,e){return O.Fl(t.x,t.y,e.x,e.y,this.x,this.y)},s.fA=function(t,e,i,n){return O.qh(t,e,i,n,this.x,this.y,this),this},s.gA=function(t,e){return O.qh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},s.uA=function(t,e,i,n){return O.No(this.x,this.y,t,e,i,n,this),this},s.vA=function(t,e){return O.No(this.x,this.y,t.x,t.y,e.width,e.height,this),this},s.xi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},s.yi=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},s.transform=function(t){return t.Ga(this),this};function yi(t,e){return e.Cd(t),t}function mi(t,e,i,n,r,o){var l=r-i,h=o-n,a=l*l+h*h;i-=t,n-=e;var f=-i*l-n*h;return 0>=f||f>=a?(l=r-t,h=o-e,Math.min(i*i+n*n,l*l+h*h)):(t=l*n-h*i,t*t/a)}function xo(t,e,i,n){return t=i-t,e=n-e,t*t+e*e}function k0(t,e,i,n){return t=i-t,e=n-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}s.w=function(){return isFinite(this.x)&&isFinite(this.y)},N.alloc=function(){var t=P0.pop();return t===void 0?new N:t},N.allocAt=function(t,e){var i=P0.pop();return i===void 0?new N(t,e):(i.x=t,i.y=e,i)},N.free=function(t){P0.push(t)},N.prototype.isReal=N.prototype.w,N.prototype.setSpot=N.prototype.yi,N.prototype.setRectSpot=N.prototype.xi,N.prototype.snapToGridPoint=N.prototype.vA,N.prototype.snapToGrid=N.prototype.uA,N.prototype.projectOntoLineSegmentPoint=N.prototype.gA,N.prototype.projectOntoLineSegment=N.prototype.fA,N.intersectingLineSegments=function(t,e,i,n,r,o,l,h){return O.Rl(t,e,i,n,r,o,l,h)},N.prototype.compareWithLineSegmentPoint=N.prototype.Ty,N.compareWithLineSegment=function(t,e,i,n,r,o){return O.Fl(t,e,i,n,r,o)},N.prototype.direction=N.prototype.direction,N.prototype.directionPoint=N.prototype.ab,N.prototype.normalize=N.prototype.normalize,N.prototype.distanceSquared=N.prototype.zd,N.prototype.distanceSquaredPoint=N.prototype.Bf,N.prototype.scale=N.prototype.scale,N.prototype.rotate=N.prototype.rotate,N.prototype.offset=N.prototype.offset,N.prototype.subtract=N.prototype.re,N.prototype.add=N.prototype.add,N.prototype.equalsApprox=N.prototype.Xa,N.prototype.equalTo=N.prototype.hi,N.prototype.equals=N.prototype.D,N.prototype.set=N.prototype.set,N.prototype.setTo=N.prototype.sg;var P0=[];N.className="Point",N.parse=SM,N.stringify=kM,N.distanceLineSegmentSquared=mi,N.distanceSquared=xo,N.direction=k0,N.Origin=vo=new N(0,0).ja(),N.InfiniteTopLeft=w0=new N(-1/0,-1/0).ja(),N.InfiniteBottomRight=M0=new N(1/0,1/0).ja(),N.SixPoint=S0=new N(6,6).ja(),N.NoPoint=fp=new N(NaN,NaN).ja(),N.parse=SM,N.stringify=kM,N.distanceLineSegmentSquared=mi,N.distanceSquared=xo,N.direction=k0;function ct(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):I("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var lu,cp,N0,uu,NM,C0,pp;ct.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},ct.prototype.h=function(t,e){return this.width=t,this.height=e,this},ct.prototype.sg=function(t,e){return this.width=t,this.height=e,this},ct.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},ct.prototype.copy=function(){var t=new ct;return t.width=this.width,t.height=this.height,t},s=ct.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this};function CM(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new ct(i,r)}return new ct}function TM(t){return t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Size("+this.width+","+this.height+")"},s.D=function(t){return t instanceof ct?this.width===t.width&&this.height===t.height:!1},s.hi=function(t,e){return this.width===t&&this.height===e},s.Xa=function(t){return O.B(this.width,t.width)&&O.B(this.height,t.height)},s.Ac=function(t,e){return t=this.width+t,this.width=0<=t?t:0,e=this.height+e,this.height=0<=e?e:0,this},s.w=function(){return isFinite(this.width)&&isFinite(this.height)},ct.alloc=function(){var t=LM.pop();return t===void 0?new ct:t},ct.free=function(t){LM.push(t)},ct.prototype.isReal=ct.prototype.w,ct.prototype.inflate=ct.prototype.Ac,ct.prototype.equalsApprox=ct.prototype.Xa,ct.prototype.equalTo=ct.prototype.hi,ct.prototype.equals=ct.prototype.D,ct.prototype.set=ct.prototype.set,ct.prototype.setTo=ct.prototype.sg;var LM=[];ct.className="Size",ct.parse=CM,ct.stringify=TM,ct.ZeroSize=lu=new ct(0,0).ja(),ct.OneSize=cp=new ct(1,1).ja(),ct.SixSize=N0=new ct(6,6).ja(),ct.EightSize=uu=new ct(8,8).ja(),ct.TenSize=NM=new ct(10,10).ja(),ct.InfiniteSize=C0=new ct(1/0,1/0).ja(),ct.NoSize=pp=new ct(NaN,NaN).ja(),ct.parse=CM,ct.stringify=TM;function z(t,e,i,n){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&(0<=i||isNaN(i))&&typeof n=="number"&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof N?(i=t.x,t=t.y,e instanceof N?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof ct?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):I("Incorrect second argument supplied to Rect constructor "+e)):I("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}s=z.prototype,s.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this};function wo(t,e,i){t.width=e,t.height=i}s.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},s.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.cd=function(t){return this.x=t.x,this.y=t.y,this},s.tA=function(t){return this.width=t.width,this.height=t.height,this},z.prototype.copy=function(){var t=new z;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},s=z.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this};function jM(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;(n=t[e++])&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;(n=t[e++])&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),new z(i,r,o,l)}return new z}function OM(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},s.D=function(t){return t instanceof z?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},s.hi=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},s.Xa=function(t){return O.B(this.x,t.x)&&O.B(this.y,t.y)&&O.B(this.width,t.width)&&O.B(this.height,t.height)};function T0(t,e){return O.$(t.x,e.x)&&O.$(t.y,e.y)&&O.$(t.width,e.width)&&O.$(t.height,e.height)}s.ca=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},s.Re=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},s.contains=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},s.offset=function(t,e){return this.x+=t,this.y+=e,this},s.Ac=function(t,e){return dp(this,e,t,e,t)},s.Co=function(t){return dp(this,t.top,t.right,t.bottom,t.left)},s.Fv=function(t){return dp(this,-t.top,-t.right,-t.bottom,-t.left)},s.Jz=function(t,e,i,n){return dp(this,t,e,i,n)};function dp(t,e,i,n,r){var o=t.width;return i+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=i+r),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}s.Fx=function(t){return FM(this,t.x,t.y,t.width,t.height)},s.Uu=function(t,e,i,n){return FM(this,t,e,i,n)};function FM(t,e,i,n,r){var o=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=o,t.y=l,t.width=Math.max(0,e-o),t.height=Math.max(0,i-l),t}s.Xc=function(t){return this.Vu(t.x,t.y,t.width,t.height)},s.Vu=function(t,e,i,n){var r=this.width,o=this.x;return r!==1/0&&i!==1/0&&(r+=o,i+=t,isNaN(i)||isNaN(r)||o>i||t>r)?!1:(t=this.height,i=this.y,!(t!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))};function EM(t,e){var i=t.width,n=t.x,r=e.x-10;return n>e.width+10+10+r||r>i+n?!1:(i=t.height,t=t.y,n=e.y-10,!(t>e.height+10+10+n||n>i+t))}s.Ye=function(t){return Be(this,t.x,t.y,0,0)},s.dd=function(t){return Be(this,t.x,t.y,t.width,t.height)},s.Kv=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),Be(this,t,e,i,n)};function Be(t,e,i,n,r){var o=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=o,t.y=l,t.width=e-o,t.height=i-l,t}s.yi=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};function lr(t,e,i,n,r,o,l,h){return l===void 0&&(l=0),h===void 0&&(h=0),t<=r&&r+l<=t+i&&e<=o&&o+h<=e+n}function AM(t,e,i,n,r,o,l,h){return t>l+r||r>i+t?!1:!(e>h+o||o>n+e)}s.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},s.Oz=function(){return this.width===0&&this.height===0},z.alloc=function(){var t=L0.pop();return t===void 0?new z:t},z.allocAt=function(t,e,i,n){var r=L0.pop();return r===void 0?new z(t,e,i,n):r.h(t,e,i,n)},z.free=function(t){L0.push(t)},B.Object.defineProperties(z.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new N(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new ct(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new N(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),z.prototype.isEmpty=z.prototype.Oz,z.prototype.isReal=z.prototype.w,z.intersectsLineSegment=function(t,e,i,n,r,o,l,h){return O.Gx(t,e,i,n,r,o,l,h)},z.prototype.setSpot=z.prototype.yi,z.prototype.union=z.prototype.Kv,z.prototype.unionRect=z.prototype.dd,z.prototype.unionPoint=z.prototype.Ye,z.prototype.intersects=z.prototype.Vu,z.prototype.intersectsRect=z.prototype.Xc,z.prototype.intersect=z.prototype.Uu,z.prototype.intersectRect=z.prototype.Fx,z.prototype.grow=z.prototype.Jz,z.prototype.subtractMargin=z.prototype.Fv,z.prototype.addMargin=z.prototype.Co,z.prototype.inflate=z.prototype.Ac,z.prototype.offset=z.prototype.offset,z.prototype.contains=z.prototype.contains,z.prototype.containsRect=z.prototype.Re,z.prototype.containsPoint=z.prototype.ca,z.prototype.equalsApprox=z.prototype.Xa,z.prototype.equalTo=z.prototype.hi,z.prototype.equals=z.prototype.D,z.prototype.setSize=z.prototype.tA,z.prototype.setPoint=z.prototype.cd,z.prototype.set=z.prototype.set,z.prototype.setTo=z.prototype.sg;var gp=null,DM=null,L0=[];z.className="Rect",z.parse=jM,z.stringify=OM,z.contains=lr,z.intersects=AM,z.ZeroRect=gp=new z(0,0,0,0).ja(),z.NoRect=DM=new z(NaN,NaN,NaN,NaN).ja(),z.parse=jM,z.stringify=OM,z.contains=lr,z.intersects=AM;function At(t,e,i,n){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:i===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):n!==void 0?(this.top=t,this.right=e,this.bottom=i,this.left=n):I("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}At.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},At.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},At.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},At.prototype.copy=function(){var t=new At;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},s=At.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this};function IM(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=NaN;t[e]==="";)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new At;for(var r=NaN;t[e]==="";)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new At(i);for(var o=NaN;t[e]==="";)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new At(i,r);for(var l=NaN;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new At(i,r):new At(i,r,o,l)}return new At}function RM(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}s.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},s.D=function(t){return t instanceof At?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},s.hi=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},s.Xa=function(t){return O.B(this.top,t.top)&&O.B(this.right,t.right)&&O.B(this.bottom,t.bottom)&&O.B(this.left,t.left)},s.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},At.alloc=function(){var t=BM.pop();return t===void 0?new At:t},At.free=function(t){BM.push(t)},At.prototype.isReal=At.prototype.w,At.prototype.equalsApprox=At.prototype.Xa,At.prototype.equalTo=At.prototype.hi,At.prototype.equals=At.prototype.D,At.prototype.set=At.prototype.set,At.prototype.setTo=At.prototype.sg;var rh=null,j0=null,BM=[];At.className="Margin",At.parse=IM,At.stringify=RM,At.ZeroMargin=rh=new At(0,0,0,0).ja(),At.TwoMargin=j0=new At(2,2,2,2).ja(),At.parse=IM,At.stringify=RM;function ht(t,e,i,n){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this._isFrozen=!1}var We,ei,Mo,oh,qa,Rt,ba,sh,hu,Kr,lh,uh,hh,ah,O0,F0,E0,A0,D0,I0,R0,B0,z0,V0,Y0,$e,zM,VM,yp,YM,Tn,Ln,_i,jn,U0,G0;ht.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ht.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},ht.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ht.prototype.copy=function(){var t=new ht;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},s=ht.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this};function fn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function X0(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return We;if(t==="TopLeft")return ei;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return Mo;if(t==="TopRight")return oh;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return qa;if(t==="Center")return Rt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return ba;if(t==="BottomLeft")return sh;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return hu;if(t==="BottomRight")return Kr;if(t==="TopSide")return lh;if(t==="LeftSide")return uh;if(t==="RightSide")return hh;if(t==="BottomSide")return ah;if(t==="TopBottomSides")return O0;if(t==="LeftRightSides")return F0;if(t==="TopLeftSides")return E0;if(t==="TopRightSides")return A0;if(t==="BottomLeftSides")return D0;if(t==="BottomRightSides")return I0;if(t==="NotTopSide")return R0;if(t==="NotLeftSide")return B0;if(t==="NotRightSide")return z0;if(t==="NotBottomSide")return V0;if(t==="AllSides")return Y0;if(t==="Default")return $e;t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n!==void 0&&0<n.length&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return n=t[e++],n!==void 0&&0<n.length&&(l=parseFloat(n)),new ht(i,r,o,l)}return new ht}function UM(t){return t.sb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}s.toString=function(){return this.sb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.D(We)?"None":this.D(ei)?"TopLeft":this.D(Mo)?"Top":this.D(oh)?"TopRight":this.D(qa)?"Left":this.D(Rt)?"Center":this.D(ba)?"Right":this.D(sh)?"BottomLeft":this.D(hu)?"Bottom":this.D(Kr)?"BottomRight":this.D(lh)?"TopSide":this.D(uh)?"LeftSide":this.D(hh)?"RightSide":this.D(ah)?"BottomSide":this.D(O0)?"TopBottomSides":this.D(F0)?"LeftRightSides":this.D(E0)?"TopLeftSides":this.D(A0)?"TopRightSides":this.D(D0)?"BottomLeftSides":this.D(I0)?"BottomRightSides":this.D(R0)?"NotTopSide":this.D(B0)?"NotLeftSide":this.D(z0)?"NotRightSide":this.D(V0)?"NotBottomSide":this.D(Y0)?"AllSides":this.D($e)?"Default":"None"},s.D=function(t){return t instanceof ht?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},s.gv=function(){return new ht(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},s.Hf=function(t){if(!this.Zc())return!1;if(!t.Zc())if(t.D(zM))t=uh;else if(t.D(VM))t=hh;else if(t.D(yp))t=lh;else if(t.D(YM))t=ah;else return!1;return t=t.offsetY,(this.offsetY&t)===t},s.sb=function(){return!isNaN(this.x)&&!isNaN(this.y)},s.Lc=function(){return isNaN(this.x)||isNaN(this.y)},s.Zc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},s.ys=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},s.Wb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},ht.alloc=function(){var t=GM.pop();return t===void 0?new ht:t},ht.free=function(t){GM.push(t)},ht.prototype.isDefault=ht.prototype.Wb,ht.prototype.isNone=ht.prototype.ys,ht.prototype.isSide=ht.prototype.Zc,ht.prototype.isNoSpot=ht.prototype.Lc,ht.prototype.isSpot=ht.prototype.sb,ht.prototype.includesSide=ht.prototype.Hf,ht.prototype.opposite=ht.prototype.gv,ht.prototype.equals=ht.prototype.D,ht.prototype.set=ht.prototype.set,ht.prototype.setTo=ht.prototype.sg;var GM=[];ht.className="Spot",ht.parse=X0,ht.stringify=UM,ht.None=We=fn(new ht(0,0,0,0),0).ja(),ht.Default=$e=fn(new ht(0,0,-1,0),-1).ja(),ht.TopLeft=ei=new ht(0,0,0,0).ja(),ht.TopCenter=Mo=new ht(.5,0,0,0).ja(),ht.TopRight=oh=new ht(1,0,0,0).ja(),ht.LeftCenter=qa=new ht(0,.5,0,0).ja(),ht.Center=Rt=new ht(.5,.5,0,0).ja(),ht.RightCenter=ba=new ht(1,.5,0,0).ja(),ht.BottomLeft=sh=new ht(0,1,0,0).ja(),ht.BottomCenter=hu=new ht(.5,1,0,0).ja(),ht.BottomRight=Kr=new ht(1,1,0,0).ja(),ht.MiddleTop=Tn=Mo,ht.MiddleLeft=Ln=qa,ht.MiddleRight=_i=ba,ht.MiddleBottom=jn=hu,ht.Top=yp=Mo,ht.Left=zM=qa,ht.Right=VM=ba,ht.Bottom=YM=hu,ht.TopSide=lh=fn(new ht(0,0,1,1),1).ja(),ht.LeftSide=uh=fn(new ht(0,0,1,2),1).ja(),ht.RightSide=hh=fn(new ht(0,0,1,4),1).ja(),ht.BottomSide=ah=fn(new ht(0,0,1,8),1).ja(),ht.TopBottomSides=O0=fn(new ht(0,0,1,9),1).ja(),ht.LeftRightSides=F0=fn(new ht(0,0,1,6),1).ja(),ht.TopLeftSides=E0=fn(new ht(0,0,1,3),1).ja(),ht.TopRightSides=A0=fn(new ht(0,0,1,5),1).ja(),ht.BottomLeftSides=D0=fn(new ht(0,0,1,10),1).ja(),ht.BottomRightSides=I0=fn(new ht(0,0,1,12),1).ja(),ht.NotTopSide=R0=fn(new ht(0,0,1,14),1).ja(),ht.NotLeftSide=B0=fn(new ht(0,0,1,13),1).ja(),ht.NotRightSide=z0=fn(new ht(0,0,1,11),1).ja(),ht.NotBottomSide=V0=fn(new ht(0,0,1,7),1).ja(),ht.AllSides=Y0=fn(new ht(0,0,1,15),1).ja(),U0=new ht(.156,.156).ja(),G0=new ht(.844,.844).ja(),ht.parse=X0,ht.stringify=UM;function wt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}wt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},wt.prototype.setTransform=function(t,e,i,n,r,o){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},wt.prototype.copy=function(){var t=new wt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},wt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},wt.prototype.D=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},wt.prototype.ws=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},wt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},wt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},wt.prototype.bv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,o=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},wt.prototype.Vj=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},wt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=o,this.m22=l,this.translate(-e,-i),this},s=wt.prototype,s.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},s.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},s.Ga=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},s.Cd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.Eu=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.pp=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,o=this.m11,l=this.m12,h=this.m21,a=this.m22,f=this.dx,p=this.dy,d=e*o+i*h+f,y=e*l+i*a+p,m=n*o+i*h+f,x=n*l+i*a+p;return i=e*o+r*h+f,e=e*l+r*a+p,o=n*o+r*h+f,n=n*l+r*a+p,r=Math.min(d,m),d=Math.max(d,m),m=Math.min(y,x),y=Math.max(y,x),r=Math.min(r,i),d=Math.max(d,i),m=Math.min(m,e),y=Math.max(y,e),r=Math.min(r,o),d=Math.max(d,o),m=Math.min(m,n),y=Math.max(y,n),t.h(r,m,d-r,y-m),t},wt.alloc=function(){var t=XM.pop();return t===void 0?new wt:t},wt.free=function(t){XM.push(t)},wt.prototype.transformRect=wt.prototype.pp,wt.prototype.transformPoint=wt.prototype.Ga,wt.prototype.scale=wt.prototype.scale,wt.prototype.translate=wt.prototype.translate,wt.prototype.rotate=wt.prototype.rotate,wt.prototype.invert=wt.prototype.Vj,wt.prototype.multiplyInverted=wt.prototype.bv,wt.prototype.multiply=wt.prototype.multiply,wt.prototype.reset=wt.prototype.reset,wt.prototype.isIdentity=wt.prototype.ws,wt.prototype.equals=wt.prototype.D,wt.prototype.setTransform=wt.prototype.setTransform,wt.prototype.set=wt.prototype.set;var XM=[];wt.className="Transform",wt.xF="54a702f3e53909c447824c6706603faf4c";var O={AA:"7da71ca0ad381e90",wg:(Math.sqrt(2)-1)/3*4,Uv:null,sqrt:function(t){if(0>=t)return 0;var e=O.Uv;if(e===null){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);O.Uv=e}return 1>t?(i=1/t,2e3>=i?1/e[i|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},$:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Xb:function(t,e,i,n,r,o,l){if(0>=r&&(r=1e-6),t<i)var h=t,a=i;else h=i,a=t;if(e<n)var f=e,p=n;else f=n,p=e;if(t===i)return f<=l&&l<=p&&t-r<=o&&o<=t+r;if(e===n)return h<=o&&o<=a&&e-r<=l&&l<=e+r;if(a+=r,h-=r,h<=o&&o<=a&&(p+=r,f-=r,f<=l&&l<=p))if(a-h>p-f)if(t-i>r||i-t>r){if(o=(n-e)/(i-t)*(o-t)+e,o-r<=l&&l<=o+r)return!0}else return!0;else if(e-n>r||n-e>r){if(l=(i-t)/(n-e)*(l-e)+t,l-r<=o&&o<=l+r)return!0}else return!0;return!1},cs:function(t,e,i,n,r,o,l,h,a,f,p,d){if(O.Xb(t,e,l,h,d,i,n)&&O.Xb(t,e,l,h,d,r,o))return O.Xb(t,e,l,h,d,f,p);var y=(t+i)/2,m=(e+n)/2,x=(i+r)/2,M=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(y+x)/2,i=(m+M)/2,x=(x+r)/2,M=(M+o)/2;var k=(n+x)/2,S=(i+M)/2;return O.cs(t,e,y,m,n,i,k,S,a,f,p,d)||O.cs(k,S,x,M,r,o,l,h,a,f,p,d)},ax:function(t,e,i,n,r,o,l,h,a){var f=(i+r)/2,p=(n+o)/2;return a.h((((t+i)/2+f)/2+(f+(r+l)/2)/2)/2,(((e+n)/2+p)/2+(p+(o+h)/2)/2)/2),a},Py:function(t,e,i,n,r,o,l,h){var a=(i+r)/2,f=(n+o)/2;return k0(((t+i)/2+a)/2,((e+n)/2+f)/2,(a+(r+l)/2)/2,(f+(o+h)/2)/2)},Dl:function(t,e,i,n,r,o,l,h,a,f){if(O.Xb(t,e,l,h,a,i,n)&&O.Xb(t,e,l,h,a,r,o))Be(f,t,e,0,0),Be(f,l,h,0,0);else{var p=(t+i)/2,d=(e+n)/2,y=(i+r)/2,m=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(p+y)/2,i=(d+m)/2,y=(y+r)/2,m=(m+o)/2;var x=(n+y)/2,M=(i+m)/2;O.Dl(t,e,p,d,n,i,x,M,a,f),O.Dl(x,M,y,m,r,o,l,h,a,f)}return f},Qe:function(t,e,i,n,r,o,l,h,a,f){if(O.Xb(t,e,l,h,a,i,n)&&O.Xb(t,e,l,h,a,r,o))f.length===0&&(f.push(t),f.push(e)),f.push(l),f.push(h);else{var p=(t+i)/2,d=(e+n)/2,y=(i+r)/2,m=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(p+y)/2,i=(d+m)/2,y=(y+r)/2,m=(m+o)/2;var x=(n+y)/2,M=(i+m)/2;O.Qe(t,e,p,d,n,i,x,M,a,f),O.Qe(x,M,y,m,r,o,l,h,a,f)}return f},jv:function(t,e,i,n,r,o,l,h,a,f){if(O.Xb(t,e,r,o,f,i,n))return O.Xb(t,e,r,o,f,h,a);var p=(t+i)/2,d=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var y=(p+i)/2,m=(d+n)/2;return O.jv(t,e,p,d,y,m,l,h,a,f)||O.jv(y,m,i,n,r,o,l,h,a,f)},OA:function(t,e,i,n,r,o,l){return l.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+o)/2)/2),l},iv:function(t,e,i,n,r,o,l,h){if(O.Xb(t,e,r,o,l,i,n))Be(h,t,e,0,0),Be(h,r,o,0,0);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var p=(a+i)/2,d=(f+n)/2;O.iv(t,e,a,f,p,d,l,h),O.iv(p,d,i,n,r,o,l,h)}return h},ep:function(t,e,i,n,r,o,l,h){if(O.Xb(t,e,r,o,l,i,n))h.length===0&&(h.push(t),h.push(e)),h.push(r),h.push(o);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var p=(a+i)/2,d=(f+n)/2;O.ep(t,e,a,f,p,d,l,h),O.ep(p,d,i,n,r,o,l,h)}return h},Eo:function(t,e,i,n,r,o,l,h,a,f,p,d,y,m){if(O.Xb(t,e,l,h,y,i,n)&&O.Xb(t,e,l,h,y,r,o))return!O.Rl(t,e,l,h,a,f,p,d)||(y=(t-l)*(f-d)-(e-h)*(a-p),y===0)?!1:(m.h(((t*h-e*l)*(a-p)-(t-l)*(a*d-f*p))/y,((t*h-e*l)*(f-d)-(e-h)*(a*d-f*p))/y),!0);var x=(t+i)/2,M=(e+n)/2,k=(i+r)/2,S=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(x+k)/2,i=(M+S)/2,k=(k+r)/2,S=(S+o)/2;var C=(n+k)/2,T=(i+S)/2,L=1/0,j=!1,A=0,Z=0;return O.Eo(t,e,x,M,n,i,C,T,a,f,p,d,y,m)&&(t=(m.x-a)*(m.x-a)+(m.y-f)*(m.y-f),t<L&&(L=t,j=!0,A=m.x,Z=m.y)),O.Eo(C,T,k,S,r,o,l,h,a,f,p,d,y,m)&&(m.x-a)*(m.x-a)+(m.y-f)*(m.y-f)<L&&(j=!0,A=m.x,Z=m.y),j&&(m.x=A,m.y=Z),j},Fo:function(t,e,i,n,r,o,l,h,a,f,p,d,y){var m=0;if(O.Xb(t,e,l,h,y,i,n)&&O.Xb(t,e,l,h,y,r,o)){if(y=(t-l)*(f-d)-(e-h)*(a-p),y===0)return m;var x=((t*h-e*l)*(a-p)-(t-l)*(a*d-f*p))/y,M=((t*h-e*l)*(f-d)-(e-h)*(a*d-f*p))/y;if(x>=p)return m;if((a>p?a-p:p-a)<(f>d?f-d:d-f)){if(e<h?(a=e,t=h):(a=h,t=e),M<a||M>t)return m}else if(t<l?(a=t,t=l):a=l,x<a||x>t)return m;0<y?m++:0>y&&m--}else{x=(t+i)/2,M=(e+n)/2;var k=(i+r)/2,S=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(x+k)/2,i=(M+S)/2,k=(k+r)/2,S=(S+o)/2;var C=(n+k)/2,T=(i+S)/2;m+=O.Fo(t,e,x,M,n,i,C,T,a,f,p,d,y),m+=O.Fo(C,T,k,S,r,o,l,h,a,f,p,d,y)}return m},qh:function(t,e,i,n,r,o,l){return O.$(t,i)?(e<n?(i=e,e=n):i=n,o<i?(l.h(t,i),!1):o>e?(l.h(t,e),!1):(l.h(t,o),!0)):O.$(e,n)?(t<i?(n=t,t=i):n=i,r<n?(l.h(n,e),!1):r>t?(l.h(t,e),!1):(l.h(r,e),!0)):(r=((t-r)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)),-5e-6>r?(l.h(t,e),!1):1.000005<r?(l.h(i,n),!1):(l.h(t+r*(i-t),e+r*(n-e)),!0))},Ve:function(t,e,i,n,r,o,l,h,a){return O.B(t,i)&&O.B(e,n)?(a.h(t,e),!1):O.$(r,l)?O.$(t,i)?(O.qh(t,e,i,n,r,o,a),!1):O.qh(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,a):(h=(h-o)/(l-r),O.$(t,i)?(i=h*(t-r)+o,e<n?(r=e,e=n):r=n,i<r?(a.h(t,r),!1):i>e?(a.h(t,e),!1):(a.h(t,i),!0)):(l=(n-e)/(i-t),O.$(h,l)?(O.qh(t,e,i,n,r,o,a),!1):(r=(l*t-h*r+o-e)/(l-h),O.$(l,0)?(t<i?(n=t,t=i):n=i,r<n?(a.h(n,e),!1):r>t?(a.h(t,e),!1):(a.h(r,e),!0)):O.qh(t,e,i,n,r,l*(r-t)+e,a))))},MA:function(t,e,i,n,r){return O.Ve(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},KA:function(t,e,i,n,r,o,l,h,a,f){function p(k,S){var C=(k-t)*(k-t)+(S-e)*(S-e);C<d&&(d=C,a.h(k,S))}var d=1/0;p(a.x,a.y);var y=0,m=0,x=0,M=0;if(r<l?(y=r,m=l):(y=l,m=r),o<h?(x=r,M=l):(x=l,M=r),y=(m-y)/2+f,f=(M-x)/2+f,r=(r+l)/2,o=(o+h)/2,y===0||f===0)return a;if(.5>(i>t?i-t:t-i)){if(y=1-(i-r)*(i-r)/(y*y),0>y)return a;y=Math.sqrt(y),n=-f*y+o,p(i,f*y+o),p(i,n)}else{if(i=(n-e)/(i-t),n=1/(y*y)+i*i/(f*f),h=2*i*(e-i*t)/(f*f)-2*i*o/(f*f)-2*r/(y*y),y=h*h-4*n*(2*i*t*o/(f*f)-2*e*o/(f*f)+o*o/(f*f)+r*r/(y*y)-1+(e-i*t)*(e-i*t)/(f*f)),0>y)return a;y=Math.sqrt(y),f=(-h+y)/(2*n),p(f,i*f-i*t+e),y=(-h-y)/(2*n),p(y,i*y-i*t+e)}return a},Ff:function(t,e,i,n,r,o,l,h,a){var f=1e21,p=t,d=e;if(O.Ve(t,e,t,n,r,o,l,h,a)){var y=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o);y<f&&(f=y,p=a.x,d=a.y)}return O.Ve(i,e,i,n,r,o,l,h,a)&&(y=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),y<f&&(f=y,p=a.x,d=a.y)),O.Ve(t,e,i,e,r,o,l,h,a)&&(e=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),e<f&&(f=e,p=a.x,d=a.y)),O.Ve(t,n,i,n,r,o,l,h,a)&&(t=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),t<f&&(f=t,p=a.x,d=a.y)),a.h(p,d),1e21>f},us:function(t,e,i){return O.Gx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Gx:function(t,e,i,n,r,o,l,h){var a=t+i,f=e+n;return r===l?(o<h?(l=o,o=h):l=h,t<=r&&r<=a&&l<=f&&o>=e):o===h?(r<l?(h=r,r=l):h=l,e<=o&&o<=f&&h<=a&&r>=t):!!(lr(t,e,i,n,r,o)||lr(t,e,i,n,l,h)||O.Rl(t,e,a,e,r,o,l,h)||O.Rl(a,e,a,f,r,o,l,h)||O.Rl(a,f,t,f,r,o,l,h)||O.Rl(t,f,t,e,r,o,l,h))},Rl:function(t,e,i,n,r,o,l,h){return t===i&&e===n&&r===l&&o===h?t===r&&e===o:0>=O.Fl(t,e,i,n,r,o)*O.Fl(t,e,i,n,l,h)&&0>=O.Fl(r,o,l,h,t,e)*O.Fl(r,o,l,h,i,n)},Fl:function(t,e,i,n,r,o){return i-=t,n-=e,t=r-t,e=o-e,o=t*n-e*i,o===0&&(o=t*i+e*n,0<o&&(o=(t-i)*i+(e-n)*n,0>o&&(o=0))),o},bp:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},kx:function(t,e,i,n,r,o){var l=Math.PI;o||(n*=l/180,r*=l/180);var h=n>r?-1:1;o=[];var a=l/2,f=n;if(n=Math.min(2*l,Math.abs(r-n)),1e-5>n)return a=f+h*Math.min(n,a),h=t+i*Math.cos(f),f=e+i*Math.sin(f),t+=i*Math.cos(a),e+=i*Math.sin(a),i=(h+t)/2,a=(f+e)/2,o.push([h,f,i,a,i,a,t,e]),o;for(;1e-5<n;)r=f+h*Math.min(n,a),o.push(O.Xy(i,f,r,t,e)),n-=Math.abs(r-f),f=r;return o},Xy:function(t,e,i,n,r){var o=(i-e)/2,l=t*Math.cos(o),h=t*Math.sin(o),a=-h,f=l*l+a*a,p=f+l*l+a*h;return f=4/3*(Math.sqrt(2*f*p)-p)/(l*h-a*l),h=l-f*a,l=a+f*l,a=-l,f=o+e,o=Math.cos(f),f=Math.sin(f),[n+t*Math.cos(e),r+t*Math.sin(e),n+h*o-l*f,r+h*f+l*o,n+h*o-a*f,r+h*f+a*o,n+t*Math.cos(i),r+t*Math.sin(i)]},No:function(t,e,i,n,r,o,l){i=Math.floor((t-i)/r)*r+i,n=Math.floor((e-n)/o)*o+n;var h=i;return i+r-t<r/2&&(h=i+r),t=n,n+o-e<o/2&&(t=n+o),l.h(h,t),l},wx:function(t,e){var i=Math.max(t,e);t=Math.min(t,e);var n;do e=i%t,i=n=t,t=e;while(0<e);return n},bz:function(t,e,i,n){var r=0>i,o=0>n;if(t<e)var l=1,h=0;else l=0,h=1;var a=l===0?t:e,f=l===0?i:n;return(l===0?r:o)&&(f=-f),l=h,i=l===0?i:n,(l===0?r:o)&&(i=-i),O.cz(a,l===0?t:e,f,i,0,0)},cz:function(t,e,i,n,r,o){if(0<n)if(0<i){r=t*t,o=e*e,t*=i;var l=e*n,h=-o+l,a=-o+Math.sqrt(t*t+l*l);e=h;for(var f=0;9999999999>f&&(e=.5*(h+a),!(e===h||e===a));++f){var p=t/(e+r),d=l/(e+o);if(p=p*p+d*d-1,0<p)h=e;else if(0>p)a=e;else break}i=r*i/(e+r)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else n=t*t-e*e,o=t*i,o<n?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Ze:new Ke,um:new Ke,Mf:new Ke,Nf:0,vm:100};O.za=O.AA;function $(t){Le(this),this.o=2,t===void 0&&(t=$.m),this.na=t,this.Dc=this.Cc=this.od=this.nd=0,t===$.m?this.ee=new tt:($.V===null&&($.V=new tt().freeze()),this.ee=$.V),this.aq=this.ee.Ja,this.Ip=new z().freeze(),this.ym=this.tk=null,this.zm=NaN,this.fg=ei,this.gg=Kr,this.Rk=this.Sk=NaN,this.Uf=le}$.prototype.copy=function(){var t=new $;if(t.o=this.o&-2,t.na=this.na,t.nd=this.nd,t.od=this.od,t.Cc=this.Cc,t.Dc=this.Dc,this.na===$.m){for(var e=this.ee.s,i=t.ee,n=0;n<e.length;n++)i.add(e[n].copy());t.ee=i}else t.ee=this.ee;return t.aq=this.aq,t.Ip.assign(this.Ip),t.tk=this.tk,t.ym=this.ym,t.zm=this.zm,t.fg=this.fg.J(),t.gg=this.gg.J(),t.Sk=this.Sk,t.Rk=this.Rk,t.Uf=this.Uf,t},$.prototype.ja=function(){return this.freeze(),Object.freeze(this),this},$.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==$.m)return this;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].freeze();return this},$.prototype.ka=function(){if(Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==$.m)return this;var t=this.figures;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},$.prototype.Xa=function(t){if(!(t instanceof $))return!1;if(this.type!==t.type)return this.type===$.j&&t.type===$.m?_M(this,t):t.type===$.j&&this.type===$.m?_M(t,this):!1;if(this.type===$.m){var e=this.figures.s;t=t.figures.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0}return O.B(this.startX,t.startX)&&O.B(this.startY,t.startY)&&O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)};function _M(t,e){return t.type!==$.j||e.type!==$.m?!1:!!(e.figures.count===1&&(e=e.figures.M(0),e.segments.count===1&&O.B(t.startX,e.startX)&&O.B(t.startY,e.startY)&&(e=e.segments.M(0),e.type===Qt&&O.B(t.endX,e.endX)&&O.B(t.endY,e.endY))))}$.ia=function(t){return t.toString()},$.prototype.qb=function(t){t.classType===$&&(this.type=t)},$.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case $.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case $.u:var e=new z(this.startX,this.startY,0,0);return e.Kv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case $.F:if(e=new z(this.startX,this.startY,0,0),e.Kv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case $.m:e="",i=this.figures.s;for(var n=i.length,r=0;r<n;r++){var o=i[r];0<r&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}},$.nb=function(t){t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++){var r=t[n];i=r.match(/[Ff]/)!==null?n===0?i+r:i+("X"+(r[0]===" "?"":" ")+r):i+((n===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return i},$.parse=function(t,e){function i(){return M>=L-1?!0:f[M+1].match(j)!==null}function n(){return M++,f[M]}function r(dt){var ft=parseFloat(n()),Tt=parseFloat(n());k===k.toLowerCase()&&(ft=T.x+ft,Tt=T.y+Tt),dt.h(ft,Tt)}function o(){return r(T),T}function l(){return r(C),C}function h(){var dt=S.toLowerCase();return dt!=="c"&&dt!=="s"&&dt!=="q"&&dt!=="t"?T:new N(2*T.x-C.x,2*T.y-C.y)}e===void 0&&(e=!1);var a=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(a,"$1 $2"),t=t.replace(a,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var f=t.split(" ");for(t=0;t<f.length;t++){var p=f[t];if(p.match(/(\.[0-9]*)(\.)/gm)!==null){a=Vt();for(var d="",y=!1,m=0;m<p.length;m++){var x=p[m];x!=="."||y?x==="."?(a.push(d),d="."):d+=x:(y=!0,d+=x)}for(a.push(d),f.splice(t,1),p=0;p<a.length;p++)f.splice(t+p,0,a[p]);t+=a.length-1,zt(a)}}var M=-1,k="",S="";a=new N(0,0);var C=new N(0,0),T=new N(0,0),L=f.length;t=$2(null),y=d=p=!1,m=!0,x=null;for(var j=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(M>=L-1);)if(S=k,k=n(),k!=="")switch(k.toUpperCase()){case"X":m=!0,d=p=!1;break;case"M":for(x=o(),t.lc===null||m===!0?(Xh(t,x.x,x.y,p,!d,y),m=!1):t.moveTo(x.x,x.y),a.assign(T);!i();)x=o(),t.lineTo(x.x,x.y);break;case"L":for(;!i();)x=o(),t.lineTo(x.x,x.y);break;case"H":for(;!i();)T=new N((k===k.toLowerCase()?T.x:0)+parseFloat(n()),T.y),t.lineTo(T.x,T.y);break;case"V":for(;!i();)T=new N(T.x,(k===k.toLowerCase()?T.y:0)+parseFloat(n())),t.lineTo(T.x,T.y);break;case"C":for(;!i();){x=new N,r(x);var A=l(),Z=o();es(t,x.x,x.y,A.x,A.y,Z.x,Z.y)}break;case"S":for(;!i();)x=h(),A=l(),Z=o(),es(t,x.x,x.y,A.x,A.y,Z.x,Z.y);break;case"Q":for(;!i();)x=l(),A=o(),vd(t,x.x,x.y,A.x,A.y);break;case"T":for(;!i();)C=x=h(),A=o(),vd(t,x.x,x.y,A.x,A.y);break;case"B":for(;!i();){x=parseFloat(n()),A=parseFloat(n()),Z=parseFloat(n());var it=parseFloat(n()),et=parseFloat(n()),H=et,Y=!1;i()||(H=parseFloat(n()),i()||(Y=parseFloat(n())!==0)),k===k.toLowerCase()&&(Z+=T.x,it+=T.y),t.arcTo(x,A,Z,it,et,H,Y)}break;case"A":for(;!i();)x=Math.abs(parseFloat(n())),A=Math.abs(parseFloat(n())),Z=parseFloat(n()),et=it=!1,Y=H=0,H=n(),H.length===1?(it=!!parseFloat(H),et=!!parseFloat(n()),H=parseFloat(n())):H.length===2?(it=!!parseFloat(H[0]),et=!!parseFloat(H[1]),H=parseFloat(n())):(it=!!parseFloat(H[0]),et=!!parseFloat(H[1]),H=parseFloat(H.slice(2))),Y=parseFloat(n()),k===k.toLowerCase()&&(H=T.x+H,Y=T.y+Y),T.h(H,Y),xj(t,x,A,Z,it,et,H,Y);break;case"Z":vj(t),T.assign(a);break;case"F":for(x="",A=1;f[M+A];)if(f[M+A]==="0")y=!0,A++;else if(f[M+A].match(/[Uu]/)!==null)A++;else if(f[M+A].match(j)===null)A++;else{x=f[M+A];break}x.match(/[Mm]/)?p=!0:0<t.lc.segments.length&&(t.lc.isFilled=!0);break;case"U":for(x="",A=1;f[M+A];)if(f[M+A].match(/[Ff]/)!==null)A++;else if(f[M+A].match(j)===null)A++;else{x=f[M+A];break}x.match(/[Mm]/)?d=!0:t.lc.isShadowed=!1}if(a=t.os,xd=t,e)for(e=a.figures.iterator;e.next();)e.value.isFilled=!0;return a},$.Ha=function(t,e){for(var i=t.length,n=N.alloc(),r=0;r<i;r++){var o=t[r];n.x=o[0],n.y=o[1],e.Ga(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.Ga(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.Ga(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.Ga(n),o[6]=n.x,o[7]=n.y}N.free(n)},$.prototype.Zu=function(){if(this._isInvalidBounds)return!0;if(this.type===$.m){if(this.aq!==this.figures.Ja)return!0;for(var t=this.figures.s,e=t.length,i=0;i<e;i++)if(t[i].Zu())return!0}return!1},$.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.ym=this.tk=null,this.zm=NaN,this.type===$.m){this.aq=this.figures.Ja;for(var t=this.figures.s,e=t.length,i=0;i<e;i++){var n=t[i];n._isInvalidBounds=!1;var r=n.segments;n.sr=r.Ja,n=r.s,r=n.length;for(var o=0;o<r;o++){var l=n[o];l._isInvalidBounds=!1,l.ae=null}}}t=this.Ip,t.ka(),isNaN(this.Sk)||isNaN(this.Rk)?t.h(0,0,0,0):t.h(0,0,this.Sk,this.Rk),HM(this,t,!1),Be(t,0,0,0,0),t.freeze()},$.prototype.jx=function(){var t=new z;return HM(this,t,!0),t};function HM(t,e,i){switch(t.type){case $.j:case $.u:case $.F:i?e.h(t.nd,t.od,0,0):Be(e,t.nd,t.od,0,0),Be(e,t.Cc,t.Dc,0,0);break;case $.m:var n=t.figures;t=n.s,n=n.length;for(var r=0;r<n;r++){var o=t[r];i&&r===0?e.h(o.startX,o.startY,0,0):Be(e,o.startX,o.startY,0,0);for(var l=o.segments.s,h=l.length,a=o.startX,f=o.startY,p=0;p<h;p++){var d=l[p];switch(d.type){case Qt:case Hn:a=d.endX,f=d.endY,Be(e,a,f,0,0);break;case cn:O.Dl(a,f,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case Lr:O.iv(a,f,d.point1X,d.point1Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case de:case ur:var y=d.type===de?So(d,o):al(d,o,a,f),m=y.length;if(m===0){a=d.type===de?d.centerX:d.endX,f=d.type===de?d.centerY:d.endY,Be(e,a,f,0,0);break}d=null;for(var x=0;x<m;x++)d=y[x],O.Dl(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);d!==null&&(a=d[6],f=d[7]);break;default:I("Unknown Segment type: "+d.type)}}}break;default:I("Unknown Geometry type: "+t.type)}}$.prototype.normalize=function(){this._isFrozen&&nt(this);var t=this.jx();return this.offset(-t.x,-t.y),new N(-t.x,-t.y)},$.prototype.offset=function(t,e){return this._isFrozen&&nt(this),this.transform(1,0,0,1,t,e),this},$.prototype.scale=function(t,e){return this._isFrozen&&nt(this),this.transform(t,0,0,e,0,0),this},$.prototype.rotate=function(t,e,i){this._isFrozen&&nt(this),e===void 0&&(e=0),i===void 0&&(i=0);var n=wt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),wt.free(n),this},s=$.prototype,s.transform=function(t,e,i,n,r,o){switch(this.type){case $.j:case $.u:case $.F:var l=this.nd,h=this.od;this.nd=l*t+h*i+r,this.od=l*e+h*n+o,l=this.Cc,h=this.Dc,this.Cc=l*t+h*i+r,this.Dc=l*e+h*n+o;break;case $.m:for(var a=this.figures.s,f=a.length,p=0;p<f;p++){var d=a[p];l=d.startX,h=d.startY,d.startX=l*t+h*i+r,d.startY=l*e+h*n+o,d=d.segments.s;for(var y=d.length,m=0;m<y;m++){var x=d[m];switch(x.type){case Qt:case Hn:l=x.endX,h=x.endY,x.endX=l*t+h*i+r,x.endY=l*e+h*n+o;break;case cn:l=x.point1X,h=x.point1Y,x.point1X=l*t+h*i+r,x.point1Y=l*e+h*n+o,l=x.point2X,h=x.point2Y,x.point2X=l*t+h*i+r,x.point2Y=l*e+h*n+o,l=x.endX,h=x.endY,x.endX=l*t+h*i+r,x.endY=l*e+h*n+o;break;case Lr:l=x.point1X,h=x.point1Y,x.point1X=l*t+h*i+r,x.point1Y=l*e+h*n+o,l=x.endX,h=x.endY,x.endX=l*t+h*i+r,x.endY=l*e+h*n+o;break;case de:l=x.centerX,h=x.centerY,x.centerX=l*t+h*i+r,x.centerY=l*e+h*n+o,e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),x.startAngle+=l),0>t&&(x.startAngle=180-x.startAngle,x.sweepAngle=-x.sweepAngle),0>n&&(x.startAngle=-x.startAngle,x.sweepAngle=-x.sweepAngle),x.radiusX*=Math.sqrt(t*t+i*i),x.radiusY!==void 0&&(x.radiusY*=Math.sqrt(e*e+n*n));break;case ur:if(l=x.endX,h=x.endY,x.endX=l*t+h*i+r,x.endY=l*e+h*n+o,x.radiusX===0||x.radiusY===0)break;e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),x.xAxisRotation+=l),0>t&&(x.xAxisRotation=180-x.xAxisRotation,x.isClockwiseArc=!x.isClockwiseArc),0>n&&(x.xAxisRotation=-x.xAxisRotation,x.isClockwiseArc=!x.isClockwiseArc),x.radiusX*=Math.sqrt(t*t+i*i),x.radiusY*=Math.sqrt(e*e+n*n);break;default:I("Unknown Segment type: "+x.type)}}}}return this._isInvalidBounds=!0,this},s.ca=function(t,e){e===void 0&&(e=0);var i=this.nd,n=this.od,r=this.Cc,o=this.Dc;switch(this.type){case $.j:return O.Xb(i,n,r,o,e,t.x,t.y);case $.u:var l=z.allocAt(Math.min(i,r)-e,Math.min(n,o)-e,Math.abs(r-i)+2*e,Math.abs(o-n)+2*e);return t=l.ca(t),z.free(l),t;case $.F:l=Math.min(i,r)-e;var h=Math.min(n,o)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,0>=i||0>=e?!1:(l=t.x-(l+i),h=t.y-(h+e),1>=l*l/(i*i)+h*h/(e*e));case $.m:return _0(this,t,e,!0,!1);default:return!1}};function _0(t,e,i,n,r){var o=e.x;e=e.y;for(var l=t.bounds.x-20,h=0,a,f,p,d,y=t.figures.s,m=y.length,x=0;x<m;x++){var M=y[x],k=!M.isEvenOdd;if(M.isFilled){if(n&&M.ca(o,e,i))return!0;var S=M.segments;a=M.startX,f=M.startY;for(var C=a,T=f,L=S.s,j=0;j<=S.length;j++){var A=void 0;if(j!==S.length){A=L[j];var Z=A.type;t=A.endX,d=A.endY}else Z=Qt,t=C,d=T;switch(Z){case Hn:if(C=mp(o,e,l,e,a,f,C,T),isNaN(C))return!0;h+=C,C=t,T=d;break;case Qt:if(a=mp(o,e,l,e,a,f,t,d),isNaN(a))return!0;h+=a;break;case cn:p=O.Fo(a,f,A.point1X,A.point1Y,A.point2X,A.point2Y,t,d,l,e,o,e,.5),h+=p;break;case Lr:p=O.Fo(a,f,(a+2*A.point1X)/3,(f+2*A.point1Y)/3,(2*A.point1X+t)/3,(2*A.point1Y+d)/3,t,d,l,e,o,e,.5),h+=p;break;case de:case ur:Z=A.type===de?So(A,M):al(A,M,a,f);var it=Z.length;if(it===0){if(a=mp(o,e,l,e,a,f,A.type===de?A.centerX:A.endX,A.type===de?A.centerY:A.endY),isNaN(a))return!0;h+=a;break}A=null;for(var et=0;et<it;et++){if(A=Z[et],et===0){if(p=mp(o,e,l,e,a,f,A[0],A[1]),isNaN(p))return!0;h+=p}p=O.Fo(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],l,e,o,e,.5),h+=p}A!==null&&(t=A[6],d=A[7]);break;default:I("Unknown Segment type: "+A.type)}a=t,f=d}if(k){if(h!==0)return!0}else if(h%2!==0)return!0;h=0}else if(M.ca(o,e,r?i:i+2))return!0}return!1}function mp(t,e,i,n,r,o,l,h){if(O.Xb(r,o,l,h,.05,t,e))return NaN;var a=(t-i)*(o-h);if(a===0)return 0;var f=((t*n-e*i)*(r-l)-(t-i)*(r*h-o*l))/a;if(e=(t*n-e*i)*(o-h)/a,f>=t)return 0;if((r>l?r-l:l-r)<(o>h?o-h:h-o)){if(o<h){if(e<o||e>h)return 0}else if(e<h||e>o)return 0}else if(r<l){if(f<r||f>l)return 0}else if(f<l||f>r)return 0;return 0<a?1:-1}function KM(t,e,i,n){t=t.figures.s;for(var r=t.length,o=0;o<r;o++)if(t[o].ca(e,i,n))return!0;return!1}s.Pu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new N),this.type===$.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],f=a.length;for(t=0;t<f;t++){var p=a[t];if(l+p>=o)return n=o-l,n=p===0?0:n/p,i=i[h],h=i[2*t],r=i[2*t+1],e.h(h+(i[2*t+2]-h)*n,r+(i[2*t+3]-r)*n),e;l+=p}}return e},s.xx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===$.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,o=0,l=0;l<n;l++){var h=i[l],a=h.length;for(t=0;t<a;t++){var f=h[t];if(o+f>=r)return r=e[l],e=r[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=f}}return NaN},s.Qu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===$.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],f=a.length;for(t=0;t<f;t++){var p=a[t];if(l+p>=o)return n=o-l,n=p===0?0:n/p,p=i[h],i=p[2*t],h=p[2*t+1],r=p[2*t+2],t=p[2*t+3],e[0]=i+(r-i)*n,e[1]=h+(t-h)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-h)?0:1>Math.abs(r-i)?0<=t-h?90:270:1>Math.abs(t-h)?0<=r-i?0:180:180*Math.atan2(t-h,r-i)/Math.PI,e;l+=p}}return e},s.yx=function(t){if(this.type===$.j){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var o=t.x;if(t=t.y,e===n){if(i<r){var l=i;n=r}else l=r,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===r)return e<n?l=e:(l=n,n=e),o<=l?l===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-l);l=(n-e)*(n-e)+(r-i)*(r-i);var h=N.alloc();return O.qh(e,i,n,r,o,t,h),t=h.x,o=h.y,N.free(h),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/l)}}else if(this.type===$.u){l=this.startX,h=this.startY;var a=this.endX;if(r=this.endY,l!==a||h!==r){e=a-l,i=r-h,o=2*e+2*i,n=t.x,t=t.y,n=Math.min(Math.max(n,l),a),t=Math.min(Math.max(t,h),r),l=Math.abs(n-l),a=Math.abs(n-a),h=Math.abs(t-h),r=Math.abs(t-r);var f=Math.min(l,a,h,r);if(f===h)return n/o;if(f===a)return(e+t)/o;if(f===r)return(2*e+i-n)/o;if(f===l)return(2*e+2*i-t)/o}}else{e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=N.alloc(),r=1/0,h=l=0,a=e.length;for(var p=f=0,d=0;d<a;d++)for(var y=e[d],m=i[d],x=y.length,M=0;M<x;M+=2){var k=y[M],S=y[M+1];if(M!==0){O.qh(f,p,k,S,t.x,t.y,n);var C=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);C<r&&(r=C,l=h,l+=Math.sqrt((n.x-f)*(n.x-f)+(n.y-p)*(n.y-p))),h+=m[(M-2)/2]}f=k,p=S}return N.free(n),t=l/o,0>t?0:1<t?1:t}return 0};function WM(t){if(t.tk===null){var e=t.tk=[],i=t.ym=[],n=[],r=[];if(t.type===$.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===$.u)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===$.F){var o=new Ee;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var l=new jt(de);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,o.add(l),t=So(l,o),r=t.length,r===0)n.push(l.centerX),n.push(l.centerY);else{l=o.startX,o=o.startY;for(var h=0;h<r;h++){var a=t[h];O.Qe(l,o,a[2],a[3],a[4],a[5],a[6],a[7],.5,n),l=a[6],o=a[7]}}e.push(n),i.push(H0(n))}else for(t=t.figures.iterator;t.next();){r=t.value,n=[],n.push(r.startX),n.push(r.startY),l=r.startX,o=r.startY,h=l,a=o;for(var f=r.segments.s,p=f.length,d=0;d<p;d++){var y=f[d];switch(y.type){case Hn:4<=n.length&&(e.push(n),i.push(H0(n))),n=[],n.push(y.endX),n.push(y.endY),l=y.endX,o=y.endY,h=l,a=o;break;case Qt:n.push(y.endX),n.push(y.endY),l=y.endX,o=y.endY;break;case cn:O.Qe(l,o,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,n),l=y.endX,o=y.endY;break;case Lr:O.ep(l,o,y.point1X,y.point1Y,y.endX,y.endY,.5,n),l=y.endX,o=y.endY;break;case de:var m=So(y,r),x=m.length;if(x===0){n.push(y.centerX),n.push(y.centerY),l=y.centerX,o=y.centerY;break}for(var M=0;M<x;M++){var k=m[M];O.Qe(l,o,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],o=k[7]}break;case ur:if(m=al(y,r,l,o),x=m.length,M=y.endX,k=y.endY,x===0){n.push(M),n.push(k),l=M,o=k;break}for(M=0;M<x;M++)k=m[M],O.Qe(l,o,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],o=k[7];break;default:I("Segment not of valid type: "+y.type)}y.isClosed&&(n.push(h),n.push(a))}4<=n.length&&(e.push(n),i.push(H0(n)))}}}function H0(t){for(var e=[],i=0,n=0,r=t.length,o=0;o<r;o+=2){var l=t[o],h=t[o+1];o!==0&&e.push(Math.sqrt(xo(i,n,l,h))),i=l,n=h}return e}s.add=function(t){return this.ee.add(t),this},s.pm=function(t,e,i,n,r,o,l,h){return this._isFrozen&&nt(this),this.fg=new ht(t,e,r,o).freeze(),this.gg=new ht(i,n,l,h).freeze(),this},B.Object.defineProperties($.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},flattenedSegments:{get:function(){return WM(this),this.tk}},flattenedLengths:{get:function(){return WM(this),this.ym}},flattenedTotalLength:{get:function(){var t=this.zm;if(isNaN(t)){if(this.type===$.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===$.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var i=e.length,n=t=0;n<i;n++)for(var r=e[n],o=r.length,l=0;l<o;l++)t+=r[l]}this.zm=t}return t}},type:{get:function(){return this.na},set:function(t){this.na!==t&&(this._isFrozen&&nt(this,t),this.na=t,t===$.m?this.ee=new tt:($.V===null&&($.V=new tt().freeze()),this.ee=$.V),this._isInvalidBounds=!0)}},startX:{get:function(){return this.nd},set:function(t){this.nd!==t&&(this._isFrozen&&nt(this,t),this.nd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.od},set:function(t){this.od!==t&&(this._isFrozen&&nt(this,t),this.od=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.Cc},set:function(t){this.Cc!==t&&(this._isFrozen&&nt(this,t),this.Cc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.Dc},set:function(t){this.Dc!==t&&(this._isFrozen&&nt(this,t),this.Dc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.ee},set:function(t){this.ee!==t&&(this._isFrozen&&nt(this,t),this.ee=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.fg},set:function(t){this._isFrozen&&nt(this,t),this.fg=t.J()}},spot2:{get:function(){return this.gg},set:function(t){this._isFrozen&&nt(this,t),this.gg=t.J()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this._isFrozen&&nt(this,t),this.Uf=t}},bounds:{get:function(){return this.Zu()&&this.computeBounds(),this.Ip}}}),$.prototype.setSpots=$.prototype.pm,$.prototype.add=$.prototype.add,$.prototype.getFractionForPoint=$.prototype.yx,$.prototype.getPointAndAngleAlongPath=$.prototype.Qu,$.prototype.getAngleAlongPath=$.prototype.xx,$.prototype.getPointAlongPath=$.prototype.Pu,$.prototype.containsPoint=$.prototype.ca,$.prototype.transform=$.prototype.transform,$.prototype.rotate=$.prototype.rotate,$.prototype.scale=$.prototype.scale,$.prototype.offset=$.prototype.offset,$.prototype.normalize=$.prototype.normalize,$.prototype.computeBoundsWithoutOrigin=$.prototype.jx,$.prototype.equalsApprox=$.prototype.Xa,$.className="Geometry",$.j=new Q($,"Line",0),$.u=new Q($,"Rectangle",1),$.F=new Q($,"Ellipse",2),$.m=new Q($,"Path",3),$.V=null,$.hb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",$.className="Geometry",$.stringify=$.ia,$.fillPath=$.nb,$.parse=$.parse,$.Line=$.j,$.Rectangle=$.u,$.Ellipse=$.F,$.Path=$.m;function Ee(t,e,i,n,r){Le(this),i===void 0&&(i=!0),n===void 0&&(n=!0),r===void 0&&(r=!1),this.o=2|(i?4:0)|(n?8:0)|(r?16:0),t!==void 0?this.nd=t:this.nd=0,e!==void 0?this.od=e:this.od=0,this.pl=new tt,this.sr=this.pl.Ja,this.fw=null}Ee.prototype.copy=function(){var t=new Ee;t.o=this.o&-2,t.nd=this.nd,t.od=this.od;for(var e=this.pl.s,i=e.length,n=t.pl,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.sr=this.sr,t.fw=this.fw,t},s=Ee.prototype,s.Xa=function(t){if(!(t instanceof Ee&&O.B(this.startX,t.startX)&&O.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0},s.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.s,n=i.length,r=0;r<n;r++)e+=" "+i[r].toString(t);return e},s.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},s.ka=function(){this._isFrozen=!1;var t=this.segments;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},s.Zu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.sr!==t.Ja)return!0;t=t.s;for(var e=t.length,i=0;i<e;i++)if(t[i]._isInvalidBounds)return!0;return!1},s.add=function(t){return this.pl.add(t),this},s.ca=function(t,e,i){for(var n=this.startX,r=this.startY,o=n,l=r,h=this.segments.s,a=h.length,f=0;f<a;f++){var p=h[f];switch(p.type){case Hn:o=p.endX,l=p.endY,n=p.endX,r=p.endY;break;case Qt:if(O.Xb(n,r,p.endX,p.endY,i,t,e))return!0;n=p.endX,r=p.endY;break;case cn:if(O.cs(n,r,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case Lr:if(O.jv(n,r,p.point1X,p.point1Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case de:case ur:var d=p.type===de?So(p,this):al(p,this,n,r),y=d.length,m=p.type===de?p.centerX:p.endX,x=p.type===de?p.centerY:p.endY;if(y===0){if(O.Xb(n,r,m,x,i,t,e))return!0;n=m,r=x;break}for(m=null,x=0;x<y;x++)if(m=d[x],x===0&&O.Xb(n,r,m[0],m[1],i,t,e)||O.cs(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],.5,t,e,i))return!0;m!==null&&(n=m[6],r=m[7]);break;default:I("Unknown Segment type: "+p.type)}if(p.isClosed&&(n!==o||r!==l)&&O.Xb(n,r,o,l,i,t,e))return!0}return!1},B.Object.defineProperties(Ee.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isFilled:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&nt(this,t),this.o=t?this.o|4:this.o&-5}},isShadowed:{get:function(){return(this.o&8)!==0},set:function(t){this._isFrozen&&nt(this,t),this.o=t?this.o|8:this.o&-9}},isEvenOdd:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&nt(this,t),this.o=t?this.o|16:this.o&-17}},startX:{get:function(){return this.nd},set:function(t){this._isFrozen&&nt(this,t),this.nd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.od},set:function(t){this._isFrozen&&nt(this,t),this.od=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.pl},set:function(t){this._isFrozen&&nt(this,t),this.pl=t,this._isInvalidBounds=!0}}}),Ee.prototype.add=Ee.prototype.add,Ee.prototype.equalsApprox=Ee.prototype.Xa,Ee.className="PathFigure";function jt(t,e,i,n,r,o,l,h){Le(this),t===void 0&&(t=Qt),this.na=t,this.o=2,e!==void 0?this.Cc=e:this.Cc=0,i!==void 0?this.Dc=i:this.Dc=0,n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),l===void 0&&(l=0),t===ur?(t=o%360,0>t&&(t+=360),this.Ne=t,this.Vh=0,this.Wh=Math.max(n,0),this.Pg=Math.max(r,0),typeof l=="boolean"?l&&(this.isLargeArc=!0):typeof l=="number"&&l&&(this.isLargeArc=!0),h&&(this.isClockwiseArc=!0)):(this.Ne=n,this.Vh=r,t===de&&(o=Math.max(o,0)),this.Wh=o,typeof l=="number"?(t===de&&(l=Math.max(l,0)),this.Pg=l):this.Pg=0),this.ae=null}jt.prototype.copy=function(){var t=new jt;return t.na=this.na,t.o=this.o&-2,t.Cc=this.Cc,t.Dc=this.Dc,t.Ne=this.Ne,t.Vh=this.Vh,t.Wh=this.Wh,t.Pg=this.Pg,t},s=jt.prototype,s.Xa=function(t){if(!(t instanceof jt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Hn:case Qt:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY);case cn:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.point1X,t.point1X)&&O.B(this.point1Y,t.point1Y)&&O.B(this.point2X,t.point2X)&&O.B(this.point2Y,t.point2Y);case Lr:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.point1X,t.point1X)&&O.B(this.point1Y,t.point1Y);case de:return O.B(this.startAngle,t.startAngle)&&O.B(this.sweepAngle,t.sweepAngle)&&O.B(this.centerX,t.centerX)&&O.B(this.centerY,t.centerY)&&O.B(this.radiusX,t.radiusX)&&O.B(this.radiusY,t.radiusY);case ur:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&O.B(this.xAxisRotation,t.xAxisRotation)&&O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.radiusX,t.radiusX)&&O.B(this.radiusY,t.radiusY);default:return!1}},s.qb=function(t){t.classType===jt&&(this.type=t)},s.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Hn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Qt:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case cn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Lr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case de:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case ur:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.close=function(){return this.isClosed=!0,this};function So(t,e){if(t.ae!==null&&e._isInvalidBounds===!1)return t.ae;var i=t.radiusX,n=t.radiusY;if(n===void 0&&(n=i),i===0||n===0)return t.ae=[],t.ae;e=t.Ne;var r=t.Vh,o=O.kx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=wt.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),$.Ha(o,l),wt.free(l)}for(i=o.length,n=0;n<i;n++)l=o[n],l[0]+=e,l[1]+=r,l[2]+=e,l[3]+=r,l[4]+=e,l[5]+=r,l[6]+=e,l[7]+=r;return t.ae=o,t.ae}function al(t,e,i,n){function r(M,k,S,C){return(M*C<k*S?-1:1)*Math.acos((M*S+k*C)/(Math.sqrt(M*M+k*k)*Math.sqrt(S*S+C*C)))}if(t.ae!==null&&e._isInvalidBounds===!1)return t.ae;if(t.radiusX===0||t.radiusY===0)return t.ae=[],t.ae;e=t.Wh;var o=t.Pg;e===0&&(e=1e-4),o===0&&(o=1e-4);var l=Math.PI/180*t.Ne,h=t.isLargeArc,a=t.isClockwiseArc,f=t.Cc,p=t.Dc,d=Math.cos(l),y=Math.sin(l),m=d*(i-f)/2+y*(n-p)/2;l=-y*(i-f)/2+d*(n-p)/2;var x=m*m/(e*e)+l*l/(o*o);return 1<x&&(e*=Math.sqrt(x),o*=Math.sqrt(x)),x=(h===a?-1:1)*Math.sqrt((e*e*o*o-e*e*l*l-o*o*m*m)/(e*e*l*l+o*o*m*m)),isNaN(x)&&(x=0),h=x*e*l/o,x=x*-o*m/e,isNaN(h)&&(h=0),isNaN(x)&&(x=0),i=(i+f)/2+d*h-y*x,n=(n+p)/2+y*h+d*x,p=r(1,0,(m-h)/e,(l-x)/o),d=(m-h)/e,f=(l-x)/o,m=(-m-h)/e,h=(-l-x)/o,l=r(d,f,m,h),m=(d*m+f*h)/(Math.sqrt(d*d+f*f)*Math.sqrt(m*m+h*h)),-1>=m?l=Math.PI:1<=m&&(l=0),!a&&0<l&&(l-=2*Math.PI),a&&0>l&&(l+=2*Math.PI),a=e>o?1:e/o,m=e>o?o/e:1,e=O.kx(0,0,e>o?e:o,p,p+l,!0),o=wt.alloc(),o.reset(),o.translate(i,n),o.rotate(t.Ne,0,0),o.scale(a,m),$.Ha(e,o),wt.free(o),t.ae=e,t.ae}B.Object.defineProperties(jt.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isClosed:{get:function(){return(this.o&8)!==0},set:function(t){this.isClosed!==t&&(this.o=t?this.o|8:this.o&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.na},set:function(t){this._isFrozen&&nt(this,t),this.na=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.Cc},set:function(t){this._isFrozen&&nt(this,t),this.Cc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.Dc},set:function(t){this._isFrozen&&nt(this,t),this.Dc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ne},set:function(t){this._isFrozen&&nt(this,t),this.Ne=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Vh},set:function(t){this._isFrozen&&nt(this,t),this.Vh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Wh},set:function(t){this._isFrozen&&nt(this,t),this.Wh=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Pg},set:function(t){this._isFrozen&&nt(this,t),this.Pg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ne},set:function(t){this._isFrozen&&nt(this,t),this.Ne=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Vh},set:function(t){this._isFrozen&&nt(this,t),this.Vh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Wh},set:function(t){0>t&&at(t,">= zero",jt,"radiusX"),this._isFrozen&&nt(this,t),this.Wh=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Pg},set:function(t){0>t&&at(t,">= zero",jt,"radiusY"),this._isFrozen&&nt(this,t),this.Pg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.Cc},set:function(t){this._isFrozen&&nt(this,t),t%=360,0>t&&(t+=360),this.Cc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.Dc},set:function(t){this._isFrozen&&nt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Dc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&nt(this,t),this.o=t?this.o|4:this.o&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&nt(this,t),this.o=t?this.o|16:this.o&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ne},set:function(t){this._isFrozen&&nt(this,t),t%=360,0>t&&(t+=360),this.Ne=t,this._isInvalidBounds=!0}}}),jt.prototype.equalsApprox=jt.prototype.Xa;var Hn=new Q(jt,"Move",0),Qt=new Q(jt,"Line",1),cn=new Q(jt,"Bezier",2),Lr=new Q(jt,"QuadraticBezier",3),de=new Q(jt,"Arc",4),ur=new Q(jt,"SvgArc",4);jt.className="PathSegment",jt.Move=Hn,jt.Line=Qt,jt.Bezier=cn,jt.QuadraticBezier=Lr,jt.Arc=de,jt.SvgArc=ur;function pn(){this.H=null,this.xu=new N(0,0).freeze(),this.mt=new N(0,0).freeze(),this.Bp=this.Rq=0,this.Cp=1,this.xq="",this.Wr=this.Tp=!1,this.Rp=this.Ep=0,this.xg=this.nq=this.tq=!1,this.Zp=null,this.Rr=0,this.xd=this.Nr=null}pn.prototype.copy=function(){var t=new pn;return this.clone(t)},pn.prototype.clone=function(t){return t.H=this.H,t.xu.assign(this.viewPoint),t.mt.assign(this.documentPoint),t.Rq=this.Rq,t.Bp=this.Bp,t.Cp=this.Cp,t.xq=this.xq,t.Tp=this.Tp,t.Wr=this.Wr,t.Ep=this.Ep,t.Rp=this.Rp,t.tq=this.tq,t.nq=this.nq,t.xg=this.xg,t.Zp=this.Zp,t.Rr=this.Rr,t.Nr=this.Nr,t.xd=this.xd,t},pn.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},pn.prototype.So=function(t,e){var i=this.diagram;return i===null||IS(i,t,e),e},pn.prototype.Dz=function(t,e){var i=this.diagram;return i===null||(IS(i,t,e),e.assign(i.Ps(e))),e},B.Object.defineProperties(pn.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.xu},set:function(t){this.xu.assign(t)}},documentPoint:{get:function(){return this.mt},set:function(t){this.mt.assign(t)}},modifiers:{get:function(){return this.Rq},set:function(t){this.Rq=t}},button:{get:function(){return this.Bp},set:function(t){if(this.Bp=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Cp},set:function(t){this.Cp=t}},key:{get:function(){return this.xq},set:function(t){this.xq=t}},down:{get:function(){return this.Tp},set:function(t){this.Tp=t}},up:{get:function(){return this.Wr},set:function(t){this.Wr=t}},clickCount:{get:function(){return this.Ep},set:function(t){this.Ep=t}},delta:{get:function(){return this.Rp},set:function(t){this.Rp=t}},isMultiTouch:{get:function(){return this.tq},set:function(t){this.tq=t}},handled:{get:function(){return this.nq},set:function(t){this.nq=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Zp},set:function(t){this.Zp=t}},isTouchEvent:{get:function(){var t=this.event;return t===null?!1:t.pointerType==="touch"||t.pointerType==="pen"}},timestamp:{get:function(){return this.Rr},set:function(t){this.Rr=t}},targetDiagram:{get:function(){return this.Nr},set:function(t){this.Nr=t}},targetObject:{get:function(){return this.xd},set:function(t){this.xd=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),pn.prototype.getMultiTouchDocumentPoint=pn.prototype.Dz,pn.prototype.getMultiTouchViewPoint=pn.prototype.So,pn.className="InputEvent";function au(){this.H=null,this.xa="",this.ar=this.Lr=null}au.prototype.copy=function(){var t=new au;return t.H=this.H,t.xa=this.xa,t.Lr=this.Lr,t.ar=this.ar,t},au.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},B.Object.defineProperties(au.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},subject:{get:function(){return this.Lr},set:function(t){this.Lr=t}},parameter:{get:function(){return this.ar},set:function(t){this.ar=t}}}),au.className="DiagramEvent";function qt(){this.Fm=Jt,this.rf=this.Qq="",this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.cc=null}qt.prototype.clear=function(){this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.cc=null},qt.prototype.copy=function(){var t=new qt;t.Fm=this.Fm,t.Qq=this.Qq,t.rf=this.rf,t.cc=this.cc,t.H=this.H,t.Qn=this.Qn;var e=this.Sn;return t.Sn=yt(e)&&typeof e.J=="function"?e.J():e,e=this.Rn,t.Rn=yt(e)&&typeof e.J=="function"?e.J():e,e=this.Mn,t.Mn=yt(e)&&typeof e.J=="function"?e.J():e,e=this.Ln,t.Ln=yt(e)&&typeof e.J=="function"?e.J():e,t},qt.prototype.qb=function(t){t.classType===qt&&(this.change=t)},qt.prototype.toString=function(){var t="";return t=this.change===hr?t+"* ":this.change===Jt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===hr?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Xi(this.object)),this.oldValue!==null&&(t+="  old: "+Xi(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Xi(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},qt.prototype.I=function(t){return t?this.oldValue:this.newValue},qt.prototype.Fz=function(t){return t?this.oldParam:this.newParam},qt.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},qt.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},qt.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},qt.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},B.Object.defineProperties(qt.prototype,{model:{get:function(){return this.cc},set:function(t){this.cc=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.Fm},set:function(t){this.Fm=t}},modelChange:{get:function(){return this.Qq},set:function(t){this.Qq=t}},propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},isTransactionFinished:{get:function(){return this.Fm===hr&&(this.rf==="CommittedTransaction"||this.rf==="FinishedUndo"||this.rf==="FinishedRedo")}},object:{get:function(){return this.Qn},set:function(t){this.Qn=t}},oldValue:{get:function(){return this.Sn},set:function(t){this.Sn=t}},oldParam:{get:function(){return this.Rn},set:function(t){this.Rn=t}},newValue:{get:function(){return this.Mn},set:function(t){this.Mn=t}},newParam:{get:function(){return this.Ln},set:function(t){this.Ln=t}}}),qt.prototype.redo=qt.prototype.redo,qt.prototype.canRedo=qt.prototype.canRedo,qt.prototype.undo=qt.prototype.undo,qt.prototype.canUndo=qt.prototype.canUndo,qt.prototype.getParam=qt.prototype.Fz,qt.prototype.getValue=qt.prototype.I,qt.prototype.clear=qt.prototype.clear;var hr=new Q(qt,"Transaction",-1),Jt=new Q(qt,"Property",0),Me=new Q(qt,"Insert",1),Ne=new Q(qt,"Remove",2);qt.className="ChangedEvent",qt.Transaction=hr,qt.Property=Jt,qt.Insert=Me,qt.Remove=Ne;function ze(){this.m=new tt().freeze(),this.xa="",this.j=!1}ze.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.M(i);n!==null&&(e+=`
  `+n.toString())}}return e},ze.prototype.clear=function(){var t=this.changes;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);i!==null&&i.clear()}t.clear(),t.freeze()},ze.prototype.canUndo=function(){return this.isComplete},ze.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.M(t);e!==null&&e.undo()}},ze.prototype.canRedo=function(){return this.isComplete},ze.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.M(e);i!==null&&i.redo()}},ze.prototype.ak=function(){if(this.isComplete){var t=this.changes;t.ka();for(var e=new mt,i=0;i<t.count;i++){var n=t.M(i);if(n!==null&&n.change===Jt&&n.object){var r=e.get(n.object);r||(r=new mt,e.set(n.object,r));var o=r.get(n.propertyName);o===null?r.set(n.propertyName,-1):(0<o&&t.bd(o,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)n=t.M(i),n!==null&&(i>e&&t.bd(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},B.Object.defineProperties(ze.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),ze.prototype.optimize=ze.prototype.ak,ze.prototype.redo=ze.prototype.redo,ze.prototype.canRedo=ze.prototype.canRedo,ze.prototype.undo=ze.prototype.undo,ze.prototype.canUndo=ze.prototype.canUndo,ze.prototype.clear=ze.prototype.clear,ze.className="Transaction";function ie(){this.Pt=new q,this.Jd=!1,this.u=new tt().freeze(),this.Ce=-1,this.m=999,this.Fe=!1,this.Np=null,this.bi=0,this.j=!1,this.Ie=new tt().freeze(),this.hl=new tt,this.tt=!0,this.Dt=this.rq=this.Gt=this.Ft=!1}ie.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.M(n);if(e+="]",t!==void 0&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=`
 `+this.history.M(n).toString(t-1);return e},ie.prototype.clear=function(){var t=this.history;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);i!==null&&i.clear()}t.clear(),this.Ce=-1,t.freeze(),this.Fe=!1,this.Np=null,this.bi=0,this.Ie.ka(),this.Ie.clear(),this.Ie.freeze(),this.hl.clear(),this.Dt=this.rq=this.Gt=this.Ft=!1},ie.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},s=ie.prototype,s.Xw=function(t){this.Pt.add(t)},s.Ux=function(t){this.Pt.remove(t)},s.Ea=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.tt===!0&&(this.tt=!1,this.bi++,this.isInternalTransaction||this.Ob("StartingFirstTransaction",t,this.currentTransaction),0<this.bi&&this.bi--),this.isEnabled&&(this.Ie.ka(),this.Ie.add(t),this.Ie.freeze(),this.currentTransaction===null?this.hl.add(0):this.hl.add(this.currentTransaction.changes.count)),this.bi++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Ob("StartedTransaction",t,this.currentTransaction)),e},s.eb=function(t){return t===void 0&&(t=""),$M(this,!0,t)},s.Kf=function(){return $M(this,!1,"")};function $M(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&kt("Ending transaction without having started a transaction: "+i);var n=t.transactionLevel===1,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Ob("CommittingTransaction",i,r));var o=0;if(0<t.transactionLevel&&(t.bi--,t.isEnabled)){var l=t.Ie.count;0<l&&(i===""&&(i=t.Ie.M(0)),t.Ie.ka(),t.Ie.mb(l-1),t.Ie.freeze()),l=t.hl.count,0<l&&(o=t.hl.M(l-1),t.hl.mb(l-1))}if(n){if(e)t.rq=!1,r===null&&i!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null&&(r.isComplete||(r.isComplete=!0,r.name=i),t.mx(),e=t.history,e.ka(),n=t.maxHistoryLength,0<=n&&(n===0?e.clear():e.count>=n&&(o=e.M(0),o!==null&&o.clear(),e.mb(0),t.Ce--)),n===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.Ce++),e.freeze()),t.isInternalTransaction||t.Ob("CommittedTransaction",i,r);else{t.Fe=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Ob("RolledBackTransaction",i,r),t.Fe=!1}r!==null&&r.clear()}return t.Np=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=o,i=r.changes,r=i.count-1;r>=t;r--)e=i.M(r),e!==null&&e.undo(),i.ka(),i.mb(r);i.freeze()}return!1}s.mx=function(){if(!this.isUndoingRedoing&&this.canRedo()){var t=this.history;t.ka();for(var e=t.count-1;e>this.historyIndex;e--){var i=t.M(e);i!==null&&i.clear(),t.mb(e),this.rq=!0}t.freeze()}},ie.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},ie.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.Fe=!0,this.Ob("StartingUndo","Undo",t),this.Ce--,t.undo()}catch(e){kt("undo error: "+e.toString())}finally{this.Ob("FinishedUndo","Undo",t),this.Fe=!1}}},ie.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},ie.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.Fe=!0,this.Ob("StartingRedo","Redo",t),this.Ce++,t.redo()}catch(e){kt("redo error: "+e.toString())}finally{this.Ob("FinishedRedo","Redo",t),this.Fe=!1}}},ie.prototype.Ob=function(t,e,i){i===void 0&&(i=null);var n=new qt;for(n.change=hr,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.ds(n)},ie.prototype.Tu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.Np=e=new ze);var i=t.copy();e=e.changes,e.ka(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.tt&&(t=t.diagram,t!==null&&t.pi===!1||kt("Change not within a transaction: "+i.toString()))}},ie.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},B.Object.defineProperties(ie.prototype,{models:{get:function(){return this.Pt.iterator}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.M(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.M(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.Fe}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.Ce}},currentTransaction:{get:function(){return this.Np}},transactionLevel:{get:function(){return this.bi}},isInTransaction:{get:function(){return 0<this.bi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.Ie}},isPendingClear:{get:function(){return this.Ft},set:function(t){this.Ft=t}},isPendingUnmodified:{get:function(){return this.Gt},set:function(t){this.Gt=t}},isInternalTransaction:{get:function(){return this.Dt},set:function(t){this.Dt=t}},isJustDiscarded:{get:function(){return this.rq}}}),ie.prototype.handleChanged=ie.prototype.Tu,ie.prototype.redo=ie.prototype.redo,ie.prototype.undo=ie.prototype.undo,ie.prototype.canUndo=ie.prototype.canUndo,ie.prototype.discardHistoryAfterIndex=ie.prototype.mx,ie.prototype.rollbackTransaction=ie.prototype.Kf,ie.prototype.commitTransaction=ie.prototype.eb,ie.prototype.startTransaction=ie.prototype.Ea,ie.prototype.removeModel=ie.prototype.Ux,ie.prototype.addModel=ie.prototype.Xw,ie.prototype.clear=ie.prototype.clear,ie.className="UndoManager";function Lt(){Le(this),this.H=wh,this.xa="",this.Jd=!0,this.nb=!1,this.wm=null,this.By=new pn,this.Zr=-1}Lt.prototype.toString=function(){return this.name!==""?this.name+" Tool":Ns(this.constructor)},Lt.prototype.updateAdornments=function(){},Lt.prototype.canStart=function(){return this.isEnabled},Lt.prototype.doStart=function(){},Lt.prototype.doActivate=function(){this.isActive=!0},Lt.prototype.doDeactivate=function(){this.isActive=!1},Lt.prototype.doStop=function(){},Lt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Lt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Lt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Lt.prototype.doMouseMove=function(){},Lt.prototype.doMouseUp=function(){this.stopTool()},Lt.prototype.doMouseWheel=function(){},Lt.prototype.canStartMultiTouch=function(){return!0},Lt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,N.allocAt(NaN,NaN)),n=e.So(1,N.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){t.Bw=t.scale;var r=n.x-i.x,o=n.y-i.y;t.Jw=Math.sqrt(r*r+o*o),e.bubbles=!1}N.free(i),N.free(n)},Lt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,N.allocAt(NaN,NaN)),n=e.So(1,N.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){var r=n.x-i.x,o=n.y-i.y;o=Math.sqrt(r*r+o*o)/t.Jw,r=new N((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),o*=t.Bw;var l=t.commandHandler;if(o!==t.scale&&l.canResetZoom(o)){var h=t.zoomPoint;t.zoomPoint=r,l.resetZoom(o),t.zoomPoint=h}e.bubbles=!1}N.free(i),N.free(n)},Lt.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Lt.prototype.doKeyUp=function(){},Lt.prototype.Ea=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Ea(t)},Lt.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.Kf():t.eb(this.transactionResult)},Lt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Ol(e.documentPoint,!1);if(i!==null){if(we?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(we?e.meta:e.control)||e.shift||t.clearSelection()}},Lt.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.hc(n.documentPoint,t,e),n.targetObject=t,YL(t,n,i),n.handled};function YL(t,e,i){if(e.handled=!1,t===null||t.If()){var n=0;e.left?n=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(n=3);var r="ObjectSingleClicked";if(t!==null){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}n!==0&&i.R(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}n!==0&&i.R(r)}if(t!==null)for(;t!==null;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(i!==null&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}t!==null&&t(e)}}}Lt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.zb!==!0){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.ca(e.documentPoint)?t.hc(e.documentPoint,null,null):null;!e.event||e.event.type!=="pointercancel"&&e.event.type!=="pointerout"||(n=null),e.targetObject=n;var r=!1;if(n!==t.Ck){var o=t.Ck,l=o;for(t.Ck=n,this.doCurrentObjectChanged(o,n),e.handled=!1;o!==null;){var h=o.mouseLeave;if(h!==null&&(n===o||n!==null&&n.rg(o)||(h(e,o,n),r=!0,e.handled)))break;o=o.panel}for(o=l,e.handled=!1;n!==null&&(l=n.mouseEnter,!(l!==null&&(o===n||o!==null&&o.rg(n)||(l(e,n,o),r=!0,e.handled))));)n=n.panel;n=t.Ck}if(n!==null){for(o=n,l="";o!==null&&(l=o.cursor,l==="");)o=o.panel;for(t.currentCursor=l,e.handled=!1,o=n;o!==null&&(n=o.mouseOver,!(n!==null&&(n(e,o),r=!0,e.handled)));)o=o.panel}else this.doUpdateCursor(null),n=t.mouseOver,n!==null&&(n(e),r=!0);r&&t.Zb(),t.skipsUndoManager=i}},Lt.prototype.doUpdateCursor=function(){var t=this.diagram;t&&(t.currentCursor="")},Lt.prototype.doCurrentObjectChanged=function(){},Lt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(i!==0&&t.documentBounds.w()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(n!==null&&(r===tf&&!e.shift||r===fh&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===tf&&e.shift||r===fh&&!e.control){n=t.position.copy();var o=e.event;r=o.deltaMode;var l=o.deltaX;o=o.deltaY;var h="pixel";if(l===0&&o===0||e.shift)!e.shift&&t.allowVerticalScroll?(i=3*i*t.scrollVerticalLineChange,t.scroll(h,0<i?"up":"down",Math.abs(i))):e.shift&&t.allowHorizontalScroll&&(i=3*i*t.scrollHorizontalLineChange,t.scroll(h,0<i?"left":"right",Math.abs(i)));else{switch(r){case 0:h="pixel";break;case 1:h="line";break;case 2:h="page"}l!==0&&t.allowHorizontalScroll&&(l*=t.scrollHorizontalLineChange/16,t.scroll(h,0<l?"right":"left",Math.abs(l))),o!==0&&t.allowVerticalScroll&&(o*=t.scrollVerticalLineChange/16,t.scroll(h,0<o?"down":"up",Math.abs(o)))}this.doWheelChange(t,n,e)}}},Lt.prototype.doWheelChange=function(t,e,i){t.position.D(e)&&i.event.wheelDeltaX===0||(i.bubbles=!1)},Lt.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.By);this.Zr=U(function(){i.doWaitAfter(n)},t)},Lt.prototype.cancelWaitAfter=function(){this.Zr!==-1&&G.clearTimeout(this.Zr),this.Zr=-1},Lt.prototype.doWaitAfter=function(){},Lt.prototype.findToolHandleAt=function(t,e){return t=this.diagram.hc(t,function(i){for(;i!==null&&!(i.panel instanceof Ct);)i=i.panel;return i}),t===null?null:t.part.category===e?t:null},Lt.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;t===void 0&&(t=i.firstInput.viewPoint),e===void 0&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},B.Object.defineProperties(Lt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof D&&(this.H=t)}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},isActive:{get:function(){return this.nb},set:function(t){this.nb=t}},transactionResult:{get:function(){return this.wm},set:function(t){this.wm=t}}}),Lt.prototype.startTransaction=Lt.prototype.Ea,Lt.className="Tool";function bt(){Lt.call(this),this.name="ToolManager",this.hb=new tt,this.ob=new tt,this.Hb=new tt,this.F=this.V=850,this.m=new ct(2,2).ja(),this.Ha=5e3,this.ia=fh,this.u=ZM,this.Mp=this.j=null,this.zj=-1}V(bt,Lt),bt.prototype.initializeStandardTools=function(){},bt.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Ct&&this.Mp===t){var i=e.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(e,i):this.hideToolTip()}},bt.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===vp&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===K0){e.bubbles=!0;return}if(this.gestureBehavior===vp)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.M(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===fh?this.mouseWheelBehavior=tf:this.mouseWheelBehavior===tf&&(this.mouseWheelBehavior=fh)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},bt.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===K0){e.bubbles=!0;return}if(this.gestureBehavior===vp)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.M(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}JM(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function JM(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}bt.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof Ct&&(e===t||e.rg(t))||this.hideToolTip()},bt.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta!==null&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.qu=!0,e.doMouseUp()))},bt.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.hc(e.documentPoint,null,null));var i=e.targetObject;if(i!==null)for(e.handled=!1;i!==null&&(t=this.isActive?i.mouseHold:i.mouseHover,!(t!==null&&(t(e,i),e.handled)));)i=i.panel;else i=this.isActive?t.mouseHold:t.mouseHover,i!==null&&i(e)},bt.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.hc(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof Ct)||e!==t&&!e.rg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},bt.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionToolTip(t,e)}else t instanceof Ho&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,this.zj!==-1&&(G.clearTimeout(this.zj),this.zj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.zj=U(function(){r.hideToolTip()},t)}},bt.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},bt.prototype.hideToolTip=function(){this.zj!==-1&&(G.clearTimeout(this.zj),this.zj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof Ct?(t.remove(e),this.Mp!==null&&this.Mp.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof Ho&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},bt.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.M(i);if(n.diagram=this.diagram,n.canStart()){t.doFocus(),t.currentTool=n,t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp());return}}t.doFocus(),this.doDeactivate()},bt.prototype.doMouseWheel=function(){this.standardMouseWheel()},bt.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},bt.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},bt.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.M(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if(n=this.mouseMoveTools.M(i),n.name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if(n=this.mouseUpTools.M(i),n.name===t)return n;return null},bt.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.M(n);if(r.name===t)return e!==null?this.mouseDownTools.bd(n,e):this.mouseDownTools.mb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if(r=this.mouseMoveTools.M(n),r.name===t)return e!==null?this.mouseMoveTools.bd(n,e):this.mouseMoveTools.mb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if(r=this.mouseUpTools.M(n),r.name===t)return e!==null?this.mouseUpTools.bd(n,e):this.mouseUpTools.mb(n),r;return null},bt.prototype.gb=function(t,e,i){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&i.add(e)},B.Object.defineProperties(bt.prototype,{mouseWheelBehavior:{get:function(){return this.ia},set:function(t){this.ia=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Mp=t!==null&&t instanceof Ct?t.adornedPart:null}},mouseDownTools:{get:function(){return this.hb}},mouseMoveTools:{get:function(){return this.ob}},mouseUpTools:{get:function(){return this.Hb}},hoverDelay:{get:function(){return this.V},set:function(t){this.V=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Ha},set:function(t){this.Ha=t}}}),bt.prototype.replaceStandardTool=bt.prototype.gb;var fh=new Q(bt,"WheelScroll",0),tf=new Q(bt,"WheelZoom",1),UL=new Q(bt,"WheelNone",2),ZM=new Q(bt,"GestureZoom",3),vp=new Q(bt,"GestureCancel",4),K0=new Q(bt,"GestureNone",5);bt.className="ToolManager",bt.WheelScroll=fh,bt.WheelZoom=tf,bt.WheelNone=UL,bt.GestureZoom=ZM,bt.GestureCancel=vp,bt.GestureNone=K0;function te(){Lt.call(this),this.name="Dragging",this.u=this.Sw=this.ob=!0,this.m=this.Ha=this.V=this.Oe=null,this.Ym=this.Hb=!1,this.tl=new N(NaN,NaN),this.Fr=new N,this.hb=!0,this.Ik=100,this.Cg=[],this.te=new q().freeze(),this.ia=new Th,this.Bn=null,this.F="copy",this.Nc="",this.Oc="no-drop"}var fu;V(te,Lt),te.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Ik)?!1:this.findDraggablePart()!==null},te.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.Ol(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},te.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Ol(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(we?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},te.prototype.doActivate=function(){var t=this.diagram;this.Bn=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.Fu(!0),Ve=null,this.isActive=!0,this.tl.set(t.position),W0(this,t.selection),this.Cg.length=0,t.animationManager.Bc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.Sw=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.Ns=!0,t.Gf("temporaryPixelRatio")===!0&&30<t.$w&&hf(t),Dp(t,this.draggedParts),this.Ea("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Ym=!1,Ve=this,fl=this.diagram,this.doSimulatedDragOut()))};function W0(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.Wj()&&e.count===1&&e.first()instanceof K?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Ej(),t.Oe=i.toolManager.findTool("Relinking"),t.Oe===null&&(t.Oe=new On,t.Oe.diagram=i),t.Oe.originalLink=t.draggedLink):(t.draggedLink=null,t.Oe=null))}}te.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},te.prototype.Pd=function(t){return t===void 0?new Ls(vo):this.isGridSnapEnabled?new Ls(new N(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new Ls(t.copy())},te.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.Sw,t.Fu(!1),t.ug(),$0(this),cf(t,this.draggedParts),this.draggedParts=this.currentPart=this.Bn=null,this.Ym=this.isDragOutStarted=!1,0<fu.count){for(var e=fu,i=e.length,n=0;n<i;n++){var r=e.M(n);qM(r),Ts(r),$0(r),r.diagram.ug()}e.clear()}qM(this),this.tl.h(NaN,NaN),fl!==null&&(fl.currentCursor=""),Ve=fl=null,Ts(this),t.isMouseCaptured=!1,t.currentCursor="",t.Ns=!1,this.stopTransaction(),Op(t,!0)},te.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.ak(),e};function $0(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,bM(t,e.lastInput,null),e.skipsUndoManager=i,t.Cg.length=0}function QM(){var t=Ve;Ts(t),Z0(t);var e=t.diagram;t.tl.w()&&(e.position=t.tl),e.ug()}te.prototype.doCancel=function(){Ts(this),Z0(this);var t=this.diagram;this.tl.w()&&(t.position=this.tl),this.stopTool()},te.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},te.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function J0(t,e){if(t.copiedParts===null){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&t.draggedParts!==null){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&0<n.currentTransaction.changes.count&&(i.undoManager.Kf(),i.Ea("Drag")):Z0(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Lf():i.selection,e=i.Kj(e,i,!0),i=new mt,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Yc()&&r.canCopy()){var o=e.I(r);o!==null&&(o.location=r.location,o.Va(),i.add(o,t.Pd(o.location)))}}for(e=e.iterator;e.next();)n=e.value,n instanceof K&&n.canCopy()&&i.add(n,t.Pd());t.copiedParts=i,W0(t,i.Lf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,rs(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}function Ts(t){var e=t.diagram;if(t.copiedParts!==null){if(e.Is(t.copiedParts.Lf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof K&&(i.value.point=new N(0,0));t.doUpdateCursor(null)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function qM(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Oe!==null){var e=t.Oe;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Oe.originalLink=null}t.draggedLink=null,t.Oe=null}}function cu(t,e,i){var n=t.diagram,r=t.startPoint,o=N.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.re(r),i),N.free(o),n.Gf("temporaryPixelRatio")===!0&&n.Yh===null&&30<n.$w&&(hf(n),n.hk())}te.prototype.moveParts=function(t,e,i){i===void 0&&(i=!1);var n=this.diagram;n!==null&&wm(n,t,e,this.dragOptions,i)};function Z0(t){if(t.draggedParts!==null){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Yc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if(n=i.key,n instanceof K&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Pd()),rs(n,-r.x,-r.y)}e.ad()}}function Q0(t,e){var i=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),iS(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n);var o=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=bM(t,r,n),!t.isActive&&Ve===null)return;var h=n!==null?n.part:null;if(h===null||i.handlesDragDropForTopLevelParts&&h.isTopLevel&&!(h instanceof gt)){var a=i.mouseDragOver;a!==null&&(a(r),l=!0)}if(!t.isActive&&Ve===null||(t.doDragOver(e,n),!t.isActive&&Ve===null))return}finally{i.skipsUndoManager=o,l&&i.ad()}t.Bn=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.gs(r.viewPoint)}te.prototype.findDragOverObject=function(t){var e=this;return dm(this.diagram,t,null,function(i){return i===null?i=!0:(i=i.part,i=!!(i===null||i instanceof Ct||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i))),!i})},te.prototype.doUpdateCursor=function(t){var e=this.diagram;(t===null||this.Bn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))};function bM(t,e,i){var n=!1,r=t.Cg.length,o=0<r?t.Cg[0]:null;if(i===o)return!1;e.handled=!1;for(var l=0;l<r;l++){var h=t.Cg[l],a=h.mouseDragLeave;if(a!==null&&(a(e,h,i),n=!0,e.handled))break}if(t.Cg.length=0,!t.isActive&&Ve===null||i===null)return n;for(e.handled=!1,r=i;r!==null;)t.Cg.push(r),r=tS(r);for(r=t.Cg.length,i=0;i<r&&(l=t.Cg[i],h=l.mouseDragEnter,h===null||(h(e,l,o),n=!0,!e.handled));i++);return n}function tS(t){var e=t.panel;return e!==null?e:t instanceof lt&&!(t instanceof gt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function eS(t,e,i){var n=t.Oe;if(n===null)return null;var r=t.diagram.og(e,n.portGravity,function(f){return n.findValidLinkablePort(f,i)});t=N.alloc();var o=1/0,l=null;for(r=r.iterator;r.next();){var h=r.value;if(h.part!==null){var a=h.ga(Rt,t);a=e.Bf(a),a<o&&(l=h,o=a)}}return N.free(t),l}function iS(t,e){var i=t.draggedLink;if(i!==null&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.Oe;if(r!==null){var o=null,l=null;i.fromNode===null&&(o=eS(t,i.i(0),!1),o!==null&&(l=o.part));var h=null,a=null;i.toNode===null&&(h=eS(t,i.i(i.pointsCount-1),!0),h!==null&&(a=h.part)),r.isValidLink(l,o,a,h)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,o!==null&&(i.fromPortId=o.portId),i.toNode=a,h!==null&&(i.toPortId=h.portId),i.fromPort!==n.Px&&n.R("LinkRelinked",i,n.Px),i.toPort!==n.Qx&&n.R("LinkRelinked",i,n.Qx)):hS(r,l,o,a,h):hS(r,null,null,null,null)}}}}te.prototype.doDragOver=function(){};function nS(t,e){var i=t.diagram;t.dragsLink&&iS(t,!0),$0(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,n!==null){r.handled=!1;for(var o=n;o!==null;){var l=o.mouseDrop;if(l!==null&&(l(r,o),r.handled))break;GL(t,r,o),o=tS(o)}}else o=i.mouseDrop,o!==null&&o(r);if(t.isActive||Ve!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)o=r.key,o instanceof b&&o.linksConnected.each(function(h){h.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||Ve!==null){for(t=z.alloc(),e=i.selection.iterator;e.next();)n=e.value,n instanceof b&&XL(i,n,t);z.free(t)}}}function GL(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof gt||(i=t.mouseDrop,i!==null&&i(e))}function XL(t,e,i){var n=!1;if(i=e.getAvoidableRect(i),t.viewportBounds.Re(i)&&(n=!0),t=t.Nu(i,function(r){return r.part},function(r){return r instanceof K},!0,function(r){return r instanceof K},n),t.count!==0)for(t=t.iterator;t.next();)i=t.value,!i.Td(e)&&i.isAvoiding&&i.bb()}te.prototype.doDropOnto=function(){},te.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(J0(this,!1),Dp(t,this.copiedParts),cu(this,this.copiedParts,!1),cf(t,this.copiedParts)):this.mayMove()?(Ts(this),cu(this,this.draggedParts,!0)):this.mayDragOut()?(J0(this,!1),cu(this,this.copiedParts,!1)):Ts(this),Q0(this,t.lastInput.documentPoint))}},te.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&this.copiedParts!==null?(Ts(this),J0(this,!0),Dp(t,this.copiedParts),cu(this,this.copiedParts,!1),cf(t,this.copiedParts),this.copiedParts!==null&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,Ts(this),this.mayMove()&&(cu(this,this.draggedParts,!0),Q0(this,t.lastInput.documentPoint))),this.Ym=!0,nS(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Lf():this.draggedParts.Lf();this.copiedParts=null,e&&_L(this),t.Ya(),cf(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.R(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.R("ChangedSelection",t.selection)}}},te.prototype.simulatedMouseMove=function(t,e,i){if(Ve===null)return!1;var n=Ve.diagram;i instanceof D||(i=null);var r=fl;return i!==r&&(r!==null&&r!==n&&(r.ug(),Ve.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),fl=i,i!==null&&i!==n&&(QM(),r=i.toolManager.findTool("Dragging"),r!==null&&(fu.contains(r)||fu.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null)),i===null||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert?!1:(n=i.toolManager.findTool("Dragging"),n!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),!0)},te.prototype.simulatedMouseUp=function(t,e,i){if(Ve===null)return!1;var n=fl,r=Ve.diagram;if(i===null)return Ve.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool("Dragging");if(n!==null&&n!==r&&o!==null)return n.ug(),Ve.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;fl=i,n=i.toolManager.findTool("Dragging"),n!==null&&(QM(),fu.contains(n)||fu.add(n),n.doSimulatedDragEnter())}return i!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):e===null&&(e=new N),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!0,t=i.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Ve,t!==null&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0):!1};function _L(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof b&&(i=i.containingGroup,i===null||i.placeholder===null||t.draggedParts.contains(i)||i.placeholder.v())}}te.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(we?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},te.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},te.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},te.prototype.computeBorder=function(t,e,i){return this.Ym||this.draggedParts===null||this.draggedParts.contains(t)?null:i.assign(e)},te.prototype.Cz=function(){return Ve},te.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Ve;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},te.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Bc(),Wo(t),t.animationManager.Bc(),t=Ve,t!==null&&(t.diagram.Ns=!1),this.doUpdateCursor(null)}},te.prototype.doSimulatedDragLeave=function(){var t=Ve;t!==null&&t.doSimulatedDragOut(),this.doCancel()},te.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Dm=!0;var e=Ve;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;rS(this,e.draggedParts.Lf(),!1,t.firstInput),cu(this,this.copiedParts,!1),Q0(this,t.lastInput.documentPoint)}t.animationManager.Dm=!1},te.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Ve;if(e!==null){var i=e.diagram;if(e.Ym=!0,Ts(this),!this.mayDragIn())return;t.animationManager.Dm=!0,t.R("ChangingSelection",t.selection),this.Ea("Drop"),rS(this,e.draggedParts.Lf(),!0,t.lastInput),cu(this,this.copiedParts,!1);var n=new q;this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0,n.add(r)})),nS(this,t.lastInput.documentPoint),t.Ya(),this.copiedParts!==null&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",n,i),this.stopTransaction(),t.R("ChangedSelection",t.selection)}t.animationManager.Dm=!1};function rS(t,e,i,n){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.Kj(e,r,!0);var o=z.alloc();r=n=1/0;for(var l=-1/0,h=-1/0,a=e.iterator;a.next();){var f=a.value;if(f.isVisible()){var p=f.location;f=p.x,p=p.y,isNaN(f)||isNaN(p)||(f<n&&(n=f),p<r&&(r=p),f>l&&(l=f),p>h&&(h=p))}}for(n===1/0?o.h(0,0,0,0):o.h(n,r,l-n,h-r),n=o.x+o.width/2,r=o.y+o.height/2,z.free(o),o=t.Fr,l=new mt,h=N.alloc(),a=e.iterator;a.next();)f=a.value,f instanceof K&&f.canCopy()&&(p=i.I(f),p!==null&&(p.points=f.points,rs(p,o.x-n,o.y-r),p.suspendsRouting=!0,l.add(p,t.Pd())));for(e=e.iterator;e.next();)f=e.value,f.Yc()&&f.canCopy()&&(a=i.I(f),a!==null&&(f=f.location,h.h(o.x-(n-f.x),o.y-(r-f.y)),a.location=h,a.Va(),l.add(a,t.Pd(h))));N.free(h),t.copiedParts=l,W0(t,l.Lf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,rs(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}te.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Ns=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.Bn=null},te.prototype.computeMove=function(t,e,i,n){return i=this.diagram,i!==null?i.computeMove(t,e,this.dragOptions,n):new N},B.Object.defineProperties(te.prototype,{isCopyEnabled:{get:function(){return this.ob},set:function(t){this.ob=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ia},set:function(t){this.ia=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.hb},set:function(t){this.hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.D(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Nc},set:function(t){this.Nc=t}},nodropCursor:{get:function(){return this.Oc},set:function(t){this.Oc=t}},currentPart:{get:function(){return this.V},set:function(t){this.V=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Ha},set:function(t){this.Ha=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Lf():this.draggedParts!==null?this.draggedParts.Lf():this.te}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Hb},set:function(t){this.Hb=t}},startPoint:{get:function(){return this.Fr},set:function(t){this.Fr.D(t)||this.Fr.assign(t)}},delay:{get:function(){return this.Ik},set:function(t){this.Ik=t}}}),te.prototype.getDraggingSource=te.prototype.Cz;var Ve=null,fl=null;te.className="DraggingTool",fu=new tt,Nt("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),bt.prototype.doCancel=function(){Ve!==null&&Ve.doCancel(),Lt.prototype.doCancel.call(this)};function Je(){Lt.call(this),this.te=100,this.Ha=!1,this.u="pointer";var t=new K,e=new vt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new vt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Ci=t,t=new b,e=new vt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=cp,t.add(e),t.selectable=!1,t.layerName="Tool",this.Bi=t,this.j=e,t=new b,e=new vt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=cp,t.add(e),t.selectable=!1,t.layerName="Tool",this.Di=t,this.m=e,this.Oc=this.Nc=this.ob=this.hb=this.Hb=null,this.ia=!0,this.ky=new mt,this.Of=this.gj=this.Pf=null}V(Je,Lt),Je.prototype.doStop=function(){this.diagram.ug(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Je.prototype.copyPortProperties=function(t,e,i,n,r){if(t!==null&&e!==null&&i!==null&&n!==null){var o=e.Df(),l=ct.alloc();l.width=e.naturalBounds.width*o,l.height=e.naturalBounds.height*o,n.desiredSize=l,ct.free(l),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=Rt,o=N.alloc(),i.location=e.ga(Rt,o),N.free(o),n.angle=e.li(),this.portTargeted!==null&&this.portTargeted(t,e,i,n,r)}},Je.prototype.setNoTargetPortProperties=function(t,e,i){e!==null&&(e.desiredSize=cp,e.fromSpot=We,e.toSpot=We),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,i)},Je.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Je.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof b){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},Je.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var i=t.part;if(!(i instanceof b))return null;for(;t!==null;){var n=e?t.toLinkable:t.fromLinkable;if(n===!0&&(t.portId!==null||t instanceof b)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(n===!1)break;t=t.panel}return null},Je.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,o=e.og(i,n,function(d){return r.findValidLinkablePort(d,t)},null,!0);for(n=1/0,e=null,o=o.iterator;o.next();){var l=o.value,h=l.part;if(h instanceof b){var a=l.ga(Rt,N.alloc()),f=i.x-a.x,p=i.y-a.y;N.free(a),a=f*f+p*p,a<n&&(f=this.validPortsCache.I(l),f!==null?f&&(e=l,n=a):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,h,l)||!t&&this.isValidLink(h,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=a):this.validPortsCache.add(l,!1))}}return e!==null&&(i=e.part,i instanceof b&&(i.layer===null||i.layer.allowLink))?e:null},Je.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var i=e.fromMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.Mo(e).count>=i)return!1}return!0},Je.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var i=e.toMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Sd(e).count>=i)return!1}return!0},Je.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},Je.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var i=t.part;if(!(i instanceof b))return!1;t=t.portId,t===null&&(t="");var n=e.part;if(!(n instanceof b))return!1;for(e=e.portId,e===null&&(e=""),e=n.Sd(e);e.next();)if(n=e.value,n.fromNode===i&&n.fromPortId===t)return!0;return!1},Je.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(e===null||n===null||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,i,n,this.originalLink))return!1}return i!==null&&(r=i.linkValidation,r!==null&&!r(t,e,i,n,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,i,n,this.originalLink):!0)},Je.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var i=t.labeledLink;if(i===null)return!1;if(i===e)return!0;var n=new q;return n.add(t),q0(this,i,e,n)};function q0(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(n.add(r),q0(t,r.labeledLink,i,n))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(n.add(e),q0(t,e.labeledLink,i,n))))}Je.prototype.isValidCycle=function(t,e,i){if(i===void 0&&(i=null),t===null||e===null)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Em){if(n===bS){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!ef(this,t,e,i,!0)}if(n===t2){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if(r=n.value,r!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!ef(this,t,e,i,!0)}if(n===ZS)return t===e?t=!0:(n=new q,n.add(e),t=oS(this,n,t,e,i)),!t;if(n===QS)return!ef(this,t,e,i,!1);if(n===qS)return t===e?t=!0:(n=new q,n.add(e),t=sS(this,n,t,e,i)),!t}return!0};function ef(t,e,i,n,r){if(e===i)return!0;if(e===null||i===null)return!1;for(var o=e.linksConnected;o.next();){var l=o.value;if(l!==n&&(!r||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode,l!==e&&ef(t,l,i,n,r)))return!0}return!1}function oS(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r&&l.toNode===i&&(l=l.fromNode,l!==i&&oS(t,e,l,n,r)))return!0}return!1}function sS(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r){var h=l.fromNode;if(l=l.toNode,h=h===i?l:h,h!==i&&sS(t,e,h,n,r))return!0}}return!1}B.Object.defineProperties(Je.prototype,{portGravity:{get:function(){return this.te},set:function(t){0<=t&&(this.te=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.Ci},set:function(t){this.Ci=t}},temporaryFromNode:{get:function(){return this.Bi},set:function(t){(this.Bi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var i=e.O.indexOf(this.j);e.mb(i),e.Gb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.Di},set:function(t){(this.Di=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(this.m!==null){var e=this.m.panel;if(e!==null){var i=e.O.indexOf(this.m);e.mb(i),e.Gb(i,t)}}this.m=t}},originalLink:{get:function(){return this.Hb},set:function(t){this.Hb=t}},originalFromNode:{get:function(){return this.hb},set:function(t){this.hb=t}},originalFromPort:{get:function(){return this.ob},set:function(t){this.ob=t}},originalToNode:{get:function(){return this.Nc},set:function(t){this.Nc=t}},originalToPort:{get:function(){return this.Oc},set:function(t){this.Oc=t}},isForwards:{get:function(){return this.ia},set:function(t){this.ia=t}},validPortsCache:{get:function(){return this.ky}},targetPort:{get:function(){return this.Pf},set:function(t){this.Pf=t}},linkValidation:{get:function(){return this.gj},set:function(t){this.gj=t}},portTargeted:{get:function(){return this.Of},set:function(t){this.Of=t}}}),Je.className="LinkingBaseTool";function Ri(){Je.call(this),this.name="Linking",this.V={},this.F=null,this.K=xp,this.Xd=null}V(Ri,Je),Ri.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.xs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Ri.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.hc(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof b)))return null;var i=this.direction;if(i===xp||i===lS){var n=this.findValidLinkablePort(e,!1);if(n!==null||this.startObject===t&&(n=t.port,this.findValidLinkablePort(n,!1)))return this.isForwards=!0,n}return(i===xp||i===uS)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Ri.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof b&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof b&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Va(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Va(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0)},Ri.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Ri.prototype.doStop=function(){Je.prototype.doStop.call(this),this.startObject=null},Ri.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,r=null,o=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(l!==null){var h=l.part;h instanceof b&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,i=this.originalFromPort),n=h,r=l):(e=h,i=l,this.originalToNode!==null&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);e!==null||n!==null?(o=this.insertLink(e,i,n,r),o!==null?(l===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",o)):this.doNoLink(e,i,n,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},Ri.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof K)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Ri.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Ri.prototype.doNoLink=function(){},B.Object.defineProperties(Ri.prototype,{archetypeLinkData:{get:function(){return this.V},set:function(t){this.V=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Xd},set:function(t){this.Xd=t}}});var xp=new Q(Ri,"Either",0),lS=new Q(Ri,"ForwardsOnly",0),uS=new Q(Ri,"BackwardsOnly",0);Ri.className="LinkingTool",Ri.Either=xp,Ri.ForwardsOnly=lS,Ri.BackwardsOnly=uS;function On(){Je.call(this),this.name="Relinking";var t=new vt;t.figure="Diamond",t.desiredSize=uu,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.V=t,t=new vt,t.figure="Diamond",t.desiredSize=uu,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Xd=t,this.F=null,this.Ew=new z}V(On,Je),On.prototype.updateAdornments=function(t){if(t!==null&&t instanceof K){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;n!==null&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(i=t.Pj(e),i===null&&(i=this.makeAdornment(n,!1),t.bh(e,i)))}i===null&&t.Jf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&(n=t.selectionObject,n!==null&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(i=t.Pj(e),i===null?(i=this.makeAdornment(n,!0),t.bh(e,i)):i.v())),i===null&&t.Jf(e)}},On.prototype.makeAdornment=function(t,e){var i=new Ct;return i.type=_.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&i.add(e.copy()),i.adornedObject=t,i},On.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.xs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},On.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var i=e.part;if(!(i instanceof Ct&&i.adornedPart instanceof K))return;this.handle=e,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Ew.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=lu),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=lu),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0},On.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===Kh||i===os)&&(i=Si),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},On.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},On.prototype.doStop=function(){Je.prototype.doStop.call(this),this.handle=null},On.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,o=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var l=this.targetPort.part;l instanceof b&&(this.isForwards?(n=l,r=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:o=null;o!==null?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),this.targetPort===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.bb()),this.transactionResult=this.name,t.R("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Xo(this.Ew)}finally{this.stopTool()}}},On.prototype.reconnectLink=function(t,e,i,n){return i=i!==null&&i.portId!==null?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},On.prototype.doNoRelink=function(){};function hS(t,e,i,n,r){e!==null?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),n!==null?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}B.Object.defineProperties(On.prototype,{fromHandleArchetype:{get:function(){return this.V},set:function(t){this.V=t}},toHandleArchetype:{get:function(){return this.Xd},set:function(t){this.Xd=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),On.className="RelinkingTool",Nt("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Nt("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)});function ge(){Lt.call(this),this.name="LinkReshaping";var t=new vt;t.figure="Rectangle",t.desiredSize=N0,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,t=new vt,t.figure="Diamond",t.desiredSize=uu,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.Ts=this.j=null,this.Fw=new N,this.Yq=new tt}V(ge,Lt),ge.prototype.Ru=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:b0},ge.prototype.om=function(t,e){t.reshapingBehavior=e},ge.prototype.updateAdornments=function(t){if(t!==null&&t instanceof K){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;i!==null&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.Ed()&&(e=t.Pj(this.name),e===null||e.Aw!==t.pointsCount||e.Uw!==t.resegmentable)&&(e=this.makeAdornment(i),e!==null&&(e.Aw=t.pointsCount,e.Uw=t.resegmentable,t.bh(this.name,e)))}e===null&&t.Jf(this.name)}},ge.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(e.points!==null&&1<i){r=new Ct,r.type=_.Link,i=e.firstPickIndex;var o=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==on)for(var h=i+l;h<o-l;h++){var a=this.makeResegmentHandle(t,h);a!==null&&(a.segmentIndex=h,a.segmentFraction=.5,a.fromMaxLinks=999,r.add(a))}for(l=i+1;l<o;l++)if(h=this.makeHandle(t,l),h!==null){if(h.segmentIndex=l,l!==i)if(l===i+1&&n){a=e.i(i);var f=e.i(i+1);O.B(a.x,f.x)&&O.B(a.y,f.y)&&(f=e.i(i-1)),O.B(a.x,f.x)?(this.om(h,dh),h.cursor="n-resize"):O.B(a.y,f.y)&&(this.om(h,ph),h.cursor="w-resize")}else l===o-1&&n?(a=e.i(o-1),f=e.i(o),O.B(a.x,f.x)&&O.B(a.y,f.y)&&(a=e.i(o+1)),O.B(a.x,f.x)?(this.om(h,dh),h.cursor="n-resize"):O.B(a.y,f.y)&&(this.om(h,ph),h.cursor="w-resize")):l!==o&&(this.om(h,tm),h.cursor="move");r.add(h)}r.adornedObject=t}return r},ge.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},ge.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},ge.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},ge.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof K){if(this.Ts=e,t.isMouseCaptured=!0,this.Ea(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.Gb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.Gb(this.handle.segmentIndex+1,n),e.points=i,e.Vb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.Fw=e.i(this.handle.segmentIndex),this.Yq=e.points.copy(),this.isActive=!0}}},ge.prototype.doDeactivate=function(){this.stopTransaction(),this.Ts=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ge.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.ak(),e},ge.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.Yq),this.stopTool()},ge.prototype.getResegmentingPoint=function(){return this.handle.ga(Rt)},ge.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ge.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(ch(this,l,n,r,o,!0)||ch(this,l,n,r,o,!1))){var h=e.points.copy();ch(this,l,n,r,o,!0)?(h.bd(i-2,new N(l.x,(o.y+l.y)/2)),h.bd(i+1,new N(o.x,(o.y+l.y)/2))):(h.bd(i-2,new N((o.x+l.x)/2,l.y)),h.bd(i+1,new N((o.x+l.x)/2,o.y))),h.mb(i),h.mb(i-1),e.points=h,e.Vb()}else l=e.i(i+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(ch(this,n,r,o,l,!0)||ch(this,n,r,o,l,!1))&&(h=e.points.copy(),ch(this,n,r,o,l,!0)?(h.bd(i-1,new N(n.x,(n.y+l.y)/2)),h.bd(i+2,new N(l.x,(n.y+l.y)/2))):(h.bd(i-1,new N((n.x+l.x)/2,n.y)),h.bd(i+2,new N((n.x+l.x)/2,l.y))),h.mb(i+1),h.mb(i),e.points=h,e.Vb())}}else l=N.alloc(),O.qh(n.x,n.y,o.x,o.y,r.x,r.y,l)&&l.Bf(r)<this.resegmentingDistance*this.resegmentingDistance&&(n=e.points.copy(),n.mb(i),e.points=n,e.Vb()),N.free(l)}t.Ya(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.Yq)}this.stopTool()};function ch(t,e,i,n,r,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}ge.prototype.reshape=function(t){var e=this.adornedLink;e.uh();var i=this.handle.segmentIndex,n=this.Ru(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===dh?(e.L(i,e.i(i-1).x,t.y),e.L(i+1,e.i(i+2).x,t.y)):n===ph&&(e.L(i,t.x,e.i(i-1).y),e.L(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===dh?(e.L(i-1,e.i(i-2).x,t.y),e.L(i,e.i(i+1).x,t.y)):n===ph&&(e.L(i-1,t.x,e.i(i-2).y),e.L(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),o=e.i(n-1),l=e.i(n+1);O.B(o.x,r.x)&&O.B(r.y,l.y)?(O.B(o.x,e.i(n-2).x)&&!O.B(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),O.B(l.y,e.i(n+2).y)&&!O.B(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.L(n+1,l.x,t.y)):O.B(o.y,r.y)&&O.B(r.x,l.x)?(O.B(o.y,e.i(n-2).y)&&!O.B(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),O.B(l.x,e.i(n+2).x)&&!O.B(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):O.B(o.x,r.x)&&O.B(r.x,l.x)?(O.B(o.x,e.i(n-2).x)&&!O.B(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),O.B(l.x,e.i(n+2).x)&&!O.B(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):O.B(o.y,r.y)&&O.B(r.y,l.y)&&(O.B(o.y,e.i(n-2).y)&&!O.B(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),O.B(l.y,e.i(n+2).y)&&!O.B(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.L(n+1,l.x,t.y)),e.L(i,t.x,t.y)}else e.L(i,t.x,t.y),n=e.fromNode,r=e.fromPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===1&&e.computeSpot(!0,r).Lc()&&(o=r.ga(Rt,N.alloc()),n=e.getLinkPointFromPoint(n,r,o,t,!0,N.alloc()),e.L(0,n.x,n.y),N.free(o),N.free(n)),n=e.toNode,r=e.toPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===e.pointsCount-2&&e.computeSpot(!1,r).Lc()&&(i=r.ga(Rt,N.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,N.alloc()),e.L(e.pointsCount-1,t.x,t.y),N.free(i),N.free(t));e.zf()},ge.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Ru(this.handle)){case tm:return t;case dh:return new N(e.i(i).x,t.y);case ph:return new N(t.x,e.i(i).y);default:case b0:return e.i(i)}},B.Object.defineProperties(ge.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.Ts}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.Fw}},originalPoints:{get:function(){return this.Yq}}}),ge.prototype.setReshapingBehavior=ge.prototype.om,ge.prototype.getReshapingBehavior=ge.prototype.Ru;var b0=new Q(ge,"None",0),ph=new Q(ge,"Horizontal",1),dh=new Q(ge,"Vertical",2),tm=new Q(ge,"All",3);ge.className="LinkReshapingTool",ge.None=b0,ge.Horizontal=ph,ge.Vertical=dh,ge.All=tm,Nt("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)});function vi(){Lt.call(this),this.name="Resizing",this.m=new ct(1,1).freeze(),this.j=new ct(9999,9999).freeze(),this.yg=new ct(NaN,NaN).freeze(),this.V=!1,this.ia=!0,this.ue=null;var t=new vt;t.alignmentFocus=Rt,t.figure="Rectangle",t.desiredSize=N0,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.Xq=new N,this.Dw=new ct,this.Tn=new N,this.rt=new ct(0,0),this.qt=new ct(1/0,1/0),this.pt=new ct(1,1)}V(vi,Lt),vi.prototype.updateAdornments=function(t){if(!(t===null||t instanceof K)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Pj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()&&((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null)){e=e.li(),Es(t)&&this.updateResizeHandles(i,e),t.bh(this.name,i);return}}t.Jf(this.name)}},vi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new Ct,e.type=_.Spot,e.locationSpot=Rt;var i=new Mi;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,ei)),e.add(this.makeHandle(t,oh)),e.add(this.makeHandle(t,Kr)),e.add(this.makeHandle(t,sh)),e.add(this.makeHandle(t,Tn)),e.add(this.makeHandle(t,_i)),e.add(this.makeHandle(t,jn)),e.add(this.makeHandle(t,Ln))}else if(En(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},vi.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},vi.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Wb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.Lc()&&(i=Rt),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else if(1<=i.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof _)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},vi.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.Bc(),this.Ea(this.name),this.Xq.set(this.adornedObject.ga(this.handle.alignment.gv())),this.Tn.set(this.adornedObject.part.location),this.Dw.set(this.adornedObject.desiredSize),this.pt=this.computeCellSize(),this.rt=this.computeMinSize(),this.qt=this.computeMaxSize(),this.isActive=!0))},vi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.isActive=t.isMouseCaptured=!1},vi.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.ak(),e},vi.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},vi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,r=this.adornedObject.qs(t.lastInput.documentPoint,N.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),t.ad(),N.free(r)}},vi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,r=this.adornedObject.qs(t.lastInput.documentPoint,N.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),N.free(r),t.Ya(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},vi.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(i!==null){if(i.desiredSize=t.size,t=i.part,t.Va(),i=i.ga(this.handle.alignment.gv()),t instanceof gt){var n=new tt;if(n.add(t),!this.dragsMembers&&t.placeholder===null){var r=new Th;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().re(i),!0,r)}else t.location=t.location.copy().re(i).add(this.oppositePoint);e.ad()}},vi.prototype.computeResize=function(t,e,i,n,r,o){e.Lc()&&(e=Rt);var l=this.adornedObject.naturalBounds,h=l.x,a=l.y,f=l.x+l.width,p=l.y+l.height,d=1;if(!o){d=l.width;var y=l.height;0>=d&&(d=1),0>=y&&(y=1),d=y/d}return y=N.alloc(),O.No(t.x,t.y,h,a,r.width,r.height,y),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width,t.y=p-t.height)):1<=e.y?(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.height=Math.max(Math.min(y.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width)):(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=f-t.x,o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(y.x-h,n.width),i.width),t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.y=p-t.height)):1<=e.y?(t.width=Math.max(Math.min(y.x-h,n.width),i.width),t.height=Math.max(Math.min(y.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width))):(t.width=Math.max(Math.min(y.x-h,n.width),i.width),o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):0>=e.y?(t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=p-t.y,o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(f-h-t.width))):1<=e.y&&(t.height=Math.max(Math.min(y.y-a,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(f-h-t.width))),N.free(y),t},vi.prototype.computeReshape=function(){var t=oe;return this.adornedObject instanceof vt&&(t=av(this.adornedObject)),!(t===jr||this.diagram.lastInput.shift)},vi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},vi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},vi.prototype.computeCellSize=function(){var t=new ct(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},B.Object.defineProperties(vi.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.D(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.D(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.V},set:function(t){this.V=t}},dragsMembers:{get:function(){return this.ia},set:function(t){this.ia=t}},oppositePoint:{get:function(){return this.Xq},set:function(t){this.Xq.D(t)||this.Xq.assign(t)}},originalDesiredSize:{get:function(){return this.Dw}},originalLocation:{get:function(){return this.Tn}}}),vi.className="ResizingTool",Nt("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)});function en(){Lt.call(this),this.name="Rotating",this.ia=45,this.V=2,this.Tn=new N,this.ue=null;var t=new vt;t.figure="Ellipse",t.desiredSize=uu,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.Cw=0,this.kr=new N(NaN,NaN),this.u=0,this.F=50}V(en,Lt),en.prototype.updateAdornments=function(t){if(t!==null){if(t.ph()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed())){var i=t.Pj(this.name);if((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null){i.angle=e.li(),i.placeholder===null&&(i.location=this.computeAdornmentLocation(e)),t.bh(this.name,i);return}}t.Jf(this.name)}},en.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new Ct,e.type=_.Position,e.locationSpot=Rt;var i=this.handleArchetype;i!==null&&e.add(i.copy())}else if(En(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},en.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},en.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ea(this.name),this.Cw=this.adornedObject.angle,this.kr=this.computeRotationPoint(this.adornedObject),this.Tn=this.adornedObject.part.location.copy(),this.isActive=!0)},en.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.sb()?t.ga(e.rotationSpot):t===e||t===i?i.ga(e.locationSpot):t.ga(Rt)},en.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.qs(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return i===0?e.x=t.naturalBounds.width+n:i===45?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):i===90?e.y=t.naturalBounds.height+n:i===135?(e.x=-n,e.y=t.naturalBounds.height+n):i===180?e.x=-n:i===225?(e.x=-n,e.y=-n):i===270?e.y=-n:i===315&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ga(e)},en.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.kr=new N(NaN,NaN),this.isActive=t.isMouseCaptured=!1},en.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.ak(),e},en.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},en.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},en.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Ya(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},en.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Va();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Tn.copy(),e.location=i.re(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.ad()}},en.prototype.computeRotate=function(t){t=this.rotationPoint.ab(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.li()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},B.Object.defineProperties(en.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},snapAngleMultiple:{get:function(){return this.ia},set:function(t){this.ia=t}},snapAngleEpsilon:{get:function(){return this.V},set:function(t){this.V=t}},originalAngle:{get:function(){return this.Cw}},rotationPoint:{get:function(){return this.kr},set:function(t){this.kr=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),en.className="RotatingTool",Nt("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)});function gh(){Lt.call(this),this.name="ClickSelecting"}V(gh,Lt),gh.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},gh.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},gh.className="ClickSelectingTool";function _o(){Lt.call(this),this.name="Action",this.pk=null}V(_o,Lt),_o.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.hc(e.documentPoint,function(n){for(;n.panel!==null&&!n.isActionable;)n=n.panel;return n});return i!==null&&i.isActionable?(this.pk=i,t.Ck=t.hc(e.documentPoint,null,null),!0):!1},_o.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.pk;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},_o.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.pk;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},_o.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.pk;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;i.panel!==null&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},_o.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.pk;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},_o.prototype.doStop=function(){this.pk=null},_o.className="ActionTool";function cl(){Lt.call(this),this.name="ClickCreating",this.Ri=null,this.m=!0,this.j=!1,this.mw=new N(0,0)}V(cl,Lt),cl.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.mw=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.mw))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.Ol(t.lastInput.documentPoint,!0)!==null)},cl.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},cl.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(i===null)return null;var n=null;try{if(e.R("ChangingSelection",e.selection),this.Ea(this.name),i instanceof lt)i.Yc()&&(En(i),n=i.copy(),n!==null&&e.add(n));else if(i!==null){var r=e.model.copyNodeData(i);yt(r)&&(e.model.xf(r),n=e.Kc(r))}if(n!==null){var o=N.allocAt(t.x,t.y);this.isGridSnapEnabled&&Sm(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),N.free(o)}e.Ya(),this.transactionResult=this.name,e.R("PartCreated",n)}finally{this.stopTransaction(),e.R("ChangedSelection",e.selection)}return n},B.Object.defineProperties(cl.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){this.Ri=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),cl.className="ClickCreatingTool";function Wr(){Lt.call(this),this.name="DragSelecting",this.Ik=175,this.m=!1;var t=new lt;t.layerName="Tool",t.selectable=!1;var e=new vt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}V(Wr,Lt),Wr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.Ol(e.documentPoint,!0)!==null))},Wr.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Wr.prototype.doDeactivate=function(){var t=this.diagram;t.ug(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Wr.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),i=this.box.fb("SHAPE");i===null&&(i=this.box.Pb());var n=ct.alloc().h(e.width,e.height);i.desiredSize=n,this.box.mm(e.x,e.y,!1),ct.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},Wr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Wr.prototype.computeBoxBounds=function(){var t=this.diagram;return new z(t.firstInput.documentPoint,t.lastInput.documentPoint)},Wr.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.vx(t,this.isPartialInclusion),we?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(i=new tt,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},B.Object.defineProperties(Wr.prototype,{delay:{get:function(){return this.Ik},set:function(t){this.Ik=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Wr.className="DragSelectingTool";function $r(){Lt.call(this),this.name="Panning",this.Xt=new N,this.Ay=new N,this.xg=!1;var t=this;this.Kw=function(){var e=t.diagram;e!==null&&e.removeEventListener(G.document,"scroll",t.Kw,!1),t.stopTool()}}V($r,Lt),$r.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},$r.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener(G.document,"scroll",this.Kw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Xt.assign(t.position)),this.isActive=!0},$r.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},$r.prototype.doCancel=function(){var t=this.diagram;t.position=this.Xt,t.isMouseCaptured=!1,this.stopTool()},$r.prototype.doMouseMove=function(){this.move()},$r.prototype.doMouseUp=function(){this.move(),this.stopTool()},$r.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.Ay.h(r,i)}},B.Object.defineProperties($r.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Xt}}}),$r.className="PanningTool",Nt("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Nt("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Nt("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Nt("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Nt("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)});function Ho(){this.F=this.u=this.j=this.m=null}B.Object.defineProperties(Ho.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Ho.className="HTMLInfo";function ar(t,e,i){this.text=t,this.ix=e,this.visible=i}ar.className="ContextMenuButtonInfo";function Hi(){Lt.call(this),this.name="ContextMenu",this.m=this.ht=this.j=null,this.yw=new N,this.jt=null,this.Et=!1;var t=this;this.tu=function(){t.stopTool()}}V(Hi,Lt);function HL(t){var e=new Ho;e.show=function(r,o,l){l.showDefaultContextMenu()},e.hide=function(r,o){o.hideDefaultContextMenu()},yh=e,t.tu=function(){t.stopTool()},e=W("div");var i=W("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=W("style");G.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n=t.diagram,n!==null&&(n.addEventListener(e,"contextmenu",em,!1),n.addEventListener(e,"selectstart",em,!1),n.addEventListener(i,"contextmenu",em,!1)),e.className="goCXforeground",i.className="goCXbackground",G.document.body&&(G.document.body.appendChild(e),G.document.body.appendChild(i)),rf=e,nf=i,im=!0}function em(t){return t.preventDefault(),!1}Hi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},Hi.prototype.doStart=function(){this.yw.set(this.diagram.firstInput.documentPoint)},Hi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Hi.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof D||(t instanceof ot?n=t:n=e.hc(i.documentPoint,null,function(r){return!r.layer.isTemporary})),n!==null){for(t=n;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(e.contextMenu!==null)return e;return null},Hi.prototype.doActivate=function(){},Hi.prototype.doMouseDown=function(){if(Lt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&aS(this)},Hi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}aS(this)};function aS(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(i!==null){var n=null;i instanceof Ho||(n=e.hc(e.lastInput.documentPoint,null,null),n!==null&&n.rg(i)&&t.standardMouseClick(null,null)),t.maybeStopTool(n)}}else t.canStart()&&(fS(t,!0),t.isActive||t.stopTool())}Hi.prototype.maybeStopTool=function(){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())};function fS(t,e,i){if(i===void 0&&(i=null),!t.Et&&(t.Et=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Et=!1,!e)){if(t.isActive=!0,e=yh,i===null&&(i=t.findObjectWithContextMenu()),i!==null){var n=i.contextMenu;n!==null?(t.currentObject=i instanceof ot?i:null,t.showContextMenu(n,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof Ct&&!t.currentContextMenu.visible&&t.stopTool()}}Hi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Hi.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionContextMenu(t,e)}else t instanceof Ho&&t.show(e,i,this);this.currentContextMenu=t},Hi.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},Hi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof Ct?(t.remove(e),this.ht!==null&&this.ht.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof Ho&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function KL(t){var e=new tt;return e.add(new ar("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new ar("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new ar("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new ar("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new ar("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new ar("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new ar("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new ar("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new ar("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new ar("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new ar("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new ar("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new ar("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}Hi.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.jt===null&&(this.jt=KL(this)),rf.innerHTML="",nf.addEventListener("pointerdown",this.tu,!1);var e=this,i=W("ul");i.className="goCXul",rf.appendChild(i),i.innerHTML="";for(var n=this.jt.iterator;n.next();){var r=n.value,o=r.visible;if(typeof r.ix=="function"&&(typeof o!="function"||o(t))){o=W("li"),o.className="goCXli";var l=W("a");l.className="goCXa",l.href="#",l.ny=r.ix,l.addEventListener("pointerdown",function(h){return this.ny(t),e.stopTool(),h.preventDefault(),!1},!1),l.textContent=r.text,o.appendChild(l),i.appendChild(o)}}rf.style.display="block",nf.style.display="block"},Hi.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===yh){rf.style.display="none",nf.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(nf,"pointerdown",this.tu,!1),this.currentContextMenu=null}},B.Object.defineProperties(Hi.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.ht=t instanceof Ct?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return im===!1&&yh===null&&Kn&&HL(this),yh},set:function(t){t===null&&(im=!0),yh=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.yw}}});var yh=null,im=!1,nf=null,rf=null;Hi.className="ContextMenuTool",Nt("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)});function $t(){Lt.call(this),this.name="TextEditing",this.Zh=new Xt,this.ia=null,this.V=rm,this.vj=null,this.qa=of,this.u=1,this.F=!0,this.m=null,this.j=new Ho,this.kt=null,WL(this,this.j)}V($t,Lt);function WL(t,e){if(Kn){var i=W("textarea");t.kt=i,i.addEventListener("input",function(){if(t.textBlock!==null){var n=t.Nx(this.value);this.style.width=20+n.measuredBounds.width*this.wA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(!n.isComposing&&t.textBlock!==null){var r=n.key;r==="Enter"?(t.textBlock.isMultiline===!1&&n.preventDefault(),t.acceptText(Mp)):r==="Tab"?(t.acceptText(nm),n.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==of){var n=t.kt;t.qa===sf&&(t.qa=Sp),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==of){var n=t.kt;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,r,o){if(n instanceof Xt&&o instanceof $t)if(o.state===lf)i.style.border="3px solid red",i.focus();else{var l=n.ga(Rt),h=r.position,a=r.scale,f=n.Df()*a;f<o.minimumEditorScale&&(f=o.minimumEditorScale);var p=n.naturalBounds.width*f+6,d=n.naturalBounds.height*f+2,y=(l.x-h.x)*a;l=(l.y-h.y)*a,h=n.verticalAlignment,a=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*f,d=h.y*d-h.y*a+h.offsetY-(.5*d-.5*a)-a/2,i.value=n.text,r.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*f+"%",i.style.lineHeight="normal",i.style.width=p+"px",i.style.left=(y-p/2|0)-1+"px",i.style.top=(l+d|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.wA=f,i.className="goTXarea",r.div.appendChild(i),i.focus(),o.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}$t.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||pu&&pu!==this&&(pu.acceptText(wp),pu&&pu!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.hc(t.lastInput.documentPoint);return e!==null&&e instanceof Xt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===rm&&!e.isSelected||this.starting===dS&&2>t.lastInput.clickCount)):!1},$t.prototype.doStart=function(){pu=this,this.textBlock!==null&&this.doActivate()},$t.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.hc(t.lastInput.documentPoint)),e!==null&&e instanceof Xt&&(this.textBlock=e,e.part!==null)){t.animationManager.Bc(),this.isActive=!0,this.qa=sf;var i=this.defaultTextEditor;e.textEditor!==null&&(i=e.textEditor),this.Zh=this.textBlock.copy();var n=new z(this.textBlock.ga(ei),this.textBlock.ga(Kr));t.tv(n),i.show(e,t,this),this.currentTextEditor=i}}}},$t.prototype.doCancel=function(){this.stopTool()},$t.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},$t.prototype.doMouseDown=function(){this.isActive&&this.acceptText(wp)},$t.prototype.acceptText=function(t){switch(t){case wp:this.qa===sm?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.qa===sf||this.qa===lf||this.qa===Sp)&&(this.qa=om,cS(this));break;case pS:case Mp:case nm:(Mp!==t||this.textBlock.isMultiline!==!0)&&(this.qa===sf||this.qa===lf||this.qa===Sp)&&(this.qa=om,cS(this))}};function cS(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(e!==null&&n!==null){var r=e.text,o="";n.valueFunction!==null&&(o=n.valueFunction()),t.isValidText(e,r,o)?(t.Ea(t.name),t.qa=sm,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),i!==null&&i.R("TextEdited",e,r),t.stopTransaction(),t.stopTool(),i!==null&&i.doFocus()):(t.qa=lf,t.doError(r,o))}}$t.prototype.doError=function(t,e){var i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},$t.prototype.doSuccess=function(t,e){var i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,e)},$t.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.qa=of,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},$t.prototype.doStop=function(){pu=null},$t.prototype.isValidText=function(t,e,i){var n=this.textValidation;return n!==null&&!n(t,e,i)?!1:(n=t.textValidation,!!(n===null||n(t,e,i)))},$t.prototype.Nx=function(t){var e=this.Zh;return e.text=t,e.measure(this.textBlock.Ih,1/0),e},B.Object.defineProperties($t.prototype,{textBlock:{get:function(){return this.ia},set:function(t){this.ia=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.V},set:function(t){this.V=t}},textValidation:{get:function(){return this.vj},set:function(t){this.vj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this.qa=t)}}}),$t.prototype.measureTemporaryTextBlock=$t.prototype.Nx;var pS=new Q($t,"LostFocus",0),wp=new Q($t,"MouseDown",1),nm=new Q($t,"Tab",2),Mp=new Q($t,"Enter",3),$L=new Q($t,"SingleClick",0),rm=new Q($t,"SingleClickSelected",1),dS=new Q($t,"DoubleClick",2),of=new Q($t,"StateNone",0),sf=new Q($t,"StateActive",1),Sp=new Q($t,"StateEditing",2),om=new Q($t,"StateValidating",3),lf=new Q($t,"StateInvalid",4),sm=new Q($t,"StateValidated",5),pu=null;$t.className="TextEditingTool",$t.LostFocus=pS,$t.MouseDown=wp,$t.Tab=nm,$t.Enter=Mp,$t.SingleClick=$L,$t.SingleClickSelected=rm,$t.DoubleClick=dS,$t.StateNone=of,$t.StateActive=sf,$t.StateEditing=Sp,$t.StateValidating=om,$t.StateInvalid=lf,$t.StateValidated=sm,Nt("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)});function dn(t){Cp||(vS(),Cp=!0),this.H=wh,this.Ok=this.zb=this.vq=this.bc=!1,this.Qw=!0,this.Pk=Tp,this.Dm=!1,this.Gh=this.Jd=!0,this.Dg=600,this.cw=this.Ow=!1,this.Zd=new q,this.ce=new ii,this.ce.Yd=this,this.Ei=new q,this.pu=new q,this.Sr=new q,this.pr=new q,t&&Object.assign(this,t)}dn.prototype.Xe=function(t){this.H=t},dn.prototype.canStart=function(){return!0};function Ko(t,e){t.Jd&&t.canStart(e)&&(t.Zd.add(e),t.defaultAnimation.isAnimating&&t.Bc(),xi(t.H),t.zb=!0)}function lm(t){if(t.Jd&&t.zb){var e=t.ce,i=t.H,n=t.Zd.contains("Model");n&&(t.Ok=!0,t.Pk===Tp?(e.isViewportUnconstrained=!0,e.uc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Pk===wS&&e.uc.clear(),t.Qw=!!(t.Pk===xS&&i.du.D(i.pa)),i.R("InitialAnimationStarting",t)),n&&!t.Gh||e.uc.count===0?(t.Zd.clear(),t.zb=!1,e.uc.clear(),Lp(e,i),t.Ok=!1,i.N()):(t.Zd.clear(),i.kg=!1,n=e.uc.get(i),i.autoScale!==gn&&n!==null&&(delete n.start.scale,delete n.end.scale),G.requestAnimationFrame(function(){t.zb===!1||e.bc||(i.Gf("temporaryPixelRatio")&&hf(i),cm(i),t.zb=!1,e.start(),e.bc&&(mh(t),i.Ya(),SS(e,0),Wo(i,!0),vh(t),i.R("AnimationStarting",t)))}))}}function kp(t){return t.Zd.contains("Trigger")&&t.Zd.count===1}function gS(t,e,i,n){t.isTicking||kp(t)||e instanceof K&&(e.fromNode!==null||e.toNode!==null)||t.ce.add(e,"position",i,n,!1)}s=dn.prototype,s.fv=function(t){return this.ce.fv(t)},s.Xu=function(t){return this.ce.Xu(t)};function JL(t,e){function i(){if(0<r.Sr.count&&(n.addAll(r.Sr),r.Sr.clear(),r.bc=!0),r.bc!==!1&&n.count!==0){r.pu.addAll(n);for(var o=r.pu.iterator;o.next();){var l=o.value;if(l.bc!==!1){t:if(0<l.yl.count)var h=!0;else{for(h=l.uc.iterator;h.next();){var a=h.key;if(a instanceof ot&&a.diagram!==null||a instanceof D){h=!0;break t}}h=!1}h?MS(l,!1):l.Xk=!0}}r.pu.clear(),r.bc!==!1&&(mh(r),Wo(r.H),vh(r)),G.requestAnimationFrame(i)}}var n=t.Ei,r=t;t.bc?t.Sr.add(e):(t.bc=!0,n.add(e),G.requestAnimationFrame(function(){i()}))}function ZL(t){for(t=t.Ei.iterator;t.next();)t.value.Xk=!1}function mh(t){if(!t.vq){var e=t.H;t.Ow=e.skipsUndoManager,t.cw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.vq=!0}}function vh(t){var e=t.H;e.skipsUndoManager=t.Ow,e.skipsModelSourceBindings=t.cw,t.vq=!1}s.Bc=function(t){var e=this.ce;if(this.zb===!0&&(this.Ok=this.zb=!1,this.Zd.clear(),0<e.uc.count&&this.H.Zb()),this.bc){if(e.Ml(!0),e.uc.clear(),Lp(e,null),t===!0)for(t=this.Ei.Fa(),e=0;e<t.length;e++)t[e].Ml(!0)}else e.uc.clear(),Lp(e,this.H)},s.Ml=function(t){t===this.defaultAnimation&&this.defaultAnimation.uc.clear(),this.Ei.remove(t),this.Ei.count===0&&(this.bc=!1,this.H.Zb()),t===this.defaultAnimation&&(this.defaultAnimation.uc.clear(),this.H.R("AnimationFinished",this))},s.Cj=function(t,e){this.zb&&(this.Zd.contains("Expand Tree")||this.Zd.contains("Expand SubGraph"))&&(this.ce.Cj(t,e),mS(this,t))},s.Aj=function(t,e){this.zb&&(this.Zd.contains("Collapse Tree")||this.Zd.contains("Collapse SubGraph"))&&(this.ce.Aj(t,e),hm(this.ce,e,"position",e.position,e.position),mS(this,t))};function yS(t,e,i){!t.zb||e.D(i)||kp(t)||(t.H.pi||(e=i.copy()),hm(t.ce,t.H,"position",e,i))}function um(t,e,i){e.ed&&(e.Tg=i,t.pr.add(e))}function mS(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.ed&&(i.Tg=i.points.copy(),t.pr.add(i))}}function Pp(t,e,i,n,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var o=t[0],l=t[1],h=t[2];t=t[3];var a=e[0],f=e[1],p=e[2];return e=e[3],h===0||h===100?(o=a,l=f):(p===0||p===100)&&(a=o,f=l),180<Math.abs(a-o)&&(a>o?o+=360:a+=360),o=r(i,o,a-o,n)%360,l=r(i,l,f-l,n),h=r(i,h,p-h,n),i=r(i,t,e-t,n),"hsla("+o+", "+l+"%, "+h+"%, "+i+")"}function vS(){function t(i,n,r,o,l,h){i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}var e=new mt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,r,o,l,h){l<h?i.mm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!1):i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("location",function(i,n,r,o,l,h){l<h?i.mm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!0):i.location=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("position:placeholder",function(i,n,r,o,l,h){l<h?i.mm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!1):i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("position:nodeCollapse",function(i,n,r,o,l,h){var a=i.actualBounds,f=r.actualBounds;r=f.x+f.width/2-a.width/2,a=f.y+f.height/2-a.height/2,l<h?i.mm(o(l,n.x,r-n.x,h),o(l,n.y,a-n.y,h),!1):i.position=new N(o(l,n.x,r-n.x,h),o(l,n.y,a-n.y,h))}),e.add("desiredSize",function(i,n,r,o,l,h){i.desiredSize=new z(o(l,n.width,r.width-n.width,h),o(l,n.height,r.height-n.height,h))}),e.add("width",function(i,n,r,o,l,h){i.width=o(l,n,r-n,h)}),e.add("height",function(i,n,r,o,l,h){i.height=o(l,n,r-n,h)}),e.add("fill",function(i,n,r,o,l,h){i.fill=Pp(n,r,l,h,o)}),e.add("stroke",function(i,n,r,o,l,h){i.stroke=Pp(n,r,l,h,o)}),e.add("strokeWidth",function(i,n,r,o,l,h){i.strokeWidth=o(l,n,r-n,h)}),e.add("strokeDashOffset",function(i,n,r,o,l,h){i.strokeDashOffset=o(l,n,r-n,h)}),e.add("background",function(i,n,r,o,l,h){i.background=Pp(n,r,l,h,o)}),e.add("areaBackground",function(i,n,r,o,l,h){i.areaBackground=Pp(n,r,l,h,o)}),e.add("opacity",function(i,n,r,o,l,h){i.opacity=o(l,n,r-n,h)}),e.add("scale",function(i,n,r,o,l,h){i.scale=o(l,n,r-n,h)}),e.add("angle",function(i,n,r,o,l,h){i.angle=o(l,n,r-n,h)}),Np=e}B.Object.defineProperties(dn.prototype,{animationReasons:{get:function(){return this.Zd}},isEnabled:{get:function(){return this.Jd},set:function(t){(this.Jd=t)&&this.Ei.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Dg},set:function(t){1>t&&at(t,">= 1",dn,"duration"),this.Dg=t}},isAnimating:{get:function(){return this.bc}},isTicking:{get:function(){return this.vq}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t}},defaultAnimation:{get:function(){return this.ce}},activeAnimations:{get:function(){return this.Ei}},initialAnimationStyle:{get:function(){return this.Pk},set:function(t){this.Pk=t}}}),dn.prototype.stopAnimation=dn.prototype.Bc;var Np=null,Cp=!1,Tp=new Q(dn,"Default",1),xS=new Q(dn,"AnimateLocations",2),wS=new Q(dn,"None",3);dn.className="AnimationManager",dn.defineAnimationEffect=function(t,e){Cp||(vS(),Cp=!0),Np.add(t,e)},dn.Default=Tp,dn.AnimateLocations=xS,dn.None=wS;function ii(t){this.vu=this.Nw=this.Yd=this.H=null,this.Xk=this.bc=this.j=!1,this.cn=this.Qd=0,this.Lp=this.ot=kS,this.Wk=this.ho=!1,this.cu=1,this.au=0,this.Gd=this.Dg=NaN,this.gw=0,this.dn=null,this.m=vo,this.uc=new mt,this.Tt=new mt,this.yl=new q,this.Ut=new q,this.dw=dl,t&&Object.assign(this,t)}ii.prototype.suspend=function(){this.Xk=!0},ii.prototype.advanceTo=function(t,e){e&&(this.Xk=!1),this.ho&&t>=this.Gd&&(this.Wk=!0,t-=this.Gd),this.gw=t,MS(this,!0),mh(this.Yd),Wo(this.H),vh(this.Yd),this.H.redraw()};function Lp(t,e){if(t.Tt.clear(),t.Wk=!1,t.au=0,t.Gd=NaN,0<t.yl.count&&t.yl.clear(),0<t.Ut.count&&t.Ut.clear(),e!==null)for(t=e.links;t.next();)t.value.Tg=null}s=ii.prototype,s.start=function(){if(this.uc.count===0||this.bc)return this;for(var t=this.H,e=this.uc.iterator;e.next();){var i=e.key;t===null&&(i instanceof D?t=i:i instanceof ot&&(t=i.diagram))}if(t!==null)this.H=t,this.Yd=t.animationManager;else return this;return e=this.Yd,e.isEnabled===!1?this:(this.Gd=isNaN(this.Dg)?e.duration:this.Dg,this.Lp=this.ot,e.Ok&&e.Pk===Tp&&this===e.defaultAnimation&&(this.Lp=PS,this.Gd=isNaN(this.Dg)?e.duration===600?900:e.duration:this.Dg),this.dw=t.scrollMode,this.isViewportUnconstrained&&(t.sj=Am),mh(e),this.yl.each(function(n){n.data=null,t.add(n)}),vh(e),this.bc=!0,this.Qd=+new Date,this.cn=this.Qd+this.Gd,JL(e,this),this)},s.Ly=function(t,e){return t.Yc()?(this.yl.add(t),this.H=e,this):this},s.add=function(t,e,i,n,r){if(e==="position"&&i.Xa(n))return this;if(this.H===null&&(t instanceof D?this.H=t:t instanceof ot&&t.diagram!==null&&(this.H=t.diagram)),t instanceof lt){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return hm(this,t,e,i,n,r),this};function hm(t,e,i,n,r,o){var l=t.uc;if(e instanceof D&&i==="position"&&(i="position:diagram"),(i==="fill"||i==="stroke"||i==="background"||i==="areaBackground")&&(No(n),Km(),n=[rn.j,rn.u,rn.m,rn.F],No(r),Km(),r=[rn.j,rn.u,rn.m,rn.F]),l.contains(e)){var h=l.I(e),a=h.start,f=h.end;a[i]===void 0&&(a[i]=xh(n)),f[i]=xh(r)}else a={},f={},a[i]=xh(n),f[i]=xh(r),h=a.position,e instanceof ot&&h instanceof N&&!h.w()&&e.diagram.animationManager.Zd.contains("Expand SubGraph")&&h.assign(f.position),h=new NS(a,f,o),l.add(e,h);l=a[i],l instanceof N&&!l.w()&&l.assign(t.m),o&&i.indexOf("position:")===0&&e instanceof lt?h.Ku.location=xh(e.location):o&&(h.Ku[i]=xh(n))}function xh(t){return t instanceof N||t instanceof ct?t.copy():t}s.fv=function(t){return this.bc?(t=this.uc.I(t),t!==null&&t.nv):!1},s.Xu=function(t){return this.bc?(t=this.uc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function MS(t,e){if(!t.Xk||e){var i=t.Yd;if(t.bc!==!1){var n=+new Date,r=n>t.cn?t.Gd:n-t.Qd;e&&(r=t.gw,r<t.Gd?(t.Qd=+new Date-r,t.cn=t.Qd+t.Gd):r=t.Gd),mh(i),SS(t,r),Wo(t.H,!0),vh(i),n>t.cn&&(t.ho&&!t.Wk?(t.Qd=+new Date,t.cn=t.Qd+t.Gd,t.Wk=!0):t.Ml(!1))}}}function SS(t,e){for(var i=t.Gd,n=t.uc.iterator,r=t.Wk;n.next();){var o=n.key;if(!(o instanceof ot&&o.diagram===null)){var l=n.value,h=r?l.end:l.start;l=r?l.start:l.end;var a=Np,f;for(f in l)f==="position"&&(l["position:placeholder"]||l["position:nodeCollapse"])||a.get(f)===null||a.get(f)(o,h[f],l[f],t.Lp,e,i,t)}}}s.stop=function(){return this.bc?(this.Ml(!0),this):this},s.Ml=function(t){if(this.vu!==null&&this.vu.jo.remove(this.Nw),this.bc){var e=this.H,i=this.Yd;this.Xk=this.bc=i.Ok=!1,mh(i);for(var n=this.uc,r=this.yl.iterator;r.next();)e.remove(r.value);for(r=this.Ut.iterator;r.next();)r.value.v();r=this.ho,n=n.iterator;for(var o=Np;n.next();){var l=n.key,h=n.value,a=r?h.end:h.start,f=r?h.start:h.end,p=h.Ku,d;for(d in f)if(o.get(d)!==null){var y=d;!h.Hu||y!=="position:nodeCollapse"&&y!=="position:placeholder"||(y="position"),o.get(y)(l,a[d],p[d]!==void 0?p[d]:h.Hu?a[d]:f[d],this.Lp,this.Gd,this.Gd,this)}h.Hu&&p.location!==void 0&&l instanceof lt&&(l.location=p.location),h.nv&&l instanceof lt&&l.Yb(!1)}if(e.As.clear(),Op(e,!1),e.Ya(),e.N(),Wo(e,!0),i.defaultAnimation===this){for(d=i.pr.iterator;d.next();)r=d.value,r.Tg!==null&&(r.points=r.Tg,r.Tg=null);i.pr.clear()}Wo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.dw),vh(i),this.au++,!t&&this.cu>this.au?(this.Wk=!1,this.start()):(this.dn&&this.dn(this),Lp(this,null),i.Ml(this),e.Zb())}},s.Cj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof gt&&(n=e.placeholder),n!==null?(i=n.ga(ei),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new N(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof gt)for(t=t.memberParts;t.next();)n=t.value,n instanceof b&&this.Cj(n,e)},s.Aj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof gt&&(i=e.placeholder),i!==null){var n=i.ga(ei);i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position:placeholder",t.position,n,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);if(this.add(t,"scale",t.scale,.01,!0),n=this.uc,n.contains(t)&&(n.I(t).nv=!0),t instanceof gt)for(t=t.memberParts;t.next();)n=t.value,n instanceof b&&this.Aj(n,e)}},s.Gz=function(t){var e=this.Tt.get(t);return e===null&&(e={},this.Tt.add(t,e)),e},B.Object.defineProperties(ii.prototype,{duration:{get:function(){return this.Dg},set:function(t){1>t&&at(t,">= 1",ii,"duration"),this.Dg=t}},reversible:{get:function(){return this.ho},set:function(t){this.ho=t}},runCount:{get:function(){return this.cu},set:function(t){0<t?this.cu=t:I("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t)}},easing:{get:function(){return this.ot},set:function(t){this.ot=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.bc}}}),ii.prototype.getTemporaryState=ii.prototype.Gz,ii.prototype.stop=ii.prototype.stop,ii.prototype.add=ii.prototype.add,ii.prototype.addTemporaryPart=ii.prototype.Ly;function kS(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function PS(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}ii.className="Animation",ii.EaseLinear=function(t,e,i,n){return i*t/n+e},ii.EaseInOutQuad=kS,ii.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},ii.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},ii.EaseInExpo=function(t,e,i,n){return t===0?e:i*Math.pow(2,10*(t/n-1))+e},ii.EaseOutExpo=PS;function NS(t,e,i){this.start=t,this.end=e,this.Ku={},this.Hu=i,this.nv=!1}NS.className="AnimationState";function Jr(t,e,i){this.xd=null,this.rf=t,this.so=i||CS,this.uk=null,e!==void 0&&(this.uk=e,i===void 0&&(this.so=am))}Jr.prototype.copy=function(){var t=new Jr(this.rf);t.so=this.so;var e=this.uk;if(e!==null){var i={};e.duration!==void 0&&(i.duration=e.duration),e.finished!==void 0&&(i.finished=e.finished),e.easing!==void 0&&(i.easing=e.easing),t.uk=i}return t};function QL(t,e){t=t.uk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}B.Object.defineProperties(Jr.prototype,{propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},animationSettings:{get:function(){return this.uk},set:function(t){this.uk=t}},startCondition:{get:function(){return this.so},set:function(t){this.so=t}}});var CS=new Q(Jr,"Default",1),am=new Q(Jr,"Immediate",2),TS=new Q(Jr,"Bundled",3);Jr.className="AnimationTrigger",Jr.Default=CS,Jr.Immediate=am,Jr.Bundled=TS;function ni(t){Le(this),this.H=null,this.Pa=new tt,this.xa="",this.pb=1,this.m=!1,this.j=this.Uh=this.u=this.Oi=this.Ni=this.Mi=this.Li=this.Ji=this.Ki=this.Ii=this.Qi=this.Hi=this.Pi=this.Gi=this.Fi=!0,this.Zq=[],t&&Object.assign(this,t)}s=ni.prototype,s.clear=function(){for(var t=this.Pa,e=0;e<t.length;e++){var i=t.s[e];i.Ig=null,Ym(i)}t.clear(),this.Zq.length=0},s.Xe=function(t){this.H=t},s.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,r=0,o=0,l=0,h=this.Pa.iterator;h.next();){var a=h.value;a instanceof gt?r++:a instanceof b?n++:a instanceof K?o++:a instanceof Ct?l++:i++}if(h="",0<i&&(h+=i+" Parts "),0<n&&(h+=n+" Nodes "),0<r&&(h+=r+" Groups "),0<o&&(h+=o+" Links "),0<l&&(h+=l+" Adornments "),1<t)for(t=this.Pa.iterator;t.next();)i=t.value,h+=`
    `+i.toString(),n=i.data,n!==null&&Oi(n)&&(h+=" #"+Oi(n)),i instanceof b?h+=" "+Xi(n):i instanceof K&&(h+=" "+Xi(i.fromNode)+" "+Xi(i.toNode));return e+" "+this.Pa.count+": "+h},s.hc=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),this.Uh===!1)return null;var n=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(n=!0);for(var r=N.alloc(),o=this.Pa.s,l=o.length;l--;){var h=o[l];if((n!==!0||Es(h)!==!1)&&h.isVisible()&&(r.assign(t),yi(r,h.oe),h=h.hc(r,e,i),h!==null&&(e!==null&&(h=e(h)),h!==null&&(i===null||i(h)))))return N.free(r),h}return N.free(r),null},s.ji=function(t,e,i,n){if(e===void 0&&(e=null),i===void 0&&(i=null),n instanceof tt||n instanceof q||(n=new q),this.Uh===!1)return n;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(r=!0);for(var o=N.alloc(),l=this.Pa.s,h=l.length;h--;){var a=l[h];if((r!==!0||Es(a)!==!1)&&a.isVisible()){o.assign(t),yi(o,a.oe);var f=a;a.ji(o,e,i,n)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||n.add(f))}}return N.free(o),n},s.Cf=function(t,e,i,n,r){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),this.Uh===!1)return r;var o=!1;this.diagram!==null&&this.diagram.viewportBounds.Re(t)&&(o=!0);for(var l=this.Pa.s,h=l.length;h--;){var a=l[h];if((o!==!0||Es(a)!==!1)&&a.isVisible()){var f=a;a.Cf(t,e,i,n,r)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||r.add(f))}}return r},s.Nu=function(t,e,i,n,r,o,l){if(this.Uh===!1)return r;for(var h=this.Pa.s,a=h.length;a--;){var f=h[a];if((l!==!0||Es(f)!==!1)&&o(f)&&f.isVisible()){var p=f;f.Cf(t,e,i,n,r)&&(e!==null&&(p=e(p)),p===null||i!==null&&!i(p)||r.add(p))}}return r},s.og=function(t,e,i,n,r,o){if(i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(o=r),r=!0),o instanceof tt||o instanceof q||(o=new q),this.Uh===!1)return o;var l=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(l=!0);for(var h=N.alloc(),a=N.alloc(),f=this.Pa.s,p=f.length;p--;){var d=f[p];if((l!==!0||Es(d)!==!1)&&d.isVisible()){h.assign(t),yi(h,d.oe),a.h(t.x+e,t.y),yi(a,d.oe);var y=d;d.og(h,a,i,n,r,o)&&(i!==null&&(y=i(y)),y===null||n!==null&&!n(y)||o.add(y))}}return N.free(h),N.free(a),o},s.Fd=function(t,e){if(this.visible){var i=this.Pa.s,n=i.length;if(n!==0){t=Vt();for(var r=Vt(),o=0;o<n;o++){var l=i[o];if(l.vw=o,l instanceof K){if(l.ed===!1)continue}else if(l instanceof Ct&&l.adornedPart!==null)continue;var h=l.actualBounds;l.isVisible()&&EM(h,e)?(l.Fd(!0),t.push(l)):(l.Fd(!1),l.adornments!==null&&0<l.adornments.count&&r.push(l))}for(e=0;e<t.length;e++)for(i=t[e],Mv(i),i=i.adornments;i.next();)n=i.value,n.measure(1/0,1/0),n.arrange(),n.Fd(!0);for(e=0;e<r.length;e++)Mv(r[e]);zt(t),zt(r)}}};function uf(t,e){var i=1;return t.pb!==1&&(i=e.globalAlpha,e.globalAlpha=i*t.pb),i}s.fc=function(t,e,i){if(this.visible&&this.pb!==0&&(i===void 0&&(i=!0),i||!this.isTemporary)){i=this.Pa.s;var n=i.length;if(n!==0){if(t.isTemporary)for(var r=0;r<n;r++)i[r].Gj();r=uf(this,t);var o=this.Zq;o.length=0;for(var l=e.scale,h=z.alloc(),a=0;a<n;a++)this.Oj(t,i[a],e,o,l,h,!0);if(z.free(h),t.isTemporary)for(e=0;e<n;e++)i[e].Gj();t.globalAlpha=r}}};function qL(t,e,i,n,r){if(t.visible&&t.pb!==0&&(r||!t.isTemporary)){r=t.Pa.s;var o=r.length;if(o!==0){var l=uf(t,e),h=t.Zq;h.length=0;for(var a=i.scale,f=z.alloc(),p=0;p<o;p++){var d=r[p];n.contains(d)&&t.Oj(e,d,i,h,a,f,!1)}z.free(f),e.globalAlpha=l}}}s.Oj=function(t,e,i,n,r,o,l){if(l&&!Es(e))t.Hs(e);else{if(n!==null&&e instanceof K&&(e.isOrthogonal&&n.push(e),e.ed===!1)){t.Hs(e);return}for(l=!1,n=e.containingGroup;n!==null;)l?n.tb!==null&&o.Fx(n.tb):n.tb!==null&&(l=!0,o.assign(n.tb)),n=n.containingGroup;var h=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!o.Xc(h)){t.Hs(e);return}n=!o.Re(h)}n&&(t.save(),t instanceof Ki?t.bk=o.copy():(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip())),h.width*r>i.Oq||h.height*r>i.Oq?e.fc(t,i):(r=e.actualBounds,o=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,e.areaBackground!==null&&(nn(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(nn(e,t,"rgba(0,0,0,0.3)",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),nn(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),i.ws()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.Uc(!0))}},s.g=function(t,e,i,n,r){var o=this.diagram;o!==null&&o.cb(Jt,t,this,e,i,n,r)},s.oi=function(t,e,i){var n=this.Pa;if(e.Ig=this,this===null&&Ym(e),t>=n.count)t=n.count;else if(n.M(t)===e)return-1;return n.Gb(t,e),e.Vo(i),n=this.diagram,n!==null&&(i?n.N():n.oi(e)),jp(this,t,e),t},s.oc=function(t,e,i){if(!i&&e.layer!==this&&e.layer!==null)return e.layer.oc(t,e,i);var n=this.Pa;if(0>t||t>=n.length){if(t=n.indexOf(e),0>t)return-1}else if(n.M(t)!==e&&(t=n.indexOf(e),0>t))return-1;return e.Wo(i),n.mb(t),n=this.diagram,n!==null&&(i?n.N():n.oc(e)),e.Ig=null,Ym(e),t};function jp(t,e,i){if(e=bL(t,e,i),i instanceof gt&&i!==null&&isNaN(i.zOrder)){if(i.memberParts.count!==0){for(var n=-1,r=t.Pa.s,o=r.length,l=0;l<o;l++){var h=r[l];if(h===i&&(e=l,0<=n)||0>n&&h.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&(r=t.Pa,r.mb(e),r.Gb(n,i))}e=i.containingGroup,e!==null&&jp(t,-1,e)}i.svg!==null&&i.svg.remove()}function bL(t,e,i){var n=i.zOrder;if(isNaN(n))return e;t=t.Pa;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,l=NaN;0<=o&&(l=t.M(o).zOrder,!!isNaN(l));)o--;for(var h=e+1,a=NaN;h<r&&(a=t.M(h).zOrder,!!isNaN(a));)h++;if(!isNaN(l)&&l>n)for(;;){if(o===-1||l<=n){if(o++,o===e)break;return t.mb(e),t.Gb(o,i),o}for(l=NaN;0<=--o&&(l=t.M(o).zOrder,isNaN(l)););}else if(!isNaN(a)&&a<n)for(;;){if(h===r||a>=n){if(h--,h===e)break;return t.mb(e),t.Gb(h,i),h}for(a=NaN;++h<r&&(a=t.M(h).zOrder,isNaN(a)););}return e}B.Object.defineProperties(ni.prototype,{parts:{get:function(){return this.Pa.iterator}},partsBackwards:{get:function(){return this.Pa.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.xa},set:function(t){var e=this.xa;if(e!==t){var i=this.diagram;if(i!==null)for(e===""&&I("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&I("Layer.name is already present in this diagram: "+t);for(this.xa=t,this.g("name",e,t),t=this.Pa.iterator;t.next();)t.value.layerName=this.xa}}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",ni,"opacity"),this.pb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Pa.iterator;e.next();)e.value.Yb(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Ya())}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}}}),ni.prototype.findObjectsNear=ni.prototype.og,ni.prototype.findObjectsIn=ni.prototype.Cf,ni.prototype.findObjectsAt=ni.prototype.ji,ni.prototype.findObjectAt=ni.prototype.hc,ni.className="Layer";function D(t,e){if(i2||(fj(),i2=!0),Le(this),wh=this,this.vb=!0,this.Ka=null,this.ya=this.Aa=0,this.ta=null,Kn){var i=this,n=function(){i.removeEventListener(G.document,"DOMContentLoaded",n,!1),i.setRTL()};G.document.body!==null?this.setRTL():i.addEventListener(G.document,"DOMContentLoaded",n,!1)}this.ol=null,Rp.add("Model",Dt);var r=this;return this.Hb=function(o){var l=r.partManager;if(o.model===l.diagram.model&&l.diagram.aa){l.diagram.aa=!1;try{var h=o.change;o.modelChange===""&&h===Jt&&l.updateDataBindings(o.object,o.propertyName)}finally{l.diagram.aa=!0}}},this.Nc=function(o){r.partManager.doModelChanged(o)},this.hu=this.ku=null,jS(this),this.model=Zv(),this.Wg=!0,ES(this),this.layout=new Wt,this.Wg=!1,this.ck=this.ek=this.fk=this.dk=this.ui=this.bA=this.$j=this.Ov=null,this.hk=function(){},this.preventDefault=null,this.rn=!1,this.Yf=new n2,t!==void 0&&(typeof t=="string"||G.Element&&t instanceof Element?fm(this,t):e=t),this.vb=!1,e&&this.nm(e),this}var LS,wh;function jS(t){t.Yd=new dn,t.Yd.Xe(t),t.Db=17,t.Gw=!1,t.tn=!1,t.bu="default",t.Wa=new tt,t.pj=new mt,t.nl="default",t.Wx(),t.Vx(),t.pb=1,t.pa=new N(NaN,NaN).freeze(),t.du=new N(NaN,NaN),t.Ca=1,t.Pp=1,t.zt=new N(NaN,NaN).freeze(),t.At=NaN,t.Ot=1e-4,t.Mt=100,t.Ab=new wt,t.zu=new N(NaN,NaN).freeze(),t.ut=new z(NaN,NaN,NaN,NaN).freeze(),t.rj=new At(0,0,0,0).freeze(),t.sj=dl,t.nu=!1,t.Zt=null,t.fu=null,t.yh=gn,t.zk=$e,t.Fg=gn,t.pq=$e,t.yt=ei,t.Bt=ei,t.Ec=!0,t.pn=!1,t.De=new q,t.Eh=new mt,t.Xm=!0,t.vp=250,t.vk=-1,t.xp=new At(16,16,16,16).freeze(),t.kg=!1,t.Jk=!1,t.fn=!0,t.bq=new pn,t.bq.diagram=t,t.Qg=new pn,t.Qg.diagram=t,t.cj=new pn,t.cj.diagram=t,t.zg=null,t.pf=null,t.qu=!1,hj(t),t.ai=new q,t.Ht=!0,t.uu=gu,t.pw=!1,t.wu=Em,t.it="auto",t.Op="auto",t.zh=null,t.Fh=null,t.Bh=null,t.Qh=null,t.Oh=null,t.Nh=null,t.Qt=null,t.Lh=null,t.xt=!1,t.Mh=null,t.Ph=null,t.$h=null,t.Ch=null,t.Rt=!1,t.Yt={},t.oj=[null,null],t.Wg=!1,t.Iw=!1,t.ou=!1,t.lt=!1,t.rw=!0,t.kd=!1,t.$i=!1,t.Tw=!0,t.Ce=-2,t.Og=new mt,t.Xn=new tt,t.Gg=!1,t.Jd=!0,t.Us=!0,t.Fi=!0,t.Gi=!0,t.Vs=!1,t.Ws=!0,t.Pi=!0,t.Hi=!0,t.Qi=!0,t.Ys=!0,t.Ii=!0,t.Ki=!0,t.Ji=!0,t.Li=!0,t.Mi=!0,t.Ni=!0,t.Oi=!0,t.Zs=!0,t.at=!0,t.qw=!1,t.Vk=!1,t.mn=!0,t.nn=!0,t.Xs=!0,t.$s=!0,t.iu=16,t.mu=16,t.qr=!1,t.gu=!1,t.lu=0,t.ju=0,t.yb=new At(5).freeze(),t.Hw=new q().freeze(),t.Nt=999999999,t.nw=new q().freeze(),t.Zi=!0,t.Ee=!0,t.vd=!0,t.Be=!1,t.gf=!1,t.xh=!0,t.hf=!1,t.vy=new q,t.ow=new q,t.Xh=null,t.aw=new ct(8,8),t.bw=999,t.Bw=1,t.Jw=0,t.qd={scale:1,position:new N,bounds:new z,bx:new ct,Ox:new ct,Ix:!1},t.Rw=new z(NaN,NaN,NaN,NaN).freeze(),t.wo=new ct(NaN,NaN).freeze(),t.Sp=new z(NaN,NaN,NaN,NaN).freeze(),t.It=!1,t.Lg=new mt;var e=new b,i=new Xt;i.bind(new ue("text","",Xi)),e.add(i),t.qy=e,t.Lg.add("",e),e=new b,i=new Xt,i.stroke="brown",i.bind(new ue("text","",Xi)),e.add(i),t.Lg.add("Comment",e),e=new b,e.selectable=!1,e.avoidable=!1,i=new vt,i.figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new ct(3,3).ja(),e.add(i),t.Lg.add("LinkLabel",e),t.Yi=new mt,e=new gt,e.selectionObjectName="GROUPPANEL",e.type=_.Vertical,i=new Xt,i.font="bold 12pt sans-serif",i.bind(new ue("text","",Xi)),e.add(i),i=new _(_.Auto),i.name="GROUPPANEL";var n=new vt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new Mi,n.padding=new At(5,5,5,5).ja(),i.add(n),e.add(i),t.oy=e,t.Yi.add("",e),t.Kh=new mt,e=new K,i=new vt,i.isPanelMain=!0,e.add(i),i=new vt,i.toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.py=e,t.Kh.add("",e),e=new K,i=new vt,i.isPanelMain=!0,i.stroke="brown",e.add(i),t.Kh.add("Comment",e),e=new Ct,e.type=_.Auto,i=new vt,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),i=new Mi,i.margin=new At(1.5,1.5,1.5,1.5).ja(),e.add(i),t.St=e,t.wt=e,e=new Ct,e.type=_.Link,i=new vt,i.isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Kt=e,t.fe=null,t.mq=!1,t.Ck=null,t.partManager=new Dt,t.toolManager=new bt,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.nt=null,t.Wm=new Th,t.Vt=null,t.Wt=null,t.Mr=!1,t.commandHandler=FS(),t.eq=null,t.fq=fp,t.Pw=!1,t.Mb=1,t.Yh=null,t.Oq=1,t.Sq=0,t.zw=[0,0,0,0,0],t.Tq=0,t.yq=1,t.tw=0,t.uw=new N,t.Cy=500,t.wp=new N,t.wq=!1}D.prototype.clear=function(){this.animationManager.Bc(),this.model.clear(),kh=null,pf="",OS(this,!1),this.Xn.clear(),Uh(),this.Og.clear(),this.Xh=null,this.Ya(),this.Va(),this.N()};function OS(t,e){t.animationManager.Bc(!0),t.Hw=new q().freeze(),t.nw=new q().freeze();var i=t.skipsUndoManager,n=t.cc!==null&&t.cc!==void 0;n&&(t.skipsUndoManager=!0);var r=null;t.fe!==null&&(r=t.fe.part,r!==null&&t.remove(r));var o=[],l=t.Wa.length;if(e){for(e=0;e<l;e++)for(var h=t.Wa.s[e].parts;h.next();){var a=h.value;a!==r&&a.data===null&&o.push(a)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<l;e++)t.Wa.s[e].clear();return t.partManager.clear(),t.De.clear(),t.Eh.clear(),t.ai.clear(),t.Ck=null,t.Xn.clear(),Uh(),t.Og.clear(),ai=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),n&&(t.skipsUndoManager=i),o}function FS(){return null}D.prototype.reset=function(){this.clear(),this.vb=!0,jS(this),Zo(this),this.Wg=!0,ES(this),this.layout=new Wt,this.Wg=!1,this.model=Zv(),this.model.undoManager=new ie,this.vb=this.rn=!1,this.N()},D.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=G.document.body);var e=W("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),t.removeChild(e),this.bu=i},D.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=G.document.body);var e=0;if(Kn){var i=JS;e=LS,i===null&&(i=JS=W("p"),i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",e=LS=W("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,n===i&&(i=e.clientWidth),t.removeChild(e),e=n-i,e!==0||we||(e=11)}this.Db=e,this.Gw=!0},D.prototype.qb=function(t){t.classType===D&&(this.autoScale=t)},D.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Wa.iterator;i.next();)e+=`
  `+i.value.toString(t-1);return e};function fm(t,e){if(Kn){if(e!=null||I("Diagram setup requires an argument DIV."),t.Ka!==null&&I("Diagram has already completed setup."),typeof e=="string"?t.Ka=G.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:I("No DIV or DIV id supplied: "+e),t.Ka===null&&I("Invalid DIV id; could not get element with id: "+e),t.Ka.H!==void 0&&I("Invalid div id; div already has a Diagram associated with it."),!t.ol&&G.ResizeObserver){var i=X(function(){t.Zb()},250);t.ol=new G.ResizeObserver(function(){i()}),t.ol.observe(t.Ka)}G.getComputedStyle(t.Ka,null).position==="static"&&(t.Ka.style.position="relative"),e=5;var n="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=n,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=G.go;var r=new Fn(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",G.getComputedStyle(t.Ka,null).getPropertyValue("direction")==="rtl"&&(t.tn=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none",r.style.letterSpacing="normal !important",r.style.wordSpacing="normal !important"),t.ta=r,t.ib=r.context,n=t.ib,t.Mb=t.computePixelRatio(),t.viewSize.w()||(t.Aa=t.Ka.clientWidth||1,t.ya=t.Ka.clientHeight||1),RS(t,t.Aa,t.ya),t.Ka.insertBefore(r.La,t.Ka.firstChild),r=new Fn(null),r.width=1,r.height=1,t.jw=r,t.sy=r.context,Kn){r=W("div");var o=W("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.Aa+"px",r.style.height=t.ya+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ka.appendChild(r),r.appendChild(o),r.onscroll=ej,r.addEventListener("pointerdown",ij),r.H=t,r.xy=!0,r.yy=!0,t.ku=r,t.hu=o}t.hk=X(function(){t.Yh=null,t.N()},300),t.Ov=X(function(){cm(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.$j=function(l){if(t.isEnabled){var h=du(t,l,!0);h.bubbles=!0;var a=0,f=0;h.delta=0,l.deltaX!==void 0?(l.deltaX!==0&&(a=0<l.deltaX?1:-1),l.deltaY!==0&&(f=0<l.deltaY?1:-1),h.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-a:-f):l.wheelDeltaX!==void 0?(l.wheelDeltaX!==0&&(a=0<l.wheelDeltaX?-1:1),l.wheelDeltaY!==0&&(f=0<l.wheelDeltaY?-1:1),h.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-a:-f):l.wheelDelta!==void 0&&l.wheelDelta!==0&&(h.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),pl(h,l)}},t.bA=function(l){t.isEnabled&&(t.Vk=!1,du(t,l,!0),l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())},t.ui=function(l){if(t.isEnabled){t.Vk=!0;var h=t.Yt;h[l.pointerId]===void 0&&(h[l.pointerId]=l),h=t.oj;var a=!1;if(h[0]===null||h[0].pointerId!==l.pointerId&&h[0].pointerType===l.pointerType)if(h[1]!==null&&h[1].pointerId===l.pointerId)h[1]=l,a=!0;else if(h[0]===null)h[0]=l;else if(h[1]===null)h[1]=l,a=!0;else{l.preventDefault();return}else h[0]=l;(h=l.pointerType==="touch"||l.pointerType==="pen")&&(t.qu=!1,t.wq=!0);var f=a;a=ym(t,l,!0,!1,!0,f),af(t,l,a),a.targetDiagram=gm(l,l.target),a.targetObject=null,f||a.clone(t.bq),f=t.uw,h=h?25:10,l.timeStamp-t.tw<t.Cy&&!(Math.abs(f.x-l.screenX)>h||Math.abs(f.y-l.screenY)>h)?t.yq++:t.yq=1,a.clickCount=t.yq,t.tw=l.timeStamp,t.uw.sg(l.screenX,l.screenY),t.doMouseDown(),l.button===1?l.preventDefault():pl(a,l)}},t.dk=function(l){if(t.isEnabled){t.Vk=!0;var h=t.oj;if(h[0]===null||h[0].pointerId!==l.pointerId&&h[0].pointerType===l.pointerType){if(h[1]!==null&&h[1].pointerId===l.pointerId){h[1]=l;return}if(h[0]===null)h[0]=l;else return}else h[0]=l;if(h[0].pointerId===l.pointerId){h=ym(t,l,!1,!1,!1,h[1]!==null);var a=G.document.elementFromPoint(l.clientX,l.clientY)||null;a!==null&&a.shadowRoot!==void 0&&a.shadowRoot!==null&&(a=a.shadowRoot.elementFromPoint(l.clientX,l.clientY));var f=t,p=l;a&&a.H&&(p=l,f=a.H),h.targetDiagram=f,af(t,p,h),h.targetObject=null,t.doMouseMove(),pl(h,l)}}},t.fk=function(l){if(t.isEnabled){t.Vk=!0;var h=l.pointerType==="touch"||l.pointerType==="pen",a=t.Yt;if(h&&t.qu)delete a[l.pointerId],l.preventDefault();else if(a=t.oj,a[0]===null||a[0].pointerId!==l.pointerId&&a[0].pointerType===l.pointerType)a[1]!==null&&a[1].pointerId===l.pointerId&&(a[1]=null);else{a[0]=null,a=ym(t,l,!1,!0,!0,!1);var f=G.document.elementFromPoint(l.clientX,l.clientY)||null;f!==null&&f.shadowRoot!==void 0&&f.shadowRoot!==null&&(f=f.shadowRoot.elementFromPoint(l.clientX,l.clientY)),f!==null&&f.H instanceof D&&f.H!==t&&af(f.H,l,a),f===null&&(f=l.target),af(t,l,a),a.clickCount=t.yq,a.targetDiagram=gm(l,f),a.targetObject=null,t.doMouseUp(),pl(a,l),h&&(t.wq=!1)}}},t.ek=function(l){if(t.isEnabled){t.Vk=!1;var h=t.Yt;h[l.pointerId]&&delete h[l.pointerId],h=t.oj,h[0]!==null&&h[0].pointerId===l.pointerId&&(h[0]=null),h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null),l.pointerType!=="touch"&&l.pointerType!=="pen"&&(l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())}},t.ck=function(l){var h=t.oj;h[0]!==null&&h[0].pointerId===l.pointerId?(h[0]=null,t.wq=!1):h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null)},t.Vp=n.Z["d"+r2[1]+r2[2]+"wI"+Nh.slice(1,5)]["b"+jj.slice(1,e)](n.Z,e2,e,e),n.Uc(!0),tj(t),t.nl==="svg"&&(e=t.pj.get("svg"),t.Ka.appendChild(e.La),t.ib=e.context)}}D.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},D.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})};function tj(t){var e=t.ta.La;e instanceof HTMLCanvasElement||(e=t.div),t.addEventListener(e,"pointerdown",t.ui,!1),t.addEventListener(e,"pointermove",t.dk,!1),t.addEventListener(e,"pointerup",t.fk,!1),t.addEventListener(e,"pointerout",t.ek,!1),t.addEventListener(e,"pointercancel",t.ck,!1),t.addEventListener(e,"pointerenter",t.dz,!1),t.addEventListener(e,"pointerleave",t.ez,!1),t.addEventListener(e,"wheel",t.$j,!1),t.addEventListener(e,"keydown",t.Rz,!1),t.addEventListener(e,"keyup",t.Sz,!1),t.addEventListener(e,"blur",t.Qy,!1),t.addEventListener(e,"focus",t.Ry,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(G,"resize",t.Ov,!1)}function hf(t){30<t.Sq&&(t.Yh=1)}function Op(t,e){t.Yh!==null&&(t.Yh=null,e&&t.hk(),Cs&&Cs.ox||(t.Sq=0,t.zw=[0,0,0,0,0],t.Tq=0))}D.prototype.computePixelRatio=function(){return this.Yh!==null?this.Yh:G.devicePixelRatio||1},D.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},D.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},D.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},D.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},D.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},D.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},D.prototype.doFocus=function(){this.focus()},D.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=G.scrollX||G.pageXOffset,e=G.scrollY||G.pageYOffset;this.ta.focus(),G.scrollTo(t,e)}},D.prototype.Ry=function(){this.H.R("GainedFocus")},D.prototype.Qy=function(){this.H.R("LostFocus")};function cm(t){if(t.ta!==null){var e=t.Ka;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.Gw||t.setScrollWidth();var i=t.gf?t.Db:0,n=t.Be?t.Db:0,r=t.Mb;t.Mb=t.computePixelRatio(),t.Mb!==r&&(t.pn=!0,t.Zb()),(e.clientWidth!==t.Aa+i||e.clientHeight!==t.ya+n)&&(t.Ee=!0,t.Ec=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===gn&&(t.Jk=!0,e.C()),t.kd||t.Zb())}}}function ES(t){var e=new ni;e.name="Background",t.Al(e),e=new ni,e.name="",t.Al(e),e=new ni,e.name="Foreground",t.Al(e),e=new ni,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Al(e),e=new ni,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Al(e),e=new ni,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Ww(e,t.Qj("Background"))}function AS(t){var e=new _(_.Grid);e.name="GRID";var i=new vt;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new vt,i.figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new vt,i.figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new vt,i.figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new vt,i.figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new vt,i.figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new lt,i.add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function ej(){this.H.gu?this.H.gu=!1:this.H.isEnabled?this.H.lx(this):vm(this.H)}function ij(t){this.H.isEnabled?(this.H.lu=t.target.scrollTop,this.H.ju=t.target.scrollLeft):vm(this.H)}D.prototype.lx=function(t){if(this.ta!==null){var e=this.ku,i=this.hu;this.qr=!0;var n=this.documentBounds,r=this.viewportBounds,o=this.rj,l=n.x-o.left,h=n.y-o.top,a=n.width+o.left+o.right,f=n.height+o.top+o.bottom,p=n.right+o.right;o=n.bottom+o.bottom;var d=r.x;n=r.y;var y=r.width,m=r.height,x=r.right,M=r.bottom;r=this.scale;var k=t.scrollLeft;if(this.tn)switch(this.bu){case"negative":k=k+t.scrollWidth-t.clientWidth;break;case"reverse":k=t.scrollWidth-k-t.clientWidth}var S=k;y<a||m<f?(k=N.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.ju!==S&&(k.x=S/r+l,this.ju=S),this.allowVerticalScroll&&this.lu!==t.scrollTop&&(k.y=t.scrollTop/r+h,this.lu=t.scrollTop),this.position=k,N.free(k),this.Ee=this.qr=!1):(k=N.alloc(),t.xy&&this.allowHorizontalScroll&&(l<d&&(this.position=k.h(S+l,this.position.y)),p>x&&(this.position=k.h(-(e.scrollWidth-this.Aa)+S-this.Aa/r+p,this.position.y))),t.yy&&this.allowVerticalScroll&&(h<n&&(this.position=k.h(this.position.x,t.scrollTop+h)),o>M&&(this.position=k.h(this.position.x,-(e.scrollHeight-this.ya)+t.scrollTop-this.ya/r+o))),N.free(k),this.vd=!0,this.Ee=this.qr=!1,n=this.documentBounds,r=this.viewportBounds,p=n.right,x=r.right,o=n.bottom,M=r.bottom,l=n.x,d=r.x,h=n.y,n=r.y,y>=a&&l>=d&&p<=x&&(i.style.width="1px"),m>=f&&h>=n&&o<=M&&(i.style.height="1px"))}},D.prototype.computeBounds=function(t){return t===void 0&&(t=new z),xi(this),DS(this,t)};function DS(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.Co(t.yb),e;for(var i=!0,n=t.Wa.s,r=n.length,o=0;o<r;o++){var l=n[o];if(l.visible&&l.isInDocumentBounds){l=l.Pa.s;for(var h=l.length,a=0;a<h;a++){var f=l[a];f.isInDocumentBounds&&f.isVisible()&&(f=f.actualBounds,f.w()&&(i?(i=!1,e.assign(f)):e.dd(f)))}}}return i&&e.h(0,0,0,0),e.Co(t.yb),e}D.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var i=null;if(Bt(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof K||(r.Va(),i===null?i=r.actualBounds.copy():i.dd(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof K||(n.Va(),i===null?i=n.actualBounds.copy():i.dd(n.actualBounds));return i===null?new z(NaN,NaN,0,0):i};function fr(t,e){if((e||t.hf)&&!t.vb&&t.ta!==null&&t.documentBounds.w()){if(t.vb=!0,e){var i=t.initialPosition;if(i.w()){t.vb=!1,t.position=i;return}i=N.alloc(),i.xi(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=z.allocAt(0,0,n.width,n.height);var r=N.alloc();r.xi(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,z.free(n),N.free(r),N.free(i)}i=t.yh,e&&t.Fg!==gn&&(i=t.Fg);var o=i!==gn?Mh(t,i):t.scale;i=t.pa.x,n=t.pa.y,r=t.Aa/o;var l=t.ya/o,h=t.zk,a=t.pq;e&&!h.sb()&&(a.sb()||a.Wb())&&(h=a.Wb()?Rt:a),pm(t,t.documentBounds,r,l,h,e),e=t.scale,t.scale=o,t.vb=!1,o=t.viewportBounds,O.B(o.x,i)&&O.B(o.y,n)&&O.B(o.width,r)&&O.B(o.height,l)||t.onViewportBoundsChanged(new z(i,n,r,l),o,e,!1)}}function Mh(t,e){var i=t.Pp;if(t.ta===null)return i;t.Va();var n=t.documentBounds;if(!n.w())return i;var r=n.width;n=n.height;var o=t.Aa+(t.gf?t.Db:0),l=t.ya+(t.Be?t.Db:0),h=o/r,a=l/n;return e===Ph?(e=Math.min(a,h),e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Bp?(e=a>h?(l-t.Db)/n:(o-t.Db)/r,e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}D.prototype.zoomToFit=function(){var t=this.sj;this.sj=dl,this.scale=Mh(this,Ph),t!==dl&&(fr(this,!1),pm(this,this.documentBounds,this.Aa/this.Ca,this.ya/this.Ca,this.zk,!1)),this.sj=t},s=D.prototype,s.BA=function(t,e){e===void 0&&(e=Ph);var i=t.width,n=t.height;if(!(i===0||n===0||isNaN(i)&&isNaN(n))){var r=1;if(e===Ph||e===Bp)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.Aa;var o=this.ya;r=e===Bp?o/n>r/i?(o-(this.Be?this.Db:0))/n:(r-(this.gf?this.Db:0))/i:Math.min(o/n,r/i)}this.scale=r,this.position=new N(t.x,t.y)}},s.My=function(t,e){this.Va();var i=this.documentBounds,n=this.viewportBounds;this.position=new N(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},s.Bz=function(t){if(t instanceof ot){this.eq=t;var e=N.alloc();this.fq=this.op(t.ga(ei,e)),N.free(e)}else this.eq=null,this.fq=fp};function pm(t,e,i,n,r,o){var l=N.allocAt(t.pa.x,t.pa.y),h=l.x,a=l.y;if(t.eq!==null){var f=N.alloc();f=t.eq.ga(ei,f),h=f.x-t.fq.x/t.scale,a=f.y-t.fq.y/t.scale,r=We,N.free(f)}(o||t.scrollMode===dl)&&(r.sb()&&(i>e.width&&(h=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(a=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.rj,o=i-e.width,i<e.width+r.left+r.right?(h=Math.min(h+i/2,e.right+Math.max(o,r.right)-i/2),h=Math.max(h,e.left-Math.max(o,r.left)+i/2),h-=i/2):h>e.left?h=e.left:h<e.right-i&&(h=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(a=Math.min(a+n/2,e.bottom+Math.max(i,r.bottom)-n/2),a=Math.max(a,e.top-Math.max(i,r.top)+n/2),a-=n/2):a>e.top?a=e.top:a<e.bottom-n&&(a=e.bottom-n)),l.x=isFinite(h)?h:-t.yb.left,l.y=isFinite(a)?a:-t.yb.top,t.positionComputation!==null&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),yS(t.Yd,t.pa,l),t.pa.h(l.x,l.y),Zo(t),N.free(l)}s.Ol=function(t,e){if(e===void 0&&(e=!0),e){if(t=dm(this,t,function(i){return i.part},function(i){return i.canSelect()}),t instanceof lt)return t}else if(t=dm(this,t,function(i){return i.part}),t instanceof lt)return t;return null},s.hc=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null),xi(this);for(var n=this.Wa.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&(r=r.hc(t,e,i),r!==null))return r}return null};function dm(t,e,i,n){for(i===void 0&&(i=null),n===void 0&&(n=null),xi(t),t=t.Wa.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.hc(e,i,n),r!==null))return r}return null}s.nz=function(t,e,i){return e===void 0&&(e=!0),nj(this,t,function(n){return n.part},e?function(n){return n instanceof lt&&n.canSelect()}:null,i)};function nj(t,e,i,n,r){for(i===void 0&&(i=null),n===void 0&&(n=null),r instanceof tt||r instanceof q||(r=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.ji(e,i,n,r)}return r}s.ji=function(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n instanceof tt||n instanceof q||(n=new q),xi(this);for(var r=this.Wa.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.ji(t,e,i,n)}return n},s.vx=function(t,e,i,n){return e===void 0&&(e=!1),i===void 0&&(i=!0),rj(this,t,function(r){return r instanceof lt&&(!i||r.canSelect())},e,n)},s.Cf=function(t,e,i,n,r){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),xi(this);for(var o=this.Wa.iteratorBackwards;o.next();){var l=o.value;l.visible&&l.Cf(t,e,i,n,r)}return r},s.Nu=function(t,e,i,n,r,o){var l=new q;xi(this);for(var h=this.Wa.iteratorBackwards;h.next();){var a=h.value;a.visible&&a.Nu(t,e,i,n,l,r,o)}return l};function rj(t,e,i,n,r){var o=null;for(i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.Cf(e,o,i,n,r)}return r}s.oz=function(t,e,i,n,r){return i===void 0&&(i=!0),n===void 0&&(n=!0),oj(this,t,e,function(o){return o instanceof lt&&(!n||o.canSelect())},i,r)},s.og=function(t,e,i,n,r,o){i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(o=r),r=!0),o instanceof tt||o instanceof q||(o=new q),xi(this);for(var l=this.Wa.iteratorBackwards;l.next();){var h=l.value;h.visible&&h.og(t,e,i,n,r,o)}return o};function oj(t,e,i,n,r,o){var l=null;for(n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(o=r),r=!0),o instanceof tt||o instanceof q||(o=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.og(e,i,l,n,r,o)}return o}D.prototype.acceptEvent=function(t){return du(this,t,t instanceof MouseEvent)};function du(t,e,i){var n=t.Qg;return t.Qg=t.cj,t.cj=n,n.diagram=t,n.event=e,i?af(t,e,n):(n.viewPoint=t.Qg.viewPoint,n.documentPoint=t.Qg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,e.buttons!==void 0&&(n.buttons=e.buttons),we&&e.button===0&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=gm(e,e.target),n.targetObject=null,n}function gm(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function ym(t,e,i,n,r,o){var l=t.Qg;return t.Qg=t.cj,t.cj=l,l.diagram=t,l.clickCount=1,t=l.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),l.modifiers=t,l.event=e,l.timestamp=e.timeStamp,l.button=e.button,l.buttons=e.buttons,we&&e.button===0&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=r,l.isMultiTouch=o,l}function pl(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}D.prototype.Rz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var i=du(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),pl(i,t)},D.prototype.Sz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=du(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),pl(i,t)},D.prototype.dz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=du(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(i),e.currentTool.standardMouseOver(),pl(i,t)},D.prototype.ez=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=du(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(i),pl(i,t)},D.prototype.getMouse=function(t){var e=this.ta;if(e===null)return new N(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.Aa/i.width*i.left,t=t.clientY-this.ya/i.height*i.top,this.Ab!==null?yi(new N(e,t),this.Ab):new N(e,t)};function af(t,e,i){var n=t.ta,r=t.Aa,o=t.ya,l=0,h=0;n!==null&&(n=n.getBoundingClientRect(),l=e.clientX-r/n.width*n.left,h=e.clientY-o/n.height*n.top),i.viewPoint.h(l,h),t.Ab!==null?(e=N.allocAt(l,h),t.Ab.Cd(e),i.documentPoint.assign(e),N.free(e)):i.documentPoint.h(l,h)}function IS(t,e,i){if(t.oj[0]!==null){e=t.oj[e];var n=t.ta;n!==null&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Aa/n.width*n.left,e.clientY-t.ya/n.height*n.top))}}D.prototype.Ya=function(){this.Zi||(this.Zi=!0,this.Zb(!1))};function sj(t){t.kd||xi(t),t.Va()}D.prototype.redraw=function(){this.vb||this.kd||(this.N(),this.ad())},s=D.prototype,s.Qz=function(){return this.kg},s.Zy=function(t){t===void 0&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Bc(),e.isEnabled=!1,Wo(this),this.hf=!1,this.du=new N(NaN,NaN),e.isEnabled=i,this.kd=!0;var n=this;t!==null&&U(function(){n.kd=!1,Ko(e,"Model"),t(n)},1)},s.Zb=function(t){if(t===void 0&&(t=!1),this.kg!==!0&&!(this.vb||t===!1&&this.kd)){this.kg=!0;var e=this;G.requestAnimationFrame(function(){e.kg&&e.ad()})}},s.ad=function(){(!this.fn||this.kg)&&(this.fn&&(this.fn=!1),Wo(this))};function Fp(t,e,i){!t.Ee||t.vb||t.animationManager.defaultAnimation.isAnimating||vm(t)||(e&&xi(t),i&&fr(t,!1))}function Wo(t,e){if(!t.kd&&(t.kg=!1,t.Ka!==null||t.wo.w())){t.kd=!0;var i=t.animationManager,n=t.Xn;if(!i.isAnimating&&n.length!==0){for(var r=n.s,o=r.length,l=0;l<o;l++){var h=r[l];yn(h,!1),h.v()}n.clear()}n=t.ow,0<n.count&&(n.each(function(a){a.Nv()}),n.clear()),r=n=!1,i.defaultAnimation.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.zb||cm(t),Fp(t,!1,!0),t.fe!==null&&(t.fe.visible&&!t.mq&&(Jo(t),t.mq=!0),!t.fe.visible&&t.mq&&(t.mq=!1)),xi(t),o=!1,(!t.hf||t.xh)&&(t.hf?Tm(t,!t.Jk):(t.Ea("Initial Layout"),i.isEnabled===!1&&i.Bc(),Tm(t,!1)),o=!0),t.Jk=!1,xi(t),t.ou||sj(t),Fp(t,!0,!1),l=!1,o?(i=z.alloc(),i.assign(t.viewportBounds),t.hf||(l=t.hf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,lj(t)),t.R("LayoutCompleted"),Fp(t,!0,!1),z.free(i)):i.Ok&&i.Qw&&(t.Fg!==gn?t.scale=Mh(t,t.Fg):t.yh!==gn?t.scale=Mh(t,t.yh):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),fr(t,!0)),o&&l&&t.eb("Initial Layout"),xi(t),e||t.fc(t.ib),r&&(t.skipsUndoManager=n),t.kd=!1}}function lj(t){if(t.Fg!==gn)t.scale=Mh(t,t.Fg);else if(t.yh!==gn)t.scale=Mh(t,t.yh);else{var e=t.initialScale;isFinite(e)&&0<e&&(t.scale=e)}fr(t,!0),e=t.Wa.s,t.Fd(e,e.length,t,t.viewportBounds),t.R("InitialLayoutCompleted"),t.du.assign(t.pa),Jo(t)}function xi(t){if(t.De.count!==0&&(t.kd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.De.iterator;if(i===null||t.De.count===0)break;t.De=new q,t.Nv(i,t.De)}t.nodes.each(function(n){n instanceof gt&&n.U&65536&&(n.U=n.U^65536)})}}s.Nv=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Yc()||i instanceof gt||(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)i=t.value,i instanceof gt&&i.isVisible()&&mm(this,i);for(t.reset();t.next();)i=t.value,i instanceof K&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)i=t.value,i instanceof Ct&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))};function mm(t,e){for(var i=Vt(),n=Vt(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof gt?(Qo(o)||$n(o)||Fs(o))&&mm(t,o):o instanceof K?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=i.length,r=0;r<t;r++)o=i[r],o.measure(1/0,1/0),o.arrange();for(zt(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)i=n[e],i.measure(1/0,1/0),i.arrange();zt(n)}s.Fd=function(t,e,i,n){if(this.vd||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Fd(i,n)},s.fc=function(t){if(this.Ka!==null){if(this.ta===null&&I("No canvas specified"),this.nl==="svg"){if(this.Ka!==null){var e=this.animationManager;if(!e.zb&&(!e.isAnimating||e.isTicking)){Sh(this);var i=this.Aa,n=this.ya;if(t.Gv.resize(i,n,i,n),i=this.Wa.s,n=i.length,this.Fd(i,n,this,this.viewportBounds),this.Ec||e.isAnimating){e=this.pa;var r=this.Ca,o=Math.round(e.x*r)/r,l=Math.round(e.y*r)/r,h=this.Ab;for(h.reset(),r!==1&&h.scale(r),e.x===0&&e.y===0||h.translate(-o,-l),t.ti=null,c2(t,h.m11,h.m12,h.m21,h.m22,h.dx,h.dy),this.pb!==1&&(t.globalAlpha=this.pb),Ap(this,t),e=this.Mb,this.ta.context.setTransform(e,0,0,e,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya),e=0;e<n;e++)i[e].fc(t,this);t=!1,this.Yf?Ch(this.Yf,this)&&(t=this.Vp()):t=!0,t&&(wt.prototype.Cd=wt.prototype.Eu),this.Ec=this.vd=!1}}}}else t:if(o=this.animationManager,!o.zb&&(!o.isAnimating||o.isTicking)&&(i=new Date,Sh(this),this.Ka.style.opacity!=="0")){if(n=t!==this.ib,e=this.Wa.s,r=e.length,this.Fd(e,r,this,this.viewportBounds),n)t.Uc(!0),this.vd=!0;else if(!this.Ec&&!o.isAnimating)break t;o=this.Ab,o.reset(),l=this.Mb,h=this.pa;var a=this.Ca,f=Math.round(h.x*a)/a,p=Math.round(h.y*a)/a;for(a!==1&&o.scale(a),h.x===0&&h.y===0||o.translate(-f,-p),t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.Aa,this.ya),this.pb!==1&&(t.globalAlpha=this.pb),Ap(this,t),h=0;h<r;h++)t.setTransform(l,0,0,l,0,0),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),t.xc(),e[h].fc(t,this);if(e=!1,this.Yf?Ch(this.Yf,this)&&(e=this.Vp()):e=!0,e&&(wt.prototype.Cd=wt.prototype.Eu),n?(this.ib.Uc(!0),this.vd=!0):this.Ec=this.vd=!1,e=+new Date-+i,n=Cs&&Cs.ox,i=this.zw,n||this.Yh===null){for(i[this.Tq]=e,this.Tq=(this.Tq+1)%i.length,r=e=0;r<i.length;r++)e+=i[r];this.Sq=e/i.length}if(this.pb!==1&&(t.globalAlpha=1),n)for(t.setTransform(1,0,0,1,0,0),n=0;n<i.length;n++)t.fillText(i[n].toString(),20,150+ +(20*n))}}};function Ep(t,e,i,n,r,o,l,h,a,f){if(t.Ka!==null){t.ta===null&&I("No canvas specified"),l===void 0&&(l=null),h===void 0&&(h=null),a===void 0&&(a=!1),f===void 0&&(f=!1),Sh(t),t.ib.Uc(!0),t.vd=!0,t.$i=!0;var p=t.Ca;t.Ca=r;var d=t.Wa.s,y=d.length;try{var m=new z(o.x,o.y,n.width/r,n.height/r),x=m.copy();x.Co(i),Jo(t,x),xi(t),t.Fd(d,y,t,m),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),h!==null&&h!==""&&(e.fillStyle=h,e.px(0,0,n.width,n.height));var M=t.Mb;e.scale(M,M);var k=wt.alloc();k.reset(),k.translate(i.left,i.top),k.scale(r),o.x===0&&o.y===0||k.translate(-o.x,-o.y),e.setTransform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),e.xc(),e instanceof Ki&&c2(e,k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),wt.free(k),Ap(t,e),e.globalAlpha=t.pb;var S=t.Qj("Grid");if(l){var C=new q,T=l.iterator;for(T.reset();T.next();){var L=T.value;L instanceof lt&&(f||L.layer!==S)&&(L.Gj(),C.add(L))}for(f=0;f<y;f++)qL(d[f],e,t,C,a);C.each(function(A){return A.Gj()})}else for(C=0;C<y;C++){var j=d[C];j===S?f&&j.fc(e,t,!0):j.fc(e,t,a)}t.$i=!1,t.Yf&&Ch(t.Yf,t)&&t.Vp()}finally{t.Ca=p,t.ib.Uc(!0),t.vd=!0,t.Fd(d,y,t,t.viewportBounds),Jo(t),t.ib instanceof Ki&&(t.ib.Nj.PA(),t.redraw())}}}s.Gf=function(t){return this.Rg[t]},s.$x=function(t,e){t==="minDrawingLength"&&(this.Oq=e),this.Rg[t]=e,this.redraw()},s.Wx=function(){this.Rg=new Ke,this.Rg.drawShadows=!0,this.Rg.textGreeking=!0,this.Rg.viewportOptimizations=!(we||ee),this.Rg.temporaryPixelRatio=!0,this.Rg.pictureRatioOptimization=!0,this.Oq=this.Rg.minDrawingLength=1};function Ap(t,e){t=t.Rg,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Zx(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}s.Ql=function(t){return this.on[t]},s.sA=function(t,e){this.on[t]=e},s.Vx=function(){this.on=new Ke,this.on.extraTouchArea=10,this.on.extraTouchThreshold=10,this.on.hasGestureZoom=!0},s.set=function(t){return Object.assign(this,t),this},s.Du=function(t){return this.nm(t)},s.nm=function(t){return ff(this,t),this};function ff(t,e){var i=t instanceof _,n=t instanceof D,r;for(r in e){r===""&&I("Setting properties requires non-empty property names");var o=t,l=r;if(i||n){var h=r.indexOf(".");if(0<h){var a=r.substring(0,h);i?o=t.fb(a):(o=t[a],o==null&&(o=t.toolManager[a])),yt(o)?l=r.substr(h+1):I("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+r)}}if(l[0]!=="_"&&!nh(o,l))if(n&&l==="ModelChanged"){t.Yw(e[l]);continue}else if(n&&l==="Changed"){t.Pe(e[l]);continue}else if(n&&nh(t.toolManager,l))o=t.toolManager;else if(n&&XS(t,l)){t.Bj(l,e[l]);continue}else if(t instanceof rt&&l==="Changed"){t.Pe(e[l]);continue}else I('Trying to set undefined property "'+l+'" on object: '+o.toString());o[l]=e[r],l[0]==="_"&&o instanceof ot&&o.Vw(l)}}s.ex=function(){if(this.Eh.count!==0&&!(1<this.undoManager.transactionLevel)){for(;0<this.Eh.count;){var t=this.Eh;for(this.Eh=new mt,t=t.iterator;t.next();){var e=t.key;e.Xo(t.value),e.pc()}}this.N()}},s.N=function(t){if(t===void 0)this.Ec=!0,this.Zb();else{var e=this.viewportBounds;t.w()&&e.Xc(t)&&(this.Ec=!0,this.Zb())}this.R("InvalidateDraw")},D.prototype.invalidateViewport=function(t,e){if(this.Ec!==!0)if(this.Ec=!0,this.nl==="svg")this.ad();else{var i=this.Gf("temporaryPixelRatio")===!0;if(this.Gf("viewportOptimizations")===!0&&this.scrollMode!==Am&&this.rj.hi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.y,e.y),o=Math.min(t.y+t.height,e.y+e.height);if(0<Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*n&&0<Math.max(0,o-r)*n){if(!(this.kd||(this.kg=!1,this.Ka===null||(this.kd=!0,this.documentBounds.w()||(n=z.alloc(),Cm(this,this.computeBounds(n)),z.free(n)),n=this.ta,n===null||n instanceof Or)))){var l=this.Mb;r=this.Aa*l;var h=this.ya*l,a=this.scale*l;o=Math.round(Math.round(e.x*a)-Math.round(t.x*a)),e=Math.round(Math.round(e.y*a)-Math.round(t.y*a)),a=this.jw,t=this.sy,a.width!==r&&(a.width=r),a.height!==h&&(a.height=h),t.clearRect(0,0,r,h),a=190*l;var f=70*l,p=Math.max(o,0),d=Math.max(e,0),y=Math.floor(r-p),m=Math.floor(h-d);t.drawImage(n.La,p,d,y,m,0,0,y,m),Ch(this.Yf,this)&&t.clearRect(0,0,a,f),n=Vt(),t=Vt(),m=Math.abs(o),y=Math.abs(e);var x=p===0?0:r-m;p=N.allocAt(x,0),m=N.allocAt(m+x,h),t.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y)));var M=this.Ab;if(M.reset(),M.scale(l,l),this.Ca!==1&&M.scale(this.Ca),l=this.pa,(l.x!==0||l.y!==0)&&isFinite(l.x)&&isFinite(l.y)&&M.translate(-l.x,-l.y),yi(p,M),yi(m,M),n.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))),x=d===0?0:h-y,p.h(0,x),m.h(r,y+x),t.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))),yi(p,M),yi(m,M),n.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))),Ch(this.Yf,this)&&(r=0<o?0:-o,h=0<e?0:-e,p.h(r,h),m.h(a+r,f+h),t.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))),yi(p,M),yi(m,M),n.push(new z(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y)))),N.free(p),N.free(m),Fp(this,!1,!0),this.Ka===null&&I("No div specified"),this.ta===null&&I("No canvas specified"),!this.animationManager.zb&&(r=this.ib,this.Ec)){for(Sh(this),h=this.Mb,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.Aa*h,this.ya*h),r.drawImage(this.jw.La,0<o?0:Math.round(-o),0<e?0:Math.round(-e)),o=this.pa,l=this.Ca,a=Math.round(o.x*l)/l,f=Math.round(o.y*l)/l,e=this.Ab,e.reset(),l!==1&&e.scale(l),o.x===0&&o.y===0||e.translate(-a,-f),r.save(),r.beginPath(),o=t.length,l=0;l<o;l++)a=t[l],a.width!==0&&a.height!==0&&r.rect(Math.floor(a.x),Math.floor(a.y),Math.ceil(a.width),Math.ceil(a.height));for(r.clip(),r.setTransform(h,0,0,h,0,0),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),r.xc(),e=this.Wa.s,o=e.length,this.Fd(e,o,this,this.viewportBounds),Ap(this,r),r.globalAlpha=this.pb,h=0;h<o;h++)if(l=e[h],a=n,l.visible&&l.pb!==0){f=uf(l,r),d=l.Zq,d.length=0,p=this.scale,y=z.alloc(),m=l.Pa.s,M=m.length,x=a.length;for(var k=0;k<M;k++){var S=m[k],C=kl(S,S.actualBounds);t:{for(var T=2/p,L=4/p,j=0;j<x;j++){var A=a[j];if(A.width!==0&&A.height!==0&&C.Vu(A.x-T,A.y-T,A.width+L,A.height+L)){C=!0;break t}}C=!1}C&&l.Oj(r,S,this,d,p,y,!0)}z.free(y),r.globalAlpha=f}r.restore(),r.Uc(!0),this.Yf&&Ch(this.Yf,this)&&this.Vp(),this.Ec=this.vd=!1,this.hk()}zt(n),zt(t),this.kd=!1}}else this.ad();i&&(hf(this),this.ad(),Op(this,!0))}else i?(hf(this),this.ad(),Op(this,!0)):this.ad()}};function Sh(t){t.pn!==!1&&(t.pn=!1,RS(t,t.Aa,t.ya))}function RS(t,e,i){Zo(t);var n=t.Mb;t.ta.resize(e*n,i*n,e,i)&&(t.Ec=!0,t.ib.Uc(!0))}function vm(t){var e=t.ta;if(e===null||t.wo.w())return!0;var i=t.Aa,n=t.ya,r=t.Ka,o=!1,l=t.gf?t.Db:0,h=t.Be?t.Db:0,a=r.clientWidth||i+l,f=r.clientHeight||n+h;if((a!==i+l||f!==n+h)&&(t.gf=!1,t.Be=!1,h=l=0,t.Aa=a,t.ya=f,o=t.pn=!0,Zo(t)),!t.hf)return!0;var p=t.viewportBounds;if(!t.viewportBounds.w())return!0;r=p.x;var d=p.y,y=p.width,m=p.height,x=t.ku,M=t.hu;if(t.Ee=!1,!(o||t.gf||t.Be||t.mn||t.nn))return!0;var k=t.documentBounds,S=0,C=0,T=0,L=0,j=p.width,A=p.height,Z=t.rj;t.contentAlignment.sb()?(k.width>j&&(S=Z.left,C=Z.right),k.height>A&&(T=Z.top,L=Z.bottom)):(S=Z.left,C=Z.right,T=Z.top,L=Z.bottom);var it=k.width+S+C,et=k.height+T+L;Z=t.scale;var H=it>a/Z,Y=et>f/Z;if(!(o||t.gf||t.Be||H||Y))return!0;S=k.x-S,a=p.x,C=k.right+C,f=p.right+l,T=k.y-T;var dt=p.y;k=k.bottom+L,p=p.bottom+h;var ft="1px";if(L="1px",t.scrollMode===dl&&(H||Y)&&(H&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(H=1,S+1<a&&(H=Math.max((a-S)*Z+t.Aa,H)),C>f+1&&(H=Math.max((C-f)*Z+t.Aa,H)),j+l+1<it&&(H=Math.max((it-j)*Z+t.Aa,H)),ft=H.toString()+"px"),Y&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(H=1,T+1<dt&&(H=Math.max((dt-T)*Z+t.ya,H)),k>p+1&&(H=Math.max((k-p)*Z+t.ya,H)),A+h+1<et&&(H=Math.max((et-A)*Z+t.ya,H)),L=H.toString()+"px")),H=ft!=="1px",Y=L!=="1px",H&&Y||!H&&!Y||(Y&&(f-=t.Db),H&&(p-=t.Db),it<j+l||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(l=1,S+1<a&&(l=Math.max((a-S)*Z+t.Aa,l)),C>f+1&&(l=Math.max((C-f)*Z+t.Aa,l)),j+1<it&&(l=Math.max((it-j)*Z+t.Aa,l)),ft=l.toString()+"px"),H=ft!=="1px",l=t.ya,H!==t.Be&&(l=H?t.ya-t.Db:t.ya+t.Db),et<A+h||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(h=1,T+1<dt&&(h=Math.max((dt-T)*Z+l,h)),k>p+1&&(h=Math.max((k-p)*Z+l,h)),A+1<et&&(h=Math.max((et-A)*Z+l,h)),L=h.toString()+"px"),Y=L!=="1px"),t.qr&&H===t.Be&&Y===t.gf)return i===t.Aa&&n===t.ya||t.ad(),!1;if(H!==t.Be&&(ft==="1px"?t.ya=t.ya+t.Db:t.ya=Math.max(t.ya-t.Db,1),o=!0),t.Be=H,M.style.width=ft,Y!==t.gf&&(L==="1px"?t.Aa=t.Aa+t.Db:t.Aa=Math.max(t.Aa-t.Db,1),o=!0,t.tn&&(h=N.alloc(),Y?(e.style.left=t.Db+"px",t.position=h.h(t.pa.x+t.Db/t.scale,t.pa.y)):(e.style.left="0px",t.position=h.h(t.pa.x-t.Db/t.scale,t.pa.y)),N.free(h))),o&&Zo(t),t.gf=Y,M.style.height=L,t.gu=!0,o&&(t.pn=!0),e=x.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(j+1<it?e=(t.position.x-S)*Z:S+1<a?e=x.scrollWidth-x.clientWidth:C>f+1&&(e=t.position.x*Z)),t.tn)switch(t.bu){case"negative":e=-(x.scrollWidth-e-x.clientWidth);break;case"reverse":e=x.scrollWidth-e-x.clientWidth}return x.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(A+1<et?x.scrollTop=(t.position.y-T)*Z:T+1<dt?x.scrollTop=x.scrollHeight-x.clientHeight:k>p+1&&(x.scrollTop=t.position.y*Z)),a=t.Aa,f=t.ya,x.style.width=a+(t.gf?t.Db:0)+"px",x.style.height=f+(t.Be?t.Db:0)+"px",i!==a||n!==f||t.animationManager.zb?(i=z.allocAt(r,d,y,m),t.onViewportBoundsChanged(i,t.viewportBounds,Z,o),z.free(i),!1):!0}s=D.prototype,s.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&I("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Qj(t.layerName),e===null&&(e=this.Qj("")),e===null&&I('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.oi(99999999,t,t.diagram===this);0<=i&&this.cb(Me,"parts",e,null,t,null,i),e.isTemporary||this.Ya(),t.C(1),i=t.layerChanged,i!==null&&i(t,null,e)}},s.oi=function(t){this.partManager.oi(t);var e=this;wl(t,function(i){YS(e,i)}),(t instanceof Ct||t instanceof gt&&t.placeholder!==null)&&t.v(),t.data!==null&&wl(t,function(i){Wv(e.partManager,i)}),$n(t)!==!0&&Fs(t)!==!0||this.De.add(t),ek(t,!0,this),nk(t)?(t.actualBounds.w()&&this.N(kl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(kl(t,t.actualBounds)),this.Zb()},s.oc=function(t){t.Ej(),this.partManager.oc(t);var e=this;t.data!==null&&wl(t,function(i){$v(e.partManager,i,e)}),this.De.remove(t),nk(t)?(t.actualBounds.w()&&this.N(kl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(kl(t,t.actualBounds)),this.Zb()},s.remove=function(t){xm(this,t,!0)};function xm(t,e,i){var n=e.layer;n!==null&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.Lj(),i=n.oc(-1,e,!1),0<=i&&t.cb(Ne,"parts",n,e,null,i,null),t=e.layerChanged,t!==null&&t(e,n,null))}s.Is=function(t,e){if(e===void 0&&(e=!1),Bt(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for(i=new q,i.addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},s.Kj=function(t,e,i){return i===void 0&&(i=!1),this.partManager.Kj(t,e,i)},D.prototype.moveParts=function(t,e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=Mm(this)),this.toolManager!==null){var r=new mt;if(t!==null)if(Bt(t))for(var o=0;o<t.length;o++)$o(this,r,t[o],i,n);else for(t=t.iterator;t.next();)$o(this,r,t.value,i,n);else{for(t=this.parts;t.next();)$o(this,r,t.value,i,n);for(t=this.nodes;t.next();)$o(this,r,t.value,i,n);for(t=this.links;t.next();)$o(this,r,t.value,i,n)}wm(this,r,e,n,i)}};function $o(t,e,i,n,r,o){if(!e.contains(i)&&(o===void 0&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(r===void 0&&(r=Mm(t)),i instanceof b){if(e.add(i,t.Pd(r,i,i.location)),i instanceof gt&&(i.placeholder!==null||r.dragsMembers))for(o=i.memberParts;o.next();)$o(t,e,o.value,n,r,r.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var l=o.value;if(!e.contains(l)){var h=l.fromNode,a=l.toNode;h!==null&&e.contains(h)&&a!==null&&e.contains(a)&&$o(t,e,l,n,r)}}if(r.dragsTree)for(i=i.Ou();i.next();)$o(t,e,i.value,n,r)}else if(i instanceof K)for(e.add(i,t.Pd(r,i)),i=i.labelNodes;i.next();)$o(t,e,i.value,n,r);else i instanceof Ct||e.add(i,t.Pd(r,i,i.location))}function wm(t,e,i,n,r){if(e!==null&&e.count!==0){var o=N.alloc(),l=N.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Mr)||Dp(t,e);for(var h=Vt(),a=Vt(),f=e.iterator,p=N.alloc();f.next();){var d=f.key,y=f.value;if(d.Yc()){var m=BS(t,d,e);m!==null?h.push(new o2(d,y,m)):(!r||d.canMove())&&(m=y.point,o.assign(m),t.computeMove(d,o.add(l),n,p),d.location=p,y.shifted===void 0&&(y.shifted=new N),y.shifted.assign(p.re(m)))}else f.key instanceof K&&a.push(f.sa)}for(N.free(p),r=h.length,f=0;f<r;f++)d=h[f],o.assign(d.info.point),d.Su.shifted===void 0&&(d.Su.shifted=new N),d.node.location=o.add(d.Su.shifted);for(r=N.alloc(),f=N.alloc(),d=a.length,y=0;y<d;y++){var x=a[y];if(m=x.key,m instanceof K)if(m.suspendsRouting){m.Tg=null,p=m.fromNode;var M=m.toNode;if(t.draggedLink!==null&&n.dragsLink)if(M=x.value.point,m.dragComputation===null)e.add(m,t.Pd(n,m,l)),rs(m,l.x-M.x,l.y-M.y);else{x=N.allocAt(0,0),(p=m.i(0))&&p.w()&&x.assign(p);var k=p=N.alloc().assign(x).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&(k=N.alloc(),Sm(t,m,p,k,n)),p.assign(m.dragComputation(m,p,k)).re(x),e.add(m,t.Pd(n,m,p)),rs(m,p.x-M.x,p.y-M.y),N.free(x),N.free(p),k!==p&&N.free(k)}else p!==null&&(r.assign(p.location),k=e.I(p),k!==null&&r.re(k.point)),M!==null&&(f.assign(M.location),k=e.I(M),k!==null&&f.re(k.point)),p!==null&&M!==null?r.Xa(f)?(p=x.value.point,M=o,M.assign(r),M.re(p),e.add(m,t.Pd(n,m,r)),rs(m,M.x,M.y)):(m.suspendsRouting=!1,m.bb()):(x=x.value.point,p=p!==null?r:M!==null?f:l,e.add(m,t.Pd(n,m,p)),rs(m,p.x-x.x,p.y-x.y))}else(m.fromNode===null||m.toNode===null)&&(p=x.value.point,e.add(m,t.Pd(n,m,l)),rs(m,l.x-p.x,l.y-p.y))}N.free(o),N.free(l),N.free(r),N.free(f),zt(h),zt(a),i||(xi(t),cf(t,e))}}D.prototype.computeMove=function(t,e,i,n){if(n===void 0&&(n=new N),n.assign(e),t===null)return n;var r=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&(r=N.alloc(),Sm(this,t,e,r,i)),i=t.dragComputation!==null?t.dragComputation(t,e,r):r;var l=t.minLocation,h=l.x;isNaN(h)&&(h=o?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var a=t.maxLocation,f=a.x;return isNaN(f)&&(f=o?Math.round(1e3*t.location.x)/1e3:t.location.x),a=a.y,isNaN(a)&&(a=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(h,Math.min(i.x,f)),Math.max(l,Math.min(i.y,a))),r!==e&&N.free(r),n};function Mm(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.Wm}function Sm(t,e,i,n,r){if(r===void 0&&(r=Mm(t)),n.assign(i),e!==null){var o=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var l=r.gridSnapOrigin,h=l.x;if(l=l.y,r=r.gridSnapCellSpot,o!==null){var a=o.gridCellSize;isNaN(t)&&(t=a.width),isNaN(e)&&(e=a.height),o=o.gridOrigin,isNaN(h)&&(h=o.x),isNaN(l)&&(l=o.y)}o=N.allocAt(0,0),o.yi(0,0,t,e,r),O.No(i.x,i.y,h+o.x,l+o.y,t,e,n),N.free(o)}}function Dp(t,e){if(e!==null)for(t.Mr=!0,t=e.iterator;t.next();)e=t.key,e instanceof K&&(e.suspendsRouting=!0)}function cf(t,e){if(e!==null){for(e=e.iterator;e.next();){var i=e.key;i instanceof K&&(i.suspendsRouting=!1,Av(i)&&i.bb())}t.Mr=!1}}function BS(t,e,i){return e=e.containingGroup,e!==null&&(t=BS(t,e,i),t!==null||(t=i.I(e),t!==null))?t:null}s=D.prototype,s.Pd=function(t,e,i){if(i===void 0)return new Ls(vo);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(n=!1),n?new Ls(new N(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3)):new Ls(i.copy())};function km(t,e,i){if(e.diagram!==null&&e.diagram!==t&&I("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),i===null?e.diagram!==null&&I("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&I("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&I("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Wa,i=t.count;for(var n=0;n<i;n++)t.M(n).name===e&&I("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}s.Al=function(t){km(this,t,null),t.Xe(this);var e=this.Wa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.M(i).isTemporary;)i--;return e.Gb(i+1,t),this.cc!==null&&this.cb(Me,"layers",this,null,t,null,i+1),this.N(),this.Ya(),this},s.Ww=function(t,e){km(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.cc!==null&&this.cb(Ne,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.M(o)===e){i.Gb(o,t);break}return this.cc!==null&&this.cb(Me,"layers",this,null,t,null,o),this.N(),0>n&&this.Ya(),this},s.Fy=function(t,e){km(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.cc!==null&&this.cb(Ne,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.M(o)===e){i.Gb(o+1,t);break}return this.cc!==null&&this.cb(Me,"layers",this,null,t,null,o+1),this.N(),0>n&&this.Ya(),this},s.kA=function(t){if(t.diagram!==this&&I("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Wa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Pa.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=""}this.cc!==null&&this.cb(Ne,"layers",this,t,null,i,null),this.N(),this.Ya()}}},s.Qj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},s.Yw=function(t){return this.pf===null&&(this.pf=new tt),this.pf.add(t),this.model.Pe(t),this},s.mA=function(t){this.pf!==null&&(this.pf.remove(t),this.pf.count===0&&(this.pf=null)),this.model.ik(t)},s.Pe=function(t){return this.zg===null&&(this.zg=new tt),this.zg.add(t),this},s.ik=function(t){this.zg!==null&&(this.zg.remove(t),this.zg.count===0&&(this.zg=null))},s.ds=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Tu(t),t.change!==hr&&(this.isModified=!0),this.zg!==null)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.M(n)(t)},s.cb=function(t,e,i,n,r,o,l){o===void 0&&(o=null),l===void 0&&(l=null);var h=new qt;h.diagram=this,h.change=t,h.propertyName=e,h.object=i,h.oldValue=n,h.oldParam=o,h.newValue=r,h.newParam=l,this.ds(h)},s.g=function(t,e,i,n,r){this.cb(Jt,t,this,e,i,n,r)},D.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===Jt){var r=t.object;if(Kt(r,t.propertyName,t.I(e)),r instanceof ot){var o=r.part;o!==null&&o.Vb()}this.isModified=!0}else if(n===Me){var l=t.object,h=t.newParam,a=t.newValue;if(l instanceof _)if(typeof h=="number"&&a instanceof ot){e?l.oc(h):l.Gb(h,a);var f=l.part;f!==null&&f.Vb()}else typeof h=="number"&&a instanceof ce&&(a.isRow?L2(l,h,e?void 0:a):j2(l,h,e?void 0:a));else if(l instanceof ni){var p=t.oldParam===!0;typeof h=="number"&&a instanceof lt&&(e?(a.isSelected=!1,a.isHighlighted=!1,a.Vb(),l.oc(p?h:-1,a,p)):l.oi(h,a,p))}else l instanceof D?typeof h=="number"&&a instanceof ni&&(e?this.Wa.mb(h):(a.Xe(this),this.Wa.Gb(h,a))):I("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Ne){var d=t.object,y=t.oldParam,m=t.oldValue;if(d instanceof _)typeof y=="number"&&m instanceof ot?e?d.Gb(y,m):d.oc(y):typeof y=="number"&&m instanceof ce&&(m.isRow?L2(d,y,e?m:void 0):j2(d,y,e?m:void 0));else if(d instanceof ni){var x=t.newParam===!0;typeof y=="number"&&m instanceof lt&&(e?0>d.Pa.indexOf(m)&&d.oi(y,m,x):(m.isSelected=!1,m.isHighlighted=!1,m.Vb(),d.oc(x?y:-1,m,x)))}else d instanceof D?typeof y=="number"&&m instanceof ni&&(e?(m.Xe(this),this.Wa.Gb(y,m)):this.Wa.mb(y)):I("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==hr&&I("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},D.prototype.Ea=function(t){return this.undoManager.Ea(t)},D.prototype.eb=function(t){return this.undoManager.eb(t)},D.prototype.Kf=function(){return this.undoManager.Kf()},D.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},D.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},D.prototype.rp=function(){this.partManager.rp()};function zS(t,e,i){var n=t.animationManager;if(t.vb||t.kd)t.Ca=i,Zo(t),t.N(),t.Ee=!0,n.zb&&(kp(n)||n.ce.add(n.H,"scale",e,t.Ca));else if(t.ta===null)t.Ca=i,Zo(t);else{t.vb=!0;var r=t.viewportBounds.copy(),o=t.Aa,l=t.ya,h=t.zoomPoint.x,a=t.zoomPoint.y,f=t.contentAlignment;isNaN(h)&&(f.Zc()?f.Hf(uh)?h=0:f.Hf(hh)&&(h=o-1):h=f.sb()?f.x*(o-1):o/2),isNaN(a)&&(f.Zc()?f.Hf(lh)?a=0:f.Hf(ah)&&(a=l-1):a=f.sb()?f.y*(l-1):l/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=N.allocAt(t.pa.x+h/e-h/i,t.pa.y+a/e-a/i),t.position=o,N.free(o),t.Ca=i,Zo(t),t.vb=!1,t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),fr(t,!1),n.zb&&(kp(n)||n.ce.add(n.H,"scale",e,t.Ca))}}D.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.D(e)){n===void 0&&(n=!1),n||(this.Ee=!0),this.vd=!0;var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==gn||t.width===e.width&&t.height===e.height||r.C(),r=this.currentTool,this.Vk===!0&&r instanceof bt&&(this.lastInput.documentPoint=this.Ps(this.lastInput.viewPoint),JM(r,this)),this.vb||this.invalidateViewport(t,e),Jo(this),this.qd.scale=i,this.qd.position.x=t.x,this.qd.position.y=t.y,this.qd.bounds.assign(t),this.qd.bx.width=Math.round(t.width*i),this.qd.bx.height=Math.round(t.height*i),this.qd.Ox.width=this.Aa,this.qd.Ox.height=this.ya,this.qd.Ix=n,this.R("ViewportBoundsChanged",this.qd,t),this.isVirtualized&&this.links.each(function(o){o.isAvoiding&&o.actualBounds.Xc(e)&&o.bb()})}};function Jo(t,e){var i=t.fe;if(i!==null&&i.visible){for(var n=ct.alloc(),r=1,o=1,l=i.O.s,h=l.length,a=0;a<h;a++){var f=l[a],p=Math.abs(f.interval);2>p||(ev(f.figure)?o=o*p/O.wx(o,p):r=r*p/O.wx(r,p))}if(l=i.gridCellSize,n.h(o*l.width,r*l.height),e!==void 0)r=e.width,o=e.height,t=e.x,l=e.y;else{if(e=z.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.w()){z.free(e);return}r=e.width,o=e.height,t=e.x,l=e.y,z.free(e)}i.width=r+2*n.width,i.height=o+2*n.height,e=N.alloc(),O.No(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),ct.free(n),i.part.location=e,N.free(e)}}D.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.R("ChangingSelection",e);for(var i=e.Fa(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ka(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},D.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},D.prototype.rA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),Bt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof lt||I("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof lt||I("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},D.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Fa(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ka(),t.clear(),t.freeze()}},s=D.prototype,s.Kz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},s.Lz=function(t){t=new q().addAll(t);for(var e=this.highlighteds.copy().hp(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof lt||I("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},s.scroll=function(t,e,i){i===void 0&&(i=1);var n=e==="up"||e==="down",r=0,o=N.alloc();if(t==="pixel")r=i;else if(t==="line")r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=n?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,i=this.viewportBounds,e==="up"?this.position=o.h(i.x,r.y):e==="left"?this.position=o.h(r.x,i.y):e==="down"?this.position=o.h(i.x,r.bottom-i.height):e==="right"&&(this.position=o.h(r.right-i.width,i.y)),N.free(o);return}I("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,i=this.position,e==="up"?this.position=o.h(i.x,i.y-r):e==="down"?this.position=o.h(i.x,i.y+r):e==="left"?this.position=o.h(i.x-r,i.y):e==="right"?this.position=o.h(i.x+r,i.y):I("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),N.free(o)},s.tv=function(t){var e=this.viewportBounds;e.Re(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},s.es=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},s.op=function(t){var e=this.Ab;e.reset(),this.Ca!==1&&e.scale(this.Ca);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.Ab)},s.zA=function(t){var e=this.Ab,i=t.x,n=t.y,r=i+t.width,o=n+t.height,l=e.m11,h=e.m12,a=e.m21,f=e.m22,p=e.dx,d=e.dy,y=i*l+n*a+p;e=i*h+n*f+d;var m=r*l+n*a+p;return t=r*h+n*f+d,n=i*l+o*a+p,i=i*h+o*f+d,l=r*l+o*a+p,r=r*h+o*f+d,o=Math.min(y,m),y=Math.max(y,m),m=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),y=Math.max(y,n),m=Math.min(m,i),e=Math.max(e,i),o=Math.min(o,l),y=Math.max(y,l),m=Math.min(m,r),e=Math.max(e,r),new z(o,m,y-o,e-m)},s.Ps=function(t){var e=this.Ab;e.reset(),this.Ca!==1&&e.scale(this.Ca);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),yi(t.copy(),this.Ab)};function VS(t){var e=t.isModified;t.Tw!==e&&(t.Tw=e,t.R("Modified"))}function uj(t){return t=Rp.get(t),t!==null?new t:new Dt}D.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===hr&&n[0]==="S")if(n==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(a){return a.diagram=r}),t.mouseMoveTools.each(function(a){return a.diagram=r}),t.mouseUpTools.each(function(a){return a.diagram=r}),this.kd||this.hf||(this.Jk=!0,this.fn&&(this.kg=!0))}else n==="StartingUndo"||n==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Bc(),this.R("ChangingSelection",this.selection)):n==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Bc());else if(this.aa){this.aa=!1;try{if(t.modelChange===""&&i===hr){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.R("ChangedSelection",this.selection),xi(this));var o=this.animationManager;n==="RolledBackTransaction"&&o.Bc(),this.ex(),this.Jk=!0,this.ad(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||lm(o),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.Ce=Math.min(this.Ce,this.undoManager.historyIndex-1)),n!=="CommittedTransaction"&&n!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(VS(this),this.As.clear(),ZL(this.animationManager)),!this.Rt&&l&&this.lastInput.targetDiagram){this.Rt=!0;var h=this;U(function(){h.currentTool.standardMouseOver(),h.Rt=!1},10)}}}finally{this.aa=!0}}}};function YS(t,e){e=e.O.s;for(var i=e.length,n=0;n<i;n++)Pm(t,e[n])}function Pm(t,e){if(e instanceof Ei){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){i.Bg instanceof q&&i.Bg.add(t);var n=e.Eg;if(n!==null&&n.sq===!0&&e.diagram!==null&&e.diagram.Xn.add(e),i.hn)if(i=i.getAttribute("src")||"",n=t.Og.I(i),n===null)n=[],n.push(e),t.Og.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function Nm(t,e){if(e instanceof Ei){var i=e.element;if(i!==null&&i instanceof HTMLImageElement&&i.hn){var n=i.getAttribute("src")||"",r=t.Og.I(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&(t.Og.remove(n),i.Fq&&i.removeEventListener("load",i.Fq),i.Yp&&i.removeEventListener("error",i.Yp),delete i.Fq,delete i.Yp,i.Bg instanceof q&&i.Bg.remove(t),Uh(n));break}}}}}D.prototype.Wd=function(){this.partManager.Wd()},D.prototype.Aj=function(t,e){this.Yd.Aj(t,e)},D.prototype.Cj=function(t,e){this.Yd.Cj(t,e)},D.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},D.prototype.Ub=function(t){return this.partManager.Ub(t)},D.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},s=D.prototype,s.Kc=function(t){return this.partManager.Kc(t)},s.ii=function(t){return this.partManager.ii(t)},s.Jc=function(t){return this.partManager.Jc(t)},s.ms=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ms.apply(this.partManager,e instanceof Array?e:g(c(e)))},s.ls=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ls.apply(this.partManager,e instanceof Array?e:g(c(e)))};function Zo(t){var e=t.pa,i=t.Ca;t.Rw.h(e.x,e.y,Math.max(t.Aa,0)/i,Math.max(t.ya,0)/i),t.vd=!0}function Cm(t,e){t.Zi=!1;var i=t.Sp;i.D(e)||(i=i.copy(),t.Sp.assign(e),fr(t,!1),t.R("DocumentBoundsChanged",void 0,i),t.Ee=!0,t.N())}s.Va=function(){if(this.Zi){var t=z.alloc();Cm(this,this.computeBounds(t)),z.free(t)}},s.uz=function(){for(var t=new q,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)i=e.value,i.isTopLevel&&t.add(i);return t.iterator},s.sz=function(){return this.ai.iterator},s.Vz=function(t){xi(this),t&&Ip(this,!0),this.kd?Tm(this,!1):(this.Jk=!0,Wo(this))};function Ip(t,e){for(var i=t.ai.iterator;i.next();)US(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function US(t,e,i){if(e!==null){for(var n=e.gl.iterator;n.next();)US(t,n.value,i);e.layout!==null&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function Tm(t,e){if(t.xh&&!t.lt){var i=t.aa;t.aa=!0;var n=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{n===0&&(t.undoManager.isInternalTransaction=!0,t.Ea("Layout")),1>=n&&!o.defaultAnimation.isAnimating&&!o.zb&&(e||Ko(o,"Layout")),t.xh=!1;for(var l=t.ai.iterator;l.next();)GS(t,l.value,e,n);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||n===0?(r.doLayout(t),xi(t),r.isValidLayout=!0):t.xh=!0)}finally{e=t.undoManager.isInternalTransaction,n===0&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||n!==0&&n!==1||lm(o),t.aa=i}}}function GS(t,e,i,n){if(e!==null){for(var r=e.gl.iterator;r.next();)GS(t,r.value,i,n);r=e.layout,r===null||r.isValidLayout||(!i||r.isRealtime||n===0?(e.rh=!e.location.w(),r.doLayout(e),e.C(32),mm(t,e),r.isValidLayout=!0):t.xh=!0)}}s.Az=function(){for(var t=new tt,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&i.kh()===null&&t.add(i)}return t.iterator};function hj(t){function e(r){var o=r.toLowerCase(),l=new tt;i.add(r,l),i.add(o,l),n.add(r,r),n.add(o,r)}var i=new mt,n=new mt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.iw=i,t.hw=n}function XS(t,e){var i=t.hw.I(e);return i!==null?i:t.hw.I(e.toLowerCase())}function Lm(t,e){var i=t.iw.I(e);if(i!==null||(i=t.iw.I(e.toLowerCase()),i!==null))return i;I("Unknown DiagramEvent name: "+e)}s.Bj=function(t,e){return t=Lm(this,t),t!==null&&t.add(e),this},s.am=function(t,e){t=Lm(this,t),t!==null&&t.remove(e)},s.R=function(t,e,i){var n=Lm(this,t),r=new au;if(r.diagram=this,t=XS(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),i!==void 0&&(r.parameter=i),e=n.length,e===1)n.M(0)(r);else if(e!==0)for(n=n.Fa(),i=0;i<e;i++)(0,n[i])(r)};function _S(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.Mr||e.isComplexRoutingRealtime:!0}s.Yj=function(t,e){return jm(this,!1,null,e||null).Yj(t.x,t.y,t.width,t.height)},D.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Zi?DS(this,t):t.assign(this.documentBounds)};function jm(t,e,i,n){var r=t.Xh;if(r===null&&(t.Xh=r=new Uf(t.avoidanceCellSize)),r.vs||r.group!==i||r.ay!==n){if(r.Jx=Math.max(r.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),r.Kx=Math.max(r.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),i!==null&&(i=HS(t,i)),i===null){e=z.alloc(),t.computeOccupiedArea(e),e.Ac(100,100),r.initialize(e);for(var o=t.nodes;o.next();){var l=o.value,h=l.layer;h!==null&&h.visible&&!h.isTemporary&&Om(t,l,n,e)}z.free(e)}else{for(0<i.memberParts.count&&(e=t.computePartsBounds(i.memberParts,!1),e.Ac(20,20),r.initialize(e)),e=z.alloc(),o=i.memberParts;o.next();)l=o.value,l instanceof b&&Om(t,l,n,e);z.free(e)}r.group=i,r.ay=n,r.vs=!1}else e&&Sk(r);return r}function HS(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?HS(t,e.containingGroup):null}function Om(t,e,i,n){if(e!==i&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(n),t=t.Xh;var r=e.x,o=e.y;if(Wh(t,r,o))for(i=(o-t.Od)/t.rc|0,n=Math.min((r+e.width-t.Nd)/t.qc|0,t.di),e=Math.min((o+e.height-t.Od)/t.rc|0,t.ei),r=(r-t.Nd)/t.qc|0;r<=n;r++)if(o=t.ac[r],o.fill)o.fill(ss,i,e+1);else for(var l=i;l<=e;l++)o[l]=ss}else if(e instanceof gt)for(e=e.memberParts;e.next();)r=e.value,r instanceof b&&Om(t,r,i,n)}}function Fm(t,e){t.Xh===null||t.Xh.vs||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Xh.vs=!0)}D.prototype.gs=function(t){this.wp.assign(t),this.computeAutoScrollPosition(this.wp).Xa(this.position)?this.ug():KS(this)};function KS(t){t.vk===-1&&(t.vk=U(function(){if(t.vk!==-1&&(t.ug(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.wp);e.Xa(t.position)||(t.position=e,t.lastInput.documentPoint=t.Ps(t.wp),t.doMouseMove(),t.Zi=!0,e=z.alloc(),t.computeBounds(e),e.dd(t.documentBounds),Cm(t,e),z.free(e),t.Ec=!0,t.ad(),KS(t))}},t.vp))}D.prototype.ug=function(){this.vk!==-1&&(G.clearTimeout(this.vk),this.vk=-1)},D.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.xp;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=z.allocAt(0,0,n.width*r,n.height*r);var o=N.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);l|=0,o.x-=l,t.x<n.x+i.left/2&&(o.x-=l),t.x<n.x+i.left/4&&(o.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),l|=0,o.x+=l,t.x>n.x+n.width-i.right/2&&(o.x+=l),t.x>n.x+n.width-i.right/4&&(o.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y-=l,t.y<n.y+i.top/2&&(o.y-=l),t.y<n.y+i.top/4&&(o.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y+=l,t.y>n.y+n.height-i.bottom/2&&(o.y+=l),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*l)),o.Xa(vo)||(e=new N(e.x+o.x/r,e.y+o.y/r)),z.free(n),N.free(o),e},s=D.prototype,s.Cs=function(){return null},s.av=function(){return null},s.bs=function(t,e){this.pj.add(t,e)},s.Fu=function(t){(this.Pw=t)||this.nodes.each(function(e){e instanceof gt&&(e.$p=null)})};function WS(t,e,i){function n(){var p=+new Date;for(o=!0,l.reset();l.next();)if(!l.value[0].al){o=!1;break}o||p-f>a?e(i,r,h):G.requestAnimationFrame(n)}for(var r=i.callback,o=!0,l=t.Og.iterator;l.next();)if(!l.value[0].al){o=!1;break}if(typeof r!="function"||o)return e(i,r,t);var h=t,a=i.callbackTimeout||300,f=+new Date;return G.requestAnimationFrame(function(){n()}),null}s.Xz=function(t){return Kn?(t===void 0&&(t={}),t.returnType="Image",this.Lx(t)):null},s.Lx=function(t){return t===void 0&&(t={}),WS(this,this.Yz,t)},s.Yz=function(t,e,i){var n=$S(i,t,"canvas",null);if(n===null)return null;i=n.Z.canvas;var r=null;if(i!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case Nh+"data":r=n.getImageData(0,0,i.width,i.height);break;case Nh:n=(t.document||document).createElement("img"),n.src=i.toDataURL(t.type,t.details),r=n;break;case"blob":return typeof e!="function"&&I('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof i.toBlob=="function"?(i.toBlob(e,t.type,t.details),"toBlob"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function $S(t,e,i,n){if(t.animationManager.Bc(),t.ad(),t.ta===null)return null;typeof e!="object"&&I("properties argument must be an Object.");var r=e.size||null,o=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(o="NaN");var l=e.maxSize;e.maxSize===void 0&&(l=i==="SVG"?new ct(1/0,1/0):new ct(2e3,2e3));var h=e.position||null,a=e.parts||null,f=e.padding===void 0?1:e.padding,p=e.background||null,d=e.omitTemporary;d===void 0&&(d=!0);var y=e.document||document,m=e.elementFinished||null,x=e.showTemporary;x===void 0&&(x=!d),e=e.showGrid,e===void 0&&(e=x),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof f=="number"?f=new At(f):f instanceof At||I("MakeImage padding must be a Margin or a number."),f.left=Math.max(f.left,0),f.right=Math.max(f.right,0),f.top=Math.max(f.top,0),f.bottom=Math.max(f.bottom,0),t.ib.Uc(!0),d=new Fn(null,y,void 0,!0);var M=d.context;if(!(r||o||a||h))return d.width=t.Aa+Math.ceil(f.left+f.right),d.height=t.ya+Math.ceil(f.top+f.bottom),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=y,n.hs=m,Ep(t,n.context,f,new ct(d.width,d.height),t.Ca,t.pa,a,p,x,e),n.context):(t.Xm=!1,Ep(t,M,f,new ct(d.width,d.height),t.Ca,t.pa,a,p,x,e),t.Xm=!0,d.context);var k=t.Pp,S=t.documentBounds.copy();if(S.Fv(t.yb),x)for(var C=t.Wa.s,T=C.length,L=0;L<T;L++){var j=C[L];if(j.visible&&j.isTemporary){j=j.Pa.s;for(var A=j.length,Z=0;Z<A;Z++){var it=j[Z];it.isInDocumentBounds&&it.isVisible()&&(it=it.actualBounds,it.w()&&S.dd(it))}}}if(C=new N(S.x,S.y),a!==null){for(T=new z(0,0,0,0),L=!0,j=a.iterator,j.reset();j.next();)A=j.value,A instanceof lt&&(Z=A.layer,Z!==null&&!Z.visible||Z!==null&&!x&&Z.isTemporary||!A.isVisible()||(A=A.actualBounds,A.w()&&(L?(L=!1,T.assign(A)):T.dd(A))));S.width=T.width,S.height=T.height,C.x=T.x,C.y=T.y}return h!==null&&h.w()&&(C=h,o||(o=k)),T=h=0,f!==null&&(h=f.left+f.right,T=f.top+f.bottom),L=j=0,r!==null&&(j=r.width,L=r.height,isFinite(j)&&(j=Math.max(0,j-h)),isFinite(L)&&(L=Math.max(0,L-T))),r!==null&&o!==null?(o==="NaN"&&(o=k),r.w()?(r=j,S=L):isNaN(L)?(r=j,S=S.height*o):(r=S.width*o,S=L)):r!==null?r.w()?(o=Math.min(j/S.width,L/S.height),r=j,S=L):isNaN(L)?(o=j/S.width,r=j,S=S.height*o):(o=L/S.height,r=S.width*o,S=L):o!==null?o==="NaN"&&l.w()?(o=Math.min((l.width-h)/S.width,(l.height-T)/S.height),o>k?(o=k,r=S.width,S=S.height):(r=l.width,S=l.height)):(r=S.width*o,S=S.height*o):(o=k,r=S.width,S=S.height),f!==null?(r+=h,S+=T):f=new At(0),l!==null&&(k=l.width,l=l.height,isNaN(k)&&(k=2e3),isNaN(l)&&(l=2e3),isFinite(k)&&(r=Math.min(r,k)),isFinite(l)&&(S=Math.min(S,l))),d.width=Math.ceil(r),d.height=Math.ceil(S),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=y,n.hs=m,Ep(t,n.context,f,new ct(Math.ceil(r),Math.ceil(S)),o,C,a,p,x,e),n.context):(t.Xm=!1,Ep(t,M,f,new ct(Math.ceil(r),Math.ceil(S)),o,C,a,p,x,e),t.Xm=!0,d.context)}B.Object.defineProperties(D.prototype,{renderer:{get:function(){return this.nl},set:function(t){this instanceof Zr||(t===""&&(t="default"),t=t.toLowerCase(),t!==this.nl&&(this.nl=t,t==="default"||t==="canvas"?(t=this.pj.get("svg"),t!==null&&t.La.remove(),this.ta&&(this.ib=this.ta.context)):t==="svg"?(this.pj.contains("svg")?t=this.pj.get("svg"):(t=new Or(this,G.document),this.bs("svg",t)),this.div!==null&&this.div.appendChild(t.La),this.ib=t.context,this.ta&&(this.ta.context.setTransform(this.Mb,0,0,this.Mb,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya))):t!=="debug"||this.pj.contains("SVG")||(t=new Or(this,G.document),this.bs("SVG",t),t.La.style.backgroundColor="whitesmoke",this.div!==null&&this.div.after(t.La)),this.hk()))}},div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.ta!==null&&(e=this.ta.La,this.removeEventListener(e,"pointermove",this.dk,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.fk,!1),this.removeEventListener(e,"pointerout",this.ek,!1),this.removeEventListener(e,"pointercancel",this.ck,!1),this.ta.nx()),this.ol&&(this.ol.disconnect(),this.ol=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.ta=null,this.removeEventListener(G,"resize",this.Ov,!1),this.removeEventListener(G,"wheel",this.$j,!0),wh===this&&(wh=null)):this.ui===null&&(this.hf=!1),this.Ka=null,t!==null&&((e=t.H)&&(e.div=null),fm(this,t),this.hk())}}},$w:{get:function(){return this.Sq}},pi:{get:function(){return this.hf}},draggedLink:{get:function(){return this.nt},set:function(t){this.nt!==t&&(this.nt=t,t!==null&&(this.Vt=t.fromPort,this.Wt=t.toPort))}},Px:{get:function(){return this.Vt},set:function(t){this.Vt=t}},Qx:{get:function(){return this.Wt},set:function(t){this.Wt=t}},animationManager:{get:function(){return this.Yd}},undoManager:{get:function(){return this.cc.undoManager}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t,this.cc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.lt},set:function(t){this.lt=t}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",D,"opacity"),this.pb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.wu},set:function(t){var e=this.wu;e!==t&&(this.wu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Wa.iterator}},isModelReadOnly:{get:function(){var t=this.cc;return t===null?!1:t.isReadOnly},set:function(t){var e=this.cc;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Jd},set:function(t){var e=this.Jd;e!==t&&(this.Jd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(this.Us=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(this.Ys=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.Ee=!0,this.N(),this.g("hasVerticalScrollbar",e,t),fr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.mn},set:function(t){var e=this.mn;e!==t&&(this.mn=t,this.Ee=!0,this.N(),this.g("hasHorizontalScrollbar",e,t),fr(this,!1))}},allowHorizontalScroll:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e!==t&&(this.Xs=t,this.g("allowHorizontalScroll",e,t),fr(this,!1))}},allowVerticalScroll:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("allowVerticalScroll",e,t),fr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.iu},set:function(t){var e=this.iu;e!==t&&(0>t&&at(t,">= 0",D,"scrollHorizontalLineChange"),this.iu=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.mu},set:function(t){var e=this.mu;e!==t&&(0>t&&at(t,">= 0",D,"scrollVerticalLineChange"),this.mu=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.cj},set:function(t){this.cj=t}},previousInput:{get:function(){return this.Qg},set:function(t){this.Qg=t}},firstInput:{get:function(){return this.bq},set:function(t){this.bq=t}},currentCursor:{get:function(){return this.it},set:function(t){if(t===""&&(t=this.Op),this.it!==t){var e=this.ta,i=this.Ka;if(e!==null&&i!==null){this.it=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Op},set:function(t){t===""&&(t="auto");var e=this.Op;e!==t&&(this.Op=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.zh},set:function(t){var e=this.zh;e!==t&&(this.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Qt},set:function(t){var e=this.Qt;e!==t&&(this.Qt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t,t.Xe(this))}},toolManager:{get:function(){return this.te},set:function(t){this.te!==t&&(this.te=t,t.diagram=this)}},defaultTool:{get:function(){return this.ob},set:function(t){var e=this.ob;e!==t&&(this.ob=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hb},set:function(t){var e=this.hb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.hb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Hw}},maxSelectionCount:{get:function(){return this.Nt},set:function(t){var e=this.Nt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Nt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.R("ChangingSelection",this.selection),e=this.selection.Fa();for(var i=0;i<t;i++)e[i].isSelected=!1;this.R("ChangedSelection",this.selection)}}else at(t,">= 0",D,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(this.St=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.wt},set:function(t){var e=this.wt;e!==t&&(this.wt=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Kt},set:function(t){var e=this.Kt;e!==t&&(this.Kt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.nw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.rn&&this.Ce!==t.historyIndex:this.rn},set:function(t){if(this.rn!==t){this.rn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Ce=e.historyIndex),t||VS(this)}}},model:{get:function(){return this.cc},set:function(t){var e=this.cc;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&I("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Bc(!0);var i=OS(this,!0);this.hf=!1,this.fn=!0,this.Ce=-2,this.kg=!1;var n=this.vb;this.vb=!0,Ko(this.animationManager,"Model"),e&&(this.pf!==null&&this.pf.each(function(o){return e.ik(o)}),e.ik(this.Nc)),this.cc=t,this.partManager=uj(this.cc.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.Pe(this.Hb),this.partManager.addAllModeledParts(),t.ik(this.Hb),t.Pe(this.Nc),this.pf!==null&&this.pf.each(function(o){return t.Pe(o)}),this.vb=n,this.Ya(),this.vb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},aa:{get:function(){return this.rw},set:function(t){this.rw=t}},As:{get:function(){return this.vy}},skipsModelSourceBindings:{get:function(){return this.Iw},set:function(t){this.Iw=t}},Ns:{get:function(){return this.ou},set:function(t){this.ou=t}},nodeTemplate:{get:function(){return this.Lg.I("")},set:function(t){var e=this.Lg.I("");e!==t&&(this.Lg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},nodeTemplateMap:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplate:{get:function(){return this.Yi.I("")},set:function(t){var e=this.Yi.I("");e!==t&&(this.Yi.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplateMap:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplate:{get:function(){return this.Kh.I("")},set:function(t){var e=this.Kh.I("");e!==t&&(this.Kh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplateMap:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},isMouseCaptured:{get:function(){return this.qw},set:function(t){var e=this.ta;e!==null&&(e=e.La,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.dk,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.fk,!1),this.removeEventListener(e,"pointerout",this.ek,!1),this.removeEventListener(e,"pointercancel",this.ck,!1),this.addEventListener(G,"pointermove",this.dk,!0),this.addEventListener(G,"pointerdown",this.ui,!0),this.addEventListener(G,"pointerup",this.fk,!0),this.addEventListener(G,"pointerout",this.ek,!0),this.addEventListener(G,"pointercancel",this.ck,!0),this.removeEventListener(e,"wheel",this.$j,!1),this.addEventListener(G,"wheel",this.$j,!0),this.addEventListener(G,"selectstart",this.preventDefault,!1)):(this.removeEventListener(G,"pointermove",this.dk,!0),this.removeEventListener(G,"pointerdown",this.ui,!0),this.removeEventListener(G,"pointerup",this.fk,!0),this.removeEventListener(G,"pointerout",this.ek,!0),this.removeEventListener(G,"pointercancel",this.ck,!0),this.addEventListener(e,"pointermove",this.dk,!1),this.addEventListener(e,"pointerdown",this.ui,!1),this.addEventListener(e,"pointerup",this.fk,!1),this.addEventListener(e,"pointerout",this.ek,!1),this.addEventListener(e,"pointercancel",this.ck,!1),this.removeEventListener(G,"wheel",this.$j,!0),this.removeEventListener(G,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.$j,!1)),this.qw=t))}},position:{get:function(){return this.pa},set:function(t){var e=N.alloc().assign(this.pa);if(!e.D(t)){var i=this.viewportBounds.copy();this.pa.assign(t),yS(this.animationManager,e,this.pa),this.vb||this.ta===null&&!this.wo.w()?Zo(this):(this.vb=!0,t=this.scale,pm(this,this.Sp,this.Aa/t,this.ya/t,this.zk,!1),this.vb=!1),this.vb||this.onViewportBoundsChanged(i,this.viewportBounds,this.Ca,!1)}N.free(e)}},initialPosition:{get:function(){return this.zt},set:function(t){this.zt.D(t)||(this.zt=t.J())}},initialScale:{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t)}},grid:{get:function(){return this.fe===null&&(this.fe=AS(this)),this.fe},set:function(t){var e=this.fe;if(e!==t){e===null&&(e=this.fe=AS(this)),t.type!==_.Grid&&I("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;i!==null&&i.remove(e),this.fe=t,t.name="GRID",i!==null&&i.add(t),Jo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.Rw}},viewSize:{get:function(){return this.wo},set:function(t){var e=this.viewSize;e.D(t)||(this.wo=t=t.J(),this.ya=this.Aa=0,t.w()?(this.Aa=t.width,this.ya=t.height):this.Ka!==null&&(this.Aa=this.Ka.clientWidth||1,this.ya=this.Ka.clientHeight||1),Zo(this),this.Ya(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.ut},set:function(t){var e=this.ut;e.D(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||I("fixedBounds width/height must not be Infinity"),this.ut=t=t.J(),this.Ya(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.rj},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.rj;e.D(t)||(this.rj=t=t.J(),this.g("scrollMargin",e,t),this.hk())}},scrollMode:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,t===dl&&fr(this,!1),this.g("scrollMode",e,t),this.Ee=!0,this.N())}},scrollsPageOnFocus:{get:function(){return this.nu},set:function(t){var e=this.nu;e!==t&&(this.nu=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Zt},set:function(t){var e=this.Zt;e!==t&&(this.Zt=t,fr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.fu},set:function(t){var e=this.fu;e!==t&&(this.fu=t,zS(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Sp}},isVirtualized:{get:function(){return this.It},set:function(t){var e=this.It;e!==t&&(this.It=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&zS(this,e,t)}},defaultScale:{get:function(){return this.Pp},set:function(t){this.Pp=t}},autoScale:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("autoScale",e,t),t!==gn&&fr(this,!1))}},initialAutoScale:{get:function(){return this.Fg},set:function(t){var e=this.Fg;e!==t&&(this.Fg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Bt},set:function(t){var e=this.Bt;e!==t&&(t.sb()||I("initialViewportSpot must be a specific Spot: "+t),this.Bt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.yt},set:function(t){var e=this.yt;e!==t&&(t.sb()||I("initialViewportSpot must be a specific Spot: "+t),this.yt=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0<t?(this.Ot=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):at(t,"> 0",D,"minScale"))}},maxScale:{get:function(){return this.Mt},set:function(t){var e=this.Mt;e!==t&&(0<t?(this.Mt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):at(t,"> 0",D,"maxScale"))}},zoomPoint:{get:function(){return this.zu},set:function(t){this.zu.D(t)||(this.zu=t=t.J())}},contentAlignment:{get:function(){return this.zk},set:function(t){var e=this.zk;e.D(t)||(this.zk=t=t.J(),this.g("contentAlignment",e,t),fr(this,!1))}},initialContentAlignment:{get:function(){return this.pq},set:function(t){var e=this.pq;e.D(t)||(this.pq=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.yb},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.yb;e.D(t)||(this.yb=t=t.J(),this.Ya(),this.g("padding",e,t))}},partManager:{get:function(){return this.Oc},set:function(t){var e=this.Oc;e!==t&&(t.diagram!==null&&I("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Xe(null),this.Oc=t,t.Xe(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Rc},set:function(t){var e=this.Rc;e!==t&&(this.Rc=t,t.diagram=this,t.group=null,this.xh=!0,this.g("layout",e,t),this.Zb())}},isTreePathToChildren:{get:function(){return this.Ht},set:function(t){var e=this.Ht;if(e!==t&&(this.Ht=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Ff(t.value)}},treeCollapsePolicy:{get:function(){return this.uu},set:function(t){var e=this.uu;e!==t&&(t!==gu&&t!==Dm&&t!==Im&&I("Unknown Diagram.treeCollapsePolicy: "+t),this.uu=t,this.g("treeCollapsePolicy",e,t))}},Ue:{get:function(){return this.pw},set:function(t){this.pw=t}},avoidanceCellSize:{get:function(){return this.aw},set:function(t){this.Xh=null,this.aw=new ct(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.bw},set:function(t){this.bw=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.xp},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.xp;e.D(t)||(this.xp=t=t.J(),this.Ya(),this.g("autoScrollRegion",e,t))}}}),B.Object.defineProperties(D,{licenseKey:{get:function(){return Rm.ic()},set:function(t){Rm.add(t.replace(/\s/g,""))}},version:{get:function(){return aj}}}),D.prototype.makeImageData=D.prototype.Lx,D.prototype.makeImage=D.prototype.Xz,D.prototype.cacheGroupExternalLinks=D.prototype.Fu,D.prototype.addRenderer=D.prototype.bs,D.prototype.makeSVG=D.prototype.av,D.prototype.makeSvg=D.prototype.Cs,D.prototype.stopAutoScroll=D.prototype.ug,D.prototype.doAutoScroll=D.prototype.gs,D.prototype.isUnoccupied=D.prototype.Yj,D.prototype.raiseDiagramEvent=D.prototype.R,D.prototype.removeDiagramListener=D.prototype.am,D.prototype.addDiagramListener=D.prototype.Bj,D.prototype.findTreeRoots=D.prototype.Az,D.prototype.layoutDiagram=D.prototype.Vz,D.prototype.findTopLevelGroups=D.prototype.sz,D.prototype.findTopLevelNodesAndLinks=D.prototype.uz,D.prototype.ensureBounds=D.prototype.Va,D.prototype.findLinksByExample=D.prototype.ls,D.prototype.findNodesByExample=D.prototype.ms,D.prototype.findLinkForData=D.prototype.Jc,D.prototype.findNodeForData=D.prototype.ii,D.prototype.findPartForData=D.prototype.Kc,D.prototype.findLinkForKey=D.prototype.findLinkForKey,D.prototype.findNodeForKey=D.prototype.Ub,D.prototype.findPartForKey=D.prototype.findPartForKey,D.prototype.rebuildParts=D.prototype.Wd,D.prototype.transformViewToDoc=D.prototype.Ps,D.prototype.transformRectDocToView=D.prototype.zA,D.prototype.transformDocToView=D.prototype.op,D.prototype.centerRect=D.prototype.es,D.prototype.scrollToRect=D.prototype.tv,D.prototype.scroll=D.prototype.scroll,D.prototype.highlightCollection=D.prototype.Lz,D.prototype.highlight=D.prototype.Kz,D.prototype.selectCollection=D.prototype.rA,D.prototype.select=D.prototype.select,D.prototype.updateAllRelationshipsFromData=D.prototype.rp,D.prototype.updateAllTargetBindings=D.prototype.updateAllTargetBindings,D.prototype.commit=D.prototype.commit,D.prototype.rollbackTransaction=D.prototype.Kf,D.prototype.commitTransaction=D.prototype.eb,D.prototype.startTransaction=D.prototype.Ea,D.prototype.raiseChanged=D.prototype.g,D.prototype.raiseChangedEvent=D.prototype.cb,D.prototype.removeChangedListener=D.prototype.ik,D.prototype.addChangedListener=D.prototype.Pe,D.prototype.removeModelChangedListener=D.prototype.mA,D.prototype.addModelChangedListener=D.prototype.Yw,D.prototype.findLayer=D.prototype.Qj,D.prototype.removeLayer=D.prototype.kA,D.prototype.addLayerAfter=D.prototype.Fy,D.prototype.addLayerBefore=D.prototype.Ww,D.prototype.addLayer=D.prototype.Al,D.prototype.moveParts=D.prototype.moveParts,D.prototype.copyParts=D.prototype.Kj,D.prototype.removeParts=D.prototype.Is,D.prototype.remove=D.prototype.remove,D.prototype.add=D.prototype.add,D.prototype.clearDelayedGeometries=D.prototype.ex,D.prototype.setProperties=D.prototype.nm,D.prototype.attach=D.prototype.Du,D.prototype.set=D.prototype.set,D.prototype.resetInputOptions=D.prototype.Vx,D.prototype.setInputOption=D.prototype.sA,D.prototype.getInputOption=D.prototype.Ql,D.prototype.resetRenderingHints=D.prototype.Wx,D.prototype.setRenderingHint=D.prototype.$x,D.prototype.getRenderingHint=D.prototype.Gf,D.prototype.maybeUpdate=D.prototype.ad,D.prototype.requestUpdate=D.prototype.Zb,D.prototype.delayInitialization=D.prototype.Zy,D.prototype.isUpdateRequested=D.prototype.Qz,D.prototype.invalidateDocumentBounds=D.prototype.Ya,D.prototype.findObjectsNear=D.prototype.og,D.prototype.findPartsNear=D.prototype.oz,D.prototype.findObjectsIn=D.prototype.Cf,D.prototype.findPartsIn=D.prototype.vx,D.prototype.findObjectsAt=D.prototype.ji,D.prototype.findPartsAt=D.prototype.nz,D.prototype.findObjectAt=D.prototype.hc,D.prototype.findPartAt=D.prototype.Ol,D.prototype.focusObject=D.prototype.Bz,D.prototype.alignDocument=D.prototype.My,D.prototype.zoomToRect=D.prototype.BA,D.prototype.zoomToFit=D.prototype.zoomToFit,D.prototype.diagramScroll=D.prototype.lx,D.prototype.focus=D.prototype.focus;var Rp=new mt,JS=null,Kn=G.document!==void 0,kh=null,pf="",gn=new Q(D,"None",0),Ph=new Q(D,"Uniform",1),Bp=new Q(D,"UniformToFill",2),Em=new Q(D,"CycleAll",10),ZS=new Q(D,"CycleNotDirected",11),QS=new Q(D,"CycleNotDirectedFast",12),qS=new Q(D,"CycleNotUndirected",13),bS=new Q(D,"CycleDestinationTree",14),t2=new Q(D,"CycleSourceTree",15),dl=new Q(D,"DocumentScroll",1),Am=new Q(D,"InfiniteScroll",2),gu=new Q(D,"TreeParentCollapsed",21),Dm=new Q(D,"AllParentsCollapsed",22),Im=new Q(D,"AnyParentsCollapsed",23),Rm=new tt,aj="2.3.9",Nh="image",e2=null,i2=!1;function fj(){if(Kn){var t=G.document.createElement("canvas"),e=t.getContext("2d"),i=pt("7ca11abfd022028846");e[i]=pt("398c3597c01238");for(var n=["5da73c80a36455d7038e4972187c3cae51fd22",Ot.Dx+"4ae6247590da4bb21c324ba3a84e385776",wt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",O.za],r=1;5>r;r++)e[pt("7ca11abfd7330390")](pt(n[r-1]),10,15*r);for(e[i]=pt("39f046ebb36e4b"),i=1;5>i;i++)e[pt("7ca11abfd7330390")](pt(n[i-1]),10,15*i);(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(wt.prototype.Cd=wt.prototype.Eu),e2=t}}D.className="Diagram",D.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=G.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof D?e.H:null},D.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},D.useDOM=function(t){Kn=t?G.document!==void 0:!1},D.isUsingDOM=function(){return Kn},D.None=gn,D.Uniform=Ph,D.UniformToFill=Bp,D.CycleAll=Em,D.CycleNotDirected=ZS,D.CycleNotDirectedFast=QS,D.CycleNotUndirected=qS,D.CycleDestinationTree=bS,D.CycleSourceTree=t2,D.DocumentScroll=dl,D.InfiniteScroll=Am,D.TreeParentCollapsed=gu,D.AllParentsCollapsed=Dm,D.AnyParentsCollapsed=Im;function n2(){this.zy=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.Qc=this.j=!0:this.Qc=null}function Ch(t,e){if(e.ib.setTransform(e.Mb,0,0,e.Mb,0,0),e.ib.xc(),t.Qc===null)t:{e="f";var i=G[pt("76a715b2f73f148a")][pt("72ba13b5")]||"";if(t.Qc=!0,Kn){var n=D[pt("76a115b6ed251eaf4692")];if(n)for(var r=Rm.iterator;r.next()&&(n=r.value,n=pt(n).split(pt("39e9")),!(6>n.length));){var o=pt(n[1]).split(".");if(n[4]!=="7da71ca0")break;var l=pt(Ot[pt("6cae19")]).split(".");if(o[0]>l[0]||o[0]===l[0]&&o[1]>=l[1]){var h=G[pt("74a900bae4370f8b51")][pt("6fbb13a1c2311e8a57")].toLowerCase();if(l=h[pt("73a612b6fb191d")](pt("3aad1ab6e022098b4dc4")),o=pt(n[2]),-1<l&&(h=h[pt("73a612b6fb191d")](o.toLowerCase()+"/"),t.Qc=!(-1<h&&h<l),!t.Qc))break;for(l=i[pt("76ad18b4f73e")],h=i[pt("73a612b6fb191d")](pt("35e7"))+2;h<l;h++)e+=i[h];if(l=e[pt("73a612b6fb191d")](o),0>l&&o!==pt("7da71ca0ad381e90")&&(l=e[pt("73a612b6fb191d")](pt("76a715b2ef3e149757"))),0>l&&(l=e[pt("73a612b6fb191d")](pt("76a715b2ef3e149757"))),0>l&&(l=e[pt("73a612b6fb191d")](pt("2bfa41fdb3784bca12"))),0>l&&(l=i[pt("73a612b6fb191d")](pt("7baa19a6f76c1988428554"))),t.Qc=!(0<=l&&l<e[pt("73a612b6fb191d")](pt("35"))||e[pt("73a612b6fb191d")](pt("35"))===-1),!t.Qc||i[pt("73a612b6fb191d")](pt("7fb002b6ed25128b4da25b2e"))&&(t.Qc=!(-1<i[pt("73a612b6fb191d")](o)),!t.Qc)||(l=G[pt("76a715b2f73f148a")][pt("69ad17a1e03e")],h=l[pt("73a612b6fb191d")](pt("7fb002b6ed25128b4da25b2e")),-1<h&&(t.Qc=!(l[pt("73a612b6fb191d")](o)>h),!t.Qc)))break;if(o[0]==="#"){l=G.document.createElement("div");for(var a=n[0].replace(/[A-Za-z]/g,"");4>a.length;)a+="9";if(h=a,a=a.substr(a.length-4),n="",n+=["gsh","gsf"][parseInt(a.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(a.substr(0,1),10)%4],l[pt("79a417a0f0181a8946")]=n,G.document[pt("78a712aa")]){G.document[pt("78a712aa")][pt("7bb806b6ed32388c4a875b")](l),a=G.getComputedStyle(l).getPropertyValue(pt("78a704b7e62456904c9b12701b6532a8"));var f=G.getComputedStyle(l).getPropertyValue(pt("75b817b0ea2202"));if(G.document[pt("78a712aa")][pt("68ad1bbcf533388c4a875b")](l),a){if(l=G[pt("77a902b0eb1b1e804a8a")],f==="0."+parseInt(h,10)%100||a.indexOf(parseInt(o[1]+o[2],16))!==-1&&a.indexOf(parseInt(o[3]+o[4],16))!==-1){t.Qc=!1;break}else if(l&&l(pt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,o=0;o<document.styleSheets.length;o++){l=document.styleSheets[o].rules||document.styleSheets[o].cssRules;for(var p in l)if(n===l[p].selectorText){t.Qc=!1;break t}}}}else t.Qc=null,t.Qc=!1}}}else{for(p=i[pt("76ad18b4f73e")],r=i[pt("73a612b6fb191d")](pt("35e7"))+2;r<p;r++)e+=i[r];i=e[pt("73a612b6fb191d")](pt("7da71ca0ad381e90")),t.Qc=!(0<=i&&i<e[pt("73a612b6fb191d")](pt("35")))}}}return 0<t.Qc&&t!==t.zy}n2.className="DiagramHelper";function Ls(t){this.j=t===void 0?new N:t,this.m=new N}B.Object.defineProperties(Ls.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var r2="DraggingInfo";Ls.className="DraggingInfo";function o2(t,e,i){this.node=t,this.info=e,this.Su=i}o2.className="DraggingNodeInfoPair";function Th(){this.reset()}Th.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new ct(NaN,NaN).freeze(),this.gridSnapCellSpot=ei,this.gridSnapOrigin=new N(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Th.className="DraggingOptions";function zp(t,e){if(typeof t=="string"||G.Element&&t instanceof Element)var i=D.call(this,t)||this;else i=D.call(this)||this,e=t;return s2(i),e&&i.nm(e),i}V(zp,D);function s2(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=Mo,t.layout=new Ae}zp.prototype.reset=function(){D.prototype.reset.call(this),s2(this)},zp.className="Palette";function Zr(t,e){if(typeof t=="string"||G.Element&&t instanceof Element)var i=D.call(this,t)||this;else i=D.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.vb=!0,i.V=null,i.mn=!1,i.nn=!1,i.F=!0,i.u=!0,i.ia=0,i.m=!1,i.ql=null,i.$x("drawShadows",!1),t=new lt;var r=new vt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),i.j=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new At(0,0,0,0),i.pa.h(0,0),i.toolManager.gb("Dragging",new yu,i.toolManager.mouseMoveTools),i.click=function(){var o=n.observed;if(o!==null){var l=o.viewportBounds,h=n.lastInput.documentPoint;o.position=new N(h.x-l.width/2,h.y-l.height/2)}},i.Pf=function(){n.Ya(),df(n)},i.Xd=function(){n.observed!==null&&(n.Ya(),n.N())},i.Ha=function(){1>n.updateDelay?n.N():n.m||(n.m=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.Of=function(){n.observed!==null&&df(n)},i.autoScale=Ph,i.vb=!1,e&&Object.assign(i,e),i}V(Zr,D),Zr.prototype.computePixelRatio=function(){return 1},Zr.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.ta,e=this.ib;if(t!==null&&e!==null){if(Sh(this),this.ql===null){var i=new Fn(null);i.width=t.width,i.height=t.height,this.ql=i}try{this.ta=this.ql,this.ib=this.ta.context,this.ib.Uc(!0),this.ib.setTransform(1,0,0,1,0,0),this.ib.clearRect(0,0,this.ta.width,this.ta.height),l2(this)}finally{this.ta=t,this.ib=e}}}D.prototype.redraw.call(this)},Zr.prototype.fc=function(){if(this.Ka===null&&I("No div specified"),this.ta===null&&I("No canvas specified"),!(this.ta instanceof Or)&&(Mv(this.box),this.Ec)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.pi){Sh(this);var e=this.ta;t=this.ib,t.Uc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?l2(this):this.ql!==null&&(t.drawImage(this.ql.La,0,0),e=this.Ab,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.Mb,this.Mb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.xc()),e=this.Wa.s;for(var i=e.length,n=0;n<i;n++)e[n].fc(t,this);this.Ec=this.vd=!1}}};function l2(t){var e=t.observed;if(e!==null){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=z.alloc().assign(t.viewportBounds).dd(e.viewportBounds),Jo(e,r),z.free(r),xi(e));var o=t.Ab;o.reset(),t.scale!==1&&o.scale(t.scale),t.position.x===0&&t.position.y===0||o.translate(-t.position.x,-t.position.y),r=t.ib,r.scale(t.Mb,t.Mb),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),r.xc(),e=e.Wa.s,o=e.length;for(var l=0;l<o;l++){var h=e[l],a=t;if(h.visible&&h.opacity!==0){var f=h.diagram.grid.part;if(!i&&h.isTemporary)n&&f.layer===h&&(h=uf(h,r),f.fc(r,a),r.globalAlpha=h);else{for(var p=uf(h,r),d=a.scale,y=z.alloc(),m=h.Pa.s,x=m.length,M=0;M<x;M++){var k=m[M];(n||k!==f)&&h.Oj(r,k,a,null,d,y,!1)}z.free(y),r.globalAlpha=p}}}}}function df(t){var e=t.box;if(e!==null){var i=t.observed;if(i!==null){t.Ec=!0,i=i.viewportBounds;var n=e.selectionObject,r=ct.alloc();r.h(i.width,i.height),n.desiredSize=r,ct.free(r),t=2/t.scale,n instanceof vt&&(n.strokeWidth=t),e.location=new N(i.x-t/2,i.y-t/2),e.isSelected=!0}}}Zr.prototype.computeBounds=function(){var t=this.observed;if(t===null)return gp;var e=t.documentBounds.copy();return e.dd(t.viewportBounds),e},Zr.prototype.invalidateViewport=function(){this.Ec!==!0&&(this.Ec=!0,this.Zb())},Zr.prototype.onViewportBoundsChanged=function(t,e,i,n){this.vb||(this.vd=!0,this.N(),this.Ee=!0,this.Ya(),df(this),this.qd.scale=i,this.qd.position.x=t.x,this.qd.position.y=t.y,this.qd.bounds.assign(t),this.qd.Ix=n,this.R("ViewportBoundsChanged",this.qd,t))},B.Object.defineProperties(Zr.prototype,{observed:{get:function(){return this.V},set:function(t){var e=this.V;if(t instanceof Zr&&I("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.am("ViewportBoundsChanged",this.Pf),e.am("DocumentBoundsChanged",this.Xd),e.am("InvalidateDraw",this.Ha),e.am("AnimationFinished",this.Of)),this.V=t,t!==null&&(t.Bj("ViewportBoundsChanged",this.Pf),t.Bj("DocumentBoundsChanged",this.Xd),t.Bj("InvalidateDraw",this.Ha),t.Bj("AnimationFinished",this.Of),this.add(this.box)),this.Ya(),t===null){this.ql=null;var i=this.ta,n=this.ib;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Ha(null),df(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),df(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ia},set:function(t){0>t&&(t=0),this.ia!==t&&(this.ia=t)}}}),Zr.className="Overview";function yu(){te.call(this),this.j=null}V(yu,te),yu.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(i=e.viewportBounds,this.j=new N(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new N(t.x-this.j.x,t.y-this.j.y)),!0)},yu.prototype.doActivate=function(){this.j=null,te.prototype.doActivate.call(this)},yu.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},yu.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var i=t.box;if(i!==null){if(this.j===null){var n=t.firstInput.documentPoint;i=i.location,this.j=new N(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new N(t.x-this.j.x,t.y-this.j.y)}}},yu.className="OverviewDraggingTool";function Yt(){Le(this),this.H=wh,this.Ha=this.u=this.m=!0,this.F=this.V=this.nb=this.ia=!1,this.ij=this.j=null,this.Hb=1.05,this.Jt=NaN,this.sw=null,this.Au=NaN,this.yu=gp,this.hb=!0,this.cg=null,this.ob=200}Yt.prototype.toString=function(){return"CommandHandler"},Yt.prototype.Xe=function(t){this.H=t},Yt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=we?e.meta:e.control,n=e.shift,r=e.alt,o=e.key;!i||o!=="C"&&o!=="Insert"?i&&o==="X"||n&&o==="Del"?this.canCutSelection()&&this.cutSelection():i&&o==="V"||n&&o==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&o==="Y"||r&&n&&o==="Backspace"?this.canRedo()&&this.redo():i&&o==="Z"||r&&o==="Backspace"?this.canUndo()&&this.undo():o==="Del"||o==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&o==="A"?this.canSelectAll()&&this.selectAll():o==="Esc"?this.canStopCommand()&&this.stopCommand():o==="Up"?t.allowVerticalScroll&&(i?t.scroll("pixel","up"):t.scroll("line","up")):o==="Down"?t.allowVerticalScroll&&(i?t.scroll("pixel","down"):t.scroll("line","down")):o==="Left"?t.allowHorizontalScroll&&(i?t.scroll("pixel","left"):t.scroll("line","left")):o==="Right"?t.allowHorizontalScroll&&(i?t.scroll("pixel","right"):t.scroll("line","right")):o==="PageUp"?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):o==="PageDown"?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):o==="Home"?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):o==="End"?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):o===" "?this.canScrollToPart()&&this.scrollToPart():o==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():o==="Add"?this.canIncreaseZoom()&&this.increaseZoom():i&&o==="0"?this.canResetZoom()&&this.resetZoom():n&&o==="Z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&o==="G"?this.canGroupSelection()&&this.groupSelection():i&&n&&o==="G"?this.canUngroupSelection()&&this.ungroupSelection():o==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():o==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Yt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Yt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof bt&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},Yt.prototype.canStopCommand=function(){return!0},Yt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},Yt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Yt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.Ea("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new q,i=t.selection.iterator;i.next();)As(e,i.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(n){return n.canDelete()});t.Is(e,!0),t.R("SelectionDeleted",e)}finally{t.eb("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},Yt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},Yt.prototype.copySelection=function(){var t=this.diagram,e=new q;for(t=t.selection.iterator;t.next();)As(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},Yt.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},Yt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Yt.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},Yt.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(t===null)kh=null,pf="";else{i=e.model;var n=!1,r=!1,o=null;try{i.Tl()&&(n=i.Jj,i.Jj=this.copiesParentKey),i.Wj()&&(r=i.Ij,i.Ij=this.copiesGroupKey),o=e.Kj(t,null,!0)}finally{i.Tl()&&(i.Jj=n),i.Wj()&&(i.Ij=r),i=new tt,i.addAll(o),kh=i,pf=e.model.dataFormat}}e.R("ClipboardChanged",i)},Yt.prototype.pasteFromClipboard=function(){var t=new q,e=kh;if(e===null)return t;var i=this.diagram;if(pf!==i.model.dataFormat)return t;var n=i.model,r=!1,o=!1,l=null;try{n.Tl()&&(r=n.Jj,n.Jj=this.copiesParentKey),n.Wj()&&(o=n.Ij,n.Ij=this.copiesGroupKey),l=i.Kj(e,i,!1)}finally{for(n.Tl()&&(n.Jj=r),n.Wj()&&(n.Ij=o),e=l.iterator;e.next();)i=e.value,n=e.key,i.location.w()||(n.location.w()?i.location=n.location:!i.position.w()&&n.position.w()&&(i.position=n.position)),t.add(i)}return t},Yt.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.Ea("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.w()){var o=this.computeEffectiveCollection(e.selection,e.Wm);wm(e,o,new N(t.x-r.centerX,t.y-r.centerY),e.Wm,!1)}}e.R("ClipboardPasted",i)}finally{e.eb("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Yt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||kh===null||kh.count===0||pf!==t.model.dataFormat)},Yt.prototype.undo=function(){this.diagram.undoManager.undo()},Yt.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},Yt.prototype.redo=function(){this.diagram.undoManager.redo()},Yt.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},Yt.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===gn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Yt.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==gn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Yt.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===gn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Yt.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==gn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Yt.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Yt.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},Yt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Bc(),t.redraw();var i=t.position,n=t.scale;Ko(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Au&&!isNaN(this.Jt)&&t.documentBounds.D(this.yu)?(t.scale=this.Jt,t.position=this.sw,this.Au=NaN,this.yu=gp):(this.Jt=n,this.sw=i.copy(),t.zoomToFit(),this.Au=t.scale,this.yu=t.documentBounds.copy()),lm(e)},Yt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Yt.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Va(),t===null){try{this.cg!==null&&(this.cg.next()?t=this.cg.value:this.cg=null)}catch{this.cg=null}t===null&&(0<e.highlighteds.count?this.cg=e.highlighteds.iterator:0<e.selection.count&&(this.cg=e.selection.iterator),this.cg!==null&&this.cg.next()&&(t=this.cg.value))}if(t!==null){var i=e.animationManager;Ko(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var r=mu(this,t,[t]);if(r.length===1)e.Ea(),e.es(t.actualBounds),e.eb("Scroll To Part");else{var o=function(){e.Ea();for(var a=r.pop();0<r.length&&a instanceof b&&a.isTreeExpanded&&(!(a instanceof gt)||a.isSubGraphExpanded);)a=r.pop();0<r.length?(a instanceof lt&&e.tv(a.actualBounds),a instanceof b&&!a.isTreeExpanded&&(a.isTreeExpanded=!0),a instanceof gt&&!a.isSubGraphExpanded&&(a.isSubGraphExpanded=!0)):(a instanceof lt&&e.es(a.actualBounds),e.am("LayoutCompleted",l)),e.eb("Scroll To Part")},l=function(){U(o,(i.isEnabled?i.duration:0)+n)};e.Bj("LayoutCompleted",l),o()}}else{var h=e.position.copy();e.es(t.actualBounds),h.Xa(e.position)&&i.Bc()}}};function mu(t,e,i){if(e.isVisible())return i;if(e instanceof Ct)mu(t,e.adornedPart,i);else if(e instanceof K){var n=e.fromNode;n!==null&&mu(t,n,i),e=e.toNode,e!==null&&mu(t,e,i)}else e instanceof b&&(n=e.labeledLink,n!==null&&mu(t,n,i),n=e.pg(),n!==null&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),mu(t,n,i))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),mu(t,e,i));return i}Yt.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof lt)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},Yt.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse Tree"),Ko(e.animationManager,"Collapse Tree");var i=new tt;if(t!==null&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof b&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.R("TreeCollapsed",i)}finally{e.eb("Collapse Tree")}},Yt.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof b&&t.isTreeExpanded))return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof b&&e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},Yt.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand Tree"),Ko(e.animationManager,"Expand Tree");var i=new tt;if(t!==null&&!t.isTreeExpanded)t.expandTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof b&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}e.R("TreeExpanded",i)}finally{e.eb("Expand Tree")}},Yt.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof b)||t.isTreeExpanded)return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof b&&!e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},Yt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Xj()){var i=this.archetypeGroupData;if(i!==null){var n=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.Ea("Group");for(var r=new tt,o=t.selection.iterator;o.next();){var l=o.value;l.Yc()&&l.canGroup()&&r.add(l)}for(var h=new tt,a=r.iterator;a.next();){var f=a.value;o=!1;for(var p=r.iterator;p.next();)if(f.Td(p.value)){o=!0;break}o||h.add(f)}if(0<h.count){var d=h.first().containingGroup;if(d!==null)for(;d!==null;){r=!1;for(var y=h.iterator;y.next();)if(!y.value.Td(d)){r=!0;break}if(r)d=d.containingGroup;else break}if(i instanceof gt)En(i),n=i.copy(),n!==null&&t.add(n);else if(e.Yu(i)){var m=e.copyNodeData(i);yt(m)&&(e.xf(m),n=t.ii(m))}if(n!==null){d!==null&&this.isValidMember(d,n)&&(n.containingGroup=d);for(var x=h.iterator;x.next();){var M=x.value;this.isValidMember(n,M)&&(M.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.R("SelectionGrouped",n)}finally{t.eb("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},Yt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Xj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Yc()&&e.canGroup())return!0}return!1};function Bm(t){var e=Vt();for(t=t.iterator;t.next();){var i=t.value;i instanceof K||e.push(i)}t=new q,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],o=!0,l=0;l<i;l++)if(r.Td(e[l])){o=!1;break}o&&t.add(r)}return zt(e),t}Yt.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof K)return!1;if(t!==null){if(t===e||t.Td(e))return!1;var i=t.memberValidation;if(i!==null&&!i(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return i=this.memberValidation,i!==null?i(t,e):!0},Yt.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.model;if(i.Xj())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.Ea("Ungroup");var n=new tt;if(t!==null)n.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof gt&&o.canUngroup()&&n.add(o)}var l=new tt;if(0<n.count){e.clearSelection(!0);for(var h=n.iterator;h.next();){var a=h.value;a.expandSubGraph();var f=a.containingGroup,p=f!==null&&f.data!==null?i.wa(f.data):void 0;l.addAll(a.memberParts);for(var d=l.iterator;d.next();){var y=d.value;if(y.isSelected=!0,!(y instanceof K)){var m=y.data;m!==null?i.mp(m,p):y.containingGroup=f}}e.remove(a)}}e.R("SelectionUngrouped",n,l)}finally{e.eb("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Yt.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Xj())return!1;if(t!==null){if(!(t instanceof gt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof gt&&e.canUngroup())return!0;return!1},Yt.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Bm(t).iterator;t.next();){var n=t.value;n.containingGroup!==null&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},Yt.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse SubGraph"),Ko(e.animationManager,"Collapse SubGraph");var i=new tt;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof gt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.R("SubGraphCollapsed",i)}finally{e.eb("Collapse SubGraph")}},Yt.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof gt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof gt&&e.isSubGraphExpanded)return!0;return!1},Yt.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand SubGraph"),Ko(e.animationManager,"Expand SubGraph");var i=new tt;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof gt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}e.R("SubGraphExpanded",i)}finally{e.eb("Expand SubGraph")}},Yt.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof gt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof gt&&!e.isSubGraphExpanded)return!0;return!1},Yt.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(i!==null){if(t===null){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.Nl(function(o){return o instanceof Xt&&o.editable})}t!==null&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},Yt.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Xt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.Nl(function(i){return i instanceof Xt&&i.editable}),t!==null))return!0;return!1},Yt.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(i!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=i.findObjectWithContextMenu(t),t!==null)){var n=e.lastInput,r=null;t instanceof ot?r=t.ga(Rt):e.viewportBounds.ca(n.documentPoint)||(r=e.viewportBounds,r=new N(r.x+r.width/2,r.y+r.height/2)),r!==null&&(n.viewPoint=e.op(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,fS(i,!1,t)}},Yt.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return i===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),i.findObjectWithContextMenu(t)!==null)},Yt.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),r=i.currentTool===n;if(e===void 0&&(e=r?n.dragOptions:i.Wm),n=new mt,t===null)return n;for(var o=t.iterator;o.next();)$o(i,n,o.value,r,e);if(i.draggedLink!==null&&e.dragsLink)return n;for(o=t.iterator;o.next();)t=o.value,t instanceof K&&(e=t.fromNode,e===null||n.contains(e)?(e=t.toNode,e===null||n.contains(e)||n.remove(t)):n.remove(t));return n},B.Object.defineProperties(Yt.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesTree:{get:function(){return this.ia},set:function(t){this.ia=t}},deletesTree:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesParentKey:{get:function(){return this.V},set:function(t){this.V=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ij},set:function(t){this.ij=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Hb},set:function(t){1<t||I("zoomFactor must be larger than 1.0, not: "+t),this.Hb=t}},isZoomToFitRestoreEnabled:{get:function(){return this.hb},set:function(t){this.hb=t}},scrollToPartPause:{get:function(){return this.ob},set:function(t){this.ob=t}}}),Yt.className="CommandHandler",FS=function(){return new Yt};function ot(){Le(this),this.o=30723,this.pb=1,this.bn="",this.Na=this.Me=null,this.pa=new N(NaN,NaN).freeze(),this.hd=pp,this.Ab=new wt,this.wh=new wt,this.Lb=null,this.Ca=this.Kk=1,this.Kb=0,this.Kg=rh,this.tc=new z(NaN,NaN,NaN,NaN).freeze(),this.Ib=new z(NaN,NaN,NaN,NaN).freeze(),this.dc=new z(0,0,NaN,NaN).freeze(),this.ba=this.Yn=this.Zn=null,this.sk=this.Jb=$e,this.Ag=this.io=0,this.V=this.tb=this.Dh=this.A=this.Ua=null,this.Tc=!1,this.jo=this.Ng=null}var le,oe,jr,Ge,Ze,Wn,gf,yf,mf,vf;ot.prototype.cloneProtected=function(t){t.o=this.o|6144,t.pb=this.pb,t.bn=this.bn,t.Na=this.Na,t.pa.assign(this.pa),t.hd=this.hd.J(),this.Lb!==null?t.Lb=this.Lb.copy():t.Lb=null,t.Ca=this.Ca,t.Kb=this.Kb,t.Kg=this.Kg.J(),t.tc.assign(this.tc),t.Ib.assign(this.Ib),t.dc.assign(this.dc),t.Yn=this.Yn,this.ba!==null&&(t.ba=this.ba.copy()),t.Jb=this.Jb.J(),t.sk=this.sk.J(),t.io=this.io,t.Ag=this.Ag,this.Ua!==null&&(t.Ua=this.Ua.copy()),this.A!==null&&(t.A=this.A.mc?this.A:this.A.copy()),this.Dh!==null&&(t.Dh=Gt(this.Dh)),this.tb!==null&&(t.tb=this.tb.copy())},ot.prototype.Vw=function(t){var e=this.Dh;if(Bt(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Dh=e=[];e.push(t)},ot.prototype.Af=function(t){t.Zn=null,t.Ng=null,t.v()},ot.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.Dh!==null)for(var e=0;e<this.Dh.length;e++){var i=this.Dh[e];t[i]=this[i]}return t},ot.prototype.copy=function(){return this.clone()},s=ot.prototype,s.qb=function(t){t.classType===K?t.name.indexOf("Orient")===0?this.segmentOrientation=t:I("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ot&&(this.stretch=t)},s.toString=function(){return Ns(this.constructor)+"#"+Oi(this)},s.th=function(){this.A!==null&&(this.A.mc=!0)};function Se(t){t.A===null?t.A=new xu:t.A.mc&&(t.A=t.A.copy())}s.Wc=function(){if(this.ba===null){var t=new wf;t.Xi=We,t.yj=We,t.Vi=10,t.wj=10,t.Wi=0,t.xj=0,this.ba=t}},s.cb=function(t,e,i,n,r,o,l){var h=this.part;if(h!==null&&(h.gk(t,e,i,n,r,o,l),i===this&&t===Jt&&vu(this)&&gl(this,h,e),o=this.diagram,this.animationTriggers===null||o===null||!o.pi||o.undoManager.isUndoingRedoing||o.animationManager.Dm||(t=this.animationTriggers.get(e),t!==null&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(this.jo===null&&(this.jo=new mt),l=o.undoManager.transactionLevel===0,t.startCondition===am?l=!0:t.startCondition===TS&&(l=!1),l?(o=new ii,QL(t,o),l=this.jo.get(t),l!==null&&l.stop(),this.jo.add(t,o),o.vu=this,o.Nw=t,o.add(this,e,n,r),o.start()):(Ko(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,n,r)))),this instanceof _&&i===h&&(h.o&16777216)!==0&&h.data!==null))for(i=this.O.s,n=i.length,r=0;r<n;r++)h=i[r],h instanceof _&&wl(h,function(a){a.data!==null&&a.o&16777216&&a.Ma(e)})};function gl(t,e,i){var n=t.ih();if(n!==null)for(var r=t.localBindings.iterator;r.next();){var o=r.value,l=null;if(o.sourceName!==null){if(l=_k(o,n,t),l===null)continue;o.sp(t,l,i,null)}else if(o.isToModel){var h=e.diagram;h===null||h.skipsModelSourceBindings||o.sp(t,h.model.modelData,i,n)}else{if(h=n.data,h===null)continue;var a=e.diagram;a===null||a.skipsModelSourceBindings||o.sp(t,h,i,n)}l===t&&(h=n.ks(o.Ai),h!==null&&o.Mv(h,l,i))}}s.ks=function(t){return this.bindingId===t?this:null},s.g=function(t,e,i){this.cb(Jt,t,this,e,i)},s.Ge=function(t,e,i,n){var r=this.tc;if(r.h(t,e,i,n),this.Ca!==1||this.Kb!==0){this.Lb===null&&(this.Lb=new wt);var o=this.Lb;o.reset(),this.no(o,t,e,i,n),o.pp(r)}};function u2(t,e,i,n){return t.pickable===!1?!1:(n.multiply(t.transform),i?t.Xc(e,n):t.fh(e,n))}s.ux=function(t,e,i){if(this.pickable===!1)return!1;var n=this.naturalBounds;return e=t.Bf(e),i?mi(t.x,t.y,0,0,0,n.height)<=e||mi(t.x,t.y,0,n.height,n.width,n.height)<=e||mi(t.x,t.y,n.width,n.height,n.width,0)<=e||mi(t.x,t.y,n.width,0,0,0)<=e:t.zd(0,0)<=e&&t.zd(0,n.height)<=e&&t.zd(n.width,0)<=e&&t.zd(n.width,n.height)<=e},s.se=function(){return!0},s.ca=function(t){var e=N.alloc();e.assign(t),this.transform.Ga(e);var i=this.actualBounds;if(!i.w())return N.free(e),!1;var n=this.diagram;if(n!==null&&n.wq){var r=n.Ql("extraTouchThreshold"),o=n.Ql("extraTouchArea"),l=o/2,h=this.naturalBounds;n=this.Df()*n.scale;var a=1/n;if(h.width*n<r&&h.height*n<r)return t=lr(i.x-l*a,i.y-l*a,i.width+o*a,i.height+o*a,e.x,e.y),N.free(e),t}return r=!1,(this instanceof Ct||this instanceof vt?lr(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.ca(e))&&(this.tb&&!this.tb.ca(e)?r=!1:this.areaBackground!==null&&i.ca(e)||this.Na!==null&&this.dc.ca(t)?r=!0:r=this.gh(t)),N.free(e),r},s.gh=function(t){var e=this.naturalBounds;return lr(0,0,e.width,e.height,t.x,t.y)},s.Re=function(t){if(this.angle===0)return this.actualBounds.Re(t);var e=this.naturalBounds;e=z.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=N.allocAt(t.x,t.y);return e.ca(i.Cd(r))&&(r.h(t.x,t.bottom),e.ca(i.Cd(r))&&(r.h(t.right,t.bottom),e.ca(i.Cd(r))&&(r.h(t.right,t.y),e.ca(i.Cd(r))&&(n=!0)))),N.free(r),z.free(e),n},s.fh=function(t,e){if(e===void 0)return t.Re(this.actualBounds);var i=this.naturalBounds,n=!1,r=N.allocAt(0,0);return t.ca(e.Ga(r))&&(r.h(0,i.height),t.ca(e.Ga(r))&&(r.h(i.width,i.height),t.ca(e.Ga(r))&&(r.h(i.width,0),t.ca(e.Ga(r))&&(n=!0)))),N.free(r),n},s.Xc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Xc(this.actualBounds);var i=this.naturalBounds,n=N.allocAt(0,0),r=N.allocAt(0,i.height),o=N.allocAt(i.width,i.height),l=N.allocAt(i.width,0),h=!1;if(t.ca(e.Ga(n))||t.ca(e.Ga(r))||t.ca(e.Ga(o))||t.ca(e.Ga(l)))h=!0;else{i=z.allocAt(0,0,i.width,i.height);var a=N.allocAt(t.x,t.y);i.ca(e.Cd(a))?h=!0:(a.h(t.x,t.bottom),i.ca(e.Cd(a))?h=!0:(a.h(t.right,t.bottom),i.ca(e.Cd(a))?h=!0:(a.h(t.right,t.y),i.ca(e.Cd(a))&&(h=!0)))),N.free(a),z.free(i),!h&&(O.us(t,n,r)||O.us(t,r,o)||O.us(t,o,l)||O.us(t,l,n))&&(h=!0)}return N.free(n),N.free(r),N.free(o),N.free(l),h},s.ga=function(t,e){if(e===void 0&&(e=new N),t instanceof ht){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},s.mi=function(t){t===void 0&&(t=new z);var e=this.naturalBounds,i=this.oe,n=N.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Be(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Be(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Be(t,n.x,n.y,0,0),N.free(n),t},s.li=function(){var t=this.oe;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},s.Df=function(){if(!(this.o&4096))return this.Kk;var t=this.Ca;return this.panel!==null?t*this.panel.Df():t},s.qs=function(t,e){return e===void 0&&(e=new N),e.assign(t),this.oe.Cd(e),e},s.rs=function(t,e,i){return this.Sj(t.x,t.y,e.x,e.y,i)},s.Sj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),h=o.m22*l,a=-o.m12*l,f=-o.m21*l,p=o.m11*l,d=l*(o.m21*o.dy-o.m22*o.dx),y=l*(o.m12*o.dx-o.m11*o.dy);return this.areaBackground!==null?(o=this.actualBounds,O.Ff(o.left,o.top,o.right,o.bottom,t,e,i,n,r)):(l=t*h+e*f+d,t=t*a+e*p+y,e=i*h+n*f+d,i=i*a+n*p+y,r.h(0,0),n=this.naturalBounds,i=O.Ff(0,0,n.width,n.height,l,t,e,i,r),r.transform(o),i)},ot.prototype.measure=function(t,e,i,n){if(Qo(this)!==!1){var r=this.Kg,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-r,0),o=this.angle,r=this.desiredSize;var l=this.kq();o===90||o===270?(t=isFinite(r.height)?r.height+l:t,e=isFinite(r.width)?r.width+l:e):(t=isFinite(r.width)?r.width+l:t,e=isFinite(r.height)?r.height+l:e),r=i||0,l=n||0;var h=this instanceof _;switch(cr(this,!0)){case oe:l=r=0,h&&(e=t=1/0);break;case le:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(l=e);break;case Ge:isFinite(t)&&t>i&&(r=t),l=0,h&&(e=1/0);break;case Ze:isFinite(e)&&e>n&&(l=e),r=0,h&&(t=1/0)}h=this.maxSize;var a=this.minSize;r>h.width&&a.width<h.width&&(r=h.width),l>h.height&&a.height<h.height&&(l=h.height),i=Math.max(r,a.width),n=Math.max(l,a.height),h.width<i&&(i=Math.min(a.width,i)),h.height<n&&(n=Math.min(a.height,n)),t=Math.min(h.width,t),e=Math.min(h.height,e),t=Math.max(i,t),e=Math.max(n,e),(o===90||o===270)&&(o=t,t=e,e=o,o=i,i=n,n=o),this.tc.ka(),this.Wl(t,e,i,n),this.tc.freeze(),this.tc.w()||I("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.tc.toString()),yn(this,!1)}},ot.prototype.Wl=function(){},ot.prototype.Dd=function(){return!1},ot.prototype.arrange=function(t,e,i,n,r){this.Uk();var o=z.alloc();o.assign(this.Ib),this.Ib.ka(),$n(this)===!1?this.Ib.h(t,e,i,n):this.eh(t,e,i,n),this.Ib.freeze(),r===void 0?this.tb=null:this.tb=r,i=!1,r!==void 0?i=!0:(r=this.panel,r!==null&&ts(r)&&(r=r.panel),r!==null&&(r=r.dc,n=this.measuredBounds,this.areaBackground!==null&&(n=this.Ib),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof Xt&&(t=this.naturalBounds,this.Lq>t.height||this.Cb>t.width))&&(i=!0)),this.o=i?this.o|256:this.o&-257,this.Ib.w()||I("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Ib.toString()),this.Xl(o,this.Ib),yl(this,!1),z.free(o)},s=ot.prototype,s.eh=function(){};function zm(t,e,i,n,r){if(t.Ib.h(e,i,n,r),!t.desiredSize.w()){var o=t.tc;i=t.Kg,e=i.right+i.left;var l=i.top+i.bottom;switch(i=o.width+e,o=o.height+l,n+=e,r+=l,e=cr(t,!0),i===n&&o===r&&(e=oe),e){case oe:(i>n||o>r)&&(yn(t,!0),t.measure(i>n?n:i,o>r?r:o,0,0));break;case le:yn(t,!0),t.measure(n,r,0,0);break;case Ge:yn(t,!0),t.measure(n,o,0,0);break;case Ze:yn(t,!0),t.measure(i,r,0,0)}}}s.Xl=function(t,e){var i=this.part;i!==null&&i.diagram!==null&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||Pv(i,!0),this.N(),T0(t,e)||(i.oh(),this.Pn(i)))},s.Pn=function(t){this.portId!==null&&(Pv(t,!0),t instanceof b&&lk(t,this))},s.fc=function(t,e){if(!cj(this,t,e)&&this.visible){var i=this.opacity;if(i!==0){var n=1;i!==1&&(n=t.globalAlpha,t.globalAlpha=n*i);var r="";this.filter!==""&&(r=t.filter,t.filter=this.filter);var o=this instanceof _&&ts(this),l=this.Ib;if(o){var h=this.Ib,a=this.dc,f=this.areaBackground,p=this.Na;f===null&&p===null||t.xc(),f!==null&&(nn(this,t,f,!0,!0,a,h),f instanceof Et&&f.type===vn?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.ng(f)):t.fillRect(h.x,h.y,h.width,h.height)),p!==null&&(nn(this,t,p,!0,!1,a,h),p instanceof Et&&p.type===vn?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.ng(p)):t.fillRect(h.x,h.y,h.width,h.height)),this.hh(t,e)}if(!o&&(o||l.width!==0&&l.height!==0&&!isNaN(l.x)&&!isNaN(l.y))){o=this.transform,h=this.panel,this.o&4096&&Up(this),f=this.part,a=!1;var d=0;f&&e.Gf("drawShadows")&&(a=f.isShadowed)&&(p=f.shadowOffset,d=Math.max(p.y,p.x)*e.scale*e.Mb),p=this.Dd();var y;if(!(y=e.$i||!p)){var m=this.naturalBounds;y=this.wh;var x=y.m11,M=y.m21,k=y.dx,S=y.m12,C=y.m22,T=y.dy,L,j=L=0;y=L*x+j*M+k;var A=L*S+j*C+T;L=m.width+d,j=0;var Z=L*x+j*M+k;L=L*S+j*C+T,j=Math.min(y,Z);var it=Math.min(A,L),et=Math.max(y+0,Z)-j,H=Math.max(A+0,L)-it;y=j,A=it,L=m.width+d,j=m.height+d,Z=L*x+j*M+k,L=L*S+j*C+T,j=Math.min(y,Z),it=Math.min(A,L),et=Math.max(y+et,Z)-j,H=Math.max(A+H,L)-it,y=j,A=it,L=0,j=m.height+d,Z=L*x+j*M+k,L=L*S+j*C+T,j=Math.min(y,Z),it=Math.min(A,L),et=Math.max(y+et,Z)-j,H=Math.max(A+H,L)-it,y=j,A=it,d=e.viewportBounds,m=d.x,x=d.y,y=!(y>d.width+m||m>et+y||A>d.height+x||x>H+A)}if(y){if(y=(this.o&256)!==0,t.clipInsteadOfFill&&(y=!1),this instanceof Xt&&(t.font=this.font),y){if(A=h.se()?h.naturalBounds:h.actualBounds,et=Math.max(l.x,A.x),H=Math.max(l.y,A.y),d=Math.min(l.right,A.right)-et,m=Math.min(l.bottom,A.bottom)-H,x=this.tb,x!==null&&(et=x.x,H=x.y,d=x.width,m=x.height),et>l.width+l.x||l.x>A.width+A.x){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}t.save(),t.beginPath(),t.rect(et,H,d,m),t.clip()}if(p){if(!f.isVisible()){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}a&&(A=f.shadowOffset,t.Ev(A.x*e.scale*this.scale*e.Mb,A.y*e.scale*this.scale*e.Mb,f.shadowBlur),Po(t),t.shadowColor=f.shadowColor)}a&&this.shadowVisible===!0?Po(t):a&&this.shadowVisible===!1&&Qr(t),f=this.naturalBounds,this.areaBackground!==null&&(t.xc(),Vm(this,t,f,l)),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),a&&Vp(this,h)&&this.shadowVisible===null&&Qr(t),this.Na!==null&&(t.xc(),Yp(this,t,f,l)),a&&(this.Na!==null||this.areaBackground!==null||Vp(this,h))?(Gp(this,!0),this.shadowVisible===null&&Qr(t)):Gp(this,!1),this.hh(t,e),a&&this.o&512&&Po(t),p&&a&&Qr(t),y&&(t.restore(),t.Uc(this instanceof _)),o.ws()||(e=1/(o.m11*o.m22-o.m12*o.m21),t.transform(o.m22*e,-o.m12*e,-o.m21*e,o.m11*e,e*(o.m21*o.dy-o.m22*o.dx),e*(o.m12*o.dx-o.m11*o.dy)))}}i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r)}}};function Vp(t,e){return e===null?!1:(ts(e)&&(e=e.panel),(e.o&512)!==0||(e.type===_.Auto||e.type===_.Spot)&&e.Pb()!==t)}s.Dv=function(){};function Vm(t,e,i,n){nn(t,e,t.areaBackground,!0,!0,i,n),t.areaBackground instanceof Et&&t.areaBackground.type===vn?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.ng(t.areaBackground)):e.fillRect(n.x,n.y,n.width,n.height)}function Yp(t,e,i,n){var r=t.kq(),o=i.x,l=i.y,h=i.width+r,a=i.height+r;nn(t,e,t.Na,!0,!1,i,n),t.Na instanceof Et&&t.Na.type===vn?(e.beginPath(),e.rect(o-r/2,l-r/2,h,a),e.ng(t.Na)):e.fillRect(o-r/2,l-r/2,h,a)}function h2(t,e,i){for(var n=e.O.s,r=n.length,o=-1,l=0;l<r;l++)if(n[l]===t){o=l;break}if(t=o,t!==-1)if(t===0)e.svg.fd?e.svg.fd.after(i):e.svg.Na?e.svg.Na.after(i):e.type===_.Table?(e=e.svg.getElementsByClassName("gojs-ts"),e=e.length!==0?e[0]:null,e!==null&&(e.innerHTML="",e.after(i))):e.svg.prepend(i);else{for(;t!==0&&!e.M(t-1).Ed();)t--;t===0?e.svg.prepend(i):(t=e.M(t-1).svg,t!==null?t.after(i):e.svg.appendChild(i))}}function cj(t,e,i){if(!(e instanceof Ki))return!1;if(!t.visible||t.opacity===0||t.Dd()&&!t.isVisible())return t.svg!==null&&t.svg.parentNode!==null&&t.svg.remove(),!0;var n=t.panel,r=t.nk(e);if(t.kk(e,i,r))return t.svg.parentElement!==null?(t.Dd()&&(e.ti=t.svg),!0):(t.Dd()?(e.ti!==null?e.ti.after(t.svg):e.Nj.prepend(t.svg),e.ti=t.svg):n&&h2(t,n,t.svg),!0);if(t.Dd()&&t.isShadowed){var o=t.shadowOffset;e.Ev(o.x*i.scale*t.scale*i.Mb,o.y*i.scale*t.scale*i.Mb,t.shadowBlur),Po(e),e.shadowColor=t.shadowColor}t instanceof Xt&&(e.font=t.font),e.yd=null;var l=t.transform;o=t instanceof _;var h=t instanceof _?ts(t):!1;t.o&4096&&Up(t);var a=t.Ib;if(e.rb.ha=[1,0,0,1,0,0],e.m=!1,r&&(e.m=!0,o&&h?(Mf(e,1,0,0,1,0,0),t.svg=e.$c):o?(Mf(e,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),t.svg=e.$c):Mf(e,1,0,0,1,0,0)),r=t.naturalBounds,t.areaBackground!==null){var f=l.copy().Vj();e.rb.ha=[f.m11,f.m12,f.m21,f.m22,f.dx,f.dy],Vm(t,e,r,a),e.rb.ha=[1,0,0,1,0,0],e.yd.fd=e.$c,e.yd.prepend(e.$c)}return o||(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),t.background!==null&&(o?(h&&(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),Yp(t,e,r,a),h&&(e.rb.ha=[1,0,0,1,0,0])):(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Yp(t,e,r,a)),e.yd.Na=e.$c,e.yd.prepend(e.$c)),l=e.yd,r=t.part,h=!1,r&&i.Gf("drawShadows")&&(h=r.isShadowed),e.clipInsteadOfFill&&(h=!1),t.Dd()&&h&&Po(e),h&&t.shadowVisible===!0?Po(e):h&&t.shadowVisible===!1&&Qr(e),r=t.panel,h&&Vp(t,r)&&t.shadowVisible===null&&Qr(e),e.Il&&(f=i.computePixelRatio(),f="drop-shadow("+e.shadowOffsetX/f+"px "+e.shadowOffsetY/f+"px "+e.shadowBlur/f/2+"px "+e.shadowColor+")",t.background!==null&&l.Na.setAttributeNS(null,"filter",f),t.areaBackground!==null&&l.fd.setAttributeNS(null,"filter",f)),h&&(t.Na!==null||t.areaBackground!==null||Vp(t,r))?(Gp(t,!0),t.shadowVisible===null&&Qr(e)):Gp(t,!1),r=h,t.hh(e,i),o&&e.nh.pop(),e.m&&e.nh.pop(),l=e.Gv.hs,h=o?t.svg:e.yd,f=t.svg,!o&&f!==null&&h!==f&&f.parentNode===t.panel.svg?(t.svg.replaceWith(h),t.svg=h,h!==null&&t.$o(e,n,a,h),a2(e,f),!0):(t.svg=h,l!==null&&h===null&&(_p(e),e.nh.pop()),h===null||(t.$o(e,n,a,h),e.Il&&(i=i.computePixelRatio(),t.Dv(h,"drop-shadow("+e.shadowOffsetX/i+"px "+e.shadowOffsetY/i+"px "+e.shadowBlur/i/2+"px "+e.shadowColor+")")),r&&t.o&512&&Po(e),t.Dd()&&Qr(e),i=t.Dd()?t.opacity*e.globalAlpha:t.opacity,i!==1&&h.setAttributeNS(null,"opacity",i.toString()),t.filter!==""&&h.setAttributeNS(null,"filter",t.filter),t.Dd()?(e.ti?e.ti.after(h):e.Nj.prepend(h),e.ti=h):n!==null&&h2(t,n,h),l!==null&&l(t,h)),!0)}s.$o=function(t,e,i,n){var r=(this.o&256)!==0;if(t.clipInsteadOfFill&&(r=!1),r){var o=e.se()?e.naturalBounds:e.actualBounds;e=Math.max(i.x,o.x),r=Math.max(i.y,o.y);var l=Math.min(i.right,o.right)-e;i=Math.min(i.bottom,o.bottom)-r,o=this.tb,o!==null&&(e=o.x,r=o.y,l=o.width,i=o.height),o=n.getAttribute("clip-path");var h=null;o!==null&&(h=t.svg.getElementById(o.split("#")[1].slice(0,-1))),h===null?(o="CLIP"+su++,h=t.Ud("clipPath",{id:o}),e=t.Ud("rect",{x:e,y:r,width:l,height:i}),this instanceof _&&(r=this.transform.copy().Vj(),e.setAttribute("transform","matrix("+r.m11+", "+r.m12+", "+r.m21+", "+r.m22+", "+r.dx+", "+r.dy+")")),h.appendChild(e),t.svg.appendChild(h),n.setAttributeNS(null,"clip-path","url(#"+o+")")):(t=h.firstElementChild,t.setAttribute("x",e.toString()),t.setAttribute("y",r.toString()),t.setAttribute("width",l.toString()),t.setAttribute("height",i.toString()))}else n.removeAttributeNS(null,"clip-path"),a2(t,n)};function a2(t,e){e=e.getAttribute("clip-path"),e!==null&&(t=t.svg.getElementById(e.split("#")[1].slice(0,-1)),t!==null&&t.remove())}function Ym(t){if(t.svg!==null){var e=t.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),i=t.svg.ownerDocument;if(e!==null){e=c(e);for(var n=e.next();!n.done;n=e.next())n=i.getElementById(n.value.split("#")[1].slice(0,-1)),n!==null&&n.remove()}t.svg.remove()}}s.hh=function(){},s.lv=function(){this.Tc=!0},s.kk=function(t,e,i){if(this.Tc)return this.lv(),this.Tc=!1;if(e=this.svg,e===null)return!1;if(!this.visible)return e.remove(),!1;if(e.nodeName!=="g"&&i||e.nodeName==="g"&&!i)return!1;var n=this.transform,r=this instanceof _?ts(this):!1;if(!(this instanceof _&&r))if(this instanceof Ei){var o=this.bt;t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy],o!==null&&p2(t,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),i?e.lastElementChild.setAttributeNS(null,"transform",d2(t)):e.setAttributeNS(null,"transform",d2(t))}else if(!i||this instanceof _)e.setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");else if(this instanceof vt){o=e.getElementsByTagName("path");for(var l=0;l<o.length;l++)o[l].setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")")}else e.lastElementChild.setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");return o=this.Dd()?this.opacity*t.globalAlpha:this.opacity,o===1?e.removeAttribute("opacity"):e.setAttributeNS(null,"opacity",o.toString()),t.rb.ha=[1,0,0,1,0,0],(this.areaBackground!==null||e.fd!==void 0)&&(o=e.fd,this.areaBackground===null?(e.fd.remove(),e.fd=void 0):(l=n.copy().Vj(),t.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Vm(this,t,this.naturalBounds,this.actualBounds),t.rb.ha=[1,0,0,1,0,0],e.fd?(l=e.fd.getAttribute("filter"),l!==null&&t.$c.setAttribute("filter",l),e.fd.replaceWith(t.$c)):e.prepend(t.$c),e.fd=t.$c),o&&Hp(t,o)),(this.background!==null||e.Na!==void 0)&&(o=e.Na,this.background===null?(Hp(t,e.Na),e.Na.remove(),e.Na=void 0):((r||i&&!(this instanceof _))&&(t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy]),Yp(this,t,this.naturalBounds,this.actualBounds),e.Na?(Hp(t,e.Na),i=e.Na.getAttribute("filter"),i!==null&&t.$c.setAttribute("filter",i),e.Na.replaceWith(t.$c)):e.prepend(t.$c),e.Na=t.$c),o&&Hp(t,o)),this.$o(t,this.panel,this.actualBounds,e),!0},s.nk=function(t){if(this.background!==null||this.areaBackground!==null)return!0;var e=(this.o&256)!==0;return t.clipInsteadOfFill&&(e=!1),!!e};function nn(t,e,i,n,r,o,l){if(i!==null){var h=1,a=1;if(typeof i=="string")n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===bo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var f=t.kq();if(h=o.width,a=o.height,r?(h=l.width,a=l.height):n||(h+=f,a+=f),(o=e instanceof xl)&&i.xe&&(i.type===Rh||i.yk===h&&i.ft===a))var p=i.xe;else{var d=0,y=0,m=0,x=0,M=0,k=0;if(k=M=0,r?(M=l.x,k=l.y):n||(M-=f/2,k-=f/2),d=i.start.x*h+i.start.offsetX,y=i.start.y*a+i.start.offsetY,m=i.end.x*h+i.end.offsetX,x=i.end.y*a+i.end.offsetY,d+=M,m+=M,y+=k,x+=k,i.type===Co)p=e.createLinearGradient(d,y,m,x);else if(i.type===vn)k=isNaN(i.endRadius)?Math.max(h,a)/2:i.endRadius,isNaN(i.startRadius)?(M=0,k=Math.max(h,a)/2):M=i.startRadius,p=e.createRadialGradient(d,y,M,m,x,k);else if(i.type===Rh)try{p=e.createPattern(i.pattern,"repeat")}catch{p=null}if(i.type!==Rh&&(r=i.colorStops,r!==null))for(r=r.iterator;r.next();)p.addColorStop(r.key,r.value);if(o&&(i.xe=p,p!==null&&(i.yk=h,i.ft=a),p===null&&i.type===Rh&&i.yk!==-1)){i.yk=-1;var S=t.diagram;S!==null&&i.yk===-1&&U(function(){S.redraw()},600)}}n?e.fillStyle=p:e.strokeStyle=p}}}s.rg=function(t){if(t instanceof _)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},s.Ed=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.Ed():!0},s.If=function(){for(var t=this instanceof _?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function Up(t){if(t.o&2048){var e=t.Ab;if(e.reset(),!t.Ib.w()||!t.tc.w()){jh(t,!1);return}if(e.translate(t.Ib.x-t.tc.x,t.Ib.y-t.tc.y),t.scale!==1||t.angle!==0){var i=t.naturalBounds;t.no(e,i.x,i.y,i.width,i.height)}jh(t,!1),js(t,!0)}t.o&4096&&(e=t.panel,e===null?(t.wh.set(t.Ab),t.Kk=t.scale,js(t,!1)):e.oe!==null&&(i=t.wh,i.reset(),e.se()?i.multiply(e.wh):e.panel!==null&&i.multiply(e.panel.wh),i.multiply(t.Ab),t.Kk=t.scale*e.Kk,js(t,!1)))}s.no=function(t,e,i,n,r){if(this.Ca!==1&&t.scale(this.Ca),this.Kb!==0){var o=N.alloc();o.yi(e,i,n,r,Rt),t.rotate(this.Kb,o.x,o.y),N.free(o)}},s.v=function(t){if(!Qo(this)){t===void 0&&(t=!1),yn(this,!0),yl(this,!0);var e=this.panel;e===null||t||e.v()}},s.Uj=function(){Qo(this)||(yn(this,!0),yl(this,!0))};function Lh(t){if(!$n(t)){var e=t.panel;e!==null?e.v():t.Dd()&&(e=t.diagram,e!==null&&(e.De.add(t),t instanceof b&&t.Bd(),e.Zb())),yl(t,!0)}}s.Uk=function(){!(this.o&2048)&&(jh(this,!0),js(this,!0))},s.Wu=function(){js(this,!0)},s.N=function(){var t=this.part;t!==null&&t.N()};function cr(t,e){var i=t.stretch,n=t.panel;return n!==null&&n.type===_.Table?xf(t,n.Fb(t.row),n.Eb(t.column),e):n!==null&&n.type===_.Auto&&n.Pb()===t?ko(t,le,e):i===Wn?n!==null?n.type===_.Spot&&n.Pb()===t?ko(t,le,e):(i=n.defaultStretch,i===Wn?ko(t,oe,e):ko(t,i,e)):ko(t,oe,e):ko(t,i,e)}function xf(t,e,i,n){var r=t.stretch;if(r!==Wn)return ko(t,r,n);var o=r=null;switch(e.stretch){case Ze:o=!0;break;case le:o=!0}switch(i.stretch){case Ge:r=!0;break;case le:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===Ge||e===le),o===null&&(o=e===Ze||e===le),r===!0&&o===!0?ko(t,le,n):r===!0?ko(t,Ge,n):o===!0?ko(t,Ze,n):ko(t,oe,n)}function ko(t,e,i){if(i)return e;if(e===oe||(i=t.desiredSize,i.w()))return oe;if(t=t.angle,!isNaN(i.width))if(t!==90&&t!==270){if(e===Ge)return oe;if(e===le)return Ze}else{if(e===Ze)return oe;if(e===le)return Ge}if(!isNaN(i.height))if(t!==90&&t!==270){if(e===Ze)return oe;if(e===le)return Ge}else{if(e===Ge)return oe;if(e===le)return Ze}return e}function Gp(t,e){t.o=e?t.o|512:t.o&-513}function vu(t){return(t.o&1024)!==0}function Um(t,e){t.o=e?t.o|1024:t.o&-1025}function jh(t,e){t.o=e?t.o|2048:t.o&-2049}function js(t,e){t.o=e?t.o|4096:t.o&-4097}function Qo(t){return(t.o&8192)!==0}function yn(t,e){t.o=e?t.o|8192:t.o&-8193}function $n(t){return(t.o&16384)!==0}function yl(t,e){t.o=e?t.o|16384:t.o&-16385}s.Gj=function(){this.svg=null},s.wi=function(t){this.Me=t,this.svg!==null&&this.svg.remove()},s.Av=function(){},s.zv=function(t){return this.pa=t,Lh(this),!0},s.mm=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Uk())},s.kq=function(){return 0};function ml(t){var e=t.part;if(e instanceof b&&(t.portId!==null||t===e.port)){var i=e.diagram;i===null||i.undoManager.isUndoingRedoing||lk(e,t)}}function f2(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof _?t instanceof b?t.Bd():t.qm(t,function(i){ml(i)}):ml(t))}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ue(t,e,i,n):r=t,r.xd=this,t=this.ih(),t!==null&&O2(t)&&I("Cannot add a Binding to a template that has already been copied: "+r),this.localBindings===null&&(this.localBindings=new tt),this.localBindings.add(r),this},s.set=function(t){return Object.assign(this,t),this},s.Du=function(t){return Gm(this,t),this},s.apply=function(t){return t(this),this},s.nm=function(t){return ff(this,t),this},s.rz=function(){return this.ih()},s.ih=function(){for(var t=this instanceof _?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},s.Jv=function(t){return t.xd=this,this.animationTriggers===null&&(this.animationTriggers=new mt),this.animationTriggers.add(t.propertyName,t),this};function mn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var o=Oh.I(t);typeof o=="function"?(i=Gt(arguments),n=o(i),yt(n)||I('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=G.go[t]}if(n===null&&(r!=null&&r.constructor||I("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new r),r=1,n instanceof D&&1<i.length){o=n;var l=i[1];(typeof l=="string"||l instanceof HTMLDivElement)&&(fm(o,l),r++)}for(;r<i.length;r++)o=i[r],o===void 0?I("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+n):Gm(n,o);return n}function Gm(t,e){if(typeof e=="string")if(t instanceof Xt)t.text=e;else if(t instanceof vt)t.figure=e;else if(t instanceof Ei)t.source=e;else if(t instanceof _)e=Jn.I(e),e!==null&&(t.type=e);else if(t instanceof Et){var i=Xn(Et,e);i!==null?t.type=i:I("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof $?(e=Xn($,e),e!==null&&(t.type=e)):t instanceof jt&&(e=Xn(jt,e),e!==null&&(t.type=e));else if(e instanceof ot)t instanceof _||I("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof ce){var n;e.isRow&&typeof t.getRowDefinition=="function"?n=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(n=t.getColumnDefinition(e.index)),n instanceof ce?ld(n,e):I("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof Q)typeof t.qb=="function"&&t.qb(e);else if(e instanceof ye)t.type=e;else if(e instanceof ue)t instanceof ot||t instanceof ce?t.bind(e):I("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Jr)t instanceof ot?t.Jv(e):I("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Ee)t instanceof $&&t.type===$.m?t.figures.add(e):I("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof jt)t instanceof Ee?t.segments.add(e):I("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Wt)t instanceof D||t instanceof gt?t.layout=e:I("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Gm(t,e[i]);else if(typeof e=="object"&&e!==null)if(t instanceof Et){i=new Ke;for(var r in e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);ff(t,i)}else if(t instanceof ce){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&I("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&I("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new Ke;for(i in e)i!=="row"&&i!=="column"&&(r[i]=e[i]);ff(t,r)}else ff(t,e);else I('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function qo(t,e){Oh.add(t,e)}function Xp(t,e,i){i===void 0&&(i=null);var n=t[1];if(typeof i=="function"?i(n):typeof n=="string")return t.splice(1,1),n;if(e===void 0)throw Error("no "+(typeof i=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}B.Object.defineProperties(ot.prototype,{bindingId:{get:function(){return this.A!==null?this.A.zp:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new xu),this.A.zp=t)}},localBindings:{get:function(){return this.A!==null?this.A.te:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new xu),this.A.te=t)}},srcBindings:{get:function(){return this.A!==null?this.A.wm:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new xu),this.A.wm=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.Ci:null},set:function(t){var e=this.shadowVisible;e!==t&&(Se(this),this.A.Ci=t,this.Tc=!0,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Hb:null},set:function(t){var e=this.enabledChanged;e!==t&&(Se(this),this.A.Hb=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ua!==null?this.Ua.rr:Si},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ua===null&&(this.Ua=new Os),this.Ua.rr=t,this.v(),this.g("segmentOrientation",e,t),t===Si&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ua!==null?this.Ua.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ua===null&&(this.Ua=new Os),this.Ua.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ua!==null?this.Ua.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ua===null&&(this.Ua=new Os),this.Ua.m=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ua!==null?this.Ua.F:vo},set:function(t){var e=this.segmentOffset;e.D(t)||(t=t.J(),this.Ua===null&&(this.Ua=new Os),this.Ua.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.hg:Wn},set:function(t){var e=this.stretch;e!==t&&(Se(this),this.A.hg=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.xa:""},set:function(t){var e=this.name;e!==t&&(Se(this),this.A.xa=t,this.part!==null&&(this.part.Rh=null),this.g("name",e,t))}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",ot,"opacity"),this.pb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(kl(e,e.actualBounds)))}},filter:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.Tc=!0,this.g("filter",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(kl(e,e.actualBounds)))}},visible:{get:function(){return(this.o&1)!==0},set:function(t){var e=(this.o&1)!==0;e!==t&&(this.o^=1,this.g("visible",e,t),e=this.panel,e!==null?e.v():this.Dd()&&this.Yb(t),this.N(),f2(this))}},pickable:{get:function(){return(this.o&2)!==0},set:function(t){var e=(this.o&2)!==0;e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.o&4)!==0},set:function(t){var e=(this.o&4)!==0;e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.o&8)!==0},set:function(t){var e=(this.o&8)!==0;e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.o&16)!==0},set:function(t){var e=(this.o&16)!==0;e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.o&32)!==0},set:function(t){var e=(this.o&32)!==0;e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.o&64)!==0},set:function(t){var e=(this.o&64)!==0;e!==t&&(this.o^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.o&128)!==0},set:function(t){var e=(this.o&128)!==0;e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.fd:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&Mu(t,"GraphObject.areaBackground"),t instanceof Et&&t.freeze(),Se(this),this.A.fd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Na},set:function(t){var e=this.Na;e!==t&&(t!==null&&Mu(t,"GraphObject.background"),t instanceof Et&&t.freeze(),this.Na=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Dd())return this;if(this.Ng!==null)return this.Ng;var t;for(t=this.panel;t;){if(t instanceof lt)return this.Ng=t;t=t.panel}return null}},svg:{get:function(){return this.V},set:function(t){this.V=t}},panel:{get:function(){return this.Me}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,i=t.y,n=this.pa,r=n.x;n=n.y,(r===e||isNaN(r)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Av():(t=t.copy(),this.zv(t,r,n)&&this.g("position",new N(r,n),t))}},actualBounds:{get:function(){return this.Ib}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&(0>=t&&I("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Ca=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Kb=t,f2(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.hd},set:function(t){var e=t.width,i=t.height,n=this.hd,r=n.width,o=n.height;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.hd=t=t.J(),this.v(),this instanceof vt&&this.pc(),this.g("desiredSize",n,t),vu(this)&&(t=this.part,t!==null&&(gl(this,t,"width"),gl(this,t,"height"))))}},width:{get:function(){return this.hd.width},set:function(t){var e=this.hd.width;e===t||isNaN(e)&&isNaN(t)||(e=this.hd,this.hd=t=new ct(t,this.hd.height).freeze(),this.v(),this instanceof vt&&this.pc(),this.g("desiredSize",e,t),vu(this)&&(t=this.part,t!==null&&gl(this,t,"width")))}},height:{get:function(){return this.hd.height},set:function(t){var e=this.hd.height;e===t||isNaN(e)&&isNaN(t)||(e=this.hd,this.hd=t=new ct(this.hd.width,t).freeze(),this.v(),this instanceof vt&&this.pc(),this.g("desiredSize",e,t),vu(this)&&(t=this.part,t!==null&&gl(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:lu},set:function(t){var e=this.minSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),Se(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.m:C0},set:function(t){var e=this.maxSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),Se(this),this.A.m=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.tc}},naturalBounds:{get:function(){return this.dc}},margin:{get:function(){return this.Kg},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.Kg;e.D(t)||(this.Kg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return this.o&2048&&Up(this),this.Ab}},oe:{get:function(){return this.o&4096&&Up(this),this.wh}},animationTriggers:{get:function(){return this.A!==null?this.A.hb:null},set:function(t){this.animationTriggers!==t&&(Se(this),this.A.hb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.Pf:oe},set:function(t){this.reshapingBehavior!==t&&(Se(this),this.A.Pf=t)}},alignment:{get:function(){return this.Jb},set:function(t){var e=this.Jb;e.D(t)||(t.Lc()&&!t.Wb()&&I("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Jb=t=t.J(),Lh(this),this.g("alignment",e,t))}},column:{get:function(){return this.Ag},set:function(t){t=Math.round(t);var e=this.Ag;e!==t&&(0>t&&at(t,">= 0",ot,"column"),this.Ag=t,this.v(),this.g("column",e,t),this.svg!==null&&this.svg.remove())}},columnSpan:{get:function(){return this.A!==null?this.A.ob:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&at(t,">= 1",ot,"columnSpan"),Se(this),this.A.ob=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.io},set:function(t){t=Math.round(t);var e=this.io;e!==t&&(0>t&&at(t,">= 0",ot,"row"),this.io=t,this.v(),this.g("row",e,t),this.svg!==null&&this.svg.remove())}},rowSpan:{get:function(){return this.A!==null?this.A.Bi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&at(t,">= 1",ot,"rowSpan"),Se(this),this.A.Bi=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.Di:null},set:function(t){var e=this.spanAllocation;e!==t&&(Se(this),this.A.Di=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.sk},set:function(t){var e=this.sk;e.D(t)||(this.sk=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Yn},set:function(t){var e=this.Yn;if(e!==t){var i=this.part;i===null||i instanceof b||I("Cannot set portID on a Link: "+t),e!==null&&i!==null&&Lv(i,this),this.Yn=t,t!==null&&i!==null&&(i.Te=!0,ak(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.ba!==null?this.ba.yj:We},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Wc(),this.ba.yj=t,this.g("toSpot",e,t),ml(this))}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.wj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",ot,"toEndSegmentLength"),this.Wc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),ml(this))}},toShortLength:{get:function(){return this.ba!==null?this.ba.xj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Wc(),this.ba.xj=t,this.g("toShortLength",e,t),ml(this))}},toLinkable:{get:function(){return this.ba!==null?this.ba.Tr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Wc(),this.ba.Tr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.ba!==null?this.ba.Ur:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&at(t,">= 0",ot,"toMaxLinks"),this.Wc(),this.ba.Ur=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Xi:We},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Wc(),this.ba.Xi=t,this.g("fromSpot",e,t),ml(this))}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Vi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",ot,"fromEndSegmentLength"),this.Wc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),ml(this))}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Wi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Wc(),this.ba.Wi=t,this.g("fromShortLength",e,t),ml(this))}},fromLinkable:{get:function(){return this.ba!==null?this.ba.hq:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Wc(),this.ba.hq=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.ba!==null?this.ba.iq:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&at(t,">= 0",ot,"fromMaxLinks"),this.Wc(),this.ba.iq=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(Se(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.zh:null},set:function(t){var e=this.click;e!==t&&(Se(this),this.A.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.Fh:null},set:function(t){var e=this.doubleClick;e!==t&&(Se(this),this.A.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.Bh:null},set:function(t){var e=this.contextClick;e!==t&&(Se(this),this.A.Bh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.Mh:null},set:function(t){var e=this.mouseEnter;e!==t&&(Se(this),this.A.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Ph:null},set:function(t){var e=this.mouseLeave;e!==t&&(Se(this),this.A.Ph=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Qh:null},set:function(t){var e=this.mouseOver;e!==t&&(Se(this),this.A.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Oh:null},set:function(t){var e=this.mouseHover;e!==t&&(Se(this),this.A.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.Nh:null},set:function(t){var e=this.mouseHold;e!==t&&(Se(this),this.A.Nh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Of:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(Se(this),this.A.Of=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Xd:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(Se(this),this.A.Xd=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.Lh:null},set:function(t){var e=this.mouseDrop;e!==t&&(Se(this),this.A.Lh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.V:null},set:function(t){var e=this.actionDown;e!==t&&(Se(this),this.A.V=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ia:null},set:function(t){var e=this.actionMove;e!==t&&(Se(this),this.A.ia=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Ha:null},set:function(t){var e=this.actionUp;e!==t&&(Se(this),this.A.Ha=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(Se(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.$h:null},set:function(t){var e=this.toolTip;e!==t&&(Se(this),this.A.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.Ch:null},set:function(t){var e=this.contextMenu;e!==t&&(Se(this),this.A.Ch=t,this.g("contextMenu",e,t))}}}),ot.prototype.trigger=ot.prototype.Jv,ot.prototype.findBindingPanel=ot.prototype.ih,ot.prototype.findTemplateBinder=ot.prototype.rz,ot.prototype.setProperties=ot.prototype.nm,ot.prototype.apply=ot.prototype.apply,ot.prototype.attach=ot.prototype.Du,ot.prototype.set=ot.prototype.set,ot.prototype.isEnabledObject=ot.prototype.If,ot.prototype.isVisibleObject=ot.prototype.Ed,ot.prototype.isContainedBy=ot.prototype.rg,ot.prototype.getNearestIntersectionPoint=ot.prototype.rs,ot.prototype.getLocalPoint=ot.prototype.qs,ot.prototype.getDocumentScale=ot.prototype.Df,ot.prototype.getDocumentAngle=ot.prototype.li,ot.prototype.getDocumentBounds=ot.prototype.mi,ot.prototype.getDocumentPoint=ot.prototype.ga,ot.prototype.intersectsRect=ot.prototype.Xc,ot.prototype.containedInRect=ot.prototype.fh,ot.prototype.containsRect=ot.prototype.Re,ot.prototype.containsPoint=ot.prototype.ca,ot.prototype.raiseChanged=ot.prototype.g,ot.prototype.raiseChangedEvent=ot.prototype.cb,ot.prototype.addCopyProperty=ot.prototype.Vw;var Oh=null;ot.className="GraphObject",Oh=new mt,qo("Button",function(){function t(i,n){return i.diagram.hc(i.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===n})!==null}var e=mn(_,_.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof _){var r=i.fb("ButtonBorder");r!==null&&(r.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},mn(vt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ht(0,0,2.76142374915397,2.761423749153969),spot2:new ht(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.If()&&n instanceof _&&(i=n.fb("ButtonBorder"),i instanceof vt)){var r=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=r,r=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=r}},e.mouseLeave=function(i,n){n.If()&&n instanceof _&&(i=n.fb("ButtonBorder"),i instanceof vt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal))},e.actionDown=function(i,n){if(n.If()&&n instanceof _&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof vt){i=i.diagram;var o=i.skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=r.fill,r.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=r.stroke,r.stroke=l,i.skipsUndoManager=o}}},e.actionUp=function(i,n){if(n.If()&&n instanceof _&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof vt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.If()&&n instanceof _&&n._buttonFillPressed!==null){var r=n.fb("ButtonBorder");if(r instanceof vt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.If()&&n instanceof _&&n._buttonFillPressed!==null){var r=i.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(i,n)&&(i=n.fb("ButtonBorder"),i instanceof vt))){var o=r.skipsUndoManager;r.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),l=n._buttonStrokePressed,i.stroke!==l&&(i.stroke=l),r.skipsUndoManager=o}}},e}),qo("TreeExpanderButton",function(){var t=mn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},mn(vt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:uu},new ue("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).cp()),{visible:!1},new ue("visible","isTreeLeaf",function(e){return!e}).cp());return t.click=function(e,i){if(i=i.part,i instanceof Ct&&(i=i.adornedPart),i instanceof b){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),qo("SubGraphExpanderButton",function(){var t=mn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},mn(vt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:uu},new ue("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).cp()));return t.click=function(e,i){if(i=i.part,i instanceof Ct&&(i=i.adornedPart),i instanceof gt){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),qo("ToolTip",function(){return mn(Ct,_.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},mn(vt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ht(0,0,4,6),spot2:new ht(1,1,-4,-4)}))}),qo("ContextMenu",function(){return mn(Ct,_.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},new ue("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),qo("ContextMenuButton",function(){var t=mn("Button");t.stretch=Ge;var e=t.fb("ButtonBorder");return e instanceof vt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ht(0,0,2,3),e.spot2=new ht(1,1,-2,-2)),t}),qo("PanelExpanderButton",function(t){var e=Xp(t,"COLLAPSIBLE"),i=mn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},mn(vt,{name:"ButtonIcon",strokeWidth:2},new ue("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).cp(e)));return t=i.fb("ButtonBorder"),t instanceof vt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,r){var o=r.diagram;if(o!==null&&!o.isReadOnly){var l=r.ih();l===null&&(l=r.part),l!==null&&(r=l.fb(e),r!==null&&(n.handled=!0,o.Ea("Collapse/Expand Panel"),r.visible=!r.visible,o.eb("Collapse/Expand Panel")))}},i}),qo("CheckBoxButton",function(t){var e=Xp(t);return t=mn("Button",{desiredSize:new ct(14,14)},mn(vt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:le,geometryStretch:jr,visible:!1},e!==""?new ue("visible",e).Mx():[])),t.click=function(i,n){if(n instanceof _){var r=i.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){i.handled=!0;var o=n.fb("ButtonIcon");r.Ea("checkbox"),o.visible=!o.visible,typeof n._doClick=="function"&&n._doClick(i,n),r.eb("checkbox")}}},t}),qo("CheckBox",function(t){t=Xp(t),t=mn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new At(0,1,0,0)});var e=mn(_,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:new At(1),_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ot.None=oe=new Q(ot,"None",0),ot.Default=Wn=new Q(ot,"Default",0),ot.Vertical=Ze=new Q(ot,"Vertical",4),ot.Horizontal=Ge=new Q(ot,"Horizontal",5),ot.Fill=le=new Q(ot,"Fill",3),ot.Uniform=jr=new Q(ot,"Uniform",1),ot.UniformToFill=gf=new Q(ot,"UniformToFill",2),ot.FlipVertical=yf=new Q(ot,"FlipVertical",1),ot.FlipHorizontal=mf=new Q(ot,"FlipHorizontal",2),ot.FlipBoth=vf=new Q(ot,"FlipBoth",3),ot.make=mn,ot.getBuilders=function(){var t=new mt,e;for(e in Oh)if(e!==e.toLowerCase()){var i=Oh.I(e);typeof i=="function"&&t.add(e,i)}return t.freeze(),t},ot.defineBuilder=qo,ot.build=function(t,e,i){for(var n=[],r=2;r<arguments.length;++r)n[r-2]=arguments[r];if(r=Oh.I(t),typeof r=="function"&&(n=r([t].concat(n)),n instanceof ot))return e&&n.set(e),n;I('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},ot.takeBuilderArgument=Xp;function xu(){this.mc=!1,this.xa="",this.zp=-1,this.nb=this.wm=this.te=null,this.j="",this.hb=this.Di=this.Hb=this.Ch=this.$h=this.F=this.Ha=this.ia=this.V=this.Lh=this.Xd=this.Of=this.Nh=this.Oh=this.Qh=this.Ph=this.Mh=this.Bh=this.Fh=this.zh=null,this.u=lu,this.m=C0,this.hg=Wn,this.ob=this.Bi=1,this.Pf=oe,this.Oc=this.Ci=this.fd=null,this.Nc="category"}xu.prototype.copy=function(){var t=new xu;return t.xa=this.xa,t.zp=this.zp,t.te=this.te,t.nb=this.nb,t.j=this.j,t.zh=this.zh,t.Fh=this.Fh,t.Bh=this.Bh,t.Mh=this.Mh,t.Ph=this.Ph,t.Qh=this.Qh,t.Oh=this.Oh,t.Nh=this.Nh,t.Of=this.Of,t.Xd=this.Xd,t.Lh=this.Lh,t.V=this.V,t.ia=this.ia,t.Ha=this.Ha,t.F=this.F,t.$h=this.$h,t.Ch=this.Ch,t.Hb=this.Hb,t.Di=this.Di,t.hb=this.hb,t.u=this.u.J(),t.m=this.m.J(),t.hg=this.hg,t.Bi=this.Bi,t.ob=this.ob,t.Pf=this.Pf,t.fd=this.fd,t.Ci=this.Ci,t.Oc=this.Oc,t.Nc=this.Nc,t};function Os(){this.u=-1/0,this.m=0,this.F=vo,this.rr=Si,this.j=this.V="None"}Os.prototype.copy=function(){var t=new Os;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.rr=this.rr,t.V=this.V,t.j=this.j,t},Os.className="LinkElementSettings";function wf(){this.yj=this.Xi=$e,this.xj=this.Wi=this.wj=this.Vi=NaN,this.Tr=this.hq=null,this.Ur=this.iq=1/0}wf.prototype.copy=function(){var t=new wf;return t.Xi=this.Xi.J(),t.yj=this.yj.J(),t.Vi=this.Vi,t.wj=this.wj,t.Wi=this.Wi,t.xj=this.xj,t.hq=this.hq,t.Tr=this.Tr,t.iq=this.iq,t.Ur=this.Ur,t},wf.className="LinkSettings";function vl(){this.ha=[1,0,0,1,0,0]}vl.prototype.copy=function(){var t=new vl;return t.ha[0]=this.ha[0],t.ha[1]=this.ha[1],t.ha[2]=this.ha[2],t.ha[3]=this.ha[3],t.ha[4]=this.ha[4],t.ha[5]=this.ha[5],t},vl.prototype.translate=function(t,e){this.ha[4]+=this.ha[0]*t+this.ha[2]*e,this.ha[5]+=this.ha[1]*t+this.ha[3]*e},vl.prototype.scale=function(t,e){this.ha[0]*=t,this.ha[1]*=t,this.ha[2]*=e,this.ha[3]*=e},vl.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t!==0){if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.ha[1]*t+this.ha[3]*n,o=this.ha[0]*-n+this.ha[2]*t,l=this.ha[1]*-n+this.ha[3]*t;this.ha[0]=this.ha[0]*t+this.ha[2]*n,this.ha[1]=r,this.ha[2]=o,this.ha[3]=l,this.translate(-e,-i)}},vl.className="STransform";function wu(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.hx=[],this.pattern=null}wu.prototype.addColorStop=function(t,e){this.hx.push({offset:t,color:e})},wu.className="SGradient";function Or(t,e,i){this.ownerDocument=t=e===void 0?G.document:e,this.cA="http://www.w3.org/2000/svg",t!==void 0&&(this.La=this.Ud("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.hs=null,this.context=new Ki(this,i)}Or.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.La.setAttributeNS(null,"width",i+"px"),this.La.setAttributeNS(null,"height",n+"px"),this.La.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.ww.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.ww.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1},Or.prototype.Ud=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.cA,t),yt(e))for(var n in e)t.setAttributeNS(n==="href"?"http://www.w3.org/1999/xlink":"",n,e[n]);return i!==void 0&&(t.textContent=i),t},Or.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Or.prototype.focus=function(){this.La.focus()},Or.prototype.nx=function(){this.ownerDocument=null},B.Object.defineProperties(Or.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.setAttribute("width",t+"px")}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.setAttribute("height",t+"px")}},style:{get:function(){return this.La.style}}}),Or.className="SVGSurface";function Ki(t,e){this.Gv=t,this.svg=t.La,this.stack=[],this.nh=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.Il=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Vg=this.Br=this.Ar=0,this.yd=this.$c=null,this.path=[],this.Yl={},this.Ct=!1,this.Yg=null,this.uj=0,this.rb=new vl,this.j=_p(this),this.Nj=_p(this,"gojs-diagram"),this.Hl=this.ti=null;var i=su++,n=this.Ud("clipPath",{id:"mainClip"+i});n.appendChild(this.Ud("rect",{x:0,y:0,width:t.width,height:t.height})),this.ww=n,this.svg.appendChild(this.j),this.j.appendChild(this.Nj),this.svg.appendChild(n),this.j.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.eA={},this.isTemporary=!!e,this.filter="",this.bk=null}function c2(t,e,i,n,r,o,l){t.Nj===void 0?Mf(t,e,i,n,r,o,l):t.Nj.setAttribute("transform","matrix("+e+", "+i+", "+n+", "+r+", "+o+", "+l+")")}s=Ki.prototype,s.arc=function(t,e,i,n,r,o,l,h){var a=2*Math.PI,f=a-1e-6,p=i*Math.cos(n),d=i*Math.sin(n),y=t+p,m=e+d,x=o?0:1;n=o?n-r:r-n,(1e-6<Math.abs(l-y)||1e-6<Math.abs(h-m))&&this.path.push(["L",y,+m]),0>n&&(n=n%a+a),n>f?(this.path.push(["A",i,i,0,1,x,t-p,e-d]),this.path.push(["A",i,i,0,1,x,y,m])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),x,t+i*Math.cos(r),e+i*Math.sin(r)])},s.beginPath=function(){this.path=[],this.Yl={stroke:"none",fill:"none"}},s.Se=function(t){this.addPath(this.path,this.rb,t||0)},s.bezierCurveTo=function(t,e,i,n,r,o){this.path.push(["C",t,e,i,n,r,o])},s.clearRect=function(){},s.clip=function(){this.Yl.clipPath=!0},s.closePath=function(){this.path.push(["z"])},s.createLinearGradient=function(t,e,i,n){var r=new wu("linear");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},s.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.eA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+su++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Ud("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Ud(Nh,r)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},s.createRadialGradient=function(t,e,i,n,r,o){var l=new wu("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=r,l.r2=o,l};function p2(t,e,i,n,r,o,l,h,a){n=h/n,r=a/r,o===0&&l===0||t.rb.translate(o,l),n===1&&r===1||t.rb.scale(n,r),e===0&&i===0||t.rb.translate(-e,-i)}s.drawImage=function(t,e,i,n,r,o,l,h,a){var f="";t instanceof HTMLCanvasElement&&(f=t.toDataURL()),t instanceof HTMLImageElement&&(f=t.getAttribute("src"));var p=t instanceof HTMLImageElement?t.naturalWidth:t.width;t=t instanceof HTMLImageElement?t.naturalHeight:t.height,n===void 0&&(o=e,l=i,h=n=p,a=r=t),n=n||0,r=r||0,h=h||0,a=a||0,p2(this,e,i,n,r,o||0,l||0,h,a),o={x:0,y:0,width:p||n,height:t||r,href:f},O.$(n,h)&&O.$(r,a)?f.toLowerCase().indexOf(".svg")===-1&&f.toLowerCase().indexOf("data:image/svg")===-1&&(o.preserveAspectRatio="xMidYMid slice"):o.preserveAspectRatio="none",(e!==0||i!==0||n!==p||r!==t)&&(n+=e,r+=i,o["clip-path"]="path('M "+e+","+i+" L "+n+" "+i+" L "+n+" "+r+" L "+e+" "+r+" z')"),Fh(this,Nh,o,this.rb),this.addElement(Nh,o)},s.fill=function(t){t&&(this.Yl["fill-rule"]="evenodd"),Xm(this,this.Yl)},s.ng=function(t,e){this.clipInsteadOfFill?this.clip():this.fill(e)},s.fillRect=function(t,e,i,n){t=[t,e,i,n],t={x:t[0],y:t[1],width:t[2],height:t[3]},Fh(this,"fill",t,this.rb),this.addElement("rect",t)},s.px=function(t,e,i,n){t={x:t,y:e,width:i,height:n},Fh(this,"fill",t,this.rb),Xm(this,t),this.svg.prepend(this.Ud("rect",t))},s.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},Fh(this,"fill",e,this.rb),this.addElement("text",e,t[0])},s.lineTo=function(t,e){this.path.push(["L",t,e])},s.moveTo=function(t,e){this.path.push(["M",t,e])},s.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},s.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},s.restore=function(){this.rb=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.bk=t.bk},s.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,bk:this.bk});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.rb.copy())},s.setTransform=function(t,e,i,n,r,o){t===1&&e===0&&i===0&&n===1&&r===0&&o===0||Mf(this,t,e,i,n,r,o)};function d2(t){return t=t.rb.ha,"matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}s.scale=function(t,e){this.rb.scale(t,e)},s.translate=function(t,e){this.rb.translate(t,e)},s.transform=function(){},s.xc=function(){},s.stroke=function(){y2(this,this.Yl)},s.jk=function(){this.clipInsteadOfFill||this.stroke()},s.Ud=function(t,e,i){return this.Gv.Ud(t,e,i)},s.addElement=function(t,e,i){return t=this.Ud(t,e,i),this.yd!==null?this.yd.appendChild(t):this.yd=t,this.$c=t};function Fh(t,e,i,n){e==="fill"?Xm(t,i):e==="stroke"&&y2(t,i),n!==null&&(t=n.ha,i.transform="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")")}function Xm(t,e){t.fillStyle instanceof wu?e.fill=_m(t,t.fillStyle,!0):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle}function g2(t,e,i){i=i?"fill":"stroke",t.fillStyle instanceof wu?e.setAttributeNS(null,"fill",_m(t,t.fillStyle,!0)):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.setAttributeNS(null,i,"rgb("+t[1]+","+t[2]+","+t[3]+")"),e.setAttributeNS(null,i+"-opacity",t[4])):e.setAttributeNS(null,i,t.fillStyle)}function y2(t,e){if(t.strokeStyle instanceof wu)e.stroke=_m(t,t.strokeStyle,!1);else if(/^rgba\(/.test(t.strokeStyle)){var i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle);e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]}else e.stroke=t.strokeStyle;e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit,t.Ct&&(e["stroke-dasharray"]=t.Yg.toString(),e["stroke-dashoffset"]=t.uj)}function _m(t,e,i){var n="";if(n=t.Hl!==null?t.Hl.getAttribute(i?"fill":"stroke"):null,n!==null&&n.indexOf("GRAD")!==-1?(n=n.split("#")[1].slice(0,-1),i=t.svg.getElementById(n),i!==null&&i.remove()):n="GRAD"+su++,e.type==="linear")i=t.Ud("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")i=t.Ud("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else throw Error("invalid gradient");var r=e.hx;e=r.length;for(var o=[],l=0;l<e;l++){var h=r[l],a=h.color;h={offset:h.offset,"stop-color":a},/^rgba\(/.test(a)&&(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a),h["stop-color"]="rgb("+a[1]+","+a[2]+","+a[3]+")",h["stop-opacity"]=a[4]),o.push(h)}for(o.sort(function(f,p){return f.offset>p.offset?1:-1}),r=0;r<e;r++)i.appendChild(t.Ud("stop",o[r]));return t.svg.appendChild(i),"url(#"+n+")"}s.addPath=function(t,e,i){for(var n=[],r=0;r<t.length;r++){var o=Gt(t[r]),l=[o.shift()];if(l[0]==="A")l.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)l.push(o.shift()+","+o.shift());n.push(l.join(" "))}if(n=n.join(" "),t=this.Yl,t.clipPath)0<this.nh.length&&this.nh[this.nh.length-1].setAttributeNS(null,"clip-path",'path("'+n+'")');else if(t.d=n,Fh(this,"",t,e),this.Hl!==null)if(e=this.Hl,e.nodeName!=="g")for(var h in t)h!=="transform"&&e.setAttributeNS(null,h,t[h]);else{h=e.getElementsByTagName("path");for(var a in t)a!=="transform"&&h[i].setAttributeNS(null,a,t[a])}else this.addElement("path",t)};function Mf(t,e,i,n,r,o,l){var h=new vl;h.ha=[e,i,n,r,o,l],e={},Fh(t,"g",e,h),h=t.addElement("g",e),t.nh.push(h)}function _p(t,e){var i={};return e&&(i.class=e),e=t.addElement("g",i),t.nh.push(e),e}s.Ev=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i};function Qr(t){t.Il=!1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Po(t){t.Il=!0,t.shadowOffsetX=t.Ar,t.shadowOffsetY=t.Br,t.shadowBlur=t.Vg}s.js=function(t,e){this.Ct=!0,this.Yg=t,this.uj=e},s.fs=function(){this.Ct=!1},s.Uc=function(){},s.Zx=function(){},Ki.prototype.rotate=function(t){this.rb.rotate(57.2958*t,0,0)},Ki.prototype.getImageData=function(){return null},Ki.prototype.measureText=function(){return null};function Hp(t,e){e=e.getAttribute("fill"),e!==null&&(e=e.split("#"),e.length!==1&&(e=t.svg.getElementById(e[1].slice(0,-1)),e!==null&&t.svg.innerHTML.match(new RegExp(e.id,"g")).length===1&&e.remove()))}Ki.prototype.Hs=function(t){t.svg!==null&&t.svg.parentNode===this.Nj&&t.svg.remove()},Ki.className="SVGContext",D.prototype.Cs=function(t){this.pj.contains("SVG")||this.bs("SVG",new Or(this,G.document));var e=new Or(this,G.document,!0);t===void 0&&(t=new Ke);var i=this;return WS(this,function(n,r){return n=$S(i,n,"SVG",e),n=n!==null?n.svg:null,typeof r=="function"?(r(n),null):n},t)},D.prototype.makeSvg=D.prototype.Cs,D.prototype.av=function(t){return this.Cs(t)},D.prototype.makeSVG=D.prototype.av;function Fn(t,e,i,n){this.ownerDocument=e=e===void 0?G.document:e,this.hs=null,e=e.createElement("canvas"),e.tabIndex=0,this.La=e,this.La.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new xl(e,i,n),e.H=t}Fn.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0):!1},Fn.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},Fn.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Fn.prototype.focus=function(){this.La.focus()},Fn.prototype.nx=function(){this.ownerDocument=this.La.H=null},B.Object.defineProperties(Fn.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),Fn.className="CanvasSurface";function xl(t,e,i){this.Z=t.getContext?t.getContext("2d",e):null,this.Z===null&&I("Browser does not support HTML Canvas Element"),this.ct=this.et=this.dt="",this.Hm=!1,this.Vg=this.Br=this.Ar=0,this.Il=!1,this.El=new wt,this.isTemporary=!!i}s=xl.prototype,s.Zx=function(t){this.Z.imageSmoothingEnabled=t},s.arc=function(t,e,i,n,r,o){this.Z.arc(t,e,i,n,r,o)},s.beginPath=function(){this.Z.beginPath()},s.Se=function(){},s.bezierCurveTo=function(t,e,i,n,r,o){this.Z.bezierCurveTo(t,e,i,n,r,o)},s.clearRect=function(t,e,i,n){this.xc(),this.Z.clearRect(t,e,i,n)},s.clip=function(){this.Z.clip()},s.closePath=function(){this.Z.closePath()},s.createLinearGradient=function(t,e,i,n){return this.Z.createLinearGradient(t,e,i,n)},s.createPattern=function(t,e){return this.Z.createPattern(t,e)},s.createRadialGradient=function(t,e,i,n,r,o){return this.Z.createRadialGradient(t,e,i,n,r,o)},s.drawImage=function(t,e,i,n,r,o,l,h,a){n===void 0?this.Z.drawImage(t,e,i):this.Z.drawImage(t,e,i,n,r,o,l,h,a)},s.fill=function(t){this.Z.fill(t?"evenodd":"nonzero")},s.fillRect=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},s.px=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},s.fillText=function(t,e,i){this.Z.fillText(t,e,i)},s.getImageData=function(t,e,i,n){return this.Z.getImageData(t,e,i,n)},s.lineTo=function(t,e){this.Z.lineTo(t,e)},s.measureText=function(t){return this.Z.measureText(t)},s.moveTo=function(t,e){this.Z.moveTo(t,e)},s.quadraticCurveTo=function(t,e,i,n){this.Z.quadraticCurveTo(t,e,i,n)},s.rect=function(t,e,i,n){this.Z.rect(t,e,i,n)},s.restore=function(){this.Z.restore()},s.save=function(){this.xc(),this.Z.save()},xl.prototype.rotate=function(t){this.El.rotate(57.2958*t,0,0)},s=xl.prototype,s.setTransform=function(t,e,i,n,r,o){this.El.setTransform(t,e,i,n,r,o)},s.scale=function(t,e){this.El.scale(t,e)},s.translate=function(t,e){this.El.translate(t,e)},s.stroke=function(){this.Z.stroke()},s.transform=function(t,e,i,n,r,o){if(t!==1||e!==0||i!==0||n!==1||r!==0||o!==0){var l=this.El,h=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*r+l.m21*o+l.dx,l.dy=l.m12*r+l.m22*o+l.dy,l.m11=h,l.m12=t,l.m21=e,l.m22=i}},s.xc=function(){var t=this.El;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},s.ng=function(t,e){if(t instanceof Et&&t.type===vn){var i=t.yk;t=t.ft,t>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.Hm?this.clip():this.fill(e),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.Hm?this.clip():this.fill(e)},s.jk=function(){this.Hm||this.stroke()},s.Ev=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},s.js=function(t,e){var i=this.Z;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)},s.fs=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(pj),t.lineDashOffset=0)},s.Uc=function(t){t&&(this.dt=""),this.ct=this.et=""},s.Hs=function(){},B.Object.defineProperties(xl.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.ct!==t&&(this.ct=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.dt!==t&&(this.dt=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.et!==t&&(this.et=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},filter:{get:function(){return this.Z.filter},set:function(t){this.Z.filter=t===""?"none":t}},clipInsteadOfFill:{get:function(){return this.Hm},set:function(t){this.Hm=t}}});var pj=Object.freeze([]);xl.className="CanvasSurfaceContext";function Sf(){this.F=this.m=this.u=this.j=0}Sf.className="ColorNumbers";function Et(t,e){Ih||(Zm(),Ih=!0),Le(this),this._isFrozen=!1,t===void 0?(this.na=bo,this.xk="black"):typeof t=="string"?(this.na=bo,this.xk=t):(this.na=t,this.xk="black"),t=this.na,t===Co?(this.Qd=Mo,this.Lk=hu):this.Lk=t===vn?this.Qd=Rt:this.Qd=We,this.Gr=0,this.Xp=NaN,this.xe=this.cr=this.we=null,this.ft=this.yk=0,e&&Object.assign(this,e)}Et.prototype.copy=function(){var t=new Et;return t.na=this.na,t.xk=this.xk,t.Qd=this.Qd.J(),t.Lk=this.Lk.J(),t.Gr=this.Gr,t.Xp=this.Xp,this.we!==null&&(t.we=this.we.copy()),t.cr=this.cr,t},s=Et.prototype,s.freeze=function(){return this._isFrozen=!0,this.we!==null&&this.we.freeze(),this},s.ka=function(){return Object.isFrozen(this)&&I("cannot thaw constant: "+this),this._isFrozen=!1,this.we!==null&&this.we.ka(),this},s.qb=function(t){t.classType===Et&&(this.type=t)},s.toString=function(){var t="Brush(";if(this.type===bo)t+=this.color;else if(t=this.type===Co?t+"Linear ":this.type===vn?t+"Radial ":this.type===Rh?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},s.addColorStop=function(t,e){return this._isFrozen&&nt(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&at(t,"0 <= loc <= 1",Et,"addColorStop:loc"),this.we===null&&(this.we=new mt),this.we.add(t,e),this.na===bo&&(this.type=Co),this.xe=null,this},s.Wz=function(t,e){if(this._isFrozen&&nt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Bh:e,this.type===bo)No(this.color),this.color=Ah(t,e);else if((this.type===Co||this.type===vn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)No(i.value),this.addColorStop(i.key,Ah(t,e));return this};function m2(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?Bh:i,No(t),Ah(e,i)}s.Yy=function(t,e){if(this._isFrozen&&nt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Bh:e,this.type===bo)No(this.color),this.color=Ah(-t,e);else if((this.type===Co||this.type===vn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)No(i.value),this.addColorStop(i.key,Ah(-t,e));return this};function v2(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?Bh:i,No(t),Ah(-e,i)}function Hm(t,e,i){No(t),t=Ht.j;var n=Ht.u,r=Ht.m,o=Ht.F;return No(e),i===void 0&&(i=.5),"rgba("+Math.round((Ht.j-t)*i+t)+", "+Math.round((Ht.u-n)*i+n)+", "+Math.round((Ht.m-r)*i+r)+", "+Math.round((Ht.F-o)*i+o)+")"}s.Hx=function(){if(this.type===bo)return Eh(this.color);if((this.type===Co||this.type===vn)&&this.colorStops!==null){var t=this.colorStops;if(this.type===vn)return Eh(t.first().value);if(t.get(.5)!==null)return Eh(t.get(.5));if(t.count===2)return t=t.Fa(),Eh(Hm(t[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,o=1;e.next();){var l=e.key,h=Math.abs(.5-e.key);r>o&&h<r?(i=l,r=h):o>=r&&h<o&&(n=l,o=h)}return i>n&&(o=i,i=n,n=o,o=r),r=n-i,Eh(Hm(t.get(i),t.get(n),1-o/r))}return!1};function Eh(t){return t?t instanceof Et?t.Hx():(No(t),128>(299*Ht.j+587*Ht.u+114*Ht.m)/1e3):!1}function Ah(t,e){switch(e){case Bh:e=100*Wm(Ht.j);var i=100*Wm(Ht.u),n=100*Wm(Ht.m);return wi.j=.4124564*e+.3575761*i+.1804375*n,wi.u=.2126729*e+.7151522*i+.072175*n,wi.m=.0193339*e+.119192*i+.9503041*n,wi.F=Ht.F,e=Jm(wi.j/Dh[0]),i=Jm(wi.u/Dh[1]),n=Jm(wi.m/Dh[2]),qr.j=116*i-16,qr.u=500*(e-i),qr.m=200*(i-n),qr.F=wi.F,qr.j=Math.min(100,Math.max(0,qr.j+100*t)),t=(qr.j+16)/116,e=t-qr.m/200,wi.j=Dh[0]*x2(qr.u/500+t),wi.u=Dh[1]*(qr.j>Kp*Qm?Math.pow(t,3):qr.j/Kp),wi.m=Dh[2]*x2(e),wi.F=qr.F,t=-.969266*wi.j+1.8760108*wi.u+.041556*wi.m,e=.0556434*wi.j+-.2040259*wi.u+1.0572252*wi.m,Ht.j=255*$m((3.2404542*wi.j+-1.5371385*wi.u+-.4985314*wi.m)/100),Ht.u=255*$m(t/100),Ht.m=255*$m(e/100),Ht.F=wi.F,Ht.j=Math.round(Ht.j),255<Ht.j?Ht.j=255:0>Ht.j&&(Ht.j=0),Ht.u=Math.round(Ht.u),255<Ht.u?Ht.u=255:0>Ht.u&&(Ht.u=0),Ht.m=Math.round(Ht.m),255<Ht.m?Ht.m=255:0>Ht.m&&(Ht.m=0),"rgba("+Ht.j+", "+Ht.u+", "+Ht.m+", "+Ht.F+")";case w2:return Km(),rn.m=Math.min(100,Math.max(0,rn.m+100*t)),"hsla("+rn.j+", "+rn.u+"%, "+rn.m+"%, "+rn.F+")";default:I("Unknown color space: "+e)}}function No(t){Ih||(Zm(),Ih=!0);var e=qm;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Ht.j=t[0],Ht.u=t[1],Ht.m=t[2],Ht.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Ht.j=0,Ht.u=0,Ht.m=0,Ht.F=1)}}function Km(){var t=Ht.j/255,e=Ht.u/255,i=Ht.m/255,n=Math.max(t,e,i),r=Math.min(t,e,i),o=n-r;if(r=(n+r)/2,o===0)var l=t=0;else{switch(n){case t:l=(e-i)/o%6;break;case e:l=(i-t)/o+2;break;case i:l=(t-e)/o+4}l*=60,0>l&&(l+=360),t=o/(1-Math.abs(2*r-1))}rn.j=Math.round(l),rn.u=Math.round(100*t),rn.m=Math.round(100*r),rn.F=Ht.F}function Wm(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $m(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Jm(t){return t>Qm?Math.pow(t,1/3):(Kp*t+16)/116}function x2(t){var e=t*t*t;return e>Qm?e:(116*t-16)/Kp}function Mu(t,e){typeof t!="string"&&(t instanceof Et||I("Value for "+e+" must be a color string or a Brush, not "+t))}function Zm(){qm=Kn?new Fn(null,void 0,{willReadFrequently:!0}).context:null}B.Object.defineProperties(Et.prototype,{type:{get:function(){return this.na},set:function(t){this._isFrozen&&nt(this,t),this.na=t,this.start.Lc()&&(t===Co?this.start=Mo:t===vn&&(this.start=Rt)),this.end.Lc()&&(t===Co?this.end=hu:t===vn&&(this.end=Rt)),this.xe=null}},color:{get:function(){return this.xk},set:function(t){this._isFrozen&&nt(this,t),this.xk=t,this.xe=null}},start:{get:function(){return this.Qd},set:function(t){this._isFrozen&&nt(this,t),this.Qd=t.J(),this.xe=null}},end:{get:function(){return this.Lk},set:function(t){this._isFrozen&&nt(this,t),this.Lk=t.J(),this.xe=null}},startRadius:{get:function(){return this.Gr},set:function(t){this._isFrozen&&nt(this,t),0>t&&at(t,">= zero",Et,"startRadius"),this.Gr=t,this.xe=null}},endRadius:{get:function(){return this.Xp},set:function(t){this._isFrozen&&nt(this,t),0>t&&at(t,">= zero",Et,"endRadius"),this.Xp=t,this.xe=null}},colorStops:{get:function(){return this.we},set:function(t){this._isFrozen&&nt(this,t),this.we=t,this.xe=null}},pattern:{get:function(){return this.cr},set:function(t){this._isFrozen&&nt(this,t),this.cr=t,this.xe=null}}}),Et.prototype.isDark=Et.prototype.Hx,Et.prototype.darkenBy=Et.prototype.Yy,Et.prototype.lightenBy=Et.prototype.Wz,Et.prototype.addColorStop=Et.prototype.addColorStop;var Qm=216/24389,Kp=24389/27,Dh=[95.047,100,108.883],qm=null,Ht=new Sf,rn=new Sf,wi=new Sf,qr=new Sf,Ih=!1;Et.className="Brush";var bo;Et.Solid=bo=new Q(Et,"Solid",0);var Co;Et.Linear=Co=new Q(Et,"Linear",1);var vn;Et.Radial=vn=new Q(Et,"Radial",2);var Rh;Et.Pattern=Rh=new Q(Et,"Pattern",4);var Bh;Et.Lab=Bh=new Q(Et,"Lab",5);var w2;Et.HSL=w2=new Q(Et,"HSL",6),Et.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Et.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;Ih||(Zm(),Ih=!0);var e=qm;if(e===null)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i?!0:(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Et.lighten=function(t){return m2(t)},Et.lightenBy=m2,Et.darken=function(t){return v2(t)},Et.darkenBy=v2,Et.mix=Hm,Et.isDark=Eh;function ye(){this.xa="Base"}ye.prototype.measure=function(){},ye.prototype.Zz=function(t,e,i,n,r){t.measure(e,i,n,r)},ye.prototype.arrange=function(){},ye.prototype.Oy=function(t,e,i,n,r,o){t.arrange(e,i,n,r,o)},ye.prototype.iA=function(t){t.Uj()},ye.prototype.fc=function(){},B.Object.defineProperties(ye.prototype,{name:{get:function(){return this.xa},set:function(t){this.xa=t}},classType:{get:function(){return _}}}),ye.prototype.remeasureObject=ye.prototype.iA,ye.prototype.arrangeElement=ye.prototype.Oy,ye.prototype.measureElement=ye.prototype.Zz,ye.className="PanelLayout";function Wp(){this.xa="Base"}V(Wp,ye),Wp.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length;t=To(t);for(var a=0;a<h;a++){var f=n[a];if(f.visible||f===t){var p=f.margin,d=p.right+p.left;p=p.top+p.bottom,f.measure(e,i,o,l);var y=f.measuredBounds;d=Math.max(y.width+d,0),p=Math.max(y.height+p,0),y=f.position.x;var m=f.position.y;isFinite(y)||(y=0),isFinite(m)||(m=0),f instanceof vt&&f.isGeometryPositioned&&(f=f.strokeWidth/2,y-=f,m-=f),Be(r,y,m,d,p)}}},Wp.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var o=e[r],l=o.measuredBounds,h=o.margin,a=o.position.x,f=o.position.y;if(a=isNaN(a)?-t:a-t,f=isNaN(f)?-i:f-i,o instanceof vt&&o.isGeometryPositioned){var p=o.strokeWidth/2;a-=p,f-=p}o.visible&&o.arrange(a+h.left,f+h.top,l.width,l.height)}};function $p(){this.xa="Base"}V($p,ye),$p.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length;e=Vt(),o=To(t);for(var a=0;a<h;a++){var f=n[a];if(f.visible||f===o){var p=cr(f,!1);if(p!==oe&&p!==Ge)e.push(f);else{f.measure(1/0,i,0,l),p=f.margin,f=f.measuredBounds;var d=Math.max(f.height+p.top+p.bottom,0);r.width+=Math.max(f.width+p.right+p.left,0),r.height=Math.max(r.height,d)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)a=e[t],(a.visible||a===o)&&(p=a.margin,h=p.right+p.left,p=p.top+p.bottom,a.measure(1/0,i,0,l),a=a.measuredBounds,p=Math.max(a.height+p,0),r.width+=Math.max(a.width+h,0),r.height=Math.max(r.height,p));zt(e)},$p.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.top,l=t.isOpposite,h=l?i.width:r.left,a=0;a<n;a++){var f=o,p=e[a];if(p.visible){var d=p.measuredBounds,y=p.margin,m=y.top+y.bottom,x=o+r.bottom,M=d.height,k=cr(p,!1);(isNaN(p.desiredSize.height)&&k===le||k===Ze)&&(M=Math.max(i.height-m-x,0)),m=M+m+x,x=p.alignment,x.Wb()&&(x=t.defaultAlignment),x.sb()||(x=Rt),l&&(h-=d.width+y.left+y.right),p.arrange(h+x.offsetX+y.left,f+x.offsetY+y.top+(i.height*x.y-m*x.y),d.width,M),l||(h+=d.width+y.left+y.right)}}};function Jp(){this.xa="Base"}V(Jp,ye),Jp.prototype.measure=function(t,e,i,n,r,o){var l=n.length;i=Vt();for(var h=To(t),a=0;a<l;a++){var f=n[a];if(f.visible||f===h){var p=cr(f,!1);if(p!==oe&&p!==Ze)i.push(f);else{var d=f.margin;p=d.right+d.left,d=d.top+d.bottom,f.measure(e,1/0,o,0),f=f.measuredBounds,wo(r,Math.max(r.width,Math.max(f.width+p,0)),r.height+Math.max(f.height+d,0))}}}if(n=i.length,n!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)a=i[t],(a.visible||a===h)&&(f=a.margin,l=f.right+f.left,f=f.top+f.bottom,a.measure(e,1/0,o,0),a=a.measuredBounds,f=Math.max(a.height+f,0),r.width=Math.max(r.width,Math.max(a.width+l,0)),r.height+=f);zt(i)}},Jp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.left,l=t.isOpposite,h=l?i.height:r.top,a=0;a<n;a++){var f=o,p=e[a];if(p.visible){var d=p.measuredBounds,y=p.margin,m=y.left+y.right,x=o+r.right,M=d.width,k=cr(p,!1);(isNaN(p.desiredSize.width)&&k===le||k===Ge)&&(M=Math.max(i.width-m-x,0)),m=M+m+x,x=p.alignment,x.Wb()&&(x=t.defaultAlignment),x.sb()||(x=Rt),l&&(h-=d.height+y.bottom+y.top),p.arrange(f+x.offsetX+y.left+(i.width*x.x-m*x.x),h+x.offsetY+y.top,M,d.height),l||(h+=d.height+y.bottom+y.top)}}};function Zp(){this.xa="Base"}V(Zp,ye),Zp.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length,a=t.Pb(),f=a.margin,p=f.right+f.left,d=f.top+f.bottom;a.measure(e,i,o,l);var y=a.measuredBounds;o=y.width,l=y.height;var m=Math.max(o+p,0),x=Math.max(l+d,0),M=t.isClipping,k=z.allocAt(-f.left,-f.top,m,x),S=z.allocAt(0,0,o,l);bm(a,S,!0),o=S.width,l=S.height;for(var C=!0,T=To(t),L=0;L<h;L++){var j=n[L];y=e;var A=i;if(j!==a&&(j.visible||j===T)){f=j.margin;var Z=f.left,it=f.top;switch(m=f.right+f.left,x=f.top+f.bottom,f=cr(j,!1),f){case le:y=o,A=l,it=Z=x=m=0;break;case Ge:y=o,Z=m=0;break;case Ze:A=l,it=x=0}j.measure(y,A,0,0),y=j.measuredBounds,m=Math.max(y.width+m,0),x=Math.max(y.height+x,0),f=j.alignment,f.Wb()&&(f=t.defaultAlignment),f.sb()||(f=Rt);var et=j.alignmentFocus;if(et.Wb()&&(et=Rt),A=null,j instanceof _&&j.$e!==""&&(A=j.fb(j.$e),A===j&&(A=null)),Z=S.x-Z,it=S.y-it,A!==null){for(j.arrange(0,0,y.width,y.height),y=A.actualBounds,y=N.allocAt(y.x+(et.x*y.width-et.offsetX),y.y+(et.y*y.height-et.offsetY)),A=A.panel;A!==j;)A.transform.Ga(y),A=A.panel;Z+=f.x*o+f.offsetX-y.x,it+=f.y*l+f.offsetY-y.y,N.free(y)}else Z+=f.x*o+f.offsetX-(et.x*y.width+et.offsetX),it+=f.y*l+f.offsetY-(et.y*y.height+et.offsetY);C?(C=!1,r.h(Z,it,m,x)):Be(r,Z,it,m,x)}}switch(C?r.assign(k):M?r.Uu(S.x,S.y,S.width,S.height):Be(r,k.x,k.y,k.width,k.height),z.free(k),z.free(S),f=a.stretch,f===Wn&&(f=cr(a,!1)),f){case oe:return;case le:if(!isFinite(e)&&!isFinite(i))return;break;case Ge:if(!isFinite(e))return;break;case Ze:if(!isFinite(i))return}for(y=a.measuredBounds,o=y.width,l=y.height,m=Math.max(o+p,0),x=Math.max(l+d,0),f=a.margin,S=z.allocAt(-f.left,-f.top,m,x),bm(a,S,!0),o=S.width,l=S.height,e=0;e<h;e++)i=n[e],i===a||!i.visible&&i!==T||(f=i.margin,m=f.right+f.left,x=f.top+f.bottom,y=i.measuredBounds,m=Math.max(y.width+m,0),x=Math.max(y.height+x,0),p=i.alignment,p.Wb()&&(p=t.defaultAlignment),p.sb()||(p=Rt),i=i.alignmentFocus,i.Wb()&&(i=Rt),C?(C=!1,r.h(p.x*o+p.offsetX-(i.x*y.width+i.offsetX)-f.left,p.y*l+p.offsetY-(i.y*y.height+i.offsetY)-f.top,m,x)):Be(r,p.x*o+p.offsetX-(i.x*y.width+i.offsetX)-f.left,p.y*l+p.offsetY-(i.y*y.height+i.offsetY)-f.top,m,x));C?r.assign(k):M?r.Uu(S.x,S.y,S.width,S.height):Be(r,k.x,k.y,k.width,k.height),z.free(S)},Zp.prototype.arrange=function(t,e,i){var n=e.length,r=t.Pb(),o=r.measuredBounds,l=o.width,h=o.height,a=t.padding;o=a.left,a=a.top;var f=o-i.x,p=a-i.y;for(r.arrange(f,p,l,h),l=z.allocAt(0,0,l,h),bm(r,l,!1),h=0;h<n;h++){var d=e[h];if(d!==r){f=d.measuredBounds;var y=f.width,m=f.height;p=d.alignment,p.Wb()&&(p=t.defaultAlignment),p.sb()||(p=Rt);var x=d.alignmentFocus;if(x.Wb()&&(x=Rt),f=null,d instanceof _&&d.$e!==""&&(f=d.fb(d.$e),f===d&&(f=null)),f!==null){var M=f.actualBounds;for(x=N.allocAt(M.x+(x.x*M.width-x.offsetX),M.y+(x.y*M.height-x.offsetY)),f=f.panel;f!==d;)f.transform.Ga(x),f=f.panel;f=p.x*l.width+p.offsetX-x.x,p=p.y*l.height+p.offsetY-x.y,N.free(x)}else f=p.x*l.width+p.offsetX-(x.x*y+x.offsetX),p=p.y*l.height+p.offsetY-(x.y*m+x.offsetY);f+=l.x-i.x,p+=l.y-i.y,d.visible&&d.arrange(o+f,a+p,y,m)}}z.free(l)};function bm(t,e,i){var n=null;if(t instanceof _&&t.$e!==""&&(n=t.fb(t.$e),n===t&&(n=null)),n!==null)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.pp(e),n=n.panel}function Qp(){this.xa="Base"}V(Qp,ye),Qp.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length,a=t.Pb(),f=a.margin,p=e,d=i,y=f.right+f.left,m=f.top+f.bottom;a.measure(e,i,o,l),f=a.measuredBounds;var x=0,M=null;a instanceof vt&&(M=a,x=M.strokeWidth*M.scale);var k=Math.max(f.width+y,0);f=Math.max(f.height+m,0);var S=nv(a),C=S.x*k+S.offsetX;S=S.y*f+S.offsetY;var T=rv(a),L=T.x*k+T.offsetX;for(T=T.y*f+T.offsetY,isFinite(e)&&(p=Math.max(Math.abs(C-L)-x,0)),isFinite(i)&&(d=Math.max(Math.abs(S-T)-x,0)),x=ct.alloc(),x.h(0,0),t=To(t),T=0;T<h;T++)S=n[T],S===a||!S.visible&&S!==t||(f=S.margin,k=f.right+f.left,C=f.top+f.bottom,S.measure(p,d,0,0),f=S.measuredBounds,k=Math.max(f.width+k,0),f=Math.max(f.height+C,0),x.h(Math.max(k,x.width),Math.max(f,x.height)));if(h===1)r.width=k,r.height=f,ct.free(x);else{switch(S=nv(a),T=rv(a),h=n=0,T.x!==S.x&&T.y!==S.y&&(n=x.width/Math.abs(T.x-S.x),h=x.height/Math.abs(T.y-S.y)),ct.free(x),x=0,M!==null&&(x=M.strokeWidth*M.scale,av(M)===jr&&(n=h=Math.max(n,h))),n+=Math.abs(S.offsetX)+Math.abs(T.offsetX)+x,h+=Math.abs(S.offsetY)+Math.abs(T.offsetY)+x,M=a.stretch,M===Wn&&(M=cr(a,!1)),M){case oe:l=o=0;break;case le:isFinite(e)&&(n=e),isFinite(i)&&(h=i);break;case Ge:isFinite(e)&&(n=e),l=0;break;case Ze:o=0,isFinite(i)&&(h=i)}a.Uj(),a.measure(n,h,o,l),r.width=a.measuredBounds.width+y,r.height=a.measuredBounds.height+m}},Qp.prototype.arrange=function(t,e){var i=e.length,n=t.Pb(),r=n.measuredBounds,o=z.alloc();o.h(0,0,1,1);var l=n.margin,h=l.left;l=l.top;var a=t.padding,f=a.left;a=a.top,n.arrange(f+h,a+l,r.width,r.height);var p=nv(n),d=rv(n),y=p.y*r.height+p.offsetY,m=d.x*r.width+d.offsetX;for(d=d.y*r.height+d.offsetY,o.x=p.x*r.width+p.offsetX,o.y=y,Be(o,m,d,0,0),o.x+=h+f,o.y+=l+a,r=0;r<i;r++)h=e[r],h!==n&&(f=h.measuredBounds,l=h.margin,a=Math.max(f.width+l.right+l.left,0),p=Math.max(f.height+l.top+l.bottom,0),y=h.alignment,y.Wb()&&(y=t.defaultAlignment),y.sb()||(y=Rt),a=o.width*y.x+y.offsetX-a*y.x+l.left+o.x,l=o.height*y.y+y.offsetY-p*y.y+l.top+o.y,h.visible&&(lr(o.x,o.y,o.width,o.height,a,l,f.width,f.height)?h.arrange(a,l,f.width,f.height):h.arrange(a,l,f.width,f.height,new z(o.x,o.y,o.width,o.height))));z.free(o)};function qp(){this.xa="Base",this.name="Table"}V(qp,ye),qp.prototype.measure=function(t,e,i,n,r){for(var o=n.length,l=Vt(),h=Vt(),a=0;a<o;a++){var f=n[a],p=f instanceof _?f:null;if(p!==null&&ts(p)&&f.visible){h.push(p);for(var d=p.O.s,y=d.length,m=0;m<y;m++){var x=d[m];p.type===_.TableRow?x.row=f.row:p.type===_.TableColumn&&(x.column=f.column),l.push(x)}}else l.push(f)}o=l.length,o===0&&(t.Fb(0),t.Eb(0));for(var M=[],k=0;k<o;k++){var S=l[k];S.visible&&(yn(S,!0),yl(S,!0),M[S.row]||(M[S.row]=[]),M[S.row][S.column]||(M[S.row][S.column]=[]),M[S.row][S.column].push(S))}zt(l);var C=Vt(),T=Vt(),L=Vt(),j={count:0},A={count:0},Z=e,it=i,et=t.rowDefs,H=t.colDefs,Y=null;o=et.length;for(var dt=0;dt<o;dt++)Y=et[dt],Y!==void 0&&(Y.actual=0);o=H.length;for(var ft=0;ft<o;ft++)Y=H[ft],Y!==void 0&&(Y.actual=0);for(var Tt=M.length,Ut=0,ke=0;ke<Tt;ke++)M[ke]&&(Ut=Math.max(Ut,M[ke].length));var Te=Math.min(t.topIndex,Tt-1),ri=Math.min(t.leftIndex,Ut-1),Pe=0;Tt=M.length;for(var as=To(t),he=0;he<Tt;he++)if(M[he]){Ut=M[he].length;var mr=t.Fb(he);mr.actual=0;for(var oi=mr.nc=0;oi<Ut;oi++)if(M[he][oi]){var fs=t.Eb(oi);C[oi]===void 0&&(fs.actual=0,fs.nc=0,C[oi]=!0);for(var ln=M[he][oi],In=ln.length,Ji=0;Ji<In;Ji++){var zi=ln[Ji];if(zi.visible||zi===as){var _s=1<zi.rowSpan||1<zi.columnSpan;_s&&(he<Te||oi<ri||T.push(zi));var vr=zi.margin,sa=vr.right+vr.left,Zi=vr.top+vr.bottom,si=xf(zi,mr,fs,!1),hc=zi.desiredSize,Au=!isNaN(hc.height),Ar=!isNaN(hc.width)&&Au;if(_s||si===oe||Ar||he<Te||oi<ri||(j[oi]!==void 0||si!==le&&si!==Ge||(j[oi]=-1,j.count++),A[he]!==void 0||si!==le&&si!==Ze||(A[he]=-1,A.count++),L.push(zi)),zi.measure(1/0,1/0,0,0),!(he<Te||oi<ri)){var Vi=zi.measuredBounds,Ll=Math.max(Vi.width+sa,0),Qi=Math.max(Vi.height+Zi,0);if(zi.rowSpan===1&&(si===oe||si===Ge)){Y=t.Fb(he);var Hs=Y.Vc();Pe=Math.max(Qi-Y.actual,0),Pe+Hs>it&&(Pe=Math.max(it-Hs,0));var Mg=Y.oa===0;Y.nc=Y.nc+Pe,Y.actual=Y.oa+Pe,it=Math.max(it-(Pe+(Mg?Hs:0)),0)}if(zi.columnSpan===1&&(si===oe||si===Ze)){Y=t.Eb(oi);var ac=Y.Vc();Pe=Math.max(Ll-Y.actual,0),Pe+ac>Z&&(Pe=Math.max(Z-ac,0));var C1=Y.oa===0;Y.nc=Y.nc+Pe,Y.actual=Y.oa+Pe,Z=Math.max(Z-(Pe+(C1?ac:0)),0)}_s&&zi.Uj()}}}}}zt(C);var lo=0,Oo=0;o=t.columnCount;for(var Du=0;Du<o;Du++){var Ks=H[Du];Ks!==void 0&&(lo+=isNaN(Ks.Gc)?Ks.nc:Ks.Gc,Ks.nc!==0&&(lo+=Ks.Vc()))}o=t.rowCount;for(var la=0;la<o;la++){var Ws=et[la];Ws!==void 0&&(Oo+=isNaN(Ws.Gc)?Ws.nc:Ws.Gc,Ws.nc!==0&&(Oo+=Ws.Vc()))}Z=Math.max(e-lo,0);var uo=it=Math.max(i-Oo,0),cs=Z;o=L.length;for(var Yi=0;Yi<o;Yi++){var Dr=L[Yi],Sg=t.Fb(Dr.row),Fo=t.Eb(Dr.column),ua=Dr.measuredBounds,xr=Dr.margin,jl=xr.right+xr.left,Ir=xr.top+xr.bottom;j[Dr.column]=Fo.nc===0&&j[Dr.column]!==void 0?Math.max(ua.width+jl,j[Dr.column]):null,A[Dr.row]=Sg.nc===0&&A[Dr.row]!==void 0?Math.max(ua.height+Ir,A[Dr.row]):null}var Iu=0,ha=0,er;for(er in A)er!=="count"&&(Iu+=A[er]);for(er in j)er!=="count"&&(ha+=j[er]);for(var De=ct.alloc(),fc=0;fc<o;fc++){var Ti=L[fc];if(Ti.visible||Ti===as){var ae=t.Fb(Ti.row),Li=t.Eb(Ti.column),Eo=0;isFinite(Li.width)?Eo=Li.width:(isFinite(Z)&&j[Ti.column]!==null?ha===0?Eo=Li.actual+Z:Eo=j[Ti.column]/ha*cs:j[Ti.column]!==null?Eo=Z:Eo=Li.actual||Z,Eo=Math.max(0,Eo-Li.Vc()));var ps=0;switch(isFinite(ae.height)?ps=ae.height:(isFinite(it)&&A[Ti.row]!==null?Iu===0?ps=ae.actual+it:ps=A[Ti.row]/Iu*uo:A[Ti.row]!==null?ps=it:ps=ae.actual||it,ps=Math.max(0,ps-ae.Vc())),De.h(Math.max(Li.minimum,Math.min(Eo,Li.maximum)),Math.max(ae.minimum,Math.min(ps,ae.maximum))),si=xf(Ti,ae,Li,!1),si){case Ge:De.height=Math.max(De.height,ae.actual+it);break;case Ze:De.width=Math.max(De.width,Li.actual+Z)}var Ol=Ti.margin,T1=Ol.right+Ol.left,kg=Ol.top+Ol.bottom;Ti.Uj(),Ti.measure(De.width,De.height,Li.minimum,ae.minimum);var aa=Ti.measuredBounds,Fl=Math.max(aa.width+T1,0),Ru=Math.max(aa.height+kg,0);isFinite(Z)&&(Fl=Math.min(Fl,De.width)),isFinite(it)&&(Ru=Math.min(Ru,De.height));var Ui=0;Ui=ae.actual,ae.actual=Math.max(ae.actual,Ru),ae.nc=Math.max(ae.nc,Ru),Pe=ae.actual-Ui,it=Math.max(it-Pe,0),A[Ti.row]===null&&(uo=Math.max(uo-Pe,0)),Ui=Li.actual,Li.actual=Math.max(Li.actual,Fl),Li.nc=Math.max(Li.nc,Fl),Pe=Li.actual-Ui,Z=Math.max(Z-Pe,0),j[Ti.column]===null&&(cs=Math.max(cs-Pe,0))}}zt(L);var Ao=ct.alloc(),wr=Vt(),kn=Vt();if(o=T.length,o!==0){for(var $s=0;$s<Tt;$s++)if(M[$s]){Ut=M[$s].length;var fa=t.Fb($s);wr[$s]=fa.actual;for(var Js=0;Js<Ut;Js++)if(M[$s][Js]){var Pg=t.Eb(Js);kn[Js]=Pg.actual}}}for(var ca=0;ca<o;ca++){var re=T[ca];if(re.visible||re===as){var ir=t.Fb(re.row),Rn=t.Eb(re.column);switch(De.h(Math.max(Rn.minimum,Math.min(e,Rn.maximum)),Math.max(ir.minimum,Math.min(i,ir.maximum))),si=xf(re,ir,Rn,!1),si){case le:kn[Rn.index]!==0&&(De.width=Math.min(De.width,kn[Rn.index])),wr[ir.index]!==0&&(De.height=Math.min(De.height,wr[ir.index]));break;case Ge:kn[Rn.index]!==0&&(De.width=Math.min(De.width,kn[Rn.index]));break;case Ze:wr[ir.index]!==0&&(De.height=Math.min(De.height,wr[ir.index]))}isFinite(Rn.width)&&(De.width=Rn.width),isFinite(ir.height)&&(De.height=ir.height),Ao.h(0,0);for(var Ng=Rn.minimum,qi=ir.minimum,ds=1;ds<re.rowSpan&&!(re.row+ds>=t.rowCount);ds++)Y=t.Fb(re.row+ds),Pe=0,Pe=si===le||si===Ze?Math.max(Y.minimum,wr[re.row+ds]===0?Y.maximum:Math.min(wr[re.row+ds],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Gc)?Y.maximum:Math.min(Y.Gc,Y.maximum)),Ao.height+=Pe,qi+=Y.minimum;for(var Bn=1;Bn<re.columnSpan&&!(re.column+Bn>=t.columnCount);Bn++)Y=t.Eb(re.column+Bn),Pe=0,Pe=si===le||si===Ge?Math.max(Y.minimum,kn[re.column+Bn]===0?Y.maximum:Math.min(kn[re.column+Bn],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Gc)?Y.maximum:Math.min(Y.Gc,Y.maximum)),Ao.width+=Pe,Ng+=Y.minimum;De.width+=Ao.width,De.height+=Ao.height;var pa=re.margin,Zs=pa.right+pa.left,cc=pa.top+pa.bottom;re.measure(De.width,De.height,Ng,qi);for(var da=re.measuredBounds,Rr=Math.max(da.width+Zs,0),El=Math.max(da.height+cc,0),Qs=0,ga=0;ga<re.rowSpan&&!(re.row+ga>=t.rowCount);ga++)Y=t.Fb(re.row+ga),Qs+=Y.total||0;if(Qs<El){var gs=El-Qs,ho=El-Qs;if(re.spanAllocation!==null)for(var ys=re.spanAllocation,Do=0;Do<re.rowSpan&&!(0>=gs)&&!(re.row+Do>=t.rowCount);Do++){Y=t.Fb(re.row+Do);var ms=Y.oa||0,Al=ys(re,Y,ho);Y.actual=Math.min(Y.maximum,ms+Al),Y.oa!==ms&&(gs-=Y.oa-ms)}for(;0<gs;){var Mr=Y.oa||0;if(isNaN(Y.height)&&Y.maximum>Mr&&(Y.actual=Math.min(Y.maximum,Mr+gs),Y.oa!==Mr&&(gs-=Y.oa-Mr)),Y.index===0)break;Y=t.Fb(Y.index-1)}}for(var Bu=0,vs=0;vs<re.columnSpan&&!(re.column+vs>=t.columnCount);vs++)Y=t.Eb(re.column+vs),Bu+=Y.total||0;if(Bu<Rr){var zu=Rr-Bu,L1=Rr-Bu;if(re.spanAllocation!==null)for(var Io=re.spanAllocation,Dl=0;Dl<re.columnSpan&&!(0>=zu)&&!(re.column+Dl>=t.columnCount);Dl++){Y=t.Eb(re.column+Dl);var pc=Y.oa||0,j1=Io(re,Y,L1);Y.actual=Math.min(Y.maximum,pc+j1),Y.oa!==pc&&(zu-=Y.oa-pc)}for(;0<zu;){var Cg=Y.oa||0;if(isNaN(Y.width)&&Y.maximum>Cg&&(Y.actual=Math.min(Y.maximum,Cg+zu),Y.oa!==Cg&&(zu-=Y.oa-Cg)),Y.index===0)break;Y=t.Eb(Y.index-1)}}}}zt(T),ct.free(Ao),ct.free(De),wr!==void 0&&zt(wr),kn!==void 0&&zt(kn);var Vu=0,Yu=0,Tg=t.desiredSize,EP=t.maxSize;si=cr(t,!0);var dc=Oo=lo=0,gc=0;o=t.columnCount;for(var Lg=0;Lg<o;Lg++)H[Lg]!==void 0&&(Y=t.Eb(Lg),isFinite(Y.width)?(dc+=Y.width,dc+=Y.Vc()):ud(Y)===Cf?(dc+=Y.oa,dc+=Y.Vc()):Y.oa!==0&&(lo+=Y.oa,lo+=Y.Vc()));isFinite(Tg.width)?Vu=Math.min(Tg.width,EP.width):Vu=si!==oe&&isFinite(e)?e:lo,Vu=Math.max(Vu,t.minSize.width),Vu=Math.max(Vu-dc,0);for(var $j=lo===0?1:Math.max(Vu/lo,1),jg=0;jg<o;jg++)H[jg]!==void 0&&(Y=t.Eb(jg),isFinite(Y.width)||ud(Y)===Cf||(Y.actual=Y.oa*$j),Y.position=r.width,Y.oa!==0&&(r.width+=Y.oa,r.width+=Y.Vc()));o=t.rowCount;for(var Og=0;Og<o;Og++)et[Og]!==void 0&&(Y=t.Fb(Og),isFinite(Y.height)?(gc+=Y.height,gc+=Y.Vc()):ud(Y)===Cf?(gc+=Y.oa,gc+=Y.Vc()):Y.oa!==0&&(Oo+=Y.oa,Oo+=Y.Vc()));isFinite(Tg.height)?Yu=Math.min(Tg.height,EP.height):Yu=si!==oe&&isFinite(i)?i:Oo,Yu=Math.max(Yu,t.minSize.height),Yu=Math.max(Yu-gc,0);for(var Jj=Oo===0?1:Math.max(Yu/Oo,1),Fg=0;Fg<o;Fg++)et[Fg]!==void 0&&(Y=t.Fb(Fg),isFinite(Y.height)||ud(Y)===Cf||(Y.actual=Y.oa*Jj),Y.position=r.height,Y.oa!==0&&(r.height+=Y.oa,r.height+=Y.Vc()));o=h.length;for(var O1=0;O1<o;O1++){var yc=h[O1],F1=0,E1=0;yc.type===_.TableRow?(F1=r.width,Y=t.Fb(yc.row),E1=Y.actual):(Y=t.Eb(yc.column),F1=Y.actual,E1=r.height),yc.measuredBounds.h(0,0,F1,E1),yn(yc,!1)}zt(h),t.inRowsCols=M},qp.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,o=r.left;r=r.top;var l=t.inRowsCols;if(l!==null){for(var h,a,f=l.length,p=0,d=0;d<f;d++)l[d]&&(p=Math.max(p,l[d].length));a=t.rowDefs,h=t.colDefs;var y=d=0,m=Math.min(t.topIndex,f-1);if(0<a.length){for(;m!==f&&(a[m]===void 0||a[m].oa===0);)m++;m=Math.max(Math.min(m,f-1),0),d=-a[m].position}var x=Math.min(t.leftIndex,p-1);if(0<h.length){for(;x!==p&&(h[x]===void 0||h[x].oa===0);)x++;x=Math.max(Math.min(x,p-1),0),y=-h[x].position}for(var M=0,k=0;M!==f&&a[M]===void 0;)M++;for(;k!==f&&h[k]===void 0;)k++;p=t.part,t.Fb(M),t.Eb(k);for(var S=0;S<e.length;S++){var C=e[S];if(C instanceof _&&C.visible&&ts(C)){if(C.type===_.TableRow){h=t.Fb(C.row);var T=t.Eb(k)}else h=t.Fb(M),T=t.Eb(C.column);a=h.position+d+r,h.oa!==0&&(a+=h.Io(Math.max(M,m))),h=T.position+y+o,T.oa!==0&&(h+=T.Io(Math.max(k,x))),T=C.measuredBounds,C.Uk(),C.actualBounds.ka();var L=C.actualBounds,j=z.allocAt(L.x,L.y,L.width,L.height);L.x=C.type===_.TableRow?o:h,L.y=C.type===_.TableColumn?r:a,L.width=T.width,L.height=T.height,C.actualBounds.freeze(),yl(C,!1),T0(j,L)||p===null||(p.oh(),C.Pn(p)),z.free(j)}}for(S=ct.alloc(),C=0;C<f;C++)if(l[C]){for(p=l[C].length,T=t.Fb(C),a=T.position+d+r,T.oa!==0&&(a+=T.Io(Math.max(M,m))),L=0;L<p;L++)if(l[C][L]){j=t.Eb(L),h=j.position+y+o,j.oa!==0&&(h+=j.Io(Math.max(k,x)));for(var A=l[C][L],Z=A.length,it=0;it<Z;it++){var et=A[it],H=et.measuredBounds;S.h(0,0);for(var Y=1;Y<et.rowSpan&&!(C+Y>=t.rowCount);Y++){var dt=t.Fb(C+Y);dt.oa!==0&&(S.height+=dt.total)}for(Y=1;Y<et.columnSpan&&!(L+Y>=t.columnCount);Y++)dt=t.Eb(L+Y),dt.oa!==0&&(S.width+=dt.total);var ft=j.oa+S.width,Tt=T.oa+S.height;Y=h,dt=a;var Ut=ft,ke=Tt,Te=h,ri=a,Pe=ft,as=Tt;h+ft>i.width&&(Pe=Math.max(i.width-h,0)),a+Tt>i.height&&(as=Math.max(i.height-a,0));var he=et.alignment;if(he.Wb()){he=t.defaultAlignment,he.sb()||(he=Rt);var mr=he.x,oi=he.y,fs=he.offsetX;he=he.offsetY;var ln=j.alignment,In=T.alignment;ln.sb()&&(mr=ln.x,fs=ln.offsetX),In.sb()&&(oi=In.y,he=In.offsetY)}else mr=he.x,oi=he.y,fs=he.offsetX,he=he.offsetY;(isNaN(mr)||isNaN(oi))&&(oi=mr=.5,he=fs=0),ln=H.width,In=H.height;var Ji=et.margin,zi=Ji.left+Ji.right,_s=Ji.top+Ji.bottom,vr=xf(et,T,j,!1);!isNaN(et.desiredSize.width)||vr!==le&&vr!==Ge||(ln=Math.max(ft-zi,0)),!isNaN(et.desiredSize.height)||vr!==le&&vr!==Ze||(In=Math.max(Tt-_s,0)),ft=et.maxSize,Tt=et.minSize,ln=Math.min(ft.width,ln),In=Math.min(ft.height,In),ln=Math.max(Tt.width,ln),In=Math.max(Tt.height,In),ft=In+_s,Y+=Ut*mr-(ln+zi)*mr+fs+Ji.left,dt+=ke*oi-ft*oi+he+Ji.top,et.visible&&(lr(Te,ri,Pe,as,Y,dt,H.width,H.height)?et.arrange(Y,dt,ln,In):et.arrange(Y,dt,ln,In,new z(Te,ri,Pe,as)))}}}for(ct.free(S),t=0;t<n;t++)i=e[t],o=i instanceof _?i:null,o!==null&&ts(o)&&(o=i.actualBounds,i.naturalBounds.ka(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())}};function bp(){this.xa="Base"}V(bp,ye),bp.prototype.measure=function(){},bp.prototype.arrange=function(){};function td(){this.xa="Base"}V(td,ye),td.prototype.measure=function(){},td.prototype.arrange=function(){};function ed(){this.xa="Base"}V(ed,ye),ed.prototype.measure=function(t,e,i,n,r,o,l){1<n.length&&I("Viewbox Panel cannot contain more than one GraphObject."),n=n[0],n.Ca=1,n.Uj(),n.measure(1/0,1/0,o,l);var h=n.measuredBounds,a=n.margin,f=a.right+a.left;if(a=a.top+a.bottom,isFinite(e)||isFinite(i)){var p=n.scale,d=h.width;h=h.height;var y=Math.max(e-f,0),m=Math.max(i-a,0),x=1;t.viewboxStretch===jr?d!==0&&h!==0&&(x=Math.min(y/d,m/h)):d!==0&&h!==0&&(x=Math.max(y/d,m/h)),x===0&&(x=1e-4),n.Ca*=x,p!==n.scale&&(yn(n,!0),n.measure(1/0,1/0,o,l))}h=n.measuredBounds,r.width=isFinite(e)?e:Math.max(h.width+f,0),r.height=isFinite(i)?i:Math.max(h.height+a,0)},ed.prototype.arrange=function(t,e,i){e=e[0];var n=e.measuredBounds,r=e.margin,o=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var l=e.alignment;l.Wb()&&(l=t.defaultAlignment),l.sb()||(l=Rt),e.arrange(i.width*l.x-o*l.x+l.offsetX,i.height*l.y-r*l.y+l.offsetY,n.width,n.height)};function kf(){this.xa="Base"}V(kf,ye),kf.prototype.measure=function(){},kf.prototype.arrange=function(){},kf.prototype.fc=function(t,e,i){i=t.Df()*i.scale,0>=i&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var o=t.naturalBounds,l=t.actualBounds,h=o.width,a=o.height,f=Math.ceil(h/r),p=Math.ceil(a/n),d=t.gridOrigin,y=d.x;d=d.y,e.save(),e.beginPath(),e.rect(0,0,h,a),e.clip(),e.Se();for(var m=[],x=t.O.s,M=x.length,k=0;k<M;k++){var S=x[k],C=[];if(m.push(C),S.visible){var T=S.interval;if(!(0>T)){S=ev(S.figure);for(var L=0;L<M;L++)if(L!==k){var j=x[L];j.visible&&ev(j.figure)===S&&(j=j.interval,j>T&&C.push(j))}}}}for(x=t.O.s,M=x.length,k=0;k<M;k++){var A=x[k];if(A.visible&&(C=A.interval||1,S=Math.abs(C),!(2>r*S*i))){if(T=A.segmentIndex,(!isFinite(T)||isNaN(T))&&(T=0),0>T&&(T=S-Math.min(-T,S)),T=Math.round(T%S),S=A.opacity,L=1,S!==1){if(S===0)continue;L=e.globalAlpha,e.globalAlpha=L*S}j=m[k];var Z=!1,it=A.strokeDashArray;if(it!==null&&(Z=!0,e.js(it,A.strokeDashOffset)),A.figure==="LineV"&&A.stroke!==null&&0<A.strokeWidth){for(e.lineWidth=A.strokeWidth,nn(t,e,A.stroke,!1,!1,o,l),e.beginPath(),it=A=Math.floor((y-r)/r);it<=A+f;it++){var et=it*r+y;0<=et&&et<=h&&id(it,C,T,j)&&(e.moveTo(et,0),e.lineTo(et,a))}e.stroke(),e.Se()}else if(A.figure==="LineH"&&A.stroke!==null&&0<A.strokeWidth){for(e.lineWidth=A.strokeWidth,nn(t,e,A.stroke,!1,!1,o,l),e.beginPath(),it=A=Math.floor((d-n)/n);it<=A+p;it++)et=it*n+d,0<=et&&et<=a&&id(it,C,T,j)&&(e.moveTo(0,et),e.lineTo(h,et));e.stroke(),e.Se()}else if(A.figure==="BarV"&&A.fill!==null)for(nn(t,e,A.fill,!0,!1,o,l),A=A.width,isNaN(A)&&(A=r),et=it=Math.floor((y-r)/r);et<=it+f;et++){var H=et*r+y;0<=H+A&&H<=h&&id(et,C,T,j)&&e.fillRect(H,0,A,a)}else if(A.figure==="BarH"&&A.fill!==null)for(nn(t,e,A.fill,!0,!1,o,l),A=A.height,isNaN(A)&&(A=n),et=it=Math.floor((d-n)/n);et<=it+p;et++)H=et*n+d,0<=H+A&&H<=a&&id(et,C,T,j)&&e.fillRect(0,H,h,A);Z&&e.fs(),S!==1&&(e.globalAlpha=L)}}e.restore(),e.Uc(!1)};function id(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function nd(){this.xa="Base"}V(nd,ye),nd.prototype.measure=function(t,e,i,n,r){var o=n.length;if(t instanceof Ct||t instanceof K){var l=null,h=null;if(t instanceof K&&(l=t),t instanceof Ct&&(h=t,l=h.adornedPart,t.j===null&&(t.j=[])),l instanceof K){var a=l;if(o===0)wo(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var f=t instanceof Ct?null:l.path;e=l.routeBounds,i=t.jg,i.h(0,0,e.width,e.height);var p=a.points,d=l.pointsCount;h!==null?h.Ul(!1):l!==null&&l.Ul(!1),h=e.width;var y=e.height,m=t.j;if(m.length=0,f!==null){M2(t,h,y,f);var x=f.measuredBounds;i.dd(x),m.push(x)}x=wt.alloc();for(var M=N.alloc(),k=N.alloc(),S=0;S<o;S++){var C=n[S];if(C!==f)if(C.isPanelMain&&C instanceof vt){M2(t,h,y,C);var T=C.measuredBounds;i.dd(T),m.push(T)}else if(2>d)C.measure(1/0,1/0,0,0),T=C.measuredBounds,i.dd(T),m.push(T);else{var L=C.segmentIndex,j=C.segmentFraction,A=C.alignmentFocus;A.Lc()&&(A=Rt);var Z=C.segmentOrientation,it=C.segmentOffset;if(isNaN(L)){var et=a.ua;T=Vt(),et.Qu(j,T);var H=N.allocAt(T[0],T[1]);if(H.add(a.i(0)),et.type===$.j?H.offset(-et.startX,-et.startY):(et=et.figures.first(),et!==null&&H.offset(-et.startX,-et.startY)),et=T[2],Z!==Si){var Y=a.computeAngle(C,Z,et);C.Kb=Y}Y=H.x-e.x;var dt=H.y-e.y;N.free(H),zt(T)}else if(L<-d||L>=d)T=N.alloc(),a.vg(),a.computeMidPoint(T),et=a.midAngle,Z!==Si&&(Y=a.computeAngle(C,Z,et),C.Kb=Y),Y=T.x-e.x,dt=T.y-e.y,N.free(T);else{if(Y=0,0<=L?(dt=p.M(L),T=L<d-1?p.M(L+1):dt):(Y=d+L,dt=p.M(Y),T=0<Y?p.M(Y-1):dt),dt.Xa(T)){0<=L?(et=0<L?p.M(L-1):dt,Y=L<d-2?p.M(L+2):T):(et=Y<d-1?p.M(Y+1):dt,Y=1<Y?p.M(Y-2):T),H=et.Bf(dt);var ft=T.Bf(Y);et=H>ft+10?0<=L?et.ab(dt):dt.ab(et):ft>H+10?0<=L?T.ab(Y):Y.ab(T):0<=L?et.ab(Y):Y.ab(et)}else et=0<=L?dt.ab(T):T.ab(dt);Z!==Si&&(Y=a.computeAngle(C,Z,et),C.Kb=Y),Y=dt.x+(T.x-dt.x)*j-e.x,dt=dt.y+(T.y-dt.y)*j-e.y}C.measure(1/0,1/0,0,0),T=C.measuredBounds,H=C.naturalBounds;var Tt=0;C instanceof vt&&(Tt=C.strokeWidth),ft=H.width+Tt;var Ut=H.height+Tt;x.reset(),x.translate(-T.x,-T.y),x.scale(C.scale,C.scale),x.rotate(Z===Si?C.angle:et,ft/2,Ut/2),Z!==Rf&&Z!==zf||x.rotate(90,ft/2,Ut/2),Z!==Bf&&Z!==Vf||x.rotate(-90,ft/2,Ut/2),Z===Ad&&(45<et&&135>et||225<et&&315>et)&&x.rotate(-et,ft/2,Ut/2),H=new z(0,0,ft,Ut),M.xi(H,A),x.Ga(M),A=-M.x+Tt/2*C.scale,C=-M.y+Tt/2*C.scale,k.assign(it),Tt=isNaN(it.x);var ke=isNaN(it.y);if(Tt||ke){ft=ft/2+3,Ut=Ut/2+3;var Te=45<=et&&135>=et,ri=225<=et&&315>=et;Z===Si&&(Te||ri)?(k.x=ke?ft:it.y,k.y=Tt?Ut:it.x,Te?0<=L||isNaN(L)&&.5>j||!Tt||(k.y=-Ut):ri&&((0<=L||isNaN(L)&&.5>j)&&Tt&&(k.y=-Ut),ke&&(k.x=-ft))):(Tt&&(k.x=0<=L||isNaN(L)&&.5>j?ft:-ft),ke&&(k.y=-Ut),k.rotate(et))}else k.rotate(et);Y+=k.x,dt+=k.y,H.set(T),H.h(Y+A,dt+C,T.width,T.height),m.push(H),i.dd(H)}}if(l!==null)for(n=l.labelNodes;n.next();)n.value.measure(1/0,1/0);t.jg=i,t.position.h(e.x+i.x,e.y+i.y),wo(r,i.width||0,i.height||0),wt.free(x),N.free(M),N.free(k)}}}},nd.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Ct||t instanceof K){var n=t,r=null;t instanceof Ct&&(r=t,n=r.adornedPart);var o=t instanceof Ct?null:n.path,l=t.j;if(l.length!==0){var h=0;if(o!==null&&h<l.length){var a=l[h];h++,o.arrange(a.x-t.jg.x,a.y-t.jg.y,a.width,a.height)}for(a=0;a<i;a++){var f=e[a];if(f!==o&&h<l.length){var p=l[h];h++,f.arrange(p.x-t.jg.x,p.y-t.jg.y,p.width,p.height)}}}if(e=n.points,i=e.count,2<=i&&t instanceof K)for(o=t.labelNodes;o.next();){var d=t;l=o.value,h=l.segmentIndex,a=l.segmentFraction;var y=l.alignmentFocus;if(f=l.segmentOrientation,p=l.segmentOffset,isNaN(h)){var m=d.ua,x=Vt();m.Qu(a,x);var M=N.allocAt(x[0],x[1]);M.add(d.i(0)),m.type===$.j||(m=m.figures.first()),M.offset(-m.startX,-m.startY),m=x[2],f!==Si&&(d=d.computeAngle(l,f,m),l.angle=d),d=M.x;var k=M.y;N.free(M),zt(x)}else if(h<-i||h>=i)x=N.alloc(),m=d,k=x,m.vg(),m.computeMidPoint(k),m=d.midAngle,f!==Si&&(d=d.computeAngle(l,f,m),l.angle=d),d=x.x,k=x.y,N.free(x);else{if(M=0,0<=h?(x=e.s[h],k=h<i-1?e.s[h+1]:x):(M=i+h,x=e.s[M],k=0<M?e.s[M-1]:x),x.Xa(k)){0<=h?(m=0<h?e.s[h-1]:x,M=h<i-2?e.s[h+2]:k):(m=M<i-1?e.s[M+1]:x,M=1<M?e.s[M-2]:k);var S=m.Bf(x),C=k.Bf(M);m=S>C+10?0<=h?m.ab(x):x.ab(m):C>S+10?0<=h?k.ab(M):M.ab(k):0<=h?m.ab(M):M.ab(m)}else m=0<=h?x.ab(k):k.ab(x);f!==Si&&(d=d.computeAngle(l,f,m),l.angle=d),d=x.x+(k.x-x.x)*a,k=x.y+(k.y-x.y)*a}if(y.ys())l.location=new N(d,k);else{y.Lc()&&(y=Rt),x=wt.alloc(),x.reset(),x.scale(l.scale,l.scale),x.rotate(l.angle,0,0);var T=l.naturalBounds;M=z.allocAt(0,0,T.width,T.height),S=N.alloc(),S.xi(M,y),x.Ga(S),y=-S.x,C=-S.y;var L=T.width,j=T.height;T=N.alloc(),T.assign(p);var A=isNaN(p.x),Z=isNaN(p.y);if(A||Z){L=L/2+3,j=j/2+3;var it=45<=m&&135>=m,et=225<=m&&315>=m;f===Si&&(it||et)?(T.x=Z?L:p.y,T.y=A?j:p.x,it?0<=h||isNaN(h)&&.5>a||!A||(T.y=-j):et&&((0<=h||isNaN(h)&&.5>a)&&A&&(T.y=-j),Z&&(T.x=-L))):(A&&(T.x=0<=h||isNaN(h)&&.5>a?L:-L),Z&&(T.y=-j),T.rotate(m))}else T.rotate(m);d+=T.x,k+=T.y,x.pp(M),y+=M.x,C+=M.y,h=N.allocAt(d+y,k+C),l.move(h),N.free(h),N.free(T),N.free(S),z.free(M),wt.free(x)}}r!==null?r.Ul(!1):n.Ul(!1),n=Z2(t),t.location.h(t.position.x+n.x,t.position.y+n.y),N.free(n)}};function M2(t,e,i,n){if(Qo(n)!==!1){var r=n.strokeWidth;r===0&&t instanceof Ct&&t.type===_.Link&&t.adornedObject instanceof vt&&(r=t.adornedObject.strokeWidth),r*=n.Ca,t instanceof K&&t.ua!==null?(t=t.geometry.bounds,n.Ge(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof Ct&&t.adornedPart.ua!==null?(t=t.adornedPart.ua.bounds,n.Ge(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):n.Ge(-(r/2),-(r/2),e+r,i+r),r=n.desiredSize,r.w()||n.ua===null?n.dc.h(0,0,r.width,r.height):n.dc.assign(n.ua.bounds),yn(n,!1)}}function Pf(){this.xa="Base"}V(Pf,ye),Pf.prototype.measure=function(t,e,i,n,r,o,l){var h=t.Pb();t.graduatedBounds=[];var a=h.margin,f=a.right+a.left,p=a.top+a.bottom;h.measure(e,i,o,l);var d=h.measuredBounds,y=new z(-a.left,-a.top,Math.max(d.width+f,0),Math.max(d.height+p,0));t.graduatedBounds.push(y),r.assign(y);for(var m=h.geometry,x=h.strokeWidth,M=m.flattenedSegments,k=m.flattenedLengths,S=m.flattenedTotalLength,C=M.length,T=0,L=0,j=Vt(),A=0;A<C;A++){var Z=M[A],it=[];L=T=0;for(var et=Z.length,H=0;H<et;H+=2){var Y=Z[H],dt=Z[H+1];if(H!==0){var ft=180*Math.atan2(dt-L,Y-T)/Math.PI;0>ft&&(ft+=360),it.push(ft)}T=Y,L=dt}j.push(it)}if(t.graduatedIntervals===null){for(var Tt=[],Ut=t.O.s,ke=Ut.length,Te=0;Te<ke;Te++){var ri=Ut[Te],Pe=[];if(Tt.push(Pe),ri.visible){var as=ri.interval;if(!(0>as)){for(var he=0;he<ke;he++)if(he!==Te){var mr=Ut[he];if(mr.visible&&ri.constructor===mr.constructor){var oi=mr.interval;oi>as&&Pe.push(oi)}}}}}t.graduatedIntervals=Tt}var fs=t.graduatedIntervals,ln=t.O.s,In=ln.length,Ji=0,zi=0,_s=S;t.graduatedMarks=[];for(var vr,sa=0;sa<In;sa++){var Zi=ln[sa];if(vr=[],Zi.visible&&Zi!==h){var si=Math.abs(Zi.interval),hc=t.graduatedTickUnit;if(!(2>hc*si*S/t.graduatedRange&&Zi.graduatedSkip===null)){var Au=k[0][0],Ar=0,Vi=0;zi=S*Zi.graduatedStart-1e-4,_s=S*Zi.graduatedEnd+1e-4;var Ll=hc*si,Qi=t.graduatedTickBase;if(Qi<t.graduatedMin){var Hs=(t.graduatedMin-Qi)/Ll;Hs=Hs%1===0?Hs:Math.floor(Hs+1),Qi+=Hs*Ll}else Qi>t.graduatedMin+Ll&&(Qi-=Math.floor((Qi-t.graduatedMin)/Ll)*Ll);for(var Mg=fs[sa],ac=Qi,C1=1e-6*t.graduatedMax,lo=1;Qi<=t.graduatedMax+C1;lo++){t:{for(var Oo=Mg.length,Du=0;Du<Oo;Du++){var Ks=(Qi-t.graduatedTickBase)%(Mg[Du]*t.graduatedTickUnit),la=1e-6*t.graduatedTickUnit;if(Ks<la&&Ks>-la){var Ws=!1;break t}}Ws=!0}if(Ws&&(Qi>t.graduatedMax&&(Qi=t.graduatedMax),Zi.graduatedSkip===null||Zi instanceof Xt&&!Zi.graduatedSkip(Qi,Zi)||Zi instanceof vt&&!Zi.graduatedSkip(Qi,Zi))&&(Ji=(Qi-t.graduatedMin)*S/t.graduatedRange,Ji>S&&(Ji=S),zi<=Ji&&Ji<=_s)){for(var uo=j[Ar][Vi],cs=k[Ar][Vi];Ar<k.length;){for(;Ji>Au&&Vi<k[Ar].length-1;)Vi++,uo=j[Ar][Vi],cs=k[Ar][Vi],Au+=cs;if(Ji<=Au)break;Ar++,Vi=0,uo=j[Ar][Vi],cs=k[Ar][Vi],Au+=cs}var Yi=M[Ar],Dr=Yi[2*Vi],Sg=Yi[2*Vi+1],Fo=(Ji-(Au-cs))/cs,ua=new N(Dr+(Yi[2*Vi+2]-Dr)*Fo+x/2-m.bounds.x,Sg+(Yi[2*Vi+3]-Sg)*Fo+x/2-m.bounds.y);ua.scale(h.scale,h.scale);t:{var xr=uo,jl=j[Ar];if(!(.5005>Fo&&.4995<Fo)){var Ir=xr;if(.5>Fo?0<Vi?Ir=jl[Vi-1]:O.$(Yi[0],Yi[Yi.length-2])&&O.$(Yi[1],Yi[Yi.length-1])&&(Ir=jl[jl.length-1]):.5<Fo&&(Vi+1<jl.length?Ir=jl[Vi+1]:O.$(Yi[0],Yi[Yi.length-2])&&O.$(Yi[1],Yi[Yi.length-1])&&(Ir=jl[0])),xr!==Ir){var Iu=Math.abs(xr-Ir);if(180<Iu&&(xr<Ir?xr+=360:Ir+=360,Iu=Math.abs(xr-Ir)),5e-4>Fo||.9995<Fo){uo=(xr+Ir)/2%360;break t}if(10>Iu){var ha=1-Math.abs(.5-Fo);uo=(xr*ha+Ir*(1-ha))%360;break t}}}uo=xr}if(Zi instanceof Xt){var er="";Zi.graduatedFunction!==null?(er=Zi.graduatedFunction(Qi,Zi),er=er!=null?er.toString():""):er=(+Qi.toFixed(2)).toString(),er!==""&&vr.push({$l:ua,angle:uo,text:er})}else vr.push({$l:ua,angle:uo})}Qi=ac+lo*Ll}}}t.graduatedMarks.push(vr)}zt(j);var De=t.graduatedMarks;if(De!==null)for(var fc=n.length,Ti=0;Ti<fc;Ti++){var ae=n[Ti],Li=De[Ti];if(ae.visible&&ae!==h&&Li.length!==0){if(ae instanceof vt){var Eo=t,ps=r,Ol=ae.alignmentFocus;Ol.Lc()&&(Ol=Mo);var T1=ae.angle;ae.Kb=0,ae.measure(1/0,1/0,0,0),ae.Kb=T1;var kg=ae.measuredBounds,aa=kg.width,Fl=kg.height,Ru=z.allocAt(0,0,aa,Fl),Ui=N.alloc();Ui.xi(Ru,Ol),z.free(Ru);for(var Ao=-Ui.x,wr=-Ui.y,kn=new z,$s=Li.length,fa=0;fa<$s;fa++)for(var Js=Li[fa],Pg=Js.$l.x,ca=Js.$l.y,re=Js.angle,ir=0;4>ir;ir++){switch(ir){case 0:Ui.h(Ao,wr);break;case 1:Ui.h(Ao+aa,wr);break;case 2:Ui.h(Ao,wr+Fl);break;case 3:Ui.h(Ao+aa,wr+Fl)}Ui.rotate(re+ae.angle),Ui.offset(Pg,ca),fa===0&&ir===0?kn.h(Ui.x,Ui.y,0,0):kn.Ye(Ui),Ui.offset(-Pg,-ca),Ui.rotate(-re-ae.angle)}N.free(Ui),Eo.graduatedBounds!==null&&Eo.graduatedBounds.push(kn),Be(ps,kn.x,kn.y,kn.width,kn.height)}else if(ae instanceof Xt){var Rn=t,Ng=r;Rn.temporaryTextBlock===null&&(Rn.temporaryTextBlock=new Xt);var qi=Rn.temporaryTextBlock;R2(qi,ae);var ds=ae.alignmentFocus;ds.Lc()&&(ds=Mo);for(var Bn=ae.segmentOrientation,pa=ae.segmentOffset,Zs=new z,cc=0,da=0,Rr=0,El=0,Qs=0,ga=Li.length,gs=0;gs<ga;gs++){var ho=Li[gs];cc=ho.$l.x,da=ho.$l.y,Rr=ho.angle,Qs=El=ae.angle,Bn!==Si&&(Qs=Bn===If||Bn===Ed?Rr+ae.angle:Rr,El=K.computeAngle(Bn,Qs)),qi.Kb=El,qi.text=ho.text||"",qi.measure(1/0,1/0,0,0);var ys=qi.measuredBounds,Do=qi.naturalBounds,ms=Do.width,Al=Do.height,Mr=wt.alloc();Mr.reset(),Mr.translate(-ys.x,-ys.y),Mr.scale(qi.scale,qi.scale),Mr.rotate(Qs,ms/2,Al/2),Bn!==Rf&&Bn!==zf||Mr.rotate(90,ms/2,Al/2),Bn!==Bf&&Bn!==Vf||Mr.rotate(-90,ms/2,Al/2),Bn===Ad&&(45<Rr&&135>Rr||225<Rr&&315>Rr)&&Mr.rotate(-Rr,ms/2,Al/2);var Bu=z.allocAt(0,0,ms,Al),vs=N.alloc();vs.xi(Bu,ds),Mr.Ga(vs);var zu=-vs.x,L1=-vs.y,Io=N.alloc();Io.assign(pa),isNaN(Io.x)&&(Io.x=ms/2+3),isNaN(Io.y)&&(Io.y=-(Al/2+3)),Io.rotate(Rr),cc+=Io.x+zu,da+=Io.y+L1;var Dl=new z(cc,da,ys.width,ys.height),pc=new z(ys.x,ys.y,ys.width,ys.height),j1=new z(Do.x,Do.y,Do.width,Do.height);ho.Tz=El,ho.lineCount=qi.lineCount,ho.lines=[qi.Cb,qi.Ih,qi.df,qi.Le,qi.Pc,qi.$b,qi.ze],ho.actualBounds=Dl,ho.measuredBounds=pc,ho.naturalBounds=j1,gs===0?Zs.assign(Dl):Zs.dd(Dl),N.free(Io),N.free(vs),z.free(Bu),wt.free(Mr)}Rn.graduatedBounds!==null&&Rn.graduatedBounds.push(Zs),Be(Ng,Zs.x,Zs.y,Zs.width,Zs.height)}yn(ae,!1)}}},Pf.prototype.arrange=function(t,e,i){if(t.graduatedBounds!==null){var n=t.Pb(),r=t.graduatedMarks;if(r!==null){var o=t.graduatedBounds,l=0,h=o[l];l++,n!==null&&n.arrange(h.x-i.x,h.y-i.y,h.width,h.height);for(var a=e.length,f=0;f<a;f++){var p=e[f];h=r[f],p.visible&&p!==n&&h.length!==0&&(h=o[l],l++,p.arrange(h.x-i.x,h.y-i.y,h.width,h.height))}t.graduatedBounds=null}}},Pf.prototype.fc=function(t,e,i){var n=i.$i;i.$i=!0;var r=t.naturalBounds,o=r.width,l=r.height;r=e instanceof Ki,e.save(),e.beginPath(),e.rect(-1,-1,o+1,l+1),e.clip(),e.Se(),o=t.Pb(),o.fc(e,i),l=t.Df()*i.scale,0>=l&&(l=1);for(var h=o.actualBounds,a=t.O.s,f=t.graduatedMarks,p=a.length,d=0;d<p;d++){var y=a[d],m=f[d],x=m.length;if(y.visible&&y!==o&&m.length!==0){if(y instanceof vt){if(!(2>t.graduatedTickUnit*y.interval*o.geometry.flattenedTotalLength/t.graduatedRange*l&&y.graduatedSkip===null)){var M=y.measuredBounds,k=y.strokeWidth*y.scale,S=y.alignmentFocus;S.Lc()&&(S=Mo);for(var C=0;C<x;C++){var T=m[C].$l,L=m[C].angle,j=S,A=y.Ab;A.reset(),A.translate(T.x+h.x,T.y+h.y),A.rotate(L+y.angle,0,0),A.translate(-M.width*j.x+j.offsetX+k/2,-M.height*j.y+j.offsetY+k/2),A.scale(y.scale,y.scale),jh(y,!1),y.wh.set(y.Ab),y.Kk=y.scale,js(y,!1),y.fc(e,i),r&&(t.svg.appendChild(y.svg),y.svg=null),y.Ab.reset()}}}else if(y instanceof Xt)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Xt),M=t.temporaryTextBlock,R2(M,y),k=0;k<x;k++)S=m[k],S.actualBounds&&S.measuredBounds&&S.naturalBounds&&(M.ec=S.text||"",M.Kb=S.Tz||0,M.Fc=S.lineCount||0,C=S.lines,C!==void 0&&(M.Cb=C[0],M.Ih=C[1],M.df=C[2],M.Le=C[3],M.Pc=C[4],M.$b=C[5],M.ze=C[6]),S.naturalBounds&&(M.dc=S.naturalBounds),S.actualBounds&&(C=S.actualBounds,M.arrange(C.x,C.y,C.width,C.height)),C=S.actualBounds,M.arrange(C.x,C.y,C.width,C.height),T=S.measuredBounds,S=S.naturalBounds,L=M.Ab,L.reset(),L.translate(C.x+h.x,C.y+h.y),L.translate(-T.x,-T.y),M.no(L,S.x,S.y,S.width,S.height),jh(M,!1),M.wh.set(M.Ab),M.Kk=M.scale,js(M,!1),M.Ng=y.part,M.Me=y.panel,M.fc(e,i),M.Me=null,M.Ng=null,r&&(t.svg.appendChild(M.svg),M.svg=null))}}i.$i=n,e.restore(),e.Uc(!0)};function _(t,e){if(ot.call(this),this.na=null,t===void 0)this.na=_.Position;else if(typeof t=="string"){var i=Jn.I(t);i!==null&&(this.na=i)}else t instanceof ye?this.na=t:t&&(this.na=_.Position,e=t);this.na===null&&I("Panel type not specified or PanelLayout not loaded: "+t),this.o=this.o|4194304|(this.na===_.Grid?1048576:0),this.O=new tt,this.yb=rh,this.Tm=$e,this.Uf=Wn,this.$g=null,this.$e="",this.jg=new z(NaN,NaN,NaN,NaN),this.T=this.F=null,this.xo=jr,this.jn=NM,this.kn=vo,this.ub=this.ra=null,this.zn=NaN,this.ge=this.Hh=null,e&&Object.assign(this,e)}V(_,ot),_.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.na=this.na,t.yb=this.yb.J(),t.Tm=this.Tm.J(),t.Uf=this.Uf,t.$e=this.$e,t.jg.assign(this.jg),this.T!==null&&(t.T=this.T.copy(t)),t.xo=this.xo,t.jn=this.jn.J(),t.kn=this.kn.J(),this.ra!==null&&(t.ra=this.ra.copy()),t.ub=this.ub,t.zn=this.zn,t.Hh=this.Hh},_.prototype.Af=function(t){ot.prototype.Af.call(this,t),t.O=this.O;for(var e=t.O.s,i=e.length,n=0;n<i;n++)e[n].Me=t;t.$g=null},_.prototype.copy=function(){var t=ot.prototype.copy.call(this);if(t!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.wi(t),r.Ng=null;var o=t.O,l=o.count;if(o.Gb(l,r),o=t.part,o!==null){o.Rh=null,r.portId!==null&&o instanceof b&&(o.Te=!0);var h=t.diagram;h!==null&&h.undoManager.isUndoingRedoing||o.cb(Me,"elements",t,null,r,null,l)}}return t}return null},s=_.prototype,s.toString=function(){return"Panel("+this.type.name+")#"+Oi(this)},s.Pn=function(t){ot.prototype.Pn.call(this,t);for(var e=this.O.s,i=e.length,n=0;n<i;n++)e[n].Pn(t)},s.hh=function(t,e){if(this.na===_.Grid)t.xc(),this.na.fc(this,t,e);else if(this.na===_.Graduated)t.xc(),this.na.fc(this,t,e);else{if(this.na===_.Table)if(t.xc(),t instanceof Ki){var i=t.yd;t.yd=_p(t,"gojs-ts"),tv(this,t),t.nh.pop(),t.yd=i}else tv(this,t);(i=this.isClipping&&this.na===_.Spot)&&t.save();for(var n=this.Pb(),r=this.O.s,o=r.length,l=0;l<o;l++){var h=r[l];i&&h===n&&(t.clipInsteadOfFill=!0),h.fc(t,e),i&&h===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Uc(!0))}};function tv(t,e){e.lineCap="butt";var i=0<t.rowCount?t.rowDefs:null,n=0<t.columnCount?t.colDefs:null;i!==null&&rd(t,e,!0,i,!0),n!==null&&rd(t,e,!1,n,!0),i!==null&&S2(t,e,!0,i),n!==null&&S2(t,e,!1,n),i!==null&&rd(t,e,!0,i,!1),n!==null&&rd(t,e,!1,n,!1)}function S2(t,e,i,n){for(var r=n.length,o=t.actualBounds,l=t.naturalBounds,h=!0,a=0;a<r;a++){var f=n[a];if(f!==void 0&&f.actual!==0)if(h)h=!1;else{if(i){if(f.position>l.height)continue}else if(f.position>l.width)continue;var p=f.separatorStrokeWidth;isNaN(p)&&(p=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var d=f.separatorStroke;if(d===null&&(d=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),p!==0&&d!==null){nn(t,e,d,!1,!1,l,o),d=!1;var y=f.separatorDashArray;y===null&&(y=i?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),y!==null&&(d=!0,e.js(y,0)),e.beginPath(),y=f.position+p,i?y>l.height&&(p-=y-l.height):y>l.width&&(p-=y-l.width),f=f.position+p/2,e.lineWidth=p,p=t.yb,i?(f+=p.top,y=l.width-p.right,e.moveTo(p.left,f),e.lineTo(y,f)):(f+=p.left,y=l.height-p.bottom,e.moveTo(f,p.top),e.lineTo(f,y)),e.stroke(),e.Se(),d&&e.fs()}}}}function rd(t,e,i,n,r){for(var o=n.length,l=t.actualBounds,h=t.naturalBounds,a=k2(t,!0),f=k2(t,!1),p=0;p<o;p++){var d=n[p];if(d!==void 0&&d.background!==null&&d.coversSeparators!==r&&d.actual!==0){var y=i?l.height:l.width;if(!(d.position>y)){var m=d.Vc(),x=d.separatorStrokeWidth;isNaN(x)&&(x=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var M=d.separatorStroke;M===null&&(M=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(M===null||d.index===(i?a:f))&&(x=0),m-=x,x=d.position+x,m+=d.actual,x+m>y&&(m=y-x),0>=m||(y=t.yb,nn(t,e,d.background,!0,!1,h,l),i?e.fillRect(y.left,x+y.top,l.width-(y.left+y.right),m):e.fillRect(x+y.left,y.top,m,l.height-(y.top+y.bottom)))}}}}function k2(t,e){for(var i=e?t.rowCount:t.columnCount,n=0;n<i;n++){var r=e?t.rowDefs[n]:t.colDefs[n];if(r!==void 0)return r.index}return 0}function ev(t){return t==="LineV"||t==="BarV"}s.lv=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].lv();this.Tc=!0},s.kk=function(t,e,i){if(!ot.prototype.kk.call(this,t,e,i))return!1;if(this.type===_.Table)i=this.svg.getElementsByClassName("gojs-ts"),i=i.length!==0?i[0]:null,i!==null&&(i.innerHTML=""),t.yd=i,tv(this,t),t.yd=null;else if(this.na===_.Grid||this.na===_.Graduated)return this.svg.innerHTML="",this.svg.remove(),!1;i=this.O.s;for(var n=i.length,r=0;r<n;r++)i[r].fc(t,e);return!0},s.nk=function(){return!0},s.$o=function(t,e,i,n){if(!this.isClipping)if(this.Dd()&&t.bk!==null){t=t.bk,e=this.O.s;for(var r=0,o=0,l=0;l<e.length;l++)if(e[l].Ed()){var h=e[l].actualBounds;r=l===0?h.x:Math.min(h.x,r),o=l===0?h.y:Math.min(h.y,o)}n.setAttributeNS(null,"clip-path","path('M "+(t.x-i.x-r)+","+(t.y-i.y-o)+" l "+t.width+" 0 l 0 "+t.height+" l -"+t.width+" 0 z')")}else ot.prototype.$o.call(this,t,e,i,n)},s.Sj=function(t,e,i,n,r){var o=this.se(),l=this.transform,h=1/(l.m11*l.m22-l.m12*l.m21),a=l.m22*h,f=-l.m12*h,p=-l.m21*h,d=l.m11*h,y=h*(l.m21*l.dy-l.m22*l.dx),m=h*(l.m12*l.dx-l.m11*l.dy);if(this.areaBackground!==null)return l=this.actualBounds,O.Ff(l.left,l.top,l.right,l.bottom,t,e,i,n,r);if(this.background!==null)return o=t*a+e*p+y,h=t*f+e*d+m,t=i*a+n*p+y,a=i*f+n*d+m,r.h(0,0),i=this.naturalBounds,o=O.Ff(0,0,i.width,i.height,o,h,t,a,r),r.transform(l),o;o||(a=1,p=f=0,d=1,m=y=0),h=t*a+e*p+y,t=t*f+e*d+m,a=i*a+n*p+y,i=i*f+n*d+m,r.h(a,i),n=(a-h)*(a-h)+(i-t)*(i-t),f=!1,d=this.O.s,m=d.length,p=N.alloc(),y=null,e=1/0;var x=null,M=this.isClipping&&this.na===_.Spot;M&&(x=N.alloc(),y=this.Pb(),(f=y.Sj(h,t,a,i,x))&&(e=(h-x.x)*(h-x.x)+(t-x.y)*(t-x.y)));for(var k=0;k<m;k++){var S=d[k];S.visible&&S!==y&&S.Sj(h,t,a,i,p)&&(f=!0,S=(h-p.x)*(h-p.x)+(t-p.y)*(t-p.y),S<n&&(n=S,r.set(p)))}return M&&(e>n&&r.set(x),N.free(x)),N.free(p),o&&r.transform(l),f},s.Gj=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Gj();ot.prototype.Gj.call(this)},s.v=function(t){if(!Qo(this)){ot.prototype.v.call(this,t),t=null,(this.na===_.Auto||this.na===_.Link)&&(t=this.Pb());for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.v(!0),!r.desiredSize.w()){var o=cr(r,!1);(r instanceof Mi||r instanceof _||r instanceof Xt||o!==oe)&&r.v(!0)}}}},s.Uj=function(){if(!Qo(this)){yn(this,!0),yl(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Uj()}},s.Uk=function(){if(!(this.o&2048)){jh(this,!0),js(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Wu()}},s.Wu=function(){js(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Wu()},s.Wl=function(t,e,i,n){var r=this.jg;r.h(0,0,0,0);var o=this.desiredSize,l=this.minSize;i===void 0&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var h=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,h.width)),isNaN(o.height)||(e=Math.min(o.height,h.height)),t=Math.max(i,t),e=Math.max(n,e);var a=this.yb;t=Math.max(t-a.left-a.right,0),e=Math.max(e-a.top-a.bottom,0);var f=this.O.s;f.length!==0&&this.na.measure(this,t,e,f,r,i,n),t=r.width+a.left+a.right,a=r.height+a.top+a.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(a=o.height),t=Math.min(h.width,t),a=Math.min(h.height,a),t=Math.max(l.width,t),a=Math.max(l.height,a),t=Math.max(i,t),a=Math.max(n,a),wo(r,t,a),wo(this.naturalBounds,t,a),this.Ge(0,0,t,a)},s.Pb=function(){if(this.$g===null){var t=this.O.s,e=t.length;if(e===0)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isPanelMain===!0)return this.$g=n}this.$g=t[0]}return this.$g};function To(t){return t.part!==null?t.part.locationObject:null}s.eh=function(t,e,i,n){var r=this.O.s;if(this.actualBounds.h(t,e,i,n),r.length!==0){if(!this.desiredSize.w()){t=cr(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var l=this.Kg,h=l.left+l.right;switch(l=l.top+l.bottom,e===i&&o===n&&(t=oe),t){case oe:(e>i||o>n)&&(this.v(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case le:this.v(!0),this.measure(i+h,n+l,0,0);break;case Ge:this.v(!0),this.measure(i+h,o+l,0,0);break;case Ze:this.v(!0),this.measure(e+h,n+l,0,0)}}this.na.arrange(this,r,this.jg)}},s.gh=function(t){var e=this.naturalBounds,i=To(this);if(lr(0,0,e.width,e.height,t.x,t.y)){e=this.O.s;for(var n=e.length,r=N.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(yi(r.set(t),o.transform),o.ca(r)))return N.free(r),!0}return N.free(r),!(this.Na===null&&this.areaBackground===null)}return!1},s.ks=function(t){if(this.bindingId===t)return this;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].ks(t);if(r!==null)return r}return null},s.qm=function(t,e){if(e(this,t),t instanceof _){t=t.O.s;for(var i=t.length,n=0;n<i;n++)this.qm(t[n],e)}};function wl(t,e){P2(t,t,e)}function P2(t,e,i){i(e),e=e.O.s;for(var n=e.length,r=0;r<n;r++){var o=e[r];o instanceof _&&P2(t,o,i)}}function dj(t,e){N2(t,t,e)}function N2(t,e,i){if(i(e),e instanceof _){e=e.O.s;for(var n=e.length,r=0;r<n;r++)N2(t,e[r],i)}}s.Nl=function(t){return C2(this,this,t)};function C2(t,e,i){if(i(e))return e;if(e instanceof _){e=e.O.s;for(var n=e.length,r=0;r<n;r++){var o=C2(t,e[r],i);if(o!==null)return o}}return null}s.fb=function(t){if(this.name===t)return this;var e=this.O.s,i=e.length;this.Hh===null&&this.itemTemplateMap===null||(i=Nf(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof _){var o=r.fb(t);if(o!==null)return o}if(r.name===t)return r}return null};function T2(t){t=t.O.s;for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];r instanceof _?i=Math.max(i,T2(r)):r instanceof vt&&(i=Math.max(i,r.ig/2*r.strokeMiterLimit*r.Df()))}return i}s.se=function(){return!(this.type===_.TableRow||this.type===_.TableColumn)};function ts(t){return t.type===_.TableRow||t.type===_.TableColumn}s.hc=function(t,e,i){if(this.pickable===!1||(e===void 0&&(e=null),i===void 0&&(i=null),$n(this)))return null;var n=this.naturalBounds,r=1/this.Df(),o=this.se(),l=o?t:yi(N.allocAt(t.x,t.y),this.transform),h=this.diagram,a=10,f=5;if(h!==null&&(a=h.Ql("extraTouchArea"),f=a/2),lr(-(f*r),-(f*r),n.width+a*r,n.height+a*r,l.x,l.y)){if(!this.isAtomic){r=this.O.s;var p=r.length;if(h=N.alloc(),f=(a=this.isClipping&&this.na===_.Spot)?this.Pb():null,a&&(f.se()?yi(h.set(t),f.transform):h.set(t),!f.ca(h)))return N.free(h),o||N.free(l),null;for(var d=To(this);p--;){var y=r[p];if((y.visible||y===d)&&(y.se()?yi(h.set(t),y.transform):h.set(t),!a||y!==f)){var m=null;if(y instanceof _?m=y.hc(h,e,i):y.pickable===!0&&y.ca(h)&&(m=y),m!==null&&(e!==null&&(m=e(m)),m!==null&&(i===null||i(m))))return N.free(h),o||N.free(l),m}}N.free(h)}return this.background===null&&this.areaBackground===null?(o||N.free(l),null):(t=lr(0,0,n.width,n.height,l.x,l.y)?this:null,o||N.free(l),t)}return o||N.free(l),null},s.ji=function(t,e,i,n){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var r=this.naturalBounds,o=this.se(),l=o?t:yi(N.allocAt(t.x,t.y),this.transform);if(r=lr(0,0,r.width,r.height,l.x,l.y),ts(this)||r){if(!this.isAtomic){for(var h=this.O.s,a=h.length,f=N.alloc(),p=To(this);a--;){var d=h[a];if(d.visible||d===p){d.se()?yi(f.set(t),d.transform):f.set(t);var y=d;d=d instanceof _?d:null,(d!==null?d.ji(f,e,i,n):y.ca(f))&&y.pickable!==!1&&(e!==null&&(y=e(y)),y===null||i!==null&&!i(y)||n.add(y))}}N.free(f)}return o||N.free(l),r&&(this.background!==null||this.areaBackground!==null)}return o||N.free(l),!1},s.Cf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=wt.alloc(),l.reset()),l.multiply(this.transform),this.fh(t,l))return iv(this,e,i,r),o===void 0&&wt.free(l),!0;if(this.Xc(t,l)){if(!this.isAtomic)for(var h=To(this),a=this.O.s,f=a.length;f--;){var p=a[f];if(p.visible||p===h){var d=p.actualBounds,y=this.naturalBounds;d.x>y.width||d.y>y.height||0>d.x+d.width||0>d.y+d.height||(d=p,p=p instanceof _?p:null,y=wt.alloc(),y.set(l),(p!==null?p.Cf(t,e,i,n,r,y):u2(d,t,n,y))&&(e!==null&&(d=e(d)),d===null||i!==null&&!i(d)||r.add(d)),wt.free(y))}}return o===void 0&&wt.free(l),n}return o===void 0&&wt.free(l),!1};function iv(t,e,i,n){for(var r=t.O.s,o=r.length;o--;){var l=r[o];if(l.visible){var h=l.actualBounds,a=t.naturalBounds;h.x>a.width||h.y>a.height||0>h.x+h.width||0>h.y+h.height||(l instanceof _&&iv(l,e,i,n),e!==null&&(l=e(l)),l===null||i!==null&&!i(l)||n.add(l))}}}s.og=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var l=this.naturalBounds,h=this.se(),a=h?t:yi(N.allocAt(t.x,t.y),this.transform),f=h?e:yi(N.allocAt(e.x,e.y),this.transform),p=a.Bf(f),d=0<a.x&&a.x<l.width&&0<a.y&&a.y<l.height||mi(a.x,a.y,0,0,0,l.height)<=p||mi(a.x,a.y,0,l.height,l.width,l.height)<=p||mi(a.x,a.y,l.width,l.height,l.width,0)<=p||mi(a.x,a.y,l.width,0,0,0)<=p;if(l=a.zd(0,0)<=p&&a.zd(0,l.height)<=p&&a.zd(l.width,0)<=p&&a.zd(l.width,l.height)<=p,h||(N.free(a),N.free(f)),d){if(!this.isAtomic){a=N.alloc(),f=N.alloc(),p=To(this);for(var y=this.O.s,m=y.length;m--;){var x=y[m];if(x.visible||x===p){var M=x.actualBounds,k=this.naturalBounds;(!h||!(M.x>k.width||M.y>k.height||0>M.x+M.width||0>M.y+M.height))&&(x.se()?(M=x.transform,yi(a.set(t),M),yi(f.set(e),M)):(a.set(t),f.set(e)),M=x,x=x instanceof _?x:null,(x!==null?x.og(a,f,i,n,r,o):M.ux(a,f,r))&&(i!==null&&(M=i(M)),M===null||n!==null&&!n(M)||o.add(M)))}}N.free(a),N.free(f)}return r?d:l}return!1};function nv(t){var e=null;return t instanceof vt&&(e=t.spot1,e===$e&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=ei),e}function rv(t){var e=null;return t instanceof vt&&(e=t.spot2,e===$e&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Kr),e}s.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.Gb(this.O.count,e[i]);return this},s.M=function(t){return this.O.M(t)},s.Gb=function(t,e){e instanceof lt&&I("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.rg(e))&&(this===e&&I("Cannot make a Panel contain itself: "+this.toString()),I("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(i!==null&&i!==this&&I("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==_.Grid||e instanceof vt||I("Can only add Shapes to a Grid Panel, not: "+e),this.na!==_.Graduated||e instanceof vt||e instanceof Xt||I("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.wi(this),e.Ng=null,this.itemArray!==null){var n=e.data;n!==null&&typeof n=="object"&&(this.ge===null&&(this.ge=new mt),this.ge.add(n,e))}var r=this.O;if(n=-1,i===this){for(var o=-1,l=this.O.s,h=l.length,a=0;a<h;a++)if(l[a]===e){o=a;break}if(o!==-1){if(o===t||o+1>=r.count&&t>=r.count)return;r.mb(o),n=o}else I("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Gb(t,e),(t===0||e.isPanelMain)&&(this.$g=null),Qo(this)||this.v(),e.v(!1),e.portId!==null?this.Te=!0:e instanceof _&&e.Te===!0&&(this.Te=!0),this.graduatedIntervals=null,this.If()||sd(this,e,!1),i=this.part,i!==null&&(i.Rh=null,i.ag=NaN,this.Te&&i instanceof b&&(i.Te=!0),i.Te&&i instanceof b&&(i.vc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(n!==-1&&i.cb(Ne,"elements",this,e,null,n,null),i.cb(Me,"elements",this,null,e,null,t)))};function ov(t,e){t.o=e?t.o|16777216:t.o&-16777217}s.remove=function(t){for(var e=this.O.s,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}n!==-1&&this.oc(n,!0)},s.mb=function(t){0<=t&&this.oc(t,!0)},s.oc=function(t,e){var i=this.O,n=i.M(t);if(n.Ng=null,n.wi(null),this.ge!==null){var r=n.data;typeof r=="object"&&this.ge.remove(r)}i.mb(t),yn(this,!1),this.v(),this.$g===n&&(this.$g=null),this.graduatedIntervals=null;var o=this.part;o!==null&&(o.Rh=null,o.ag=NaN,o.Vb(),o instanceof b&&(n instanceof _?n.qm(n,function(l,h){Lv(o,h,e)}):Lv(o,n,e)),i=this.diagram,i!==null&&i.undoManager.isUndoingRedoing||o.cb(Ne,"elements",this,n,null,t,null))},s.Fb=function(t){0>t&&at(t,">= 0",_,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var i=new ce;i.wi(this),i.isRow=!0,i.index=t,e[t]=i,this.cb(Me,"rowdefs",this,null,i,null,t)}return e[t]},s.oA=function(t){if(0>t&&at(t,">= 0",_,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(Ne,"rowdefs",this,i,null,t,null),this.v()}}};function L2(t,e,i){var n=t.rowDefs;if(!(0>e)){if(n[e]=i instanceof ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}s.Eb=function(t){0>t&&at(t,">= 0",_,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var i=new ce;i.wi(this),i.isRow=!1,i.index=t,e[t]=i,this.cb(Me,"coldefs",this,null,i,null,t)}return e[t]},s.jA=function(t){if(0>t&&at(t,">= 0",_,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(Ne,"coldefs",this,i,null,t,null),this.v()}}};function j2(t,e,i){var n=t.colDefs;if(!(0>e)){if(n[e]=i instanceof ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}s.Jy=function(t){var e=null;return t.isRow?e=this.Fb(t.index):t.isRow||(e=this.Eb(t.index)),e&&ld(e,t),this},s.Ky=function(t,e){return(t=this.Fb(t))&&ld(t,new ce(e)),this},s.Ey=function(t,e){return(t=this.Eb(t))&&ld(t,new ce(e)),this},s.pz=function(t){if(0>t||this.type!==_.Table||this.rowCount===0)return-1;for(var e=0,i=this.rowDefs,n=i.length,r=this.topIndex;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.hz=function(t){if(0>t||this.type!==_.Table||this.columnCount===0)return-1;for(var e=0,i=this.colDefs,n=i.length,r=this.leftIndex;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.Hz=function(t,e){if(e===void 0&&(e=new N(NaN,NaN)),this.type!==_.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.Pb();return i.geometry.Pu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Ga(e)},s.Iz=function(t){if(this.type!==_.Graduated)return NaN;var e=this.Pb();return e.transform.Cd(t),e.geometry.yx(t)*this.graduatedRange+this.graduatedMin};function O2(t){return t=t.allBindings,t!==null&&t._isFrozen}function En(t){var e=t.allBindings;if(e===null)t.data!==null&&I("Template cannot have .data be non-null: "+t),t.allBindings=e=new tt;else if(e._isFrozen)return;var i=new tt;ov(t,!1),t.qm(t,function(f,p){p.th();var d=p.localBindings;if(d!==null)for(Um(p,!1),d=d.iterator;d.next();){var y=d.value;y.mode===Wf&&Um(p,!0);var m=y.sourceName;m!==null&&(m==="/"&&ov(f,!0),m=_k(y,f,p),m!==null&&(i.add(m),m.srcBindings===null&&(m.srcBindings=new tt),m.srcBindings.add(y))),e.add(y)}if(p instanceof _&&p.type===_.Table){if(0<p.rowCount){for(f=p.rowDefs,d=f.length,y=0;y<d;y++)if(m=f[y],m!==void 0&&m.be!==null)for(var x=m.be.iterator;x.next();){var M=x.value;M.xd=m,M.to=2,M.wl=m.index,e.add(M)}}if(0<p.columnCount){for(p=p.colDefs,f=p.length,d=0;d<f;d++)if(y=p[d],y!==void 0&&y.be!==null)for(m=y.be.iterator;m.next();)x=m.value,x.xd=y,x.to=1,x.wl=y.index,e.add(x)}}});for(var n=i.iterator;n.next();){var r=n.value;if(r.srcBindings!==null){Um(r,!0);for(var o=r.srcBindings.iterator;o.next();){var l=o.value;r.localBindings===null&&(r.localBindings=new tt),r.localBindings.add(l)}}r.srcBindings=null}for(n=e.iterator;n.next();)if(r=n.value,o=r.xd,o!==null){r.xd=null;var h=r.targetProperty,a=h.indexOf(".");0<a&&o instanceof _&&(l=h.substring(0,a),h=h.substr(a+1),a=o.fb(l),a!==null?(o=a,r.targetProperty=h):kt('Warning: unable to find GraphObject named "'+l+'" for Binding: '+r.toString())),o instanceof ce?(l=Oi(o.panel),r.Ai=l===void 0?-1:l,o.panel.bindingId=r.Ai):o instanceof ot?(l=Oi(o),r.Ai=l===void 0?-1:l,o.bindingId=r.Ai):I("Unknown type of binding target: "+o)}e.freeze(),t instanceof lt&&t.Yc()&&t.Va()}s.Wy=function(t){t===void 0&&(t=!1);var e=this.copy();return dj(e,function(i){i instanceof _&&(i.allBindings=null,i.ub=null);var n=i.localBindings;n!==null&&(i.localBindings=null,n.each(function(r){i.bind(r.copy())})),n=i.animationTriggers,n!==null&&(i.animationTriggers=null,n.each(function(r){i.Jv(r.value.copy())}))}),t&&En(e),e},s.Ma=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((t===""||n===""||n===t)&&(n=i.targetProperty,i.converter!==null||n!=="")){n=this.data;var r=i.sourceName;if(r!==null){if(r==="")n=this;else if(r==="/")n=this;else if(r===".")n=this;else if(r==="..")n=this;else if(n=this.fb(r),n===null)continue}else if(i.isToModel)if(n=this.diagram,n!==null)n=n.model.modelData;else continue;var o=this,l=i.Ai;if(l!==-1){if(o=this.ks(l),o===null)continue}else i.xd!==null&&(o=i.xd);if(r==="/"?n=o.part:r==="."?n=o:r===".."&&(n=o.panel),r=i.to,r!==0){if(!(o instanceof _))continue;r===1?o=o.Eb(i.wl):r===2&&(o=o.Fb(i.wl))}o!==void 0&&i.Mv(o,n)}}},s.tx=function(t){return t==null||this.ge===null?null:this.ge.I(t)};function gj(t,e){t=t.O.s;for(var i=t.length,n=e.length,r=0,o=null;r<i&&(o=t[r],!(o instanceof _&&o.data!==null));)r++,o=t[r];if(i-r!==n)return!0;if(o===null)return 0<n;for(var l=0;r<i&&l<n;){if(o=t[r],!(o instanceof _)||o.data!==e[l])return!0;r++,l++}return!1}function Nf(t){if(t.type===_.Spot||t.type===_.Auto)return Math.min(t.O.length,1);if(t.type===_.Link){t=t.O;for(var e=t.length,i=0;i<e;i++){var n=t.M(i);if(!(n instanceof vt&&n.isPanelMain))break}return i}return t.type===_.Table&&0<t.O.length&&(t=t.O.M(0),t.isPanelMain&&t instanceof _&&ts(t))?1:0}s.mv=function(){for(var t=Nf(this);this.O.length>t;)this.oc(this.O.length-1,!1);F2(this,this.itemArray)};function F2(t,e){var i=Nf(t);if(e===null||e.length===0)for(;t.O.length>i;)t.oc(t.O.length-1,!1);else if(t.O.length<=i){i=e.length;for(var n=0;n<i;n++)od(t,e[n],n,!0)}else{n=i;for(var r=0;r<e.length;r++,n++){var o=e[r],l=n<t.O.length?t.O.M(n):null;if(l instanceof _){if(l.data!==o){var h=lv(t,l.data),a=lv(t,o),f=a!==h;f||(h=uv(t,h),f=uv(t,a)!==h),f?(t.oc(n,!1),od(t,o,r,!1)):l.data=o}}else od(t,o,r,!1)}for(;n<t.O.length;)t.oc(n,!1);t.$g=null,sv(t,i,0),Qo(t)||t.v(),t.graduatedIntervals=null,t.If()||sd(t,t,!1),e=t.part,e!==null&&(e.Rh=null,e.ag=NaN,t.Te&&e instanceof b&&(e.Te=!0),e.Te&&e instanceof b&&(e.vc=null))}}function od(t,e,i,n){if(!(e==null||0>i)){var r=lv(t,e);if(r=uv(t,r),r!==null){if(En(r),r=r.copy(),r.o&16777216){var o=t.ih();o!==null&&ov(o,!0)}typeof e=="object"&&(t.ge===null&&(t.ge=new mt),t.ge.add(e,r)),o=i+Nf(t),t.Gb(o,r),n&&(r.ub=e,sv(t,o,i),r.ub=null),r.data=e}}}function sv(t,e,i){for(t=t.O;e<t.length;){var n=t.M(e);if(n instanceof _){var r=e,o=i;n.type===_.TableRow?n.row=r:n.type===_.TableColumn&&(n.column=r),n.itemIndex=o}e++,i++}}function lv(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=se(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;I("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function uv(t,e){var i=t.itemTemplateMap,n=null;return i!==null&&(n=i.I(e)),n===null&&(i!==null&&(n=i.I("")),n===null&&(E2||(E2=!0,kt('No item template Panel found for category "'+e+'" on '+t),kt("  Using default item template."),t=new _,e=new Xt,e.bind(new ue("text","",Xi)),t.add(e),A2=t),n=A2)),n}function sd(t,e,i){var n=e.enabledChanged;if(n!==null&&n(e,i),e instanceof _){e=e.O.s,n=e.length;for(var r=0;r<n;r++){var o=e[r];i&&o instanceof _&&!o.isEnabled||sd(t,o,i)}}}function Fr(t,e){e.name=t,Jn.add(t,e)}B.Object.defineProperties(_.prototype,{type:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.isAtomic=this.na===_.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.O.iterator}},naturalBounds:{get:function(){return this.dc}},padding:{get:function(){return this.yb},set:function(t){typeof t=="number"?(0>t&&at(t,">= 0",_,"padding"),t=new At(t)):(0>t.left&&at(t.left,">= 0",_,"padding:value.left"),0>t.right&&at(t.right,">= 0",_,"padding:value.right"),0>t.top&&at(t.top,">= 0",_,"padding:value.top"),0>t.bottom&&at(t.bottom,">= 0",_,"padding:value.bottom"));var e=this.yb;e.D(t)||(this.yb=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e.D(t)||(this.Tm=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.T!==null?this.T.Qp:rh},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.defaultSeparatorPadding;e.D(t)||(t=t.J(),this.T===null&&(this.T=new xn),this.T.Qp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.T!==null?this.T.ia:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Et)&&(t instanceof Et&&t.freeze(),this.T===null&&(this.T=new xn),this.T.ia=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.Ha:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new xn),this.T.Ha=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.T!==null?this.T.V:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||I("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.T===null&&(this.T=new xn),this.T.V=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.T!==null?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Et)&&(t instanceof Et&&t.freeze(),this.T===null&&(this.T=new xn),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new xn),this.T.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.T!==null?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||I("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.T===null&&(this.T=new xn),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.T!==null?this.T.nb:null},set:function(t){this.T===null&&(this.T=new xn),this.T.nb=t}},viewboxStretch:{get:function(){return this.xo},set:function(t){var e=this.xo;e!==t&&(this.xo=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.jn},set:function(t){var e=this.jn;if(!e.D(t)){t.w()&&t.width!==0&&t.height!==0||I("Invalid Panel.gridCellSize: "+t),this.jn=t.J();var i=this.diagram;i!==null&&this===i.grid&&Jo(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.kn},set:function(t){var e=this.kn;if(!e.D(t)){t.w()||I("Invalid Panel.gridOrigin: "+t),this.kn=t.J();var i=this.diagram;i!==null&&this===i.grid&&Jo(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.ra!==null?this.ra.lq:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.ra===null&&(this.ra=new Lo),this.ra.lq=t,this.v(),this.g("graduatedMin",e,t),vu(this)&&(t=this.part,t!==null&&gl(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.ra!==null?this.ra.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.ra===null&&(this.ra=new Lo),this.ra.F=t,this.v(),this.g("graduatedMax",e,t),vu(this)&&(t=this.part,t!==null&&gl(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.ra!==null?this.ra.ia:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.ra===null&&(this.ra=new Lo),this.ra.ia=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.ra!==null?this.ra.V:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.ra===null&&(this.ra=new Lo),this.ra.V=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.ra!==null?this.ra.u:null},set:function(t){this.ra!==null?this.ra.u=t:t!==null&&(this.ra=new Lo,this.ra.u=t)}},graduatedBounds:{get:function(){return this.ra!==null?this.ra.j:null},set:function(t){this.ra!==null?this.ra.j=t:t!==null&&(this.ra=new Lo,this.ra.j=t)}},graduatedIntervals:{get:function(){return this.ra!==null?this.ra.m:null},set:function(t){this.ra!==null?this.ra.m=t:t!==null&&(this.ra=new Lo,this.ra.m=t)}},temporaryTextBlock:{get:function(){return this.ra!==null?this.ra.Zh:null},set:function(t){this.ra!==null?this.ra.Zh=t:t!==null&&(this.ra=new Lo,this.ra.Zh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Te:{get:function(){return(this.o&8388608)!==0},set:function(t){(this.o&8388608)!==0!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return this.T===null&&(this.T=new xn),this.T.Oc}},rowCount:{get:function(){return this.T===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.T===null&&(this.T=new xn),this.T.Nc}},columnCount:{get:function(){return this.T===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.T!==null?this.T.ob:hd},set:function(t){var e=this.rowSizing;e!==t&&(this.T===null&&(this.T=new xn),this.T.ob=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.T!==null?this.T.j:hd},set:function(t){var e=this.columnSizing;e!==t&&(this.T===null&&(this.T=new xn),this.T.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.T!==null?this.T.Hb:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&I("Panel.topIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new xn),this.T.Hb=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.T!==null?this.T.hb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&I("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new xn),this.T.hb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.ub},set:function(t){var e=this.ub;if(e!==t){var i=this instanceof lt&&!(this instanceof Ct);En(this),this.ub=t;var n=this.diagram;n!==null&&(i?(i=n.partManager,this instanceof K?(e!==null&&i.bf.remove(e),t!==null&&i.bf.add(t,this)):this instanceof lt&&(e!==null&&i.cf.remove(e),t!==null&&i.cf.add(t,this))):(i=this.panel,i!==null&&i.ge!==null&&(e!==null&&i.ge.remove(e),t!==null&&i.ge.add(t,this)))),this.g("data",e,t),n!==null&&n.undoManager.isUndoingRedoing||t!==null&&this.Ma()}}},itemIndex:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.nb:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new xu),this.A.nb=t)}},itemArray:{get:function(){return this.Hh},set:function(t){var e=this.Hh;if(e!==t||t!==null&&gj(this,t)){var i=this.diagram;e!==t&&(i!==null&&e!==null&&$v(i.partManager,this,i),this.Hh=t,i!==null&&t!==null&&Wv(i.partManager,this)),this.g("itemArray",e,t),i!==null&&i.undoManager.isUndoingRedoing||F2(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new mt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof lt||t.isPanelMain)&&I("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.mv())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.Oc:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var i=t.iterator;i.next(););Se(this),this.A.Oc=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.mv()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Nc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(Se(this),this.A.Nc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this instanceof gt&&(this.tb=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.o&33554432)!==0},set:function(t){var e=(this.o&33554432)!==0;e!==t&&(this.o^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;if(e!==t){var i=this.panel===null||this.panel.If();this.o^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||i&&sd(this,this,t)}}},alignmentFocusName:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.v(),this.g("alignmentFocusName",e,t))}}}),B.Object.defineProperties(_,{Position:{get:function(){return Jn.I("Position")}},Horizontal:{get:function(){return Jn.I("Horizontal")}},Vertical:{get:function(){return Jn.I("Vertical")}},Spot:{get:function(){return Jn.I("Spot")}},Auto:{get:function(){return Jn.I("Auto")}},Table:{get:function(){return Jn.I("Table")}},Viewbox:{get:function(){return Jn.I("Viewbox")}},TableRow:{get:function(){return Jn.I("TableRow")}},TableColumn:{get:function(){return Jn.I("TableColumn")}},Link:{get:function(){return Jn.I("Link")}},Grid:{get:function(){return Jn.I("Grid")}},Graduated:{get:function(){return Jn.I("Graduated")}}}),_.prototype.rebuildItemElements=_.prototype.mv,_.prototype.findItemPanelForData=_.prototype.tx,_.prototype.updateTargetBindings=_.prototype.Ma,_.prototype.copyTemplate=_.prototype.Wy,_.prototype.graduatedValueForPoint=_.prototype.Iz,_.prototype.graduatedPointForValue=_.prototype.Hz,_.prototype.findColumnForLocalX=_.prototype.hz,_.prototype.findRowForLocalY=_.prototype.pz,_.prototype.addColumnDefinition=_.prototype.Ey,_.prototype.addRowDefinition=_.prototype.Ky,_.prototype.addRowColumnDefinition=_.prototype.Jy,_.prototype.removeColumnDefinition=_.prototype.jA,_.prototype.getColumnDefinition=_.prototype.Eb,_.prototype.removeRowDefinition=_.prototype.oA,_.prototype.getRowDefinition=_.prototype.Fb,_.prototype.removeAt=_.prototype.mb,_.prototype.remove=_.prototype.remove,_.prototype.insertAt=_.prototype.Gb,_.prototype.elt=_.prototype.M,_.prototype.add=_.prototype.add,_.prototype.findObject=_.prototype.fb,_.prototype.findInVisualTree=_.prototype.Nl,_.prototype.walkVisualTreeFrom=_.prototype.qm,_.prototype.findMainElement=_.prototype.Pb;var E2=!1,A2=null,Jn=new mt;_.className="Panel",_.definePanelLayout=Fr,Fr("Position",new Wp),Fr("Vertical",new Jp),Fr("Auto",new Qp),Fr("Link",new nd);function Lo(){this.lq=0,this.F=100,this.ia=10,this.V=0,this.Zh=this.m=this.j=this.u=null}Lo.prototype.copy=function(){var t=new Lo;return t.lq=this.lq,t.F=this.F,t.ia=this.ia,t.V=this.V,t.u=this.u,t.j=this.j,t.m=this.m,t.Zh=this.Zh,t},Lo.className="GradPanelSettings";function xn(){this.Oc=[],this.Nc=[],this.j=this.ob=hd,this.hb=this.Hb=0,this.Qp=rh,this.Ha=1,this.V=this.ia=null,this.F=1,this.nb=this.m=this.u=null}xn.prototype.copy=function(t){for(var e=new xn,i=this.Oc,n=i.length,r=e.Oc,o=0;o<n;o++)if(i[o]!==void 0){var l=i[o].copy();l.wi(t),r[o]=l}for(i=this.Nc,n=i.length,r=e.Nc,o=0;o<n;o++)i[o]!==void 0&&(l=i[o].copy(),l.wi(t),r[o]=l);return e.ob=this.ob,e.j=this.j,e.Hb=this.Hb,e.hb=this.hb,e.Qp=this.Qp.J(),e.Ha=this.Ha,e.ia=this.ia,e.V=this.V,e.F=this.F,e.u=this.u,e.m=this.m,e.nb=this.nb,e},xn.className="TablePanelSettings";function ce(t){Le(this),this.Me=null,this.uq=!0,this.Za=0,this.Gc=NaN,this.jj=0,this.hj=1/0,this.Jb=$e,this.pa=this.nc=this.oa=0,this.be=null,this.oo=hv,this.hg=Wn,this.lo=this.dg=null,this.mo=NaN,this.Na=this.tj=null,this.Pm=!1,t&&(Object.assign(this,t),t.column!==void 0?(this.isRow=!1,this.index=t.column):t.row!==void 0&&(this.isRow=!0,this.index=t.row))}ce.prototype.copy=function(){var t=new ce;return t.uq=this.uq,t.Za=this.Za,t.Gc=this.Gc,t.jj=this.jj,t.hj=this.hj,t.Jb=this.Jb,t.oa=this.oa,t.nc=this.nc,t.pa=this.pa,t.hg=this.hg,t.oo=this.oo,this.dg===null?t.dg=null:t.dg=this.dg.J(),t.lo=this.lo,t.mo=this.mo,t.tj=null,this.tj!==null&&(t.separatorDashArray=Gt(this.separatorDashArray)),t.Na=this.Na,t.Pm=this.Pm,t.be=this.be,t};function ld(t,e){e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.dg=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.tj=null,e.separatorDashArray&&(t.tj=Gt(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.be=e.be}s=ce.prototype,s.qb=function(t){t.classType===ce&&(this.sizing=t)},s.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Oi(this)},s.wi=function(t){this.Me=t},s.Io=function(t){var e=0,i=this.Me;if(this.index!==t&&(t=this.separatorStroke,t===null&&i!==null&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(i!==null?e=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:e=0))),t=this.dg,t===null)if(i!==null)t=i.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},s.Vc=function(){var t=0,e=this.Me,i=0,n=this.isRow;if(e!==null&&e.type===_.Table)for(var r=n?e.rowDefs.length:e.colDefs.length,o=0;o<r;o++){var l=n?e.rowDefs[o]:e.colDefs[o];if(l!==void 0&&l.oa!==0){i=l.index;break}}if(this.index!==i&&(i=this.separatorStroke,i===null&&e!==null&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),i!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),n=this.dg,n===null)if(e!==null)n=e.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top+n.bottom:n.left+n.right)},s.Ob=function(t,e,i){var n=this.Me;if(n!==null&&(n.cb(Jt,t,this,e,i,void 0,void 0),this.be!==null&&(e=n.diagram,e!==null&&!e.skipsModelSourceBindings&&(n=n.ih(),n!==null&&(e=n.data,e!==null)))))for(i=this.be.iterator;i.next();)i.value.sp(this,e,t,n)};function ud(t){if(t.sizing===hv){var e=t.Me;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ue(t,e,i,n):r=t,r.xd=this,t=this.panel,t!==null&&(e=t.ih(),e!==null&&O2(e)&&I("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.be===null&&(this.be=new tt),this.be.add(r),this},B.Object.defineProperties(ce.prototype,{panel:{get:function(){return this.Me}},isRow:{get:function(){return this.uq},set:function(t){this.uq=t}},index:{get:function(){return this.Za},set:function(t){this.Za=t}},height:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(0>t&&at(t,">= 0",ce,"height"),this.Gc=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Ob("height",e,t))}},width:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(0>t&&at(t,">= 0",ce,"width"),this.Gc=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Ob("width",e,t))}},minimum:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&((0>t||!isFinite(t))&&at(t,">= 0",ce,"minimum"),this.jj=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Ob("minimum",e,t))}},maximum:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(0>t&&at(t,">= 0",ce,"maximum"),this.hj=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Ob("maximum",e,t))}},alignment:{get:function(){return this.Jb},set:function(t){var e=this.Jb;e.D(t)||(this.Jb=t.J(),this.panel!==null&&this.panel.v(),this.Ob("alignment",e,t))}},stretch:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.panel!==null&&this.panel.v(),this.Ob("stretch",e,t))}},separatorPadding:{get:function(){return this.dg},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.dg;t!==null&&e!==null&&e.D(t)||(t!==null&&(t=t.J()),this.dg=t,this.panel!==null&&this.panel.v(),this.Ob("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(t!==null&&Mu(t,"RowColumnDefinition.separatorStroke"),t instanceof Et&&t.freeze(),this.lo=t,this.panel!==null&&this.panel.v(),this.Ob("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,this.panel!==null&&this.panel.v(),this.Ob("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.tj},set:function(t){var e=this.tj;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||I("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.tj=t,this.panel!==null&&this.panel.N(),this.Ob("separatorDashArray",e,t)}}},background:{get:function(){return this.Na},set:function(t){var e=this.Na;e!==t&&(t!==null&&Mu(t,"RowColumnDefinition.background"),t instanceof Et&&t.freeze(),this.Na=t,this.panel!==null&&this.panel.N(),this.Ob("background",e,t))}},coversSeparators:{get:function(){return this.Pm},set:function(t){var e=this.Pm;e!==t&&(this.Pm=t,this.panel!==null&&this.panel.N(),this.Ob("coversSeparators",e,t))}},sizing:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.panel!==null&&this.panel.v(),this.Ob("sizing",e,t))}},actual:{get:function(){return this.oa},set:function(t){this.oa=isNaN(this.Gc)?Math.max(Math.min(this.hj,t),this.jj):Math.max(Math.min(this.hj,this.Gc),this.jj)}},measured:{get:function(){return this.nc},set:function(t){this.nc=t}},total:{get:function(){return this.oa+this.Vc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),ce.prototype.computeEffectiveSpacing=ce.prototype.Vc,ce.prototype.computeEffectiveSpacingTop=ce.prototype.Io;var hv=new Q(ce,"Default",0),Cf=new Q(ce,"None",1),hd=new Q(ce,"ProportionalExtra",2);ce.className="RowColumnDefinition",ce.Default=hv,ce.None=Cf,ce.ProportionalExtra=hd;function vt(t,e){ot.call(this),this.Rd=this.ua=null,this.an="None",this.wc=this.Ui="black",this.ig=1,this.Oa=this.Yg=null,this.Vn=this.Un=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}V(vt,ot),vt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.ua=this.ua,t.Rd=this.Rd,t.an=this.an,t.Ui=this.Ui,t.wc=this.wc,t.ig=this.ig,this.Yg!==null&&(t.Yg=Gt(this.Yg)),this.Oa!==null&&(t.Oa=this.Oa.mc?this.Oa:this.Oa.copy()),t.Un=this.Un,t.Vn=this.Vn,this.fa!==null&&(t.fa=this.fa.copy())};function Ml(t){t.Oa===null?t.Oa=new cv:t.Oa.mc&&(t.Oa=t.Oa.copy())}s=vt.prototype,s.th=function(){ot.prototype.th.call(this),this.Oa!==null&&(this.Oa.mc=!0)},s.qb=function(t){t===oe||t===jr||t===gf||t===Wn?this.geometryStretch=t:ot.prototype.qb.call(this,t)},s.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Oi(this)};function zh(t,e,i,n){var r=i.length;if(!(4>r)){var o=n.measuredBounds,l=Math.max(1,o.width);o=o.height;for(var h=i[0],a=i[1],f,p,d,y,m,x,M=0,k=Vt(),S=2;S<r;S+=2)f=i[S],p=i[S+1],d=f-h,h=p-a,d===0&&(d=.001),y=h/d,m=Math.atan2(h,d),x=Math.sqrt(d*d+h*h),k.push([d,m,y,x]),M+=x,h=f,a=p;h=i[0],a=i[1],d=n.measuredBounds.width,n instanceof vt&&(d-=n.strokeWidth),1>d&&(d=1),r=i=d,f=l/2,p=f!==0,S=0,x=k[S],d=x[0],m=x[1],y=x[2],x=x[3];for(var C=0;.1<=M;){if(C===0&&(p?(r=i,r-=f,M-=f,p=!1):r=i,r===0&&(r=1)),r>M){zt(k);return}r>x?(C=r-x,r=x):C=0;var T=Math.sqrt(r*r/(1+y*y));if(0>d&&(T=-T),h+=T,a+=y*T,t.translate(h,a),t.rotate(m),t.translate(-(l/2),-(o/2)),C===0&&n.hh(t,e),t.translate(l/2,o/2),t.rotate(-m),t.translate(-h,-a),M-=r,x-=r,C!==0){if(S++,S===k.length){zt(k);return}x=k[S],d=x[0],m=x[1],y=x[2],x=x[3],r=C}}zt(k)}}s.hh=function(t,e){var i=this.wc,n=this.Ui;if(i!==null||n!==null){var r=this.ua;if(r!==null){t.xc();var o=this.actualBounds,l=this.naturalBounds;n!==null&&nn(this,t,n,!0,!1,l,o);var h=this.part,a=this.ig;if(i===null||a!==0||h===null||!this.isPanelMain&&h.Pb()!==this||(a=h.type===_.Link&&h instanceof Ct&&h.category==="Selection"&&h.adornedObject instanceof vt&&h.adornedPart.Pb()===h.adornedObject?h.adornedObject.strokeWidth:0),a===0&&(i=null),i!==null&&a!==0&&(nn(this,t,i,!1,!1,l,o),t.lineWidth=a,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),o=!1,h&&e.Gf("drawShadows")&&(o=h.isShadowed),t.Il===!1&&(o=!1),h=!0,i===null||n!==null&&n!=="transparent"||(h=!1),l=!1,a=this.strokeDashArray,a!==null&&(l=!0,t.js(a,this.strokeDashOffset)),r.type===$.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),i!==null&&t.jk(),t.Se();else if(r.type===$.u){var f=r.startX;a=r.startY;var p=r.endX,d=r.endY;r=Math.min(f,p);var y=Math.min(a,d);f=Math.abs(p-f),a=Math.abs(d-a),t.beginPath(),t.rect(r,y,f,a),n!==null&&t.ng(n),i!==null&&(h&&o&&Qr(t),t.jk(),h&&o&&Po(t)),t.Se()}else if(r.type===$.F)f=r.startX,a=r.startY,p=r.endX,d=r.endY,r=Math.abs(p-f)/2,y=Math.abs(d-a)/2,f=Math.min(f,p)+r,a=Math.min(a,d)+y,t.beginPath(),t.moveTo(f,a-y),t.bezierCurveTo(f+O.wg*r,a-y,f+r,a-O.wg*y,f+r,a),t.bezierCurveTo(f+r,a+O.wg*y,f+O.wg*r,a+y,f,a+y),t.bezierCurveTo(f-O.wg*r,a+y,f-r,a+O.wg*y,f-r,a),t.bezierCurveTo(f-r,a-O.wg*y,f-O.wg*r,a-y,f,a-y),t.closePath(),n!==null&&t.ng(n),i!==null&&(h&&o&&Qr(t),t.jk(),h&&o&&Po(t)),t.Se();else if(r.type===$.m)for(r=r.figures,a=r.length,y=0;y<a;y++){f=r.s[y],t.beginPath(),t.moveTo(f.startX,f.startY),p=f.segments.s,d=p.length;for(var m=null,x=0;x<d;x++){var M=p[x];switch(M.type){case Hn:t.moveTo(M.endX,M.endY);break;case Qt:t.lineTo(M.endX,M.endY);break;case cn:t.bezierCurveTo(M.point1X,M.point1Y,M.point2X,M.point2Y,M.endX,M.endY);break;case Lr:t.quadraticCurveTo(M.point1X,M.point1Y,M.endX,M.endY);break;case de:if(M.radiusX===M.radiusY){var k=Math.PI/180;t.arc(M.point1X,M.point1Y,M.radiusX,M.startAngle*k,(M.startAngle+M.sweepAngle)*k,0>M.sweepAngle,m!==null?m.endX:f.startX,m!==null?m.endY:f.startY)}else if(m=So(M,f),k=m.length,k===0)t.lineTo(M.centerX,M.centerY);else for(var S=0;S<k;S++){var C=m[S];S===0&&t.lineTo(C[0],C[1]),t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}break;case ur:if(S=k=0,m!==null&&m.type===de){if(m=So(m,f),C=m.length,C===0){t.lineTo(M.endX,M.endY);break}m=m[C-1]||null,m!==null&&(k=m[6],S=m[7])}else k=m!==null?m.endX:f.startX,S=m!==null?m.endY:f.startY;if(m=al(M,f,k,S),k=m.length,k===0){t.lineTo(M.endX,M.endY);break}for(S=0;S<k;S++)C=m[S],t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]);break;default:I("Segment not of valid type: "+M.type)}M.isClosed&&t.closePath(),m=M}p=f.isFilled,o?f.isShadowed?(p===!0&&n!=="transparent"&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&(p&&h&&Qr(t),t.jk(),p&&h&&Po(t))):(Qr(t),p&&n!=="transparent"&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&t.jk(),Po(t)):(p&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&t.jk()),t.Se(y)}if(l&&t.fs(),this.pathPattern!==null){if(i=this.pathPattern,i.measure(1/0,1/0),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),o=this.geometry,t.save(),t.beginPath(),n=Vt(),o.type===$.j)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.endY),zh(t,e,n,i);else if(o.type===$.m)for(o=o.figures.iterator;o.next();){for(h=o.value,n.length=0,n.push(h.startX),n.push(h.startY),l=h.startX,r=h.startY,a=l,y=r,f=h.segments.s,p=f.length,d=0;d<p;d++){switch(x=f[d],x.type){case Hn:zh(t,e,n,i),n.length=0,n.push(x.endX),n.push(x.endY),l=x.endX,r=x.endY,a=l,y=r;break;case Qt:n.push(x.endX),n.push(x.endY),l=x.endX,r=x.endY;break;case cn:O.Qe(l,r,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,n),l=x.endX,r=x.endY;break;case Lr:O.ep(l,r,x.point1X,x.point1Y,x.endX,x.endY,.5,n),l=x.endX,r=x.endY;break;case de:if(M=So(x,h),m=M.length,m===0){n.push(x.centerX),n.push(x.centerY),l=x.centerX,r=x.centerY;break}for(k=0;k<m;k++)S=M[k],O.Qe(l,r,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),l=S[6],r=S[7];break;case ur:if(M=al(x,h,l,r),m=M.length,m===0){n.push(x.endX),n.push(x.endY),l=x.endX,r=x.endY;break}for(k=0;k<m;k++)S=M[k],O.Qe(l,r,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),l=S[6],r=S[7];break;default:I("Segment not of valid type: "+x.type)}x.isClosed&&(n.push(a),n.push(y),zh(t,e,n,i))}zh(t,e,n,i)}else if(o.type===$.u)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.startY),n.push(o.endX),n.push(o.endY),n.push(o.startX),n.push(o.endY),n.push(o.startX),n.push(o.startY),zh(t,e,n,i);else if(o.type===$.F){if(r=new Ee,r.startX=o.endX,r.startY=(o.startY+o.endY)/2,l=new jt(de),l.startAngle=0,l.sweepAngle=360,l.centerX=(o.startX+o.endX)/2,l.centerY=(o.startY+o.endY)/2,l.radiusX=Math.abs(o.startX-o.endX)/2,l.radiusY=Math.abs(o.startY-o.endY)/2,r.add(l),o=So(l,r),h=o.length,h===0)n.push(l.centerX),n.push(l.centerY);else for(l=r.startX,r=r.startY,a=0;a<h;a++)y=o[a],O.Qe(l,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),l=y[6],r=y[7];zh(t,e,n,i)}zt(n),t.restore(),t.Uc(!1)}}}},s.kk=function(t,e,i){return!ot.prototype.kk.call(this,t,e,i)||this.wc===null&&this.Ui===null||this.ua===null||this.pathPattern!==null?!1:(t.Hl=this.svg,this.hh(t,e),t.Hl=null,!0)},s.nk=function(t){return this.geometry!==null&&1<this.geometry.figures.length||this.pathPattern!==null?!0:ot.prototype.nk.call(this,t)},s.Dv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("path");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},s.ga=function(t,e){if(e===void 0&&(e=new N),t instanceof ht){t.Lc()&&I("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},s.mi=function(t){t===void 0&&(t=new z);var e=this.naturalBounds,i=this.oe;e=z.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Ac(n/2,n/2),n=N.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Be(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Be(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Be(t,n.x,n.y,0,0),z.free(e),N.free(n),t},s.gh=function(t,e){var i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==$.j||e||(r+=2);var o=z.alloc();if(o.assign(n),o.Ac(r+2,r+2),!o.ca(t))return z.free(o),!1;if(n=r+1e-4,i.type===$.j)return this.stroke===null||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)?!1:(z.free(o),O.Xb(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y));if(i.type===$.u){e=i.startX;var l=i.startY,h=i.endX;if(i=i.endY,o.x=Math.min(e,h),o.y=Math.min(l,i),o.width=Math.abs(h-e),o.height=Math.abs(i-l),this.fill===null){if(o.Ac(-n,-n),o.ca(t))return z.free(o),!1;o.Ac(n,n)}return this.stroke!==null&&o.Ac(r,r),t=o.ca(t),z.free(o),t}if(i.type===$.F){l=i.startX,r=i.startY,h=i.endX;var a=i.endY;if(i=Math.min(l,h),e=Math.min(r,a),l=Math.abs(h-l)/2,r=Math.abs(a-r)/2,i=t.x-(i+l),e=t.y-(e+r),this.fill===null){if(l-=n,r-=n,0>=l||0>=r||1>=i*i/(l*l)+e*e/(r*r))return z.free(o),!1;l+=n,r+=n}return this.stroke!==null&&(l+=n,r+=n),z.free(o),0>=l||0>=r?!1:1>=i*i/(l*l)+e*e/(r*r)}if(i.type===$.m)return z.free(o),this.fill===null?KM(i,t.x,t.y,r):_0(i,t,r,1<this.strokeWidth,e);I("Unknown Geometry type: "+i.type)},s.Wl=function(t,e,i,n){var r=this.desiredSize,o=this.ig;if(t=Math.max(t,0),e=Math.max(e,0),this.Rd!==null)var l=this.geometry.bounds;else{var h=this.figure,a=fv[h];if(a===void 0){var f=O.Ze[h];typeof f=="string"&&(f=O.Ze[f]),typeof f=="function"?(a=f(null,100,100),fv[h]=a):I("Unsupported Figure: "+h)}l=a.bounds}h=l.width,a=l.height,f=l.width;var p=l.height;switch(cr(this,!0)){case oe:n=i=0;break;case le:f=Math.max(t-o,0),p=Math.max(e-o,0);break;case Ge:f=Math.max(t-o,0),n=0;break;case Ze:i=0,p=Math.max(e-o,0)}isFinite(r.width)&&(f=r.width),isFinite(r.height)&&(p=r.height);var d=this.maxSize,y=this.minSize;switch(i=Math.max(i-o,y.width),n=Math.max(n-o,y.height),f=Math.min(d.width,f),p=Math.min(d.height,p),f=isFinite(f)?Math.max(i,f):Math.max(h,i),p=isFinite(p)?Math.max(n,p):Math.max(a,n),i=av(this),i){case oe:break;case le:h=f,a=p;break;case jr:i=Math.min(f/h,p/a),isFinite(i)||(i=1),h*=i,a*=i;break;default:I(i+" is not a valid geometryStretch.")}this.Rd!==null?(h===0&&(h=.001),a===0&&(a=.001),i=this.Rd!==null?this.Rd:this.ua,l=i.bounds,n=h/l.width,l=a/l.height,isFinite(n)||(n=1),isFinite(l)||(l=1),this.ua=n===1&&l===1?i:i.copy().scale(n,l)):this.ua!==null&&O.$(this.ua.Sk,t-o)&&O.$(this.ua.Rk,e-o)||(this.ua=vt.makeGeometry(this,h,a)),l=this.ua.bounds,t===1/0||e===1/0?this.Ge(l.x-o/2,l.y-o/2,t===0&&h===0?0:l.width+o,e===0&&a===0?0:l.height+o):this.Ge(-(o/2),-(o/2),f+o,p+o),r.w()?(f=r.width,p=r.height,f=Math.min(d.width,f),p=Math.min(d.height,p),f=Math.max(y.width,f),p=Math.max(y.height,p),this.dc.h(0,0,f,p)):this.dc.assign(l)};function av(t){var e=t.geometryStretch;return t.Rd!==null?e===Wn?le:e:e===Wn?fv[t.figure].defaultStretch:e}s.eh=function(t,e,i,n){zm(this,t,e,i,n)},s.rs=function(t,e,i){return this.Sj(t.x,t.y,e.x,e.y,i)},s.Sj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),h=o.m22*l,a=-o.m12*l,f=-o.m21*l,p=o.m11*l,d=l*(o.m21*o.dy-o.m22*o.dx),y=l*(o.m12*o.dx-o.m11*o.dy);o=t*h+e*f+d,l=t*a+e*p+y,h=i*h+n*f+d,a=i*a+n*p+y,d=this.ig/2,f=this.ua,f===null&&(this.measure(1/0,1/0),f=this.ua);var m=f.bounds;if(p=!1,f.type===$.j)if(1.5>=this.strokeWidth)p=O.Ve(f.startX,f.startY,f.endX,f.endY,o,l,h,a,r);else{if(f.startX===f.endX?(n=d,p=0):(e=(f.endY-f.startY)/(f.endX-f.startX),p=d/Math.sqrt(1+e*e),n=p*e),e=Vt(),t=new N,O.Ve(f.startX+n,f.startY+p,f.endX+n,f.endY+p,o,l,h,a,t)&&e.push(t),t=new N,O.Ve(f.startX-n,f.startY-p,f.endX-n,f.endY-p,o,l,h,a,t)&&e.push(t),t=new N,O.Ve(f.startX+n,f.startY+p,f.startX-n,f.startY-p,o,l,h,a,t)&&e.push(t),t=new N,O.Ve(f.endX+n,f.endY+p,f.endX-n,f.endY-p,o,l,h,a,t)&&e.push(t),h=e.length,h===0)return zt(e),!1;for(p=!0,a=1/0,n=0;n<h;n++)t=e[n],i=(t.x-o)*(t.x-o)+(t.y-l)*(t.y-l),i<a&&(a=i,r.x=t.x,r.y=t.y);zt(e)}else if(f.type===$.u)p=O.Ff(m.x-d,m.y-d,m.x+m.width+d,m.y+m.height+d,o,l,h,a,r);else if(f.type===$.F){e=z.allocAt(m.x,m.y,m.width,m.height).Ac(d,d);t:if(e.width===0)p=O.Ve(e.x,e.y,e.x,e.y+e.height,o,l,h,a,r);else if(e.height===0)p=O.Ve(e.x,e.y,e.x+e.width,e.y,o,l,h,a,r);else{if(t=e.width/2,f=e.height/2,n=e.x+t,p=e.y+f,i=9999,o!==h&&(i=(l-a)/(o-h)),9999>Math.abs(i)){if(a=l-p-i*(o-n),0>t*t*i*i+f*f-a*a){r.x=NaN,r.y=NaN,p=!1;break t}d=Math.sqrt(t*t*i*i+f*f-a*a),h=(-(t*t*i*a)+t*f*d)/(f*f+t*t*i*i)+n,t=(-(t*t*i*a)-t*f*d)/(f*f+t*t*i*i)+n,f=i*(h-n)+a+p,a=i*(t-n)+a+p,Math.abs((o-h)*(o-h))+Math.abs((l-f)*(l-f))<Math.abs((o-t)*(o-t))+Math.abs((l-a)*(l-a))?(r.x=h,r.y=f):(r.x=t,r.y=a)}else{if(h=f*f,a=o-n,h-=h/(t*t)*a*a,0>h){r.x=NaN,r.y=NaN,p=!1;break t}a=Math.sqrt(h),h=p+a,a=p-a,Math.abs(h-l)<Math.abs(a-l)?(r.x=o,r.y=h):(r.x=o,r.y=a)}p=!0}z.free(e)}else if(f.type===$.m){y=N.alloc();var x=h-o,M=a-l,k=x*x+M*M,S=o,C=l;if(0<k&&m.contains(S,C)&&(y.x=S,y.y=C,this.ca(y)))for(x!==0&&.5>Math.abs(x)?(M*=.5/x,x=.5):M!==0&&.5>Math.abs(M)&&(x*=.5/M,M=.5),S-=x,C-=M;m.contains(S,C);)S-=x,C-=M;for(r.x=h,r.y=a,M=0;M<f.figures.count;M++){var T=f.figures.s[M],L=T.isFilled?S:o,j=T.isFilled?C:l,A=T.segments;m=T.startX,x=T.startY;for(var Z=m,it=x,et=0;et<A.count;et++){var H=A.s[et],Y=H.type,dt=H.endX,ft=H.endY,Tt=!1;switch(Y){case Hn:Z=dt,it=ft;break;case Qt:Tt=fd(m,x,dt,ft,L,j,h,a,y);break;case cn:Tt=O.Eo(m,x,H.point1X,H.point1Y,H.point2X,H.point2Y,dt,ft,L,j,h,a,.6,y);break;case Lr:Tt=O.Eo(m,x,m+2/3*(H.point1X-m),x+2/3*(H.point1Y-x),dt+2/3*(H.point1X-dt),ft+2/3*(H.point1Y-ft),dt,ft,L,j,h,a,.6,y);break;case de:case ur:Y=H.type===de?So(H,T):al(H,T,m,x);var Ut=Y.length;if(Ut===0){Tt=fd(m,x,H.type===de?H.centerX:H.endX,H.type===de?H.centerY:H.endY,L,j,h,a,y);break}for(ft=null,dt=0;dt<Ut;dt++){if(ft=Y[dt],dt===0&&fd(m,x,ft[0],ft[1],L,j,h,a,y)){var ke=ad(L,j,y,k,r);ke<k&&(k=ke,p=!0)}O.Eo(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5],ft[6],ft[7],L,j,h,a,.6,y)&&(ke=ad(L,j,y,k,r),ke<k&&(k=ke,p=!0))}dt=ft[6],ft=ft[7];break;default:I("Unknown Segment type: "+Y)}m=dt,x=ft,Tt&&(Tt=ad(L,j,y,k,r),Tt<k&&(k=Tt,p=!0)),H.isClosed&&(dt=Z,ft=it,fd(m,x,dt,ft,L,j,h,a,y)&&(H=ad(L,j,y,k,r),H<k&&(k=H,p=!0)))}}o=i-t,l=n-e,h=Math.sqrt(o*o+l*l),h!==0&&(o/=h,l/=h),r.x-=o*d,r.y-=l*d,N.free(y)}else I("Unknown Geometry type: "+f.type);return p?(this.transform.Ga(r),!0):!1};function ad(t,e,i,n,r){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(r.x=i.x,r.y=i.y,e):n}function fd(t,e,i,n,r,o,l,h,a){if(O.$(t,i)&&O.$(e,n)||O.$(r,l)&&O.$(o,h))return!1;var f=!1,p=(r-l)*(e-n)-(o-h)*(t-i);return p===0?!1:(a.x=((r*h-o*l)*(t-i)-(r-l)*(t*n-e*i))/p,a.y=((r*h-o*l)*(e-n)-(o-h)*(t*n-e*i))/p,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(a.y>t||O.$(a.y,t))&&(a.y<e||O.$(a.y,e))&&(f=!0)):(e=t<i?t:i,t=t<i?i:t,(a.x>e||O.$(a.x,e))&&(a.x<t||O.$(a.x,t))&&(f=!0)),f)}s.fh=function(t,e){if(e===void 0)return t.Re(this.actualBounds);var i=this.ua;i===null&&(this.measure(1/0,1/0),i=this.ua),i=i.bounds;var n=this.strokeWidth/2,r=!1,o=N.alloc();return o.h(i.x-n,i.y-n),t.ca(e.Ga(o))&&(o.h(i.x-n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.y-n),t.ca(e.Ga(o))&&(r=!0)))),N.free(o),r},s.Xc=function(t,e){if(this.fh(t,e)||e===void 0&&(e=this.transform,t.Re(this.actualBounds)))return!0;var i=wt.alloc();i.set(e),i.Vj();var n=t.left,r=t.right,o=t.top;t=t.bottom;var l=N.alloc();if(l.h(n,o),i.Ga(l),this.gh(l,!0)||(l.h(r,o),i.Ga(l),this.gh(l,!0))||(l.h(n,t),i.Ga(l),this.gh(l,!0))||(l.h(r,t),i.Ga(l),this.gh(l,!0)))return N.free(l),!0;var h=N.alloc(),a=N.alloc();return i.set(e),i.bv(this.transform),i.Vj(),h.x=r,h.y=o,h.transform(i),l.x=n,l.y=o,l.transform(i),e=!1,Sl(this,l,h,a)?e=!0:(l.x=r,l.y=t,l.transform(i),Sl(this,l,h,a)?e=!0:(h.x=n,h.y=t,h.transform(i),Sl(this,l,h,a)?e=!0:(l.x=n,l.y=o,l.transform(i),Sl(this,l,h,a)&&(e=!0)))),N.free(l),wt.free(i),N.free(h),N.free(a),e};function Sl(t,e,i,n){if(!t.rs(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,o=i.y;return i=n.x,n=n.y,t===r?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}s.ux=function(t,e,i){function n(k,S){for(var C=k.length,T=0;T<C;T+=2)if(S.zd(k[T],k[T+1])>r)return!0;return!1}if(i&&this.fill!==null&&this.gh(t,!0))return!0;var r=t.Bf(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.ua,e===null&&(this.measure(1/0,1/0),e=this.ua,e===null))return!1;if(!i){var l=e.bounds,h=l.x,a=l.y,f=l.x+l.width;if(l=l.y+l.height,xo(t.x,t.y,h,a)<=r&&xo(t.x,t.y,f,a)<=r&&xo(t.x,t.y,h,l)<=r&&xo(t.x,t.y,f,l)<=r)return!0}if(h=e.startX,a=e.startY,f=e.endX,l=e.endY,e.type===$.j){if(i=(h-f)*(t.x-f)+(a-l)*(t.y-l),mi(t.x,t.y,h,a,f,l)<=(0<=(f-h)*(t.x-h)+(l-a)*(t.y-a)&&0<=i?r:o))return!0}else{if(e.type===$.u)return e=!1,i&&(e=mi(t.x,t.y,h,a,h,l)<=r||mi(t.x,t.y,h,a,f,a)<=r||mi(t.x,t.y,f,a,f,l)<=r||mi(t.x,t.y,h,l,f,l)<=r),e;if(e.type===$.F){e=t.x-(h+f)/2,o=t.y-(a+l)/2;var p=Math.abs(f-h)/2,d=Math.abs(l-a)/2;if(p===0||d===0)return mi(t.x,t.y,h,a,f,l)<=r;if(i){if(t=O.bz(p,d,e,o),t*t<=r)return!0}else return!(xo(e,o,-p,0)>=r||xo(e,o,0,-d)>=r||xo(e,o,0,d)>=r||xo(e,o,p,0)>=r)}else if(e.type===$.m){if(f=e.bounds,o=f.x,h=f.y,a=f.x+f.width,f=f.y+f.height,t.x>a&&t.x<o&&t.y>f&&t.y<h&&mi(t.x,t.y,o,h,o,f)>r&&mi(t.x,t.y,o,h,a,h)>r&&mi(t.x,t.y,a,f,o,f)>r&&mi(t.x,t.y,a,f,a,h)>r)return!1;if(o=Math.sqrt(r),i){if(this.fill===null?KM(e,t.x,t.y,o):_0(e,t,o,!0,!1))return!0}else{for(i=e.figures,e=0;e<i.count;e++){if(o=i.s[e],l=o.startX,p=o.startY,t.zd(l,p)>r)return!1;for(h=o.segments.s,a=h.length,f=0;f<a;f++)switch(d=h[f],d.type){case Hn:case Qt:if(l=d.endX,p=d.endY,t.zd(l,p)>r)return!1;break;case cn:var y=Vt();if(O.Qe(l,p,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,y),l=n(y,t),zt(y),l||(l=d.endX,p=d.endY,t.zd(l,p)>r))return!1;break;case Lr:if(y=Vt(),O.ep(l,p,d.point1X,d.point1Y,d.endX,d.endY,.8,y),l=n(y,t),zt(y),l||(l=d.endX,p=d.endY,t.zd(l,p)>r))return!1;break;case de:case ur:y=d.type===de?So(d,o):al(d,o,l,p);var m=y.length;if(m===0){if(l=d.type===de?d.centerX:d.endX,p=d.type===de?d.centerY:d.endY,t.zd(l,p)>r)return!1;break}d=null;for(var x=Vt(),M=0;M<m;M++)if(d=y[M],x.length=0,O.Qe(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,x),n(x,t))return zt(x),!1;zt(x),d!==null&&(l=d[6],p=d[7]);break;default:I("Unknown Segment type: "+d.type)}}return!0}}}return!1},s.pc=function(){this.ua=null},s.kq=function(){return this.ig};function D2(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=If,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=_i):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new ht(1-_i.x,_i.y)))}vt.makeGeometry=function(t,e,i){if(t.toArrow!=="None")var n=br[t.toArrow];else t.fromArrow!=="None"?n=br[t.fromArrow]:(n=O.Ze[t.figure],typeof n=="string"&&(n=O.Ze[n]),n===void 0&&I("Unknown Shape.figure: "+t.figure),n=n(t,e,i),n.Sk=e,n.Rk=i);if(n===null){var r=O.Ze.Rectangle;typeof r=="function"&&(n=r(t,e,i))}return n};function I2(t){var e=br[t];if(e===void 0){var i=t.toLowerCase();if(i==="none")return"None";if(e=br[i],e===void 0){var n=null,r;for(r in O.um)if(r.toLowerCase()===i){n=r;break}if(n!==null)return t=$.parse(O.um[n],!1),br[n]=t,i!==n&&(br[i]=n),n}}return typeof e=="string"?e:e instanceof $?t:null}B.Object.defineProperties(vt.prototype,{geometry:{get:function(){return this.ua!==null?this.ua:this.Rd},set:function(t){var e=this.ua,i=this.Rd;if(e!==t){t!==null?this.Rd=this.ua=t.freeze():this.Rd=this.ua=null;var n=this.part;n!==null&&(n.ag=NaN),this.v(),this.g("geometry",e||i,t),vu(this)&&(t=this.part,t!==null&&gl(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=$.parse(t);var e=t.normalize();this.geometry=t,this.position=t=N.allocAt(-e.x,-e.y),N.free(t)}},isGeometryPositioned:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e!==t&&(t!==null&&Mu(t,"Shape.fill"),t instanceof Et&&t.freeze(),this.Ui=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.wc},set:function(t){var e=this.wc;e!==t&&(t!==null&&Mu(t,"Shape.stroke"),t instanceof Et&&t.freeze(),this.wc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ig},set:function(t){var e=this.ig;if(e!==t)if(0<=t){this.ig=t,this.v();var i=this.part;i!==null&&(i.ag=NaN),this.g("strokeWidth",e,t)}else at(t,"value >= 0",vt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Oa!==null?this.Oa.Hr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?at(t,'"butt", "round", or "square"',vt,"strokeCap"):(Ml(this),this.Oa.Hr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Oa!==null?this.Oa.Ir:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?at(t,'"miter", "bevel", or "round"',vt,"strokeJoin"):(Ml(this),this.Oa.Ir=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Oa!==null?this.Oa.Jr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){Ml(this),this.Oa.Jr=t,this.N();var i=this.part;i!==null&&(i.ag=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Yg},set:function(t){var e=this.Yg;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];0<=o&&isFinite(o)||I("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.Yg=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Oa!==null?this.Oa.uj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(Ml(this),this.Oa.uj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.an},set:function(t){var e=this.an;if(e!==t){var i=O.Ze[t];typeof i=="function"?i=t:(i=O.Ze[t.toLowerCase()])||I("Unknown Shape.figure: "+t),e!==i&&(t=this.part,t!==null&&(t.ag=NaN),this.an=i,this.Rd=null,this.pc(),this.v(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.Ua!==null?this.Ua.V:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=I2(t);i===null?I("Unknown Shape.toArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Os),this.Ua.V=i,this.Rd=null,this.pc(),this.v(),D2(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.Ua!==null?this.Ua.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=I2(t);i===null?I("Unknown Shape.fromArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Os),this.Ua.j=i,this.Rd=null,this.pc(),this.v(),D2(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.Oa!==null?this.Oa.fg:$e},set:function(t){var e=this.spot1;e.D(t)||(t=t.J(),Ml(this),this.Oa.fg=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Oa!==null?this.Oa.gg:$e},set:function(t){var e=this.spot2;e.D(t)||(t=t.J(),Ml(this),this.Oa.gg=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Un},set:function(t){var e=this.Un;e!==t&&(this.Un=t,this.pc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Vn},set:function(t){var e=this.Vn;e!==t&&(this.Vn=t,this.pc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.dc}},pathPattern:{get:function(){return this.Oa!==null?this.Oa.br:null},set:function(t){var e=this.pathPattern;e!==t&&(Ml(this),this.Oa.br=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Oa!==null?this.Oa.jq:Wn},set:function(t){var e=this.geometryStretch;e!==t&&(Ml(this),this.Oa.jq=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Tk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new to),this.fa.Tk=t;var i=this.diagram;i!==null&&this.panel===i.grid&&Jo(i),this.v(),i=this.panel,i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new to),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new to),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new to),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}}}),vt.prototype.intersectsRect=vt.prototype.Xc,vt.prototype.containedInRect=vt.prototype.fh,vt.prototype.getNearestIntersectionPoint=vt.prototype.rs,vt.prototype.getDocumentBounds=vt.prototype.mi,vt.prototype.getDocumentPoint=vt.prototype.ga;var br=new Ke,fv=new Ke;vt.className="Shape",vt.getFigureGenerators=function(){var t=new mt,e;for(e in O.Ze)e!==e.toLowerCase()&&t.add(e,O.Ze[e]);return t.freeze(),t},vt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=O.Ze;n[t]=e,n[i]=t},vt.getArrowheadGeometries=function(){var t=new mt;for(n in O.um)if(br[n]===void 0){var e=$.parse(O.um[n],!1);br[n]=e,e=n.toLowerCase(),e!==n&&(br[e]=n)}for(var i in br)if(i!==i.toLowerCase()){var n=br[i];n instanceof $&&t.add(i,n)}return t.freeze(),t},vt.defineArrowheadGeometry=function(t,e){var i=null;typeof e=="string"?i=$.parse(e,!1):i=e,e=t.toLowerCase(),e!=="none"&&t!==e||I("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=br;n[t]=i,n[e]=t};function cv(){this.mc=!1,this.Hr="butt",this.Ir="miter",this.Jr=10,this.uj=0,this.br=null,this.jq=Wn,this.gg=this.fg=$e}cv.prototype.copy=function(){var t=new cv;return t.Hr=this.Hr,t.Ir=this.Ir,t.Jr=this.Jr,t.uj=this.uj,t.br=this.br,t.jq=this.jq,t.fg=this.fg.J(),t.gg=this.gg.J(),t};function Xt(t,e){return ot.call(this),yd||(Fi=Kn?new Fn(null).context:null,yd=!0),this.o|=2097152,this.ec="",this.wc="black",this.Ae="13px sans-serif",this.Lq=this.Cb=this.Fc=0,this.da=this.fa=this.Gm=null,this.Ih=0,this.df=null,this.Le=0,this.ze=this.$b=this.Pc=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}V(Xt,ot),Xt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.ec=this.ec,t.wc=this.wc,t.Ae=this.Ae,t.Fc=this.Fc,t.Cb=this.Cb,t.Lq=this.Lq,t.Gm=this.Gm,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.mc?this.da:this.da.copy()),t.Ih=this.Ih,t.df=this.df,t.Le=this.Le,t.Pc=this.Pc,t.$b=this.$b,t.ze=this.ze};function Er(t){t.da===null?t.da=new xv:t.da.mc&&(t.da=t.da.copy())}s=Xt.prototype,s.th=function(){ot.prototype.th.call(this),this.da!==null&&(this.da.mc=!0)};function R2(t,e){t.o=e.o|6144,t.pb=e.opacity,t.Na=e.background,t.areaBackground=e.areaBackground,t.hd=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Lb!==null?t.Lb=e.Lb.copy():t.Lb=null,t.Ca=e.scale,t.Kb=e.angle,t.stretch=e.stretch,t.Kg=e.margin.J(),t.Jb=e.alignment.J(),t.sk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.tb!==null&&(t.tb=e.tb.copy()),t.shadowVisible=e.shadowVisible,t.ec=e.ec,t.wc=e.wc,t.Ae=e.Ae,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.mc?e.da:e.da.copy()),t.Ih=e.Ih}s.qb=function(t){t.classType===Xt?this.wrap=t:ot.prototype.qb.call(this,t)},s.toString=function(){return 22<this.ec.length?'TextBlock("'+this.ec.substring(0,20)+'"...)':'TextBlock("'+this.ec+'")'},s.v=function(){ot.prototype.v.call(this)},s.hh=function(t,e){if(this.wc!==null&&this.ec.length!==0&&this.Ae!==null){var i=this.naturalBounds,n=this.actualBounds,r=i.width,o=i.height,l=Lf(this),h=t.textAlign=this.textAlign,a=e.tn;h==="start"?h=a?"right":"left":h==="end"&&(h=a?"left":"right"),a=this.isUnderline;var f=this.isStrikethrough;nn(this,t,this.wc,!0,!1,i,n),(a||f)&&nn(this,t,this.wc,!1,!1,i,n),n=0,i=!1;var p=this.oe,d=p.dx-(l*p.m21+p.dx);p=p.dy-(l*p.m22+p.dy);var y=e.scale;switch(8>(d*d+p*p)*y*y&&(i=!0),e.ib!==t&&(i=!1),e.ib instanceof Ki&&(i=!1),e.Gf("textGreeking")===!1&&(i=!1),e=this.spacingAbove,d=this.spacingBelow,this.flip){case mf:t.translate(r,0),t.scale(-1,1);break;case yf:t.translate(0,o),t.scale(1,-1);break;case vf:t.translate(r,o),t.scale(-1,-1)}if(t.xc(),p=this.Fc,y=(e+l+d)*p,o>y&&(n=this.verticalAlignment,n=n.y*o-n.y*y+n.offsetY),p===1&&this.ze!==null)d=this.Cb,d>r&&(d=r),this.Oj(this.ze,t,0,n+e,r,l,d,i,h,a,f);else if(this.Pc!==null&&this.$b!==null)for(y=0;y<p;y++){var m=this.Pc[y];m>r&&(m=r),n+=e,this.Oj(this.$b[y],t,0,n,r,l,m,i,h,a,f),n+=l+d}switch(this.flip){case mf:t.scale(-1,1),t.translate(-r,0);break;case yf:t.scale(1,-1),t.translate(0,-o);break;case vf:t.scale(-1,-1),t.translate(-r,-o)}}},s.Oj=function(t,e,i,n,r,o,l,h,a,f,p){var d=0;if(h)a==="left"?d=0:a==="right"?d=r-l:a==="center"&&(d=(r-l)/2),e.fillRect(i+d,n+.25*o,l,1);else{if(a==="left"?d=0:a==="right"?d=r:a==="center"&&(d=r/2),r=cd!==null?cd(this,o):.75*o,e.fillText(t,i+d,n+r),t=o/20|0,t===0&&(t=1),a==="right"?d-=l:a==="center"&&(d-=l/2),f){h=pd!==null?pd(this,o):.8*o,a=i+d,f=n+h,r=i+d+l,h=n+h;var y=t;e.beginPath(),e.lineWidth=y,e.moveTo(a,f),e.lineTo(r,h),e.stroke(),e.Se(),e instanceof Ki&&e.$c.classList.add("gojs-td")}p&&(p=n+o-o/2.2|0,t%2!==0&&(p+=.5),n=i+d,o=p,i=i+d+l,l=p,d=t,e.beginPath(),e.lineWidth=d,e.moveTo(n,o),e.lineTo(i,l),e.stroke(),e.Se(),e instanceof Ki&&e.$c.classList.add("gojs-td"))}},s.kk=function(t,e,i){if(!ot.prototype.kk.call(this,t,e,i))return!1;if(nn(this,t,this.wc,!0,!1,this.naturalBounds,this.actualBounds),i){if(this.svg.getElementsByTagName("text").length===0)return!0;for(e=this.svg.getElementsByClassName("gojs-td"),i=0;i<e.length;i++)g2(t,e[i],!1)}else e=this.svg,e.innerHTML=this.text,g2(t,e,!0);return!0},s.nk=function(t){return 1<this.lineCount||this.isUnderline||this.isStrikethrough?!0:ot.prototype.nk.call(this,t)},s.Dv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("text");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},s.Wl=function(t,e,i,n){var r=this.Fc;this.Ih=t;var o=this.Ae;Fi!==null&&X2!==o&&(X2=Fi.font=o),this.Cb=this.Le=0,this.ze=this.$b=this.Pc=this.df=null;var l;if(isNaN(this.desiredSize.width)){if(o=this.ec.replace(/\r\n/g,`
`).replace(/\r/g,`
`),o.length===0)o=8;else if(this.isMultiline){for(var h=l=0,a=!1;!a;){var f=o.indexOf(`
`,h);f===-1&&(f=o.length,a=!0),h=o.substr(h,f-h),this.formatting===jf&&(h=h.trim()),l=Math.max(l,Zn(h)),h=f+1}o=l}else l=o.indexOf(`
`,0),0<=l&&(o=o.substr(0,l)),o=Zn(o);o=Math.min(o,t/this.scale)}else o=this.desiredSize.width;if(this.panel!==null&&(o=Math.min(o,this.panel.maxSize.width)),l=z2(this,o),isNaN(this.desiredSize.height)?l=Math.min(l,e/this.scale):l=this.desiredSize.height,a=l,this.Cb!==0&&this.Pc!==null&&this.$b!==null&&this.overflow===dd&&(e=this.Ae,e=this.overflow===dd?B2(e):0,f=this.spacingAbove+this.spacingBelow,f=Math.max(0,Lf(this)+f),a=Math.min(this.maxLines-1,Math.max(Math.floor(a/f+.01)-1,0)),!(a+1>=this.$b.length))){for(f=this.$b[a],e=Math.max(1,t-e);Zn(f)>e&&1<f.length;)f=f.substr(0,f.length-1);f+=Of,e=Zn(f),this.$b[a]=f,this.$b=this.$b.slice(0,a+1),this.Pc[a]=e,this.Pc=this.Pc.slice(0,a+1),this.Le=this.$b.length,this.Cb=Math.max(this.Cb,e),this.Fc=this.Le,this.Fc===1&&(this.ze=this.$b[0])}(this.wrap===V2||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.Cb:Math.min(t,this.Cb)),o=Math.max(i,o),l=Math.max(n,l),wo(this.dc,o,l),this.Ge(0,0,o,l),this.svg!==null&&r!==this.Fc&&(this.Tc=!0)},s.eh=function(t,e,i,n){zm(this,t,e,i,n)};function Tf(t,e,i){t.ze===null?(t.ze=e,t.Cb=i):((t.$b===null||t.Pc===null)&&(t.$b=[],t.Pc=[],t.$b.push(t.ze),t.Pc.push(t.Cb)),t.$b.push(e),t.Pc.push(i))}function pv(t,e,i,n){var r=t.formatting===jf;r&&(e=e.trim());var o=0,l=t.Ae,h=t.spacingAbove+t.spacingBelow;h=Math.max(0,Lf(t)+h);var a=t.overflow===dd?B2(l):0;if(t.Fc>=t.maxLines)n!==null&&n.h(0,h);else if(l=e,t.wrap===dv){t.Le=1;var f=Zn(e);if(a===0||f<=i)t.Cb=Math.max(t.Cb,f),Tf(t,e,t.Cb),n!==null&&n.h(f,h);else{for(o=Vh(t,l),l=l.substr(o.length),e=Vh(t,l),f=Zn(o+e);0<e.length&&f<=i;)o+=e,l=l.substr(e.length),e=Vh(t,l),f=o+e,r&&(f=f.trim()),f=Zn(f);for(r&&(e=e.trim()),o+=e,i=Math.max(1,i-a);Zn(o)>i&&1<o.length;)o=o.substr(0,o.length-1);o+=Of;var p=Zn(o);t.Cb=p,Tf(t,o,p),n!==null&&n.h(p,h)}}else{for(a=0,l.length===0&&(a=1,Tf(t,l,0));0<l.length;){for(e=Vh(t,l),l=l.substr(e.length);Zn(e)>i;){var d=1;for(f=Zn(e.substr(0,d)),p=0;f<=i;)d++,p=f,f=Zn(e.substr(0,d));if(d===1){var y=f;o=Math.max(o,f)}else y=p,o=Math.max(o,p);if(d--,1>d&&(d=1),Tf(t,e.substr(0,d),y),a++,e=e.substr(d),t.Fc+a>t.maxLines)break}for(p=Vh(t,l),f=Zn(e+p);0<p.length&&f<=i;)e+=p,l=l.substr(p.length),p=Vh(t,l),f=e+p,r&&(f=f.trim()),f=Zn(f);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]===""&&(e=e.substring(0,e.length-1)+""),p.length===0?(d=f,o=Math.max(o,f)):(d=p=Zn(e),o=Math.max(o,p)),Tf(t,e,d),a++,t.Fc+a>t.maxLines))break}t.Le=Math.min(t.maxLines,a),t.Cb=Math.max(t.Cb,o),n!==null&&n.h(t.Cb,h*t.Le)}}function Vh(t,e){if(t.wrap===Y2)return e.substr(0,1);for(var i=e.length,n=0,r=yj;n<i&&!r.test(e.charAt(n));)n++;for(t.formatting===U2&&(i=Math.min(i,n+1));n<i&&r.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function Zn(t){return Fi===null?8*t.length:Fi.measureText(t).width}function Lf(t){if(t.df!==null)return t.df;var e=t.Ae;if(Fi===null){var i=16;return t.df=i}return mv[e]!==void 0&&5e3>G2?i=mv[e]:(i=1.3*Fi.measureText("M").width,mv[e]=i,G2++),t.df=i}function B2(t){if(Fi===null)return 6;if(gd[t]!==void 0&&5e3>vv)var e=gd[t];else e=Fi.measureText(Of).width,gd[t]=e,vv++;return e}function z2(t,e){var i=t.ec.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n=t.spacingAbove+t.spacingBelow;if(n=Math.max(0,Lf(t)+n),i.length===0)return t.Cb=0,t.Fc=1,n;if(!t.isMultiline){var r=i.indexOf(`
`,0);0<=r&&(i=i.substr(0,r))}r=0;for(var o=t.Fc=0,l,h=!1;!h;){if(l=i.indexOf(`
`,o),l===-1&&(l=i.length,h=!0),o<=l){if(o=i.substr(o,l-o),t.wrap!==dv){t.Le=0;var a=ct.alloc();pv(t,o,e,a),r+=a.height,ct.free(a),t.Fc+=t.Le}else pv(t,o,e,null),r+=n,t.Fc++;t.Fc===t.maxLines&&(h=!0)}o=l+1}return t.Lq=r}B.Object.defineProperties(Xt.prototype,{font:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.df=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.ec},set:function(t){var e=this.ec;t!=null?t=t.toString():t="",e!==t&&(this.ec=t,this.v(),this.g("text",e,t),this.Tc=!0)}},textAlign:{get:function(){return this.da!==null?this.da.Or:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(Er(this),this.da.Or=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Xf:oe},set:function(t){var e=this.flip;e!==t&&(Er(this),this.da.Xf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.Yr:yp},set:function(t){var e=this.verticalAlignment;e.D(t)||(t=t.J(),Er(this),this.da.Yr=t,Lh(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.dc.w()){var t=ct.alloc();pv(this,this.ec,999999,t);var e=t.width;ct.free(t),t=z2(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),wo(this.dc,e,t)}return this.dc}},isMultiline:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;e!==t&&(this.o^=4194304,this.Tc=!0,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.o&8388608)!==0},set:function(t){var e=(this.o&8388608)!==0;e!==t&&(this.o^=8388608,this.Tc=!0,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.$r:gv},set:function(t){var e=this.wrap;e!==t&&(Er(this),this.da.$r=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.$q:yv},set:function(t){var e=this.overflow;e!==t&&(Er(this),this.da.$q=t,this.v(),this.g("overflow",e,t))}},stroke:{get:function(){return this.wc},set:function(t){var e=this.wc;e!==t&&(t!==null&&Mu(t,"TextBlock.stroke"),t instanceof Et&&t.freeze(),this.wc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Fc}},lineHeight:{get:function(){return Lf(this)}},editable:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.Qr:null},set:function(t){var e=this.textEditor;e!==t&&(Er(this),this.da.Qr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.Hd:null},set:function(t){var e=this.errorFunction;e!==t&&(Er(this),this.da.Hd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Tk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new to),this.fa.Tk=t,this.v();var i=this.panel;i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new to),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new to),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new to),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new to),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.vj:null},set:function(t){var e=this.textValidation;e!==t&&(Er(this),this.da.vj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.Pr:null},set:function(t){var e=this.textEdited;e!==t&&(Er(this),this.da.Pr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.Dr:0},set:function(t){var e=this.spacingAbove;e!==t&&(Er(this),this.da.Dr=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.Er:0},set:function(t){var e=this.spacingBelow;e!==t&&(Er(this),this.da.Er=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.gq:jf},set:function(t){var e=this.formatting;e!==t&&(Er(this),this.da.gq=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.Jq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&at(t,"> 0",Xt,"maxLines"),Er(this),this.da.Jq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Pc!==null?this.Pc:[this.Cb],arrText:this.$b!==null?this.$b:[this.ze],maxLineWidth:this.Cb,fontHeight:this.df}}},choices:{get:function(){return this.Gm},set:function(t){var e=this.Gm;e!==t&&(this.Gm=t,this.g("choices",e,t))}}});var cd=null,pd=null,dv=new Q(Xt,"None",0),V2=new Q(Xt,"WrapFit",1),gv=new Q(Xt,"WrapDesiredSize",2),Y2=new Q(Xt,"WrapBreakAll",3),yv=new Q(Xt,"OverflowClip",0),dd=new Q(Xt,"OverflowEllipsis",1),jf=new Q(Xt,"FormatTrim",0),U2=new Q(Xt,"FormatNone",0),yj=/[ \u200b\u00ad]/,mv=new Ke,G2=0,gd=new Ke,vv=0,Of="...",X2="",Fi=null,yd=!1;Xt.className="TextBlock";function xv(){this.mc=!1,this.Hd=null,this.Xf=oe,this.gq=jf,this.Jq=1/0,this.$q=yv,this.Er=this.Dr=0,this.Or="start",this.vj=this.Qr=this.Pr=null,this.Yr=yp,this.$r=gv}xv.prototype.copy=function(){var t=new xv;return t.Hd=this.Hd,t.Xf=this.Xf,t.gq=this.gq,t.Jq=this.Jq,t.$q=this.$q,t.Dr=this.Dr,t.Er=this.Er,t.Or=this.Or,t.Pr=this.Pr,t.Qr=this.Qr,t.vj=this.vj,t.Yr=this.Yr,t.$r=this.$r,t},Xt.getEllipsis=function(){return Of},Xt.setEllipsis=function(t){Of=t,gd=new Ke,vv=0},Xt.getBaseline=function(){return cd},Xt.setBaseline=function(t){cd=t},Xt.getUnderline=function(){return pd},Xt.setUnderline=function(t){pd=t},Xt.isValidFont=function(t){if(yd||(Fi=Kn?new Fn(null).context:null,yd=!0),Fi===null)return!0;var e=Fi.font;if(t===e||t==="10px sans-serif")return!0;Fi.font="10px sans-serif",Fi.font=t;var i=Fi.font;if(i!=="10px sans-serif")return Fi.font=e,!0;Fi.font="19px serif";var n=Fi.font;return Fi.font=t,i=Fi.font,Fi.font=e,i!==n},Xt.FormatNone=U2,Xt.FormatTrim=jf,Xt.None=dv,Xt.OverflowClip=yv,Xt.OverflowEllipsis=dd,Xt.WrapBreakAll=Y2,Xt.WrapDesiredSize=gv,Xt.WrapFit=V2;function to(){this.Tk=1,this.u=0,this.j=1,this.m=this.F=null}to.prototype.copy=function(){var t=new to;return t.Tk=this.Tk,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},to.className="GradElementSettings";function Ei(t,e){ot.call(this),this.Eg=null,this.qo="",this.Xg=DM,this.Nk=le,this.Zg=this.Hd=null,this.Mk=Rt,this.Xf=oe,this.vl=null,this.qn=!1,this.en=!0,this.al=!1,this.bt=this.rl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var Yh;V(Ei,ot),Ei.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.qo=this.qo,t.element=this.Eg,t.Xg=this.Xg.J(),t.Nk=this.Nk,t.Xf=this.Xf,t.Hd=this.Hd,t.Zg=this.Zg,t.Mk=this.Mk.J(),t.en=this.en,t.rl=this.rl},Ei.prototype.qb=function(t){t===oe||t===jr||t===gf?this.imageStretch=t:ot.prototype.qb.call(this,t)},Ei.prototype.toString=function(){return"Picture("+this.source+")#"+Oi(this)};function Uh(t){t===void 0&&(t=""),t!==""?Yh[t]&&(delete Yh[t],md--):(Yh=new Ke,md=0)}function _2(t,e){e.uy||(e.Fq=function(i){e.sq=!0,e.ln=!1;var n=e.Bg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value;r.N();var o=e.getAttribute("src")||"",l=r.Og.I(o);if(l!==null)for(var h=l.length,a=0;a<h;a++)o=l[a],r.Xn.add(o),o.Tc=!0,r.Zb(),e.hn&&(e.eu===void 0&&(e.eu=i),o.Zg!==null&&o.Zg(o,i))}e.Bg.clear()}t.desiredSize.w()||(yn(t,!1),t.v())},e.Yp=function(i){e.ln=i;var n=e.Bg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value,o=e.getAttribute("src")||"",l=r.Og.I(o);if(l!==null){r=l.length,o=Vt();for(var h=0;h<r;h++)o.push(l[h]);if(e.hn)for(h=0;h<r;h++)l=o[h],l.Hd!==null&&l.Hd(l,i);zt(o)}}e.Bg.clear()}},e.addEventListener("load",e.Fq),e.addEventListener("error",e.Yp),e.uy=!0)}Ei.prototype.hA=function(){if(this.source!==""){Uh(this.source);var t=this.source;this.source="",this.source=t}},Ei.prototype.redraw=function(){this.N(),this.Tc=!0},Ei.prototype.hh=function(t,e){var i=this.Eg;if(i!==null){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(n===null||n==="")||i.ln instanceof Event&&t instanceof xl)){var r=t instanceof Ki;n=this.naturalBounds;var o=0,l=0,h=this.qn,a=h?+i.width:i.naturalWidth;if(h=h?+i.height:i.naturalHeight,a===void 0&&i.videoWidth&&(a=i.videoWidth),h===void 0&&i.videoHeight&&(h=i.videoHeight),a=a||n.width,h=h||n.height,a!==0&&h!==0){var f=a,p=h;this.sourceRect.w()&&(o=this.Xg.x,l=this.Xg.y,a=this.Xg.width,h=this.Xg.height);var d=a,y=h,m=this.Nk,x=this.Mk;switch(m){case oe:if(this.sourceRect.w())break;d>=n.width&&(o=o+x.offsetX+(d*x.x-n.width*x.x)),y>=n.height&&(l=l+x.offsetY+(y*x.y-n.height*x.y)),a=Math.min(n.width,d),h=Math.min(n.height,y);break;case le:d=n.width,y=n.height;break;case jr:case gf:m===jr?(m=Math.min(n.height/y,n.width/d),d*=m,y*=m):m===gf&&(m=Math.max(n.height/y,n.width/d),d*=m,y*=m,d>=n.width&&(o=(o+x.offsetX+(d*x.x-n.width*x.x)/d)*a),y>=n.height&&(l=(l+x.offsetY+(y*x.y-n.height*x.y)/y)*h),a*=1/(d/n.width),h*=1/(y/n.height),d=n.width,y=n.height)}m=this.Df()*e.scale;var M=d*m*y*m,k=a*h/M,S=i.__goCache;m=null;var C=mj;if(!r){if(i.sq&&S!==void 0&&4<M&&k>C*C)for(S.gi===null&&(K2(S,4,f,p,i),K2(S,16,f,p,i)),r=S.gi,f=r.length,p=0;p<f&&r[p].ratio*r[p].ratio<k;p++)m=r[p];if(!e.Xm){if(this.vl===null)if(this.Eg===null)this.vl=!1;else{r=new Fn(null).context;try{r.drawImage(this.Eg,0,0)}catch{this.en=!1}try{r.getImageData(0,0,1,1).data[3]&&(this.vl=!1),this.vl=!1}catch{this.vl=!0}}if(this.vl)return}}switch(r=d<n.width?x.offsetX+(n.width*x.x-d*x.x):0,x=y<n.height?x.offsetY+(n.height*x.y-y*x.y):0,this.flip){case mf:t.translate(Math.min(n.width,d),0),t.scale(-1,1);break;case yf:t.translate(0,Math.min(n.height,y)),t.scale(1,-1);break;case vf:t.translate(Math.min(n.width,d),Math.min(n.height,y)),t.scale(-1,-1)}if(t.xc(),e.Gf("pictureRatioOptimization")&&!e.$i&&S!==void 0&&m!==null&&m.ratio!==1){t.save(),e=m.ratio;try{t.drawImage(m.source,o/e,l/e,Math.min(m.source.width,a/e),Math.min(m.source.height,h/e),r,x,Math.min(n.width,d),Math.min(n.height,y)),t instanceof Ki&&(this.bt=[o/e,l/e,Math.min(m.source.width,a/e),Math.min(m.source.height,h/e),r,x,Math.min(n.width,d),Math.min(n.height,y)])}catch{this.en=!1}t.restore()}else try{t.drawImage(i,o,l,a,h,r,x,Math.min(n.width,d),Math.min(n.height,y)),t instanceof Ki&&(this.bt=[o,l,a,h,r,x,Math.min(n.width,d),Math.min(n.height,y)])}catch{this.en=!1}switch(this.flip){case mf:t.scale(-1,1),t.translate(-Math.min(n.width,d),0);break;case yf:t.scale(1,-1),t.translate(0,-Math.min(n.height,y));break;case vf:t.scale(-1,-1),t.translate(-Math.min(n.width,d),-Math.min(n.height,y))}}}}},Ei.prototype.Wl=function(t,e,i,n){var r=this.desiredSize,o=cr(this,!0),l=this.Eg,h=this.qn,a=0,f=0;(h||!this.al&&l&&l.complete)&&(this.al=!0),l===null?(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)):(a=h?+l.width:l.naturalWidth,f=h?+l.height:l.naturalHeight),isFinite(r.width)||o===le||o===Ge?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:l!==null&&(t=a)),i=0):l!==null&&this.al!==!1&&(t=this.sourceRect.w()?this.sourceRect.width:a),isFinite(r.height)||o===le||o===Ze?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:l!==null&&(e=f)),n=0):l!==null&&this.al!==!1&&(e=this.sourceRect.w()?this.sourceRect.height:f),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,i=Math.max(i||0,o.width),n=Math.max(n||0,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),l===null||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),wo(this.dc,t,e),this.Ge(0,0,t,e)},Ei.prototype.eh=function(t,e,i,n){zm(this,t,e,i,n)},B.Object.defineProperties(Ei.prototype,{element:{get:function(){return this.Eg},set:function(t){var e=this.Eg;if(this.Tc=!0,e!==t){this.qn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;t===null||i||t instanceof HTMLVideoElement||this.qn||I("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;n!==null&&Nm(n,this),this.Eg=t,t!==null&&i&&t.Bg===void 0&&(t.Bg=new q),n!==null&&i&&Pm(n,this),t!==null&&(this.qn||t.complete===!0?(t.hn&&(t.ln instanceof Event&&this.Hd!==null?this.Hd(this,t.ln):t.sq===!0&&!t.ln&&this.Zg!==null&&t.eu&&this.Zg(this,t.eu)),t.sq=!0,this.desiredSize.w()||(yn(this,!1),this.v())):i&&_2(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.qo},set:function(t){var e=this.qo;if(e!==t){this.Tc=!0,this.qo=t;var i=Yh;if(Kn){var n=null;if(i[t]!==void 0)n=i[t];else if(t!==""){30<md&&(Uh(),i=Yh),n=W("img"),n.hn=!0,_2(this,n);var r=this.rl;r!==null&&(n.crossOrigin=r(this)),n.src=t,i[t]=n,md++}this.element=n,n!==null&&n.__goCache===void 0&&(n.__goCache=new H2),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.rl},set:function(t){if(this.rl!==t&&(this.rl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e.D(t)||(this.Xg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Nk},set:function(t){var e=this.Nk;e!==t&&(this.Nk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Xf},set:function(t){var e=this.Xf;e!==t&&(this.Xf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Mk},set:function(t){var e=this.Mk;e.D(t)||(this.Mk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(this.Hd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.dc}}}),Ei.prototype.redraw=Ei.prototype.redraw,Ei.prototype.reloadSource=Ei.prototype.hA;var md=0,mj=4;Ei.className="Picture",Yh=new Ke,Ei.clearCache=Uh;function H2(){this.gi=null}function K2(t,e,i,n,r){t.gi===null&&(t.gi=[]);var o=new Fn(null),l=o.context,h=1/e;o.width=i/e,o.height=n/e,o.width!==0&&o.height!==0&&(e=new W2(o.La,e),i=1,0<t.gi.length&&(i=t.gi[t.gi.length-1],r=i.source,i=i.ratio),l.setTransform(h*i,0,0,h*i,0,0),l.xc(),l.drawImage(r,0,0),t.gi.push(e))}H2.className="PictureCacheArray";function W2(t,e){this.source=t,this.ratio=e}W2.className="PictureCacheInstance";function Gh(){this.os=new $,this.lc=null}Gh.prototype.reset=function(t){t!==null?(t.ka(),this.os=t,t.figures.clear()):this.os=new $,this.lc=null};function Xh(t,e,i,n,r,o){t.lc=new Ee,t.lc.startX=e,t.lc.startY=i,t.lc.isFilled=n,t.lc.isEvenOdd=o||!1,t.os.figures.add(t.lc),r!==void 0&&(t.lc.isShadowed=r)}function vj(t){var e=t.lc.segments.length;0<e&&t.lc.segments.M(e-1).close()}Gh.prototype.moveTo=function(t,e,i){i===void 0&&(i=!1);var n=new jt(Hn);n.endX=t,n.endY=e,i&&n.close(),this.lc.segments.add(n)},Gh.prototype.lineTo=function(t,e,i){i===void 0&&(i=!1);var n=new jt(Qt);n.endX=t,n.endY=e,i&&n.close(),this.lc.segments.add(n)};function es(t,e,i,n,r,o,l){var h;h===void 0&&(h=!1);var a=new jt(cn);a.point1X=e,a.point1Y=i,a.point2X=n,a.point2Y=r,a.endX=o,a.endY=l,h&&a.close(),t.lc.segments.add(a)}function vd(t,e,i,n,r){var o;o===void 0&&(o=!1);var l=new jt(Lr);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=r,o&&l.close(),t.lc.segments.add(l)}Gh.prototype.arcTo=function(t,e,i,n,r,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var h=new jt(de);h.startAngle=t,h.sweepAngle=e,h.centerX=i,h.centerY=n,h.radiusX=r,h.radiusY=o!==0?o:r,l&&h.close(),this.lc.segments.add(h)};function xj(t,e,i,n,r,o,l,h){var a;a===void 0&&(a=!1),e=new jt(ur,l,h,e,i,n,r,o),a&&e.close(),t.lc.segments.add(e)}function $2(t){var e=xd;return e!==null?(xd=null,e.reset(t),e):(e=new Gh,e.reset(t),e)}var xd=null;Gh.className="StreamGeometryContext";function Qe(t,e){var i=t.toLowerCase(),n=O.Ze;n[t]=e,n[i]=t}Qe("Rectangle",function(t,e,i){t="r"+e+","+i;var n=O.Mf[t];return n!==void 0||(n=new $($.u),n.endX=e,n.endY=i,O.Nf<O.vm&&(O.Mf[t]=n,O.Nf++)),n}),Qe("Square",function(t,e,i){t="s"+e+","+i;var n=O.Mf[t];return n!==void 0||(n=new $($.u),n.endX=e,n.endY=i,n.defaultStretch=jr,O.Nf<O.vm&&(O.Mf[t]=n,O.Nf++)),n}),Qe("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,i/3);var n="rr"+e+","+i+","+t,r=O.Mf[n];if(r!==void 0)return r;var o=t*O.wg;return r=new $().add(new Ee(t,0,!0).add(new jt(Qt,e-t,0)).add(new jt(cn,e,t,e-o,0,e,o)).add(new jt(Qt,e,i-t)).add(new jt(cn,e-t,i,e,i-o,e-o,i)).add(new jt(Qt,t,i)).add(new jt(cn,0,i-t,o,i,0,i-o)).add(new jt(Qt,0,t)).add(new jt(cn,t,0,0,o,o,0).close())),1<o&&(r.spot1=new ht(0,0,o,o),r.spot2=new ht(1,1,-o,-o)),O.Nf<O.vm&&(O.Mf[n]=r,O.Nf++),r}),Qe("Border","RoundedRectangle"),Qe("Ellipse",function(t,e,i){t="e"+e+","+i;var n=O.Mf[t];return n!==void 0||(n=new $($.F),n.endX=e,n.endY=i,n.spot1=U0,n.spot2=G0,O.Nf<O.vm&&(O.Mf[t]=n,O.Nf++)),n}),Qe("Circle",function(t,e,i){t="c"+e+","+i;var n=O.Mf[t];return n!==void 0||(n=new $($.F),n.endX=e,n.endY=i,n.spot1=U0,n.spot2=G0,n.defaultStretch=jr,O.Nf<O.vm&&(O.Mf[t]=n,O.Nf++)),n}),Qe("TriangleRight",function(t,e,i){return new $().add(new Ee(0,0).add(new jt(Qt,e,.5*i)).add(new jt(Qt,0,i).close())).pm(0,.25,.5,.75)}),Qe("TriangleDown",function(t,e,i){return new $().add(new Ee(0,0).add(new jt(Qt,e,0)).add(new jt(Qt,.5*e,i).close())).pm(.25,0,.75,.5)}),Qe("TriangleLeft",function(t,e,i){return new $().add(new Ee(e,i).add(new jt(Qt,0,.5*i)).add(new jt(Qt,e,0).close())).pm(.5,.25,1,.75)}),Qe("TriangleUp",function(t,e,i){return new $().add(new Ee(e,i).add(new jt(Qt,0,i)).add(new jt(Qt,.5*e,0).close())).pm(.25,.5,.75,1)}),Qe("Triangle","TriangleUp"),Qe("Diamond",function(t,e,i){return new $().add(new Ee(.5*e,0).add(new jt(Qt,0,.5*i)).add(new jt(Qt,.5*e,i)).add(new jt(Qt,e,.5*i).close())).pm(.25,.25,.75,.75)}),Qe("LineH",function(t,e,i){return t=new $($.j),t.startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),Qe("LineV",function(t,e,i){return t=new $($.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),Qe("None","Rectangle"),Qe("BarH","Rectangle"),Qe("BarV","Rectangle"),Qe("MinusLine","LineH"),Qe("PlusLine",function(t,e,i){return new $().add(new Ee(0,i/2,!1).add(new jt(Qt,e,i/2)).add(new jt(Hn,e/2,0)).add(new jt(Qt,e/2,i)))}),Qe("XLine",function(t,e,i){return new $().add(new Ee(0,i,!1).add(new jt(Qt,e,0)).add(new jt(Hn,0,0)).add(new jt(Qt,e,i)))}),Qe("LineRight",function(t,e,i){return new $().add(new Ee(.25*e,0,!1).add(new jt(Qt,.75*e,.5*i)).add(new jt(Qt,.25*e,i)))}),Qe("LineDown",function(t,e,i){return new $().add(new Ee(0,.25*i,!1).add(new jt(Qt,.5*e,.75*i)).add(new jt(Qt,e,.25*i)))}),Qe("LineLeft",function(t,e,i){return new $().add(new Ee(.75*e,0,!1).add(new jt(Qt,.25*e,.5*i)).add(new jt(Qt,.75*e,i)))}),Qe("LineUp",function(t,e,i){return new $().add(new Ee(0,.75*i,!1).add(new jt(Qt,.5*e,.25*i)).add(new jt(Qt,e,.75*i)))}),O.um={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function wv(){this.mc=!1,this.tr=this.Kp=this.zq=null,this.vr="",this.fr=this.oq=this.ur=null,this.hr="",this.gr=pp,this.ir=null,this.jr="",this.lr=$e,this.Gq="",this.Hq=ei,this.Pq=w0,this.Kq=M0,this.Up=null,this.Cq=127,this.zr=S0,this.yr="gray",this.Vg=4}wv.prototype.copy=function(){var t=new wv;return t.zq=this.zq,t.Kp=this.Kp,t.tr=this.tr,t.vr=this.vr,t.ur=this.ur,t.oq=this.oq,t.fr=this.fr,t.hr=this.hr,t.gr=this.gr.J(),t.ir=this.ir,t.jr=this.jr,t.lr=this.lr.J(),t.Gq=this.Gq,t.Hq=this.Hq.J(),t.Pq=this.Pq.J(),t.Kq=this.Kq.J(),t.Up=this.Up,t.Cq=this.Cq,t.zr=this.zr.J(),t.yr=this.yr,t.Vg=this.Vg,t};function lt(t,e){t===void 0||t instanceof ye||typeof t=="string"?_.call(this,t):(_.call(this),t&&(e=t)),this.G=2408959,this.Tf="",this.P=null,this.Jg="",this.Qf=this.Ug=null,this.ec="",this.Ah=this.Ig=null,this.ke=new N(NaN,NaN).freeze(),this.nf=null,this.Ao=NaN,this.vw=-1,this.ty=new z,this.Rh=null,this.ag=NaN,e&&Object.assign(this,e)}V(lt,_),lt.prototype.cloneProtected=function(t){_.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.Tf=this.Tf,this.P!==null&&(t.P=this.P.mc?this.P:this.P.copy()),t.Jg=this.Jg,t.Qf=null,t.ec=this.ec,t.ke.assign(this.ke),t.Ao=this.Ao},s=lt.prototype,s.Af=function(t){_.prototype.Af.call(this,t),t.oh(),t.Ug=null,t.nf=null,t.Rh=null},s.toString=function(){var t=Ns(this.constructor)+"#"+Oi(this);return this.data!==null&&(t+="("+Xi(this.data)+")"),t};function Ai(t){t.P===null?t.P=new wv:t.P.mc&&(t.P=t.P.copy())}s.th=function(){_.prototype.th.call(this),this.P!==null&&(this.P.mc=!0)},s.gk=function(t,e,i,n,r,o,l){var h=this.diagram;h!==null&&(t===Me&&e==="elements"?r instanceof _?wl(r,function(a){Wv(h.partManager,a),YS(h,a)}):Pm(h,r):t===Ne&&e==="elements"&&(r instanceof _?wl(r,function(a){$v(h.partManager,a,h)}):Nm(h,r)),h.cb(t,e,i,n,r,o,l))},s.Ma=function(t){if(_.prototype.Ma.call(this,t),this.data!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof _&&wl(r,function(o){o.data!==null&&o.Ma()})}for(e=this.adornments;e.next();)e.value.Ma(t)}},lt.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},lt.prototype.Pj=function(t){var e=this.Qf;return e===null?null:e.I(t)},lt.prototype.bh=function(t,e){if(e!==null){var i=null,n=this.Qf;if(n!==null&&(i=n.I(t)),i!==e){if(i!==null){var r=i.diagram;r!==null&&r.remove(i)}n===null&&(this.Qf=n=new mt),e.Tf!==t&&(e.category=t),n.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.ih(),t!==null&&(e.data=t.data)))}}},lt.prototype.Jf=function(t){var e=this.Qf;if(e!==null){var i=e.I(t);if(i!==null){var n=i.diagram;n!==null&&n.remove(i)}e.remove(t),e.count===0&&(this.Qf=null)}},lt.prototype.Ej=function(){var t=this.Qf;if(t!==null){var e=Vt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Jf(e[i]);zt(e)}},lt.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var i=e.value;i.v(),i.placeholder&&i.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.w()&&this.isVisible()&&e.Ed()&&e.actualBounds.w())){if(i=this.Pj("Selection"),i===null){if(i=this.selectionAdornmentTemplate,i===null&&(i=this.ph()?t.linkSelectionAdornmentTemplate:this instanceof gt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Ct))break t;En(i),i=i.copy(),i!==null&&(this.ph()&&this.selectionObject===this.path&&(i.type=_.Link),i.adornedObject=e)}if(i!==null){i.type===_.Link&&i.v(),this.bh("Selection",i);break t}}this.Jf("Selection")}for(wj(this,t),e=this.adornments;e.next();)e.value.Ma()}},lt.prototype.Vb=function(){var t=this.diagram;t!==null&&(t.vd=!0,!(this.G&16384)&&(this.G|=16384))};function Mv(t){t.G&16384&&(t.updateAdornments(),t.G&=-16385)}function wj(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function wd(t){if(Fs(t)===!1){kv(t,!0),t.Uk();var e=t.diagram;e!==null&&(e.De.add(t),e.Zb())}}function J2(t){if(t.G|=2097152,Fs(t)!==!1){var e=t.position,i=t.location;i.w()&&e.w()||q2(t,e,i),i=t.Ib;var n=z.alloc().assign(i);i.ka(),i.x=e.x,i.y=e.y,i.freeze(),t.Xl(n,i),z.free(n),kv(t,!1)}}lt.prototype.Ge=function(t,e,i,n){var r=this.tc;r.h(t,e,i,n),this.Lb===null&&(this.Lb=new wt);var o=this.Lb;o.reset(),this.no(o,t,e,i,n),this.Lb=o,o.ws()||o.pp(r)},lt.prototype.no=function(t,e,i,n,r){if(this.Ca!==1&&t.scale(this.Ca),this.Kb!==0){var o=Rt;this.locationSpot.sb()&&(o=this.locationSpot);var l=N.alloc();if(this.locationObject!==this)for(e=this.locationObject,i=e.naturalBounds,l.yi(i.x,i.y,i.width,i.height,o),e.Lb!==null&&e.Lb.Ga(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),o=e.panel;o!==null&&o!==this;)o.Lb!==null&&o.Lb.Ga(l),l.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else l.yi(e,i,n,r,o);t.rotate(this.Kb,l.x,l.y),N.free(l)}},lt.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},lt.prototype.moveTo=function(t,e,i){t=N.allocAt(t,e),this.move(t,i),N.free(t)},lt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.fv(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},lt.prototype.Yb=function(t){var e=this.diagram;t?(this.C(4),this.Vb(),e!==null&&e.De.add(this)):(this.C(8),this.Ej()),this.oh(),e!==null&&(e.Ya(),e.N())},lt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Rh;if(e===null&&(this.Rh=e=new mt),e.I(t)!==null)return e.I(t);var i=_.prototype.fb.call(this,t);return i!==null?(e.set(t,i),i):(e.set(t,null),null)};function is(t,e,i,n){n===void 0&&(n=new N),i=i.Lc()?Rt:i;var r=e.naturalBounds;if(n.h(r.width*i.x+i.offsetX,r.height*i.y+i.offsetY),e===null||e===t)return n;for(e.transform.Ga(n),e=e.panel;e!==null&&e!==t;)e.transform.Ga(n),e=e.panel;return t.Lb!==null&&t.Lb.Ga(n),n.offset(-t.tc.x,-t.tc.y),n}lt.prototype.mi=function(t){return t===void 0&&(t=new z),t.assign(this.actualBounds)},lt.prototype.Va=function(){this.measure(1/0,1/0),this.arrange()};function Z2(t){var e=N.alloc(),i=t.locationObject,n=i.naturalBounds,r=i instanceof vt?i.strokeWidth:0;if(e.yi(0,0,n.width+r,n.height+r,t.locationSpot),i!==t)for(e.offset(-r/2,-r/2),i.transform.Ga(e),i=i.panel;i!==null&&i!==t;)i.transform.Ga(e),i=i.panel;return t.Lb!==null&&t.Lb.Ga(e),e.offset(-t.tc.x,-t.tc.y),e}function kl(t,e){var i=t.ty;isNaN(t.ag)&&(t.ag=T2(t));var n=t.ag,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var o=e.width;e=e.height;var l=t.shadowBlur;return t=t.shadowOffset,o+=l,e+=l,n-=l/2,r-=l/2,0<t.x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,o+2,e+2),i}lt.prototype.arrange=function(){if($n(this)===!1)J2(this);else{yl(this,!1);var t=this.Ib,e=z.alloc();e.assign(t);var i=Es(this);this.eh(0,0,this.tc.width,this.tc.height);var n=this.position;q2(this,n,this.location),t.ka(),t.x=n.x,t.y=n.y,t.freeze(),this.Xl(e,t),e.D(t)?this.Fd(i):!this.Yc()||O.B(e.width,t.width)&&O.B(e.height,t.height)||0<=this.vw&&this.C(16),z.free(e),kv(this,!1)}},s=lt.prototype,s.Xl=function(t,e){var i=this.diagram;if(i!==null){var n=!1;if(i.Zi===!1&&t.w()){var r=z.alloc();r.assign(i.documentBounds),r.Fv(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),z.free(r)}!(this.G&65536)&&t.D(e)||ek(this,n,i),i.N(),!t.w()&&!e.w()||T0(t,e)||(this instanceof b&&!i.undoManager.isUndoingRedoing&&this.Bd(),this.oh())}},s.zv=function(t,e,i){if(this.ph()||!t.w())return!1;var n=this.diagram;return n!==null&&Q2(this,n,t,e,i),this.pa=t,this.G&=-2097153,!this.ke.w()||n!==null&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=this.ke,this.ke=new N(n.x+(t.x-e),n.y+(t.y-i)),this.g("location",n,this.ke.copy())),Fs(this)===!1&&$n(this)===!1&&(wd(this),J2(this)),!0};function Q2(t,e,i,n,r){e===null||t instanceof Ct||(e=e.animationManager,e.zb&&gS(e,t,new N(n,r),i))}s.mm=function(t,e,i){var n=this.ke,r=this.pa;if(i){if(n.x===t&&n.y===e)return;Fs(this)||$n(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}wd(this)},s.Av=function(){this.G&=-2097153,wd(this)};function q2(t,e,i){var n=Z2(t),r=t.diagram,o=i.w(),l=e.w();o&&l?t.G&2097152?b2(t,e,i,r,n):tk(t,e,i,r,n):o?b2(t,e,i,r,n):l&&tk(t,e,i,r,n),t.G|=2097152,N.free(n),t.Uk()}function b2(t,e,i,n,r){var o=e.x,l=e.y;e.h(i.x-r.x,i.y-r.y),n!==null&&(i=n.animationManager,(n=i.defaultAnimation.isAnimating)||!i.zb||t instanceof Ct||gS(i,t,new N(o,l),e),n||e.x===o&&e.y===l||t.g("position",new N(o,l),e.copy()))}function tk(t,e,i,n,r){var o=i.copy();i.h(e.x+r.x,e.y+r.y),i.D(o)||n===null||t.g("location",o,i.copy())}function ek(t,e,i){Pv(t,!1),t instanceof b&&Fm(i,t),t.layer.isTemporary||e||i.Ya(),e=t.Ib;var n=i.viewportBounds;n.w()?Es(t)?(EM(e,n)||t.Fd(!1),t.updateAdornments()):t.isVisible()&&e.Xc(n)?(t.Fd(!0),t.updateAdornments()):t.Vb():i.vd=!0}s.si=function(){return!0},s.Yc=function(){return!0},s.ph=function(){return!1},s.Dd=function(){return!0};function Sv(t,e,i,n){e.constructor===t.constructor||rk||(rk=!0,kt('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),kt("  Old class: "+Ns(t.constructor)+", new class: "+Ns(e.constructor)+", part: "+t.toString())),t.Ej();var r=t.data;i=t.layerName;var o=t.isSelected,l=t.isHighlighted,h=!0,a=!0,f=!1;t instanceof b&&(h=t.isTreeLeaf,a=t.isTreeExpanded,f=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Tf=n,t.svg!==null&&(t.svg.remove(),t.svg=null,t.Tc=!0),t.v(),t.N(),e=t.diagram,n=!0,e!==null&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ub=r,t.G=o?t.G|4096:t.G&-4097,t.G=l?t.G|524288:t.G&-524289,t instanceof b&&(t.U=h?t.U|4:t.U&-5,t.U=a?t.U|1:t.U&-2,t.U=f?t.U|2:t.U&-3),r!==null&&t.Ma(),r=t.layerName,r!==i&&(t.Jg=i,t.layerName=r),e!==null&&(e.skipsUndoManager=n),t.Yc()&&t.C(64)}lt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},lt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},lt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},lt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},lt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},lt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},lt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},lt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},lt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Fs(t){return(t.G&32768)!==0}function kv(t,e){t.G=e?t.G|32768:t.G&-32769}function Pv(t,e){t.G=e?t.G|65536:t.G&-65537}function Es(t){return(t.G&131072)!==0}s=lt.prototype,s.Fd=function(t){this.G=t?this.G|131072:this.G&-131073};function Md(t,e){t.G=e?t.G|1048576:t.G&-1048577}s.oh=function(){var t=this.containingGroup;t!==null&&(t.v(),t.placeholder!==null&&t.placeholder.v(),t.Bd())},s.N=function(){var t=this.diagram;t!==null&&!$n(this)&&!Fs(this)&&this.isVisible()&&this.Ib.w()&&t.N(kl(this,this.Ib))},s.v=function(){_.prototype.v.call(this);var t=this.diagram;t!==null&&(t.De.add(this),this instanceof b&&this.labeledLink!==null&&Lh(this.labeledLink),t.Zb(!0))},s.Vo=function(t){t||(t=this.Ah,t!==null&&Ov(t,this))},s.Wo=function(t){t||(t=this.Ah,t!==null&&Fv(t,this))},s.Lj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.cm(t))}},s.qz=function(){return Nv(this,this)};function Nv(t,e){var i=e.containingGroup;return i!==null?1+Nv(t,i):e instanceof b&&(e=e.labeledLink,e!==null)?Nv(t,e):0}s.vz=function(){return ik(this,this)};function ik(t,e){var i=e.containingGroup;return i!==null||e instanceof b&&(i=e.labeledLink,i!==null)?ik(t,i):e}s.Td=function(t){return t instanceof gt?Cv(this,this,t):!1};function Cv(t,e,i){if(e===i||i===null)return!1;var n=e.containingGroup;return n===null||n!==i&&!Cv(t,n,i)?e instanceof b&&(e=e.labeledLink,e!==null)?Cv(t,e,i):!1:!0}s.qx=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof gt&&Md(e,!0),e instanceof b){var i=e.labeledLink;i!==null&&(e=i)}e=e.containingGroup}for(i=null,e=t;e!==null;){if(e.G&1048576){i=e;break}e instanceof b&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof gt&&Md(e,!1),e instanceof b&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return i},lt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof b&&this.isLinkLabel)},lt.prototype.C=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&t&this.layoutConditions){var e=this.layer;e!==null&&e.isTemporary||this instanceof b&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.Ah,e!==null){var i=e.layout;i!==null?i.C():e.C(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.C())};function nk(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function As(t,e,i,n,r,o){if(o===void 0&&(o=null),!(t.contains(e)||o!==null&&!o(e)||e instanceof Ct)){if(t.add(e),e instanceof b){if(i&&e instanceof gt)for(var l=e.memberParts;l.next();)As(t,l.value,i,n,r,o);if(r!==!1)for(l=e.linksConnected;l.next();){var h=l.value;if(!t.contains(h)){var a=h.fromNode,f=h.toNode;a=a===null||t.contains(a),f=f===null||t.contains(f),(r?a&&f:a||f)&&As(t,h,i,n,r,o)}}if(1<n)for(e=e.Ou();e.next();)As(t,e.value,i,n-1,r,o)}else if(e instanceof K)for(e=e.labelNodes;e.next();)As(t,e.value,i,n,r,o)}}B.Object.defineProperties(lt.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.wa(this.data)}},adornments:{get:function(){return this.Qf===null?_n:this.Qf.iteratorValues}},layer:{get:function(){return this.Ig}},diagram:{get:function(){var t=this.Ig;return t==null?null:t.diagram}},layerName:{get:function(){return this.Jg},set:function(t){var e=this.Jg;if(e!==t){var i=this.diagram;if((i===null||i.Qj(t)!==null&&!i.partManager.addsToTemporaryLayer)&&(this.Jg=t,i!==null&&i.Ya(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(i=e.diagram,i!==null&&(t=i.Qj(t),t!==null&&t!==e)))){var n=e.oc(-1,this,!0);if(0<=n&&i.cb(Ne,"parts",e,this,null,n,!0),n=t.oi(99999999,this,!0),e.visible!==t.visible&&this.Yb(t.visible),0<=n&&i.cb(Me,"parts",t,null,this,!0,n),n=this.layerChanged,n!==null){var r=i.aa;i.aa=!0,n(this,e,t),i.aa=r}}}}},layerChanged:{get:function(){return this.P!==null?this.P.zq:null},set:function(t){var e=this.layerChanged;e!==t&&(Ai(this),this.P.zq=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Ao},set:function(t){var e=this.Ao;if(e!==t){this.Ao=t;var i=this.layer;i!==null&&jp(i,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.nf===null){var t=this.locationObjectName;t!==""?(t=this.fb(t),t!==null?this.nf=t:this.nf=this):this instanceof Ct?this.type!==_.Link&&this.placeholder!==null?this.nf=this.placeholder:this.nf=this:this.nf=this}return this.nf.visible?this.nf:this}},minLocation:{get:function(){return this.P!==null?this.P.Pq:w0},set:function(t){var e=this.minLocation;e.D(t)||(t=t.J(),Ai(this),this.P.Pq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.P!==null?this.P.Kq:M0},set:function(t){var e=this.maxLocation;e.D(t)||(t=t.J(),Ai(this),this.P.Kq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.P!==null?this.P.Gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Ai(this),this.P.Gq=t,this.nf=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.P!==null?this.P.Hq:ei},set:function(t){var e=this.locationSpot;e.D(t)||(t=t.J(),Ai(this),this.P.Hq=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ke},set:function(t){var e=t.x,i=t.y,n=this.ke;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(t=t.copy(),e=t,this.ph())e=!1;else{if(this.ke=e,this.G|=2097152,$n(this)===!1&&(wd(this),i=this.pa,i.w())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var o=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),Q2(this,r,i,o.x,o.y),this.g("position",o,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Tf},set:function(t){var e=this.Tf;if(e!==t){this.svg!==null&&(this.svg.remove(),this.Tc=!0);var i=this.diagram,n=this.data,r=null;if(i!==null&&n!==null&&!(this instanceof Ct)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone(),r.O.addAll(this.O))}this.Tf=t,this.g("category",e,t),i===null||n===null||this instanceof Ct?this instanceof Ct&&(r=this.adornedPart,r!==null&&(t=r.Qf,t!==null&&t.remove(e),r.bh(this.category,this))):(o=i.model,o.undoManager.isUndoingRedoing||(this.ph()?(i.partManager.setLinkCategoryForData(n,t),i=i.partManager.findLinkTemplateForCategory(t),i!==null&&(En(i),i=i.copy(),i!==null&&Sv(this,i,e,t))):(o!==null&&o.jm(n,t),i=jk(i.partManager,n,t),i!==null&&(En(i),i=i.copy(),i===null||i instanceof K||(n=this.location.copy(),Sv(this,i,e,t),this.location.w()||(this.location=n)))),r!==null&&(e=this.clone(),e.O.addAll(this.O),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){Sv(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Vb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Vb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var i=this.diagram;i!==null&&i.Ya(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Vb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Vb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Vb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Vb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(i!==null&&i.selection.count>=i.maxSelectionCount)){this.G^=4096;var n=!1;if(i!==null){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ka(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Vb(),t=this.selectionChanged,t!==null&&t(this),i!==null&&(i.Zb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var i=this.diagram;i!==null&&(i=i.highlighteds,i.ka(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.Tc=!0,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.P!==null?this.P.oq:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Ai(this),this.P.oq=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.P!==null?this.P.vr:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Ai(this),this.P.vr=t,this.Ug=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.P!==null?this.P.tr:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Ai(this),this.P.tr=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Ug===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.fb(t),t!==null?this.Ug=t:this.Ug=this):this instanceof K?(t=this.path,t!==null?this.Ug=t:this.Ug=this):this.Ug=this}return this.Ug}},selectionChanged:{get:function(){return this.P!==null?this.P.ur:null},set:function(t){var e=this.selectionChanged;e!==t&&(Ai(this),this.P.ur=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.P!==null?this.P.fr:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Ai(this),this.P.fr=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.P!==null?this.P.hr:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Ai(this),this.P.hr=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.P!==null?this.P.gr:pp},set:function(t){var e=this.resizeCellSize;e.D(t)||(t=t.J(),Ai(this),this.P.gr=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.P!==null?this.P.ir:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Ai(this),this.P.ir=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.P!==null?this.P.jr:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Ai(this),this.P.jr=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.P!==null?this.P.lr:$e},set:function(t){var e=this.rotationSpot;e.D(t)||(t=t.J(),Ai(this),this.P.lr=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.ec},set:function(t){var e=this.ec;e!==t&&(this.ec=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Ah},set:function(t){if(this.Yc()){var e=this.Ah;if(e!==t){t===null||this!==t&&!t.Td(this)||(this===t&&I("Cannot make a Group a member of itself: "+this.toString()),I("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(e!==null?Fv(e,this):this instanceof gt&&i!==null&&i.ai.remove(this),this.Ah=t,t!==null?Ov(t,this):this instanceof gt&&i!==null&&i.ai.add(this),this.C(1),i!==null&&i.aa){var n=this.data,r=i.model;if(n!==null&&r.Xj()){var o=r.wa(t!==null?t.data:null);r.mp(n,o)}}if(n=this.containingGroupChanged,n!==null&&(r=!0,i!==null&&(r=i.aa,i.aa=!0),n(this,e,t),i!==null&&(i.aa=r)),this instanceof gt){for(i=new q,As(i,this,!0,0,!0),i=i.iterator;i.next();)if(n=i.value,n instanceof b)for(n=n.linksConnected;n.next();)_h(n.value)}if(this instanceof b){for(i=this.linksConnected;i.next();)_h(i.value);i=this.labeledLink,i!==null&&_h(i)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&jp(e,-1,t))}}else I("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.P!==null?this.P.Kp:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Ai(this),this.P.Kp=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof b&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.P!==null?this.P.Cq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Ai(this),this.P.Cq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.P!==null?this.P.Up:null},set:function(t){var e=this.dragComputation;e!==t&&(Ai(this),this.P.Up=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.P!==null?this.P.zr:S0},set:function(t){var e=this.shadowOffset;e.D(t)||(t=t.J(),Ai(this),this.P.zr=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.P!==null?this.P.yr:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Ai(this),this.P.yr=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.P!==null?this.P.Vg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Ai(this),this.P.Vg=t,this.N(),this.g("shadowBlur",e,t))}}}),lt.prototype.invalidateLayout=lt.prototype.C,lt.prototype.findCommonContainingGroup=lt.prototype.qx,lt.prototype.isMemberOf=lt.prototype.Td,lt.prototype.findTopLevelPart=lt.prototype.vz,lt.prototype.findSubGraphLevel=lt.prototype.qz,lt.prototype.ensureBounds=lt.prototype.Va,lt.prototype.getDocumentBounds=lt.prototype.mi,lt.prototype.findObject=lt.prototype.fb,lt.prototype.moveTo=lt.prototype.moveTo,lt.prototype.invalidateAdornments=lt.prototype.Vb,lt.prototype.clearAdornments=lt.prototype.Ej,lt.prototype.removeAdornment=lt.prototype.Jf,lt.prototype.addAdornment=lt.prototype.bh,lt.prototype.findAdornment=lt.prototype.Pj,lt.prototype.updateTargetBindings=lt.prototype.Ma;var rk=!1;lt.className="Part",lt.LayoutNone=0,lt.LayoutAdded=1,lt.LayoutRemoved=2,lt.LayoutShown=4,lt.LayoutHidden=8,lt.LayoutNodeSized=16,lt.LayoutGroupLayout=32,lt.LayoutNodeReplaced=64,lt.LayoutStandard=127,lt.LayoutAll=16777215;function Ct(t,e){t===void 0||t instanceof ye||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.G&=-257,this.Jg="Adornment",this.ue=null,this.Aw=0,this.Uw=!1,this.j=this.$a=null,e&&Object.assign(this,e)}V(Ct,lt),Ct.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},Ct.prototype.updateRelationshipsFromData=function(){},Ct.prototype.Ul=function(t){var e=this.adornedObject,i=e==null?void 0:e.part;if(i instanceof K&&e instanceof vt){e=i.path,i.Ul(t),t=e.geometry,i=this.O.s,e=i.length;for(var n=0;n<e;n++){var r=i[n];r.isPanelMain&&r instanceof vt&&(r.ua=t)}}},Ct.prototype.si=function(){var t=this.ue;return t===null?!0:(t=t.part,t===null||!$n(t))},Ct.prototype.Yc=function(){return!1},Ct.prototype.gk=function(t,e,i,n,r,o,l){if(t===Me&&e==="elements"){if(r instanceof Mi)this.$a===null&&(this.$a=r);else if(r instanceof _){var h=r.Nl(function(a){return a instanceof Mi});h instanceof Mi&&this.$a===null&&(this.$a=h)}}else t===Ne&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof _&&this.$a.rg(n)&&(this.$a=null));lt.prototype.gk.call(this,t,e,i,n,r,o,l)},Ct.prototype.updateAdornments=function(){},Ct.prototype.Lj=function(){},B.Object.defineProperties(Ct.prototype,{placeholder:{get:function(){return this.$a}},adornedObject:{get:function(){return this.ue},set:function(t){var e=this.adornedPart,i=null;t!==null&&(i=t.part),e===null||t!==null&&e===i||e.Jf(this.category),this.ue=t,i!==null&&i.bh(this.category,this)}},adornedPart:{get:function(){var t=this.ue;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),Ct.className="Adornment";function Tv(){this.mc=!1,this.Vr=this.gj=this.Eq=this.Dq=null,this.yp=j0,this.er=Pd,this.Kr=this.ij=this.Nq=this.Mq=null}Tv.prototype.copy=function(){var t=new Tv;return t.Dq=this.Dq,t.Eq=this.Eq,t.gj=this.gj,t.Vr=this.Vr,t.yp=this.yp.J(),t.er=this.er,t.Mq=this.Mq,t.Nq=this.Nq,t.ij=this.ij,t.Kr=this.Kr,t};function b(t,e){t===void 0||t instanceof ye||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.U=13,this.Ba=null,this.jb=new tt,this.vc=this.af=this.Yk=null,this.ci=!1,e&&Object.assign(this,e)}V(b,lt),b.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.U=this.U,this.Ba!==null&&(t.Ba=this.Ba.mc?this.Ba:this.Ba.copy())},s=b.prototype,s.Af=function(t){lt.prototype.Af.call(this,t),t.Bd(),t.af=this.af,t.vc=null};function ns(t){t.Ba===null?t.Ba=new Tv:t.Ba.mc&&(t.Ba=t.Ba.copy())}s.th=function(){lt.prototype.th.call(this),this.Ba!==null&&(this.Ba.mc=!0)};function ok(t,e){e!==null&&(t.af===null&&(t.af=new q),t.af.add(e))}function sk(t,e,i,n){if(e===null||t.af===null)return null;for(var r=t.af.iterator;r.next();){var o=r.value;if(o.Ds===t&&o.cv===e&&o.Rx===i&&o.Sx===n||o.Ds===e&&o.cv===t&&o.Rx===n&&o.Sx===i)return o}return null}s.Nz=function(t,e,i){e==null&&(e=""),i==null&&(i=""),t=sk(this,t,e,i),t!==null&&t.Sl()},s.gk=function(t,e,i,n,r,o,l){t===Me&&e==="elements"?this.vc=null:t===Ne&&e==="elements"&&(this.vc=null),lt.prototype.gk.call(this,t,e,i,n,r,o,l)},s.Bd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;t!==void 0&&t.contains(i)||(Wi(i.fromPort),Wi(i.toPort),i.bb())}};function lk(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Wi(i.fromPort),Wi(i.toPort),i.bb())}}function Wi(t){if(t!==null){var e=t.Zn;e!==null&&e.Sl(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Wi(e.port)}}s.si=function(){return!0},b.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Co(this.avoidableMargin),t},b.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},b.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=!0,e=gu,i=this.diagram;if(i!==null&&(t=i.isTreePathToChildren,e=i.treeCollapsePolicy),e===gu){if(t=this.pg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===Dm){if(t=t?this.Oo():this.Po(),0<t.count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===Im&&(t=t?this.Oo():this.Po(),0<t.count&&t.any(function(n){return!n.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},b.prototype.Yb=function(t){lt.prototype.Yb.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&this.containingGroup!==null){var n=i.To(this);n===null||n.Td(this.containingGroup)||i.bb()}i.Yb(t)}},b.prototype.sx=function(){var t=new q,e=new q;return uk(this,this,t,e),e.iterator};function uk(t,e,i,n){if(e!==null&&!i.has(e)){i.add(e);var r=!0,o=t.diagram;o!==null&&(r=o.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(r?l.fromNode===e:l.toNode===e)&&uk(t,r?l.toNode:l.fromNode,i,n):n.add(l)})}}b.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.jb.iterator;var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},s=b.prototype,s.Mo=function(t){t===void 0&&(t=null);var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.fromNode!==i?!1:t===null?!0:n.fromPortId===t},e},s.Sd=function(t){t===void 0&&(t=null);var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.toNode!==i?!1:t===null?!0:n.toPortId===t},e},s.Mu=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Re(i):_n},s.Po=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Re(i):_n},s.Oo=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Re(i):_n},s.lz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Fe(this.jb),r=this;return n.predicate=function(o){return!((o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)&&(o.fromNode!==t||o.toNode!==r||i!==null&&o.fromPortId!==i||e!==null&&o.toPortId!==e))},n},s.mz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Fe(this.jb),r=this;return n.predicate=function(o){return!(o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)},n};function Sd(t,e,i){Wi(i);var n=t.jb.contains(e);if(n||t.jb.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.aa,l.aa=!0),r(t,e,i),l!==null&&(l.aa=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,i!==null&&e!==null&&i!==e&&(n=!0,t=t.diagram,t!==null&&(n=t.isTreePathToChildren),r=n?e:i,o=n?i:e,r.ci||(r.ci=o),!o.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function kd(t,e,i){Wi(i);var n=t.jb.remove(e),r=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,o!==null){var l=!0;r!==null&&(l=r.aa,r.aa=!0),o(t,e,i),r!==null&&(r.aa=l)}}n&&e.isTreeLink&&(i=!0,r!==null&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,t!==null&&(t.ci=!1),e===null||e.isTreeLeaf||(e.jb.count===0?(e.ci=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Ff(e)))}function Ff(t){if(t.ci=!1,t.jb.count!==0){var e=!0,i=t.diagram;if(i===null||!i.undoManager.isUndoingRedoing){for(i!==null&&(e=i.isTreePathToChildren),i=t.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink){if(e){if(n.fromNode===t){t.isTreeLeaf=!1;return}}else if(n.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}b.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},s=b.prototype,s.Vo=function(t){lt.prototype.Vo.call(this,t),t||(Ff(this),t=this.Yk,t!==null&&mk(t,this))},s.Wo=function(t){lt.prototype.Wo.call(this,t),t||(t=this.Yk,t!==null&&t.wd!==null&&(t.wd.remove(this),t.v()))},s.Lj=function(){if(0<this.jb.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this.jb.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,lt.prototype.Lj.call(this)},s.ns=function(t){if(this.vc===null){if(t===""&&this.Te===!1)return this;hk(this)}var e=this.vc.I(t);return e!==null||t!==""&&(e=this.vc.I(""),e!==null)?e:this};function hk(t){t.vc===null?t.vc=new mt:t.vc.clear(),t.qm(t,function(e,i){ak(e,i)}),t.vc.count===0&&t.vc.add("",t)}function ak(t,e){var i=e.portId;i!==null&&t.vc!==null&&t.vc.add(i,e)}function Lv(t,e,i){var n=e.portId;if(n!==null&&(t.vc!==null&&t.vc.remove(n),e=t.diagram,e!==null&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,i===null&&(i=Vt()),i.push(n);if(i!==null){for(t=0;t<i.length;t++)e.remove(i[t]);zt(i)}}}s.Pz=function(t){if(t===null||t===this)return!1;var e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.jb.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode,e!==i&&e!==this))break}if(e===this||e===null||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.jb.iterator;n.next()&&(r=n.value,!r.isTreeLink||(e=r.toNode,e===i||e===this)););if(e===this||e===null||e===i)return!1;i=e}return!0},s.zz=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,i=e.jb.iterator;i.next()&&(n=i.value,!n.isTreeLink||(t=n.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},s.iz=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)Md(e,!0),e=e.pg();var i=null;for(e=t;e!==null;){if(e.G&1048576){i=e;break}e=e.pg()}for(e=this;e!==null;)Md(e,!1),e=e.pg();return i},s.kh=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},s.pg=function(){var t=this.ci;if(t===null)return null;if(t instanceof b)return t;t=this.diagram,t=t!==null?t.isTreePathToChildren:!0;for(var e=this.jb.iterator;e.next();){var i=e.value;if(i.isTreeLink&&(i=t?i.fromNode:i.toNode,i!==this))return this.ci=i}return this.ci=null},s.xz=function(){function t(i,n){n.add(i);var r=i.kh();r!==null&&(n.add(r),i=i.pg(),i!==null&&t(i,n))}var e=new q;return t(this,e),e},s.wz=function(){return fk(this,this)};function fk(t,e){return e=e.pg(),e===null?0:1+fk(t,e)}s.Qo=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Fe(this.jb);var i=this;return e.predicate=t?function(n){return!!(n.isTreeLink&&n.fromNode===i)}:function(n){return!!(n.isTreeLink&&n.toNode===i)},e},s.Ou=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var i=e=null,n=this.jb.iterator;if(t)for(;n.next();)t=n.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):i!==null&&i!==t?(e=new tt,e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):i!==null&&i!==t?(e=new tt,e.add(i),e.add(t)):i=t);return e!==null?e.iterator:i!==null?new Re(i):_n},s.yz=function(t){t===void 0&&(t=1/0);var e=new q;return As(e,this,!1,t,!0),e},b.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Ue){e.Ue=!0;var i=new q;i.add(this),ck(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===gu),e.Ue=!1}};function ck(t,e,i,n,r,o,l){if(1<n)for(var h=i?t.Mo():t.Sd();h.next();){var a=h.value;a.isTreeLink&&(a=a.To(t),a===null||a===t||e.contains(a)||(e.add(a),ck(a,e,i,n-1,r,o)))}else pk(t,e,i,r,o)}function pk(t,e,i,n,r,o){for(var l=r===t?!0:t.isTreeExpanded,h=i?t.Mo():t.Sd(),a={};h.next();){var f=h.value;if(f.isTreeLink&&(f=f.To(t),f!==null&&f!==t)){var p=e.contains(f);if(p||e.add(f),l){var d=i?f.Oo():f.Po();a.uv=t,d.all(function(y){return function(m){return m===y.uv||!m.isTreeExpanded}}(a))&&n.Aj(f,r),f.oh(),f.Yb(!1)}f.isTreeExpanded&&(f.wasTreeExpanded=f.isTreeExpanded,p||pk(f,e,i,n,r))}a={uv:a.uv}}t.isTreeExpanded=!1}b.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Ue){e.Ue=!0;var i=new q;i.add(this),dk(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===gu),e.Ue=!1}};function dk(t,e,i,n,r,o,l){for(var h=o===t?!1:t.isTreeExpanded,a=i?t.Mo():t.Sd(),f={};a.next();){var p=a.value;if(p.isTreeLink&&(h||p.ed||p.bb(),p=p.To(t),p!==null&&p!==t&&!e.contains(p))){if(e.add(p),!h){p.Yb(!0),p.oh();var d=i?p.Oo():p.Po();f.vv=t,d.all(function(y){return function(m){return m===y.vv||!m.isTreeExpanded}}(f))&&r.Cj(p,o)}(2<n||p.wasTreeExpanded)&&(p.wasTreeExpanded=!1,dk(p,e,i,n-1,r,o))}f={vv:f.vv}}t.isTreeExpanded=!0}B.Object.defineProperties(b.prototype,{portSpreading:{get:function(){return this.Ba!==null?this.Ba.er:Pd},set:function(t){var e=this.portSpreading;e!==t&&(ns(this),this.Ba.er=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Bd())}},avoidable:{get:function(){return(this.U&8)!==0},set:function(t){var e=(this.U&8)!==0;if(e!==t){this.U^=8;var i=this.diagram;i!==null&&Fm(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Ba!==null?this.Ba.yp:j0},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.avoidableMargin;if(!e.D(t)){t=t.J(),ns(this),this.Ba.yp=t;var i=this.diagram;i!==null&&Fm(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return this.Ba!==null?this.Ba.Dq:null},set:function(t){var e=this.linkConnected;e!==t&&(ns(this),this.Ba.Dq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Ba!==null?this.Ba.Eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(ns(this),this.Ba.Eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Ba!==null?this.Ba.gj:null},set:function(t){var e=this.linkValidation;e!==t&&(ns(this),this.Ba.gj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Yk!==null}},labeledLink:{get:function(){return this.Yk},set:function(t){var e=this.Yk;if(e!==t){var i=this.diagram,n=this.data;if(e!==null){if(e.wd!==null&&(e.wd.remove(this),e.v()),i!==null&&n!==null&&!i.undoManager.isUndoingRedoing){var r=e.data,o=i.model;if(r!==null&&o.ri()){var l=o.wa(n);l!==void 0&&o.Tx(r,l)}}this.containingGroup=null}this.Yk=t,t!==null&&(mk(t,this),i===null||n===null||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,r!==null&&i.ri()&&(n=i.wa(n),n!==void 0&&i.Bu(r,n))),this.containingGroup=t.containingGroup),Lh(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.ns("")}},ports:{get:function(){return this.vc===null&&hk(this),this.vc.iteratorValues}},isTreeExpanded:{get:function(){return(this.U&1)!==0},set:function(t){var e=(this.U&1)!==0;if(e!==t){this.U^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?this.Yb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.U&2)!==0},set:function(t){var e=(this.U&2)!==0;e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Ba!==null?this.Ba.Vr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(ns(this),this.Ba.Vr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.U&4)!==0},set:function(t){var e=(this.U&4)!==0;e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),b.prototype.expandTree=b.prototype.expandTree,b.prototype.collapseTree=b.prototype.collapseTree,b.prototype.findTreeParts=b.prototype.yz,b.prototype.findTreeChildrenNodes=b.prototype.Ou,b.prototype.findTreeChildrenLinks=b.prototype.Qo,b.prototype.findTreeLevel=b.prototype.wz,b.prototype.findTreeParentChain=b.prototype.xz,b.prototype.findTreeParentNode=b.prototype.pg,b.prototype.findTreeParentLink=b.prototype.kh,b.prototype.findCommonTreeParent=b.prototype.iz,b.prototype.findTreeRoot=b.prototype.zz,b.prototype.isInTreeOf=b.prototype.Pz,b.prototype.findPort=b.prototype.ns,b.prototype.findLinksTo=b.prototype.mz,b.prototype.findLinksBetween=b.prototype.lz,b.prototype.findNodesInto=b.prototype.Oo,b.prototype.findNodesOutOf=b.prototype.Po,b.prototype.findNodesConnected=b.prototype.Mu,b.prototype.findLinksInto=b.prototype.Sd,b.prototype.findLinksOutOf=b.prototype.Mo,b.prototype.findExternalTreeLinksConnected=b.prototype.sx,b.prototype.invalidateConnectedLinks=b.prototype.Bd,b.prototype.invalidateLinkBundle=b.prototype.Nz;var Mj=new Q(b,"SpreadingNone",10),Pd=new Q(b,"SpreadingEvenly",11),jv=new Q(b,"SpreadingPacked",12);b.className="Node",b.SpreadingNone=Mj,b.SpreadingEvenly=Pd,b.SpreadingPacked=jv;function gt(t,e){t===void 0||t instanceof ye||typeof t=="string"?b.call(this,t):(b.call(this),t&&(e=t)),this.U|=4608,this.Gn=new q,this.$a=null,this.Rc=new Wt,this.Rc.group=this,this.gl=new q,this.tb=this.$p=null,e&&Object.assign(this,e)}V(gt,b),gt.prototype.cloneProtected=function(t){b.prototype.cloneProtected.call(this,t),this.U=this.U&-32769;var e=t.Nl(function(i){return i instanceof Mi});e instanceof Mi?t.$a=e:t.$a=null,this.Rc!==null?(t.Rc=this.Rc.copy(),t.Rc.group=t):(t.Rc!==null&&(t.Rc.group=null),t.Rc=null),this.tb!==null&&(t.tb=this.tb.copy())},s=gt.prototype,s.Af=function(t){b.prototype.Af.call(this,t);var e=t.Rj();for(t=t.memberParts;t.next();){var i=t.value;if(i.v(),i.C(8),i.Ej(),i instanceof b)i.Bd(e);else if(i instanceof K)for(i=i.labelNodes;i.next();)i.value.Bd(e)}},s.gk=function(t,e,i,n,r,o,l){if(t===Me&&e==="elements"){if(r instanceof Mi)this.$a===null?this.$a=r:this.$a!==r&&I("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof _){var h=r.Nl(function(a){return a instanceof Mi});h instanceof Mi&&(this.$a===null?this.$a=h:this.$a!==h&&I("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ne&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof _&&this.$a.rg(n)&&(this.$a=null));b.prototype.gk.call(this,t,e,i,n,r,o,l)},s.Xl=function(t,e){b.prototype.Xl.call(this,t,e),this.isClipping&&this.type!==_.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof _&&(t=t.Pb()),this.tb===null&&(this.tb=new z),t.mi(this.tb),t instanceof vt&&this.tb.Ac(-t.strokeWidth,-t.strokeWidth))},s.eh=function(t,e,i,n){this.nf=this.$a,b.prototype.eh.call(this,t,e,i,n)},s.Va=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof K||e.Va()}),b.prototype.Va.call(this)},s.si=function(){if(!b.prototype.si.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof b){if(e.isVisible()&&$n(e))return!1}else if(e instanceof K&&e.isVisible()&&$n(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function Ov(t,e){if(t.Gn.add(e)){e instanceof gt&&t.gl.add(e);var i=t.memberAdded;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.Yb(!1)}e instanceof K&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}function Fv(t,e){if(t.Gn.remove(e)){e instanceof gt&&t.gl.remove(e);var i=t.memberRemoved;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.Yb(!0)}e instanceof K&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}s.Lj=function(){if(0<this.Gn.count){var t=this.diagram;if(t!==null)for(var e=this.Gn.copy().iterator;e.next();)t.remove(e.value)}b.prototype.Lj.call(this)},gt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=Bm(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},gt.prototype.addMembers=function(t,e){var i=this.diagram;if(i===null)return!1;i=i.commandHandler;var n=!0;for(t=Bm(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},gt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},s=gt.prototype,s.Bd=function(t){var e=(this.U&65536)!==0;if(b.prototype.Bd.call(this,t),!e)for(!(this.U&65536)&&(this.U=this.U^65536),e=this.Lu();e.next();){var i=e.value;if(t===void 0||!t.contains(i)){var n=i.fromNode;n!==null&&n!==this&&n.Td(this)&&!n.isVisible()?(Wi(i.fromPort),Wi(i.toPort),i.bb()):(n=i.toNode,n!==null&&n!==this&&n.Td(this)&&!n.isVisible()&&(Wi(i.fromPort),Wi(i.toPort),i.bb()))}}},s.Lu=function(){var t=this.diagram!==null&&this.diagram.Pw;if(t&&this.$p!==null)return this.$p.iterator;var e=this.Rj();e.add(this);for(var i=new q,n=e.iterator;n.next();){var r=n.value;if(r instanceof b)for(r=r.linksConnected;r.next();){var o=r.value;e.contains(o)||i.add(o)}}return t&&(this.$p=i),i.iterator},s.kz=function(){var t=this.Rj();t.add(this);for(var e=new q,i=t.iterator;i.next();){var n=i.value;if(n instanceof b)for(n=n.linksConnected;n.next();){var r=n.value,o=r.fromNode;o===null||t.contains(o)&&o!==this||e.add(o),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},s.jz=function(){function t(i,n){i!==null&&(n.add(i),t(i.containingGroup,n))}var e=new q;return t(this,e),e},s.Rj=function(){var t=new q;return As(t,this,!0,0,!0),t.remove(this),t},s.Yb=function(t){b.prototype.Yb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Yb(t)},gt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ue){t.Ue=!0;var e=this.Rj();gk(this,e,t,this),t.Ue=!1}};function gk(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Yb(!1),o instanceof gt&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,gk(o,e,i,n)),o instanceof b)o.Bd(e),i.Aj(o,n);else if(o instanceof K)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!1}gt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ue){t.Ue=!0;var e=this.Rj();yk(this,e,t,this),t.Ue=!1}};function yk(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Yb(!0),o instanceof gt&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,yk(o,e,i,n)),o instanceof b)o.Bd(e),i.Cj(o,n);else if(o instanceof K)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!0}gt.prototype.move=function(t,e){e===void 0&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,o=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===o||isNaN(i)&&isNaN(o))){for(n=r-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=N.alloc(),b.prototype.move.call(this,t,e),t=new q,e=this.Rj().iterator;e.next();)r=e.value,r instanceof K&&(r.suspendsRouting&&t.add(r),r.ed||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.ph()||r instanceof b&&r.isLinkLabel)){var l=r.position,h=r.location;l.w()?(o.x=l.x+n,o.y=l.y+i,r.position=o):h.w()&&(o.x=h.x+n,o.y=h.y+i,r.location=o)}for(e.reset();e.next();)r=e.value,r instanceof K&&(r.suspendsRouting=t.contains(r),r.ed||r.fromNode!==this&&r.toNode!==this)&&(l=r.position,o.x=l.x+n,o.y=l.y+i,o.w()?r.move(o):r.bb(),Av(r)&&r.bb());N.free(o)}},B.Object.defineProperties(gt.prototype,{placeholder:{get:function(){return this.$a}},computesBoundsAfterDrag:{get:function(){return(this.U&2048)!==0},set:function(t){var e=(this.U&2048)!==0;e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.U&4096)!==0},set:function(t){var e=(this.U&4096)!==0;e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.U&8192)!==0},set:function(t){var e=(this.U&8192)!==0;e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.U&16384)!==0},set:function(t){var e=(this.U&16384)!==0;e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Gn.iterator}},layout:{get:function(){return this.Rc},set:function(t){var e=this.Rc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&I("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Rc=t;var i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.xh=!0),this.g("layout",e,t),i!==null&&i.Zb()}}},memberAdded:{get:function(){return this.Ba!==null?this.Ba.Mq:null},set:function(t){var e=this.memberAdded;e!==t&&(ns(this),this.Ba.Mq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Ba!==null?this.Ba.Nq:null},set:function(t){var e=this.memberRemoved;e!==t&&(ns(this),this.Ba.Nq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Ba!==null?this.Ba.ij:null},set:function(t){var e=this.memberValidation;e!==t&&(ns(this),this.Ba.ij=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.U&256)!==0},set:function(t){var e=(this.U&256)!==0;e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.U&512)!==0},set:function(t){var e=(this.U&512)!==0;if(e!==t){this.U^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?(this.$a!==null&&this.$a.v(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.U&1024)!==0},set:function(t){var e=(this.U&1024)!==0;e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.Ba!==null?this.Ba.Kr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(ns(this),this.Ba.Kr=t,this.g("subGraphExpandedChanged",e,t))}},rh:{get:function(){return(this.U&32768)!==0},set:function(t){(this.U&32768)!==0!==t&&(this.U^=32768)}}}),gt.prototype.expandSubGraph=gt.prototype.expandSubGraph,gt.prototype.collapseSubGraph=gt.prototype.collapseSubGraph,gt.prototype.findSubGraphParts=gt.prototype.Rj,gt.prototype.findContainingGroupChain=gt.prototype.jz,gt.prototype.findExternalNodesConnected=gt.prototype.kz,gt.prototype.findExternalLinksConnected=gt.prototype.Lu,gt.prototype.ensureBounds=gt.prototype.Va,gt.className="Group";function Mi(t){ot.call(this),this.yb=rh,this.ko=new z(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}V(Mi,ot),Mi.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.yb=this.yb.J(),t.ko=this.ko.copy()},Mi.prototype.gh=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return lr(0,0,e.width,e.height,t.x,t.y)},Mi.prototype.Wl=function(){var t=this.part;if(t!==null&&(t instanceof gt||t instanceof Ct)||I("Placeholder is not inside a Group or Adornment."),t instanceof gt){var e=this.computeBorder(this.ko),i=this.minSize,n=this.dc;for(wo(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.Ge(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||n===null||n.animationManager.Xu(t)||isNaN(e.x)||isNaN(e.y)||(i=N.alloc(),i.xi(e,t.locationSpot),i.D(t.location)||(t.location=i),N.free(i))}else{e=this.dc,i=this.yb,n=i.left+i.right;var r=i.top+i.bottom,o=t.adornedObject;t.angle=o.li();var l=0;o instanceof vt&&(l=o.strokeWidth);var h=o.Df(),a=o.naturalBounds,f=(a.width+l)*h;l=(a.height+l)*h,t.type!==_.Link&&(h=o.ga(t.category==="Selection"?ei:t.locationSpot,N.alloc()),t.location=h,N.free(h)),isNaN(f)||isNaN(l)?(t=o.ga(ei,N.alloc()),f=z.allocAt(t.x,t.y,0,0),f.Ye(o.ga(Kr,t)),f.Ye(o.ga(oh,t)),f.Ye(o.ga(sh,t)),wo(e,f.width+n||0,f.height+r||0),this.Ge(-i.left,-i.top,e.width,e.height),N.free(t),z.free(f)):(wo(e,f+n||0,l+r||0),this.Ge(-i.left,-i.top,e.width,e.height))}},Mi.prototype.eh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},Mi.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(i!==null&&e instanceof gt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.ko.w()){var n=i.toolManager.findTool("Dragging");if(n===i.currentTool&&(i=n.computeBorder(e,this.ko,t),i!==null))return i}i=z.alloc(),n=this.computeMemberBounds(i);var r=this.yb;return e instanceof gt&&!e.isSubGraphExpanded?t.h(n.x-r.left,n.y-r.top,0,0):t.h(n.x-r.left,n.y-r.top,Math.max(n.width+r.left+r.right,0),Math.max(n.height+r.top+r.bottom,0)),z.free(i),e instanceof gt&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ye(e.location),t},Mi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof gt))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,r=-1/0,o=-1/0,l=e.memberParts;l.next();){var h=l.value;if(h.isVisible()){if(h instanceof K&&(!e.computesBoundsIncludingLinks||Qo(h)||h.fromNode===e||h.toNode===e))continue;h=h.actualBounds,h.left<i&&(i=h.left),h.top<n&&(n=h.top),h.right>r&&(r=h.right),h.bottom>o&&(o=h.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,o-n):(e=e.location,t.h(e.x,e.y,0,0)),t},B.Object.defineProperties(Mi.prototype,{padding:{get:function(){return this.yb},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.yb;e.D(t)||(this.yb=t=t.J(),this.g("padding",e,t),this.v())}}}),Mi.className="Placeholder";function K(t){lt.call(this,_.Link),this.Qa=8,this.ef=null,this.ff="",this.uf=this.gn=null,this.vf="",this.uo=null,this.qk=Si,this.Om=0,this.Qm=Si,this.Rm=NaN,this.qj=Rv,this.po=.5,this.wd=null,this.Nb=new tt().freeze(),this.Tg=this.Mg=null,this.ml=new z,this.ua=new $,this.u=this.m=this.Sf=this.Wf=null,this.su=new N,this.cq=this.Mw=this.Lw=null,this.vt=NaN,this.ba=null,this.j=[],t&&Object.assign(this,t)}V(K,lt),K.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.Qa=this.Qa&-113,t.ff=this.ff,t.gn=this.gn,t.vf=this.vf,t.uo=this.uo,t.qk=this.qk,t.Om=this.Om,t.Qm=this.Qm,t.Rm=this.Rm,t.qj=this.qj,t.po=this.po,this.ba!==null&&(t.ba=this.ba.copy())},s=K.prototype,s.Af=function(t){lt.prototype.Af.call(this,t),this.ff=t.ff,this.vf=t.vf,t.Mg=null,t.bb(),t.Sf=this.Sf;var e=t.fromPort;e!==null&&Wi(e),t=t.toPort,t!==null&&Wi(t)},s.qb=function(t){t.classType===K?(t.value&2)===2?this.routing=t:t===on||t===os||t===Kh?this.curve=t:t===Df||t===Od||t===Fd?this.adjusting=t:t!==Rv&&t!==Si&&I("Unknown Link enum value for a Link property: "+t):lt.prototype.qb.call(this,t)},s.Wc=function(){this.ba===null&&(this.ba=new wf)},s.si=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),$n(t)||Fs(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),$n(t)||Fs(t)))},s.zv=function(){return!1},s.Av=function(){},s.Yc=function(){return!1},K.prototype.computeAngle=function(t,e,i){return K.computeAngle(e,i)},K.computeAngle=function(t,e){switch(t){default:case Si:t=0;break;case If:t=e;break;case Rf:t=e+90;break;case Bf:t=e-90;break;case Bv:t=e+180;break;case Ed:t=O.bp(e),90<t&&270>t&&(t-=180);break;case zf:t=O.bp(e+90),90<t&&270>t&&(t-=180);break;case Vf:t=O.bp(e-90),90<t&&270>t&&(t-=180);break;case Ad:if(t=O.bp(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return O.bp(t)};function _h(t){var e=t.fromNode,i=t.toNode,n=null;if(e!==null?n=i!==null?e.qx(i):e.containingGroup:i!==null?n=i.containingGroup:n=null,e=n,i=t.Ah,i!==e){i!==null&&Fv(i,t),t.Ah=e,e!==null&&Ov(e,t);var r=t.containingGroupChanged;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.aa,l.aa=!0),r(t,i,e),l!==null&&(l.aa=o)}!t.ed||t.Lw!==i&&t.Mw!==i||t.bb()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}s=K.prototype,s.oh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&lt.prototype.oh.call(this)},s.To=function(t){var e=this.fromNode;return t===e?this.toNode:e},s.Ez=function(t){var e=this.fromPort;return t===e?this.toPort:e};function mk(t,e){t.wd===null&&(t.wd=new q),t.wd.add(e),t.v()}s.Vo=function(t){if(lt.prototype.Vo.call(this,t),Pl(this)&&this.Xo(this.actualBounds),!t){t=this.ef;var e=null;t!==null&&(e=this.fromPort,Sd(t,this,e));var i=this.uf;if(i!==null){var n=this.toPort;i===t&&n===e||Sd(i,this,n)}Ef(this)}},s.Wo=function(t){if(lt.prototype.Wo.call(this,t),Pl(this)&&this.Xo(this.actualBounds),!t){t=this.ef;var e=null;t!==null&&(e=this.fromPort,kd(t,this,e));var i=this.uf;if(i!==null){var n=this.toPort;i===t&&n===e||kd(i,this,n)}Af(this)}},s.Lj=function(){if(this.ed=!0,this.wd!==null){var t=this.diagram;if(t!==null)for(var e=this.wd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},K.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},K.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,e===!0?lt.prototype.move.call(this,t,!1):(t=N.allocAt(i.x+n,i.y+r),lt.prototype.move.call(this,t,!1),N.free(t)),rs(this,n,r),t=this.labelNodes;t.next();)e=t.value,i=e.position,e.moveTo(i.x+n,i.y+r)},K.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},K.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},K.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(fp),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===on))return this.ua.Pu(.5,t),t.add(this.i(0)),i=this.ua.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===on){if(e===3){i=this.i(0),n=this.i(1);var r=this.i(2);return O.ax(i.x,i.y,n.x,n.y,n.x,n.y,r.x,r.y,t),t}if(n=(e-1)/3|0,i=3*(n/2|0),n%2===1){n=this.i(i),r=this.i(i+1);var o=this.i(i+2);i=this.i(i+3),O.ax(n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,r=o=n=0;n<i/2&&o<e&&(r=l[o],!(n+r>i/2));)n+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?e.y>o.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-o.y)?e.x>o.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(o.x-e.x),e.y+i*(o.y-e.y))),t},K.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).ab(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===on))return this.ua.xx(.5);if(this.computeCurve()===on&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2===1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),O.Py(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).ab(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r=0;i=0;for(var o;r<n/2&&i<t&&(o=e[i],!(r+o>n/2));)r+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).ab(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.ab(n)},s=K.prototype,s.i=function(t){return this.Nb.s[t]},s.cd=function(t,e){this.Nb.bd(t,e)},s.L=function(t,e,i){this.Nb.bd(t,new N(e,i))},s.Mz=function(t,e){this.Nb.Gb(t,e)},s.l=function(t,e,i){this.Nb.Gb(t,new N(e,i))},s.ne=function(t){this.Nb.add(t)},s.yf=function(t,e){this.Nb.add(new N(t,e))},s.pv=function(t){this.Nb.mb(t)},s.Fj=function(){this.Nb.clear()};function rs(t,e,i){if(e!==0||i!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.ed,r=new tt,o=t.Nb.iterator;o.next();){var l=o.value;r.add(new N(l.x+e,l.y+i).freeze())}r.freeze(),o=t.Nb,t.Nb=r,l=t.diagram,isNaN(e)||isNaN(i)||l!==null&&l.animationManager.zb?t.v():(t.ke.h(t.ke.x+e,t.ke.y+i),t.pa.h(t.pa.x+e,t.pa.y+i),Lh(t)),n?Nd(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),l!==null&&l.animationManager.zb&&um(l.animationManager,t,r),t.g("points",o,r)}}s.uh=function(){this.Mg===null&&(this.Mg=this.Nb,this.Nb=this.Nb.copy())},s.zf=function(){if(this.Mg!==null){for(var t=this.Mg,e=this.Nb,i=1/0,n=1/0,r=t.s,o=r.length,l=0;l<o;l++){var h=r[l];i=Math.min(h.x,i),n=Math.min(h.y,n)}h=l=1/0;for(var a=e.s,f=a.length,p=0;p<f;p++){var d=a[p];l=Math.min(d.x,l),h=Math.min(d.y,h),d.freeze()}if(e.freeze(),f===o){for(o=0;o<f;o++)if(p=r[o],d=a[o],p.x-i!==d.x-l||p.y-n!==d.y-h){this.pc();break}}else this.pc();this.Mg=null,i=this.diagram,i!==null&&i.animationManager.zb&&um(i.animationManager,this,e),Nd(this),this.g("points",t,e)}},s.rv=function(){this.Mg!==null&&(this.Nb=this.Mg,this.Mg=null)};function Nd(t){t.Nb.count===0?t.ed=!1:(t.ed=!0,t.cq=null,t.vt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),jd(t,!1))}s.bb=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.As.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.Tg===null||t.isTicking||(this.Tg=null)}t=this.path,t!==null&&(this.ed=!1,this.v(),t.v())}},s.vg=function(){if(!this.ed&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.uh(),t=this.computePoints()}catch{this.computingPoints=!1,this.rv()}finally{this.computingPoints=!1,t?this.zf():this.rv()}}},K.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Pu||(Pu=new b,Pu.desiredSize=lu,Pu.Va()),this.defaultFromPoint&&(Pu.location=this.defaultFromPoint,Pu.Va(),e=t=Pu)):e=this.fromPort,e!==null&&!t.isVisible()){var i=t.findVisibleNode();i!==null&&i!==t?(t=i,e=i.port):t=i}if(this.Lw=t,t===null||!t.location.w())return!1;for(;!(e===null||e.actualBounds.w()&&e.Ed());)e=e.panel;if(e===null)return!1;var n=this.toNode,r=null;if(n===null?(Nu||(Nu=new b,Nu.desiredSize=lu,Nu.Va()),this.defaultToPoint&&(Nu.location=this.defaultToPoint,Nu.Va(),r=n=Nu)):r=this.toPort,r===null||n.isVisible()||(i=n.findVisibleNode(),i!==null&&i!==n?(n=i,r=i.port):n=i),this.Mw=n,n===null||!n.location.w())return!1;for(;!(r===null||r.actualBounds.w()&&r.Ed());)r=r.panel;if(r===null)return!1;var o=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var h=Hh(l),a=Hh(i),f=e===r&&e!==null,p=this.isOrthogonal,d=this.curve===on;this.Wf=f&&!p?d=!0:!1;var y=this.computeAdjusting()===Si||f;if(!p&&!f&&h&&a){if(h=!1,!y&&3<=o&&(y=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),h=this.adjustPoints(0,y,o-1,a))&&(y=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,y,o-1,a)),!h)if(this.Fj(),d){o=this.getLinkPoint(t,e,l,!0,!1,n,r),y=this.getLinkPoint(n,r,i,!1,!1,t,e),h=y.x-o.x,a=y.y-o.y,f=this.computeCurviness(),d=p=0;var m=o.x+h/3,x=o.y+a/3,M=m,k=x;O.B(a,0)?k=0<h?k-f:k+f:(p=-h/a,d=Math.sqrt(f*f/(p*p+1)),0>f&&(d=-d),M=(0>a?-1:1)*d+m,k=p*(M-m)+x),m=o.x+2*h/3,x=o.y+2*a/3;var S=m,C=x;O.B(a,0)?C=0<h?C-f:C+f:(S=(0>a?-1:1)*d+m,C=p*(S-m)+x),this.Fj(),this.ne(o),this.yf(M,k),this.yf(S,C),this.ne(y),this.cd(0,this.getLinkPoint(t,e,l,!0,!1,n,r)),this.cd(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else o=n,y=r,n=this.getLinkPoint(t,e,l,!0,!1,o,y),r=this.getLinkPoint(o,y,i,!1,!1,t,e),this.hasCurviness()?(y=r.x-n.x,i=r.y-n.y,l=this.computeCurviness(),t=n.x+y/2,e=n.y+i/2,o=t,h=e,O.B(i,0)?h=0<y?h-l:h+l:(y=-y/i,o=Math.sqrt(l*l/(y*y+1)),0>l&&(o=-o),o=(0>i?-1:1)*o+t,h=y*(o-t)+e),this.ne(n),this.yf(o,h),this.ne(r)):(this.ne(n),this.ne(r),h=z.alloc(),e.mi(h),a=h.ca(r),y.mi(h),f=h.ca(n),(a||f)&&(l=e.ga(Td(l),new N),this.cd(0,this.getLinkPointFromPoint(t,e,l,r,!0,l)),i=y.ga(Td(i),new N),this.cd(1,this.getLinkPointFromPoint(o,y,i,n,!1,i))),z.free(h))}else{d=this.isAvoiding,y&&(p&&d||f)&&this.Fj();var T=f?this.computeCurviness():0;d=this.getLinkPoint(t,e,l,!0,p,n,r),m=M=x=0,(p||!h||f)&&(k=this.computeEndSegmentLength(t,e,l,!0),m=this.getLinkDirection(t,e,d,l,!0,p,n,r),f&&(h||l.D(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(m-=p?90:30,0>T&&(m-=180)),0>m?m+=360:360<=m&&(m-=360),f&&(k+=Math.abs(T)*(p?1:2)),m===0?x=k:m===90?M=k:m===180?x=-k:m===270?M=-k:(x=k*Math.cos(m*Math.PI/180),M=k*Math.sin(m*Math.PI/180)),l.Lc()&&f&&(k=e.ga(Rt,N.alloc()),S=N.allocAt(k.x+1e3*x,k.y+1e3*M),this.getLinkPointFromPoint(t,e,k,S,!0,d),N.free(k),N.free(S))),k=this.getLinkPoint(n,r,i,!1,p,t,e);var L=C=S=0;if(p||!a||f){var j=this.computeEndSegmentLength(n,r,i,!1);L=this.getLinkDirection(n,r,k,i,!1,p,t,e),f&&(a||l.D(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(L+=p?0:30,0>T&&(L+=180)),0>L?L+=360:360<=L&&(L-=360),f&&(j+=Math.abs(T)*(p?1:2)),L===0?S=j:L===90?C=j:L===180?S=-j:L===270?C=-j:(S=j*Math.cos(L*Math.PI/180),C=j*Math.sin(L*Math.PI/180)),i.Lc()&&f&&(i=r.ga(Rt,N.alloc()),l=N.allocAt(i.x+1e3*S,i.y+1e3*C),this.getLinkPointFromPoint(n,r,i,l,!1,k),N.free(i),N.free(l))}i=d,(p||!h||f)&&(i=new N(d.x+x,d.y+M)),l=k,(p||!a||f)&&(l=new N(k.x+S,k.y+C)),!y&&!p&&h&&3<o&&this.adjustPoints(0,d,o-2,l)?this.cd(o-1,k):!y&&!p&&a&&3<o&&this.adjustPoints(1,i,o-1,k)?this.cd(0,d):!y&&(p?6<=o:4<o)&&this.adjustPoints(1,i,o-2,l)?(this.cd(0,d),this.cd(o-1,k)):(this.Fj(),this.ne(d),(p||!h||f)&&this.ne(i),p&&this.addOrthoPoints(i,m,l,L,t,n),(p||!a||f)&&this.ne(l),this.ne(k))}return!0};function Ev(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}K.prototype.getLinkPointFromPoint=function(t,e,i,n,r,o){if(o===void 0&&(o=new N),t===null||e===null)return o.assign(i),o;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.se()||(r=r.panel),r===null){r=n.x,n=n.y;var l=i.x;i=i.y}else{t=r.oe,r=1/(t.m11*t.m22-t.m12*t.m21),l=t.m22*r;var h=-t.m12*r,a=-t.m21*r,f=t.m11*r,p=r*(t.m21*t.dy-t.m22*t.dx),d=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*l+n.y*a+p,n=n.x*h+n.y*f+d,l=i.x*l+i.y*a+p,i=i.x*h+i.y*f+d}return e.Sj(r,n,l,i,o),t!==null&&o.transform(t),o};function Cd(t,e){var i=e.Zn;return i===null&&(i=new Cu,i.port=e,i.node=e.part,e.Zn=i),Nk(i,t)}K.prototype.getLinkPoint=function(t,e,i,n,r,o,l,h){if(h===void 0&&(h=new N),i.sb()&&!Hh(i))return e.ga(i,h),h;if(i.Zc()){var a=Cd(this,e);if(a!==null){if(h.assign(a.Zo),r&&this.routing===xk){var f=Cd(this,l);if(f!==null&&a.Gl<f.Gl){a=N.alloc(),f=N.alloc();var p=new z(e.ga(ei,a),e.ga(Kr,f)),d=this.computeSpot(!n,l);t=this.getLinkPoint(o,l,d,!n,r,t,e,f),(i.Hf(uh)||i.Hf(hh))&&t.y>=p.y&&t.y<=p.y+p.height?h.y=t.y:(i.Hf(lh)||i.Hf(ah))&&t.x>=p.x&&t.x<=p.x+p.width&&(h.x=t.x),N.free(a),N.free(f)}}return h}}return i=e.ga(Td(i),N.alloc()),this.pointsCount>(r?6:2)?(l=n?this.i(1):this.i(this.pointsCount-2),r&&(l=Ev(i,l.copy()))):(a=this.computeSpot(!n,l),o=N.alloc(),l=l.ga(Td(a),o),r&&(l=Ev(i,l)),N.free(o)),this.getLinkPointFromPoint(t,e,i,l,n,h),N.free(i),h},K.prototype.getLinkDirection=function(t,e,i,n,r,o,l,h){t:if(n.sb())var a=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Zc()&&(a=Cd(this,e),a!==null))switch(a.Mc){case 1:a=270;break t;case 2:a=180;break t;default:case 4:a=0;break t;case 8:a=90;break t}a=e.ga(Rt,N.alloc()),this.pointsCount>(o?6:2)?(h=r?this.i(1):this.i(this.pointsCount-2),h=o?Ev(a,h.copy()):i):(i=N.alloc(),h=h.ga(Rt,i),N.free(i)),i=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,N.free(a),a=i}return n.Lc()&&l.Td(t)&&(a+=180,360<=a&&(a-=360)),Hh(n)||(t=e.li(),t===0)||(45<=t&&135>t?a+=90:135<=t&&225>t?a+=180:225<=t&&315>t&&(a+=270),360<=a&&(a-=360)),a},K.prototype.computeEndSegmentLength=function(t,e,i,n){return e!==null&&i.Zc()&&(t=Cd(this,e),t!==null)?t.Ju:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},K.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Rt:(e=this.fromSpot,e.Wb()&&(e=t.fromSpot),t=e===$e?We:e)):(t=e||this.toPort,t===null?t=Rt:(e=this.toSpot,e.Wb()&&(e=t.toSpot),t=e===$e?We:e)),t};function Hh(t){return t===We||t.x===.5&&t.y===.5}function Td(t){return t.x===.5&&t.y===.5?t:Rt}K.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Si&&4<this.pointsCount?this.computeMidPoint(new N):(t=e.Zn,t=t!==null?Nk(t,this):null,t!==null?t.Zo:e.ga(Rt))},K.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},K.prototype.Cf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=wt.alloc(),l.reset()),l.multiply(this.transform),this.fh(t,l))return iv(this,e,i,r),o===void 0&&wt.free(l),!0;if(this.Xc(t,l)){var h=!1;if(!this.isAtomic)for(var a=this.O.s,f=a.length;f--;){var p=a[f];if(p.visible||p===this.locationObject){var d=p.actualBounds,y=this.naturalBounds;if(!(d.x>y.width||d.y>y.height||0>d.x+d.width||0>d.y+d.height)){if(d=wt.alloc(),d.set(l),p instanceof _)h=p.Cf(t,e,i,n,r,d);else if(this.path===p){if(p instanceof vt)if(h=t,y=n,p.pickable===!1)h=!1;else if(d.multiply(p.transform),y)t:{var m=h,x=d;if(p.fh(m,x))h=!0;else{if(x===void 0&&(x=p.transform,m.Re(p.actualBounds))){h=!0;break t}h=m.left,y=m.right;var M=m.top;m=m.bottom;var k=N.alloc(),S=N.alloc(),C=N.alloc(),T=wt.alloc();T.set(x),T.bv(p.transform),T.Vj(),S.x=y,S.y=M,S.transform(T),k.x=h,k.y=M,k.transform(T),x=!1,Sl(p,k,S,C)?x=!0:(k.x=y,k.y=m,k.transform(T),Sl(p,k,S,C)?x=!0:(S.x=h,S.y=m,S.transform(T),Sl(p,k,S,C)?x=!0:(k.x=h,k.y=M,k.transform(T),Sl(p,k,S,C)&&(x=!0)))),wt.free(T),N.free(k),N.free(S),N.free(C),h=x}}else h=p.fh(h,d)}else h=u2(p,t,n,d);h&&(y=p,e!==null&&(y=e(p)),y&&(i===null||i(y))&&r.add(y)),wt.free(d)}}}return o===void 0&&wt.free(l),h||this.background!==null||this.areaBackground!==null}return o===void 0&&wt.free(l),!1},K.prototype.computeCurve=function(){if(this.Wf===null){var t=this.fromPort,e=this.isOrthogonal;this.Wf=t!==null&&t===this.toPort&&!e}return this.Wf?on:this.curve},K.prototype.computeCorner=function(){if(this.curve===on)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},K.prototype.findMidLabel=function(){for(var t=this.path,e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},K.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Mk;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(e!==null&&i!==null){var n=this.findMidLabel();if(n!==null){var r=n.naturalBounds,o=n.margin,l=isNaN(r.width)?30:r.width*n.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*n.scale+o.top+o.bottom,n=n.segmentOrientation,n===If||n===Ed||n===Bv?t=Math.max(t,r):n===Bf||n===Vf||n===Rf||n===zf?t=Math.max(t,l):(e=e.ga(Rt).ab(i.ga(Rt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*r)+1)),this.curve===on&&(t*=1.333)}}return t},K.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Si&&i.bb()}},K.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=wk;var e=this.Sf;if(e!==null){for(var i=Vt(),n=0,r=e.links,o=0;o<r.length;o++){var l=r[o].computeSpacing();i.push(l),n+=l}for(n=-n/2,o=0;o<r.length;o++){if(r[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Ds===this.fromNode&&(t=-t),zt(i)}}return t},K.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},K.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Sf!==null},K.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Od)return!1;r===Fd&&(r=Df)}switch(r){case Od:var o=this.i(t),l=this.i(i);if(!o.Xa(e)||!l.Xa(n)){r=o.x,o=o.y;var h=l.x-r,a=l.y-o,f=Math.sqrt(h*h+a*a);if(!O.$(f,0)){if(O.$(h,0))var p=0>a?-Math.PI/2:Math.PI/2;else p=Math.atan(a/Math.abs(h)),0>h&&(p=Math.PI-p);l=e.x;var d=e.y;h=n.x-l;var y=n.y-d;for(a=Math.sqrt(h*h+y*y),O.$(h,0)?y=0>y?-Math.PI/2:Math.PI/2:(y=Math.atan(y/Math.abs(h)),0>h&&(y=Math.PI-y)),f=a/f,p=y-p,this.cd(t,e),t+=1;t<i;t++)e=this.i(t),h=e.x-r,a=e.y-o,e=Math.sqrt(h*h+a*a),O.$(e,0)||(O.$(h,0)?a=0>a?-Math.PI/2:Math.PI/2:(a=Math.atan(a/Math.abs(h)),0>h&&(a=Math.PI-a)),h=a+p,e*=f,this.L(t,l+e*Math.cos(h),d+e*Math.sin(h)));this.cd(i,n)}}return!0;case Fd:if(o=this.i(t),d=this.i(i),!o.Xa(e)||!d.Xa(n)){r=o.x,o=o.y,l=d.x,d=d.y,f=(l-r)*(l-r)+(d-o)*(d-o),h=e.x,p=e.y,a=n.x,y=n.y;var m=1;if(a-h!==0){var x=(y-p)/(a-h);m=Math.sqrt(1+1/(x*x))}else x=9e9;for(this.cd(t,e),t+=1;t<i;t++){e=this.i(t);var M=e.x,k=e.y,S=.5;f!==0&&(S=((r-M)*(r-l)+(o-k)*(o-d))/f);var C=r+S*(l-r),T=o+S*(d-o);e=Math.sqrt((M-C)*(M-C)+(k-T)*(k-T)),k<x*(M-C)+T&&(e=-e),0<x&&(e=-e),M=h+S*(a-h),S=p+S*(y-p),x!==0?(e=M+e/m,this.L(t,e,S-(e-M)/x)):this.L(t,M,S+e)}this.cd(i,n)}return!0;case Df:t:{if(this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),l=this.i(t+2),h=o.x,p=o.y,d=h,f=p,O.B(r.y,o.y)?O.B(o.x,l.x)?p=e.y:O.B(o.y,l.y)&&(h=e.x):O.B(r.x,o.x)&&(O.B(o.y,l.y)?h=e.x:O.B(o.x,l.x)&&(p=e.y)),this.L(t+1,h,p),r=this.i(i),o=this.i(i-1),l=this.i(i-2),h=o.x,p=o.y,a=h,y=p,O.B(r.y,o.y)?O.B(o.x,l.x)?p=n.y:O.B(o.y,l.y)&&(h=n.x):O.B(r.x,o.x)&&(O.B(o.y,l.y)?h=n.x:O.B(o.x,l.x)&&(p=n.y)),this.L(i-1,h,p),Av(this))){this.L(t+1,d,f),this.L(i-1,a,y),i=!1;break t}this.cd(t,e),this.cd(i,n),i=!0}return i;default:return!1}},K.prototype.addOrthoPoints=function(t,e,i,n,r,o){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var h=r.actualBounds.copy(),a=o.actualBounds.copy();if(h.w()&&a.w()){h.Ac(Yf,Yf),a.Ac(Yf,Yf),h.Ye(t),a.Ye(i);var f=N.alloc(),p=N.alloc();e===0?i.x>t.x||n===270&&i.y<t.y&&a.right>t.x||n===90&&i.y>t.y&&a.right>t.x?(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===180?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=f.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x<a.left?this.computeMidOrthoPosition(t.x,t.y,a.left,i.y,!1):t.x<a.right&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.right,p.x=f.x,p.y=i.y):n===0&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=f.y)):(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===180||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===180&&(a.ca(t)||h.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===180||n===90)?f.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===180||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=f.y),f.y>h.top&&f.y<h.bottom&&(i.x>=h.left&&i.x<=t.x||t.x<=a.right&&t.x>=i.x?(n===90||n===270)&&(f.h(Math.max((t.x+i.x)/2,t.x),t.y),p.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===0?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===0?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=f.y))):e===180?i.x<t.x||n===270&&i.y<t.y&&a.left<t.x||n===90&&i.y>t.y&&a.left<t.x?(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===0?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=f.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x>a.right?this.computeMidOrthoPosition(t.x,t.y,a.right,i.y,!1):t.x>a.left&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.left,p.x=f.x,p.y=i.y):n===180&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=f.y)):(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===0||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===0&&(a.ca(t)||h.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===0||n===90)?f.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===0||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=f.y),f.y>h.top&&f.y<h.bottom&&(i.x<=h.right&&i.x>=t.x||t.x>=a.left&&t.x<=i.x?(n===90||n===270)&&(f.h(Math.min((t.x+i.x)/2,t.x),t.y),p.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===180?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===180?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=f.y))):e===90?i.y>t.y||n===180&&i.x<t.x&&a.bottom>t.y||n===0&&i.x>t.x&&a.bottom>t.y?(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===270?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=f.y):n===180&&i.x<t.x||n===0&&i.x>t.x?(f.y=t.y<a.top?this.computeMidOrthoPosition(t.x,t.y,i.x,a.top,!0):t.y<a.bottom&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.bottom,p.x=i.x,p.y=f.y):n===90&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(f.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),f.y=t.y,p.x=f.x)):(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===270||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===270&&(a.ca(t)||h.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===270||n===0)?f.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===270||n===180)&&(f.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=f.x,p.y=i.y),f.x>h.left&&f.x<h.right&&(i.y>=h.top&&i.y<=t.y||t.y<=a.bottom&&t.y>=i.y?(n===0||n===180)&&(f.h(t.x,Math.max((t.y+i.y)/2,t.y)),p.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===90?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===90?h.right:Math.max(h.right,a.right)),p.x=f.x,p.y=i.y))):i.y<t.y||n===180&&i.x<t.x&&a.top<t.y||n===0&&i.x>t.x&&a.top<t.y?(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===90?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=f.y):n===180&&i.x<t.x||n===0&&i.x>=t.x?(f.y=t.y>a.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,a.bottom,!0):t.y>a.top&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.top,p.x=i.x,p.y=f.y):n===270&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(f.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),f.y=t.y,p.x=f.x)):(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===90||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===90&&(a.ca(t)||h.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===90||n===0)?f.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===90||n===180)&&(f.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=f.x,p.y=i.y),f.x>h.left&&f.x<h.right&&(i.y<=h.bottom&&i.y>=t.y||t.y>=a.top&&t.y<=i.y?(n===0||n===180)&&(f.h(t.x,Math.min((t.y+i.y)/2,t.y)),p.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===270?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===270?h.right:Math.max(h.right,a.right)),p.x=f.x,p.y=i.y)));var d=i;if(this.isAvoiding){var y=this.diagram;if(y===null||r===o||this.layer.isTemporary||!_S(y)||h.ca(d)&&!o.Td(r)||a.ca(t)&&!r.Td(o))e=!1;else{var m=jm(y,!0,this.containingGroup,null);if(this.segmentIndex!==17&&m.Yj(Math.min(t.x,f.x),Math.min(t.y,f.y),Math.abs(t.x-f.x),Math.abs(t.y-f.y))&&m.Yj(Math.min(f.x,p.x),Math.min(f.y,p.y),Math.abs(f.x-p.x),Math.abs(f.y-p.y))&&m.Yj(Math.min(p.x,d.x),Math.min(p.y,d.y),Math.abs(p.x-d.x),Math.abs(p.y-d.y)))e=!1;else{r=t,o=d;var x=i=null;if(y.isVirtualized){y=m.bounds.copy(),y.Ac(-m.Ho,-m.Go);var M=N.alloc();Wh(m,t.x,t.y)||(O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,t.x,t.y,f.x,f.y,M)?(i=t=M.copy(),e=M.ab(f)):O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,f.x,f.y,p.x,p.y,M)?(i=t=M.copy(),e=M.ab(p)):O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,p.x,p.y,d.x,d.y,M)&&(i=t=M.copy(),e=M.ab(d))),Wh(m,d.x,d.y)||(O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,d.x,d.y,p.x,p.y,M)?(x=d=M.copy(),n=p.ab(M)):O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,p.x,p.y,f.x,f.y,M)?(x=d=M.copy(),n=f.ab(M)):O.Ff(y.x,y.y,y.x+y.width,y.y+y.height,f.x,f.y,t.x,t.y,M)&&(x=d=M.copy(),n=t.ab(M))),N.free(M)}h=h.copy().dd(a),h.Ac(m.Ho*m.Os,m.Go*m.Os),kk(m,t,e,d,n,h,!0),a=eo(m,d.x,d.y),!m.abort&&a>=$h&&(Sk(m),h.Ac(m.Ho*m.Jx,m.Go*m.Kx),kk(m,t,e,d,n,h,!1),a=eo(m,d.x,d.y)),!m.abort&&a<$h&&eo(m,d.x,d.y)!==ss?(Dv(this,m,d.x,d.y,n,!0,l),h=this.i(2),4>this.pointsCount?(e===0||e===180?(h.x=t.x,h.y=d.y):(h.x=d.x,h.y=t.y),this.L(2,h.x,h.y),this.l(3,h.x,h.y)):(l=this.i(3),e===0||e===180?O.B(h.x,l.x)?(h=e===0?Math.max(h.x,t.x):Math.min(h.x,t.x),this.L(2,h,t.y),this.L(3,h,l.y)):O.B(h.y,l.y)?(Math.abs(t.y-h.y)<=m.Go/2&&(this.L(2,h.x,t.y),this.L(3,l.x,t.y)),this.l(2,h.x,t.y)):this.L(2,t.x,h.y):(e===90||e===270)&&(O.B(h.y,l.y)?(h=e===90?Math.max(h.y,t.y):Math.min(h.y,t.y),this.L(2,t.x,h),this.L(3,l.x,h)):O.B(h.x,l.x)?(Math.abs(t.x-h.x)<=m.Ho/2&&(this.L(2,t.x,h.y),this.L(3,t.x,l.y)),this.l(2,t.x,h.y)):this.L(2,h.x,t.y))),i!==null&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?e===0||e===180?this.l(2,t.x,l.y):this.l(2,l.x,t.y):e===0||e===180?this.l(2,r.x,i.y):this.l(2,i.x,r.y)),x!==null&&(n===0||n===180?this.yf(o.x,x.y):this.yf(x.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.ne(f.copy()),this.ne(p.copy())),N.free(f),N.free(p)}},K.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Zc()||this.computeSpot(!1,this.toPort).Zc()||(o=this.computeCurviness()),r?(e+n)/2+o:(t+i)/2+o};function Av(t){if(t.diagram===null||!t.isAvoiding||!_S(t.diagram))return!1;var e=t.points.s,i=e.length;if(4>i)return!1;t=jm(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],o=e[n+1];if(!t.Yj(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function Dv(t,e,i,n,r,o,l){var h=e.Ho,a=e.Go,f=eo(e,i,n),p=i,d=n;for(r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,r!==l&&f>Nl&&eo(e,p,d)!==f-1&&(eo(e,i-h,n)===f-1?(r=180,p=i-h,d=n):eo(e,i+h,n)===f-1?(r=0,p=i+h,d=n):eo(e,i,n-a)===f-1?(r=270,p=i,d=n-a):eo(e,i,n+a)===f-1&&(r=90,p=i,d=n+a));f>Nl&&eo(e,p,d)===f-1;)i=p,n=d,r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,--f;o?f>Nl&&(r===180||r===0?i=Math.floor(i/h)*h+h/2:(r===90||r===270)&&(n=Math.floor(n/a)*a+a/2)):(i=Math.floor(i/h)*h+h/2,n=Math.floor(n/a)*a+a/2),f>Nl&&(o=r,l=i,p=n,r===0?(o=90,p+=a):r===90?(o=180,l-=h):r===180?(o=270,p-=a):r===270&&(o=0,l+=h),eo(e,l,p)===f-1?Dv(t,e,l,p,o,!1,o):(l=i,p=n,r===0?(o=270,p-=a):r===90?(o=0,l+=h):r===180?(o=90,p+=a):r===270&&(o=180,l-=h),eo(e,l,p)===f-1&&Dv(t,e,l,p,o,!1,o))),t.yf(i,n)}K.prototype.gz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=mi(e,t,i.x,i.y,n.x,n.y),o=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var h=mi(e,t,n.x,n.y,i.x,i.y);n=i,h<r&&(o=l,r=h)}return o},K.prototype.pc=function(){this.lk=!1,this.v()},K.prototype.Ul=function(t){if(!(!t&&(this.ed===!1||(t=this.Pb(),this.lk&&(t===null||t.geometry!==null))))&&(2>this.pointsCount?this.lk=!0:this.ua=this.makeGeometry(),t=this.path,t!==null)){t.ua=this.ua;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof vt&&(r.ua=this.ua)}}},K.prototype.makeGeometry=function(){var t=this.ua,e=this.pointsCount,i=!1,n=this.diagram;n!==null&&Pl(this)&&n.Eh.contains(this)&&(this.ml.width!==0||this.ml.height!==0)&&(n.animationManager.isAnimating||n.currentTool!==n.toolManager)&&(i=!0);var r=this.i(0).copy(),o=r.copy();n=this.Nb.s;var l=this.computeCurve();if(l===on&&3<=e&&!O.$(this.smoothness,0))if(e===3){var h=this.i(1);n=Math.min(r.x,h.x);var a=Math.min(r.y,h.y);h=this.i(2),n=Math.min(n,h.x),a=Math.min(a,h.y)}else{if(this.isOrthogonal)for(a=0;a<e;a++)h=n[a],o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),a=this.i(n),o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);n=o.x,a=o.y}else{for(a=0;a<e;a++)h=n[a],o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);n=o.x,a=o.y}if(n-=this.su.x,a-=this.su.y,r.x-=n,r.y-=a,e!==2||Pl(this)){if(t.type=$.m,h=$2(t),this.computeShortLength(!0)!==0&&(r=Su(this,r,!0,o)),Xh(h,r.x,r.y,!1),l===on&&3<=e&&!O.$(this.smoothness,0))if(e===3)i=this.i(1),e=i.x-n,i=i.y-a,r=this.i(2).copy(),r.x-=n,r.y-=a,this.computeShortLength(!1)!==0&&(r=Su(this,r,!1,o)),es(h,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){e=N.allocAt(n,a),i=N.alloc(),i.assign(this.i(1)),o=N.allocAt(n,a),r=N.allocAt(n,a),l=this.i(0);for(var f,p=this.smoothness/3,d=1;d<this.pointsCount-1;d++){f=this.i(d);var y=l,m=f,x=this.i(Iv(this,f,d,!1));if((!O.$(y.x,m.x)||!O.$(m.x,x.x))&&(!O.$(y.y,m.y)||!O.$(m.y,x.y))){var M=p;isNaN(M)&&(M=this.smoothness/3);var k=y.x;y=y.y;var S=m.x;m=m.y;var C=x.x;x=x.y;var T=M*Ld(k,y,S,m);M*=Ld(S,m,C,x),O.$(y,m)&&O.$(S,C)&&(S>k?x>m?(o.x=S-T,o.y=m-T,r.x=S+M,r.y=m+M):(o.x=S-T,o.y=m+T,r.x=S+M,r.y=m-M):x>m?(o.x=S+T,o.y=m-T,r.x=S-M,r.y=m+M):(o.x=S+T,o.y=m+T,r.x=S-M,r.y=m-M)),O.$(k,S)&&O.$(m,x)&&(m>y?(C>S?(o.x=S-T,o.y=m-T,r.x=S+M):(o.x=S+T,o.y=m-T,r.x=S-M),r.y=m+M):(C>S?(o.x=S-T,o.y=m+T,r.x=S+M):(o.x=S+T,o.y=m+T,r.x=S-M),r.y=m-M)),(O.$(k,S)&&O.$(S,C)||O.$(y,m)&&O.$(m,x))&&(k=.5*(k+C),y=.5*(y+x),o.x=k,o.y=y,r.x=k,r.y=y),(d===1||d===2&&O.$(l.x,this.i(0).x)&&O.$(l.y,this.i(0).y))&&(i.x=.5*(l.x+f.x),i.y=.5*(l.y+f.y)),es(h,i.x-n,i.y-a,o.x-n,o.y-a,f.x-n,f.y-a),e.set(o),i.set(r),l=f}}f=l.x,l=l.y,p=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(p=Su(this,p.copy(),!1,vo)),f=.5*(f+p.x),l=.5*(l+p.y),es(h,r.x-n,r.y-a,f-n,l-a,p.x-n,p.y-a),N.free(e),N.free(i),N.free(o),N.free(r)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),l=this.i(i),i===e-1&&this.computeShortLength(!1)!==0&&(l=Su(this,l.copy(),!1,vo)),es(h,o.x-n,o.y-a,r.x-n,r.y-a,l.x-n,l.y-a);else{for(o=N.alloc(),o.assign(this.i(0)),r=N.alloc(),r.assign(o),l=this.computeCorner(),d=1,f=0;d<e;){if(d=Iv(this,o,d,1<d),p=this.i(d),d>=e-1){if(!o.D(p))this.computeShortLength(!1)!==0&&(p=Su(this,p.copy(),!1,vo)),ku(this,h,-n,-a,o,p,i);else if(f===0)for(d=1;d<e;)r.assign(o),p=this.i(d++),ku(this,h,-n,-a,o,p,i),o.assign(p);break}if(f=Iv(this,p,d+1,d<e-3),d=-n,k=-a,y=p,S=this.i(f),M=i,O.B(o.y,y.y)&&O.B(y.x,S.x))if(x=Math.min(l,Math.abs(y.x-r.x)/2),x=T=Math.min(x,Math.abs(S.y-y.y)/2),O.B(x,0))ku(this,h,d,k,o,y,M),o.assign(y);else{var L=y.x,j=y.y;m=L,C=j,y.x>o.x?L=y.x-x:L=y.x+x,S.y>y.y?C=y.y+T:C=y.y-T,S=N.allocAt(L,j),ku(this,h,d,k,o,S,M),N.free(S),vd(h,y.x+d,y.y+k,m+d,C+k),o.h(m,C)}else O.B(o.x,y.x)&&O.B(y.y,S.y)?(x=Math.min(l,Math.abs(y.y-r.y)/2),x=T=Math.min(x,Math.abs(S.x-y.x)/2),O.B(T,0)?(ku(this,h,d,k,o,y,M),o.assign(y)):(L=y.x,j=y.y,m=L,C=j,y.y>o.y?j=y.y-x:j=y.y+x,S.x>y.x?m=y.x+T:m=y.x-T,S=N.allocAt(L,j),ku(this,h,d,k,o,S,M),N.free(S),vd(h,y.x+d,y.y+k,m+d,C+k),o.h(m,C))):(ku(this,h,d,k,o,y,M),o.assign(y));r.assign(p),d=f}N.free(o)}xd=h}else h=this.i(1).copy(),h.x-=n,h.y-=a,this.computeShortLength(!0)!==0&&(r=Su(this,r,!0,o)),this.computeShortLength(!1)!==0&&(h=Su(this,h,!1,o)),t.type=$.j,t.startX=r.x,t.startY=r.y,t.endX=h.x,t.endY=h.y;return this.lk=!0,t};function Ld(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),O.$(t,0)?e:O.$(e,0)?t:Math.sqrt(t*t+e*e)))}function Su(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var o=t.i(1);if(i=o.x-n.x,o=o.y-n.y,n=Ld(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(o=t.i(r-2),i=o.x-n.x,o=o.y-n.y,n=Ld(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function Iv(t,e,i,n){for(var r=t.pointsCount,o=e;O.$(e.x,o.x)&&O.$(e.y,o.y);){if(i>=r)return r-1;o=t.i(i++)}if(!O.$(e.x,o.x)&&!O.$(e.y,o.y))return i-1;for(var l=o;O.$(e.x,o.x)&&O.$(o.x,l.x)&&(!n||(e.y>=o.y?o.y>=l.y:o.y<=l.y))||O.$(e.y,o.y)&&O.$(o.y,l.y)&&(!n||(e.x>=o.x?o.x>=l.x:o.x<=l.x));){if(i>=r)return r-1;l=t.i(i++)}return i-2}K.prototype.computeJumpLength=function(){return 10};function ku(t,e,i,n,r,o,l){if(!l&&Pl(t)){l=t.computeJumpLength();var h=l/2,a=[],f=0;if(t.isVisible()&&(f=Sj(t,r,o,a)),0<f){if(O.B(r.y,o.y))if(r.x<o.x)for(var p=0;p<f;){var d=Math.max(r.x,Math.min(a[p++]-h,o.x-l));e.lineTo(d+i,o.y+n);for(var y=d+i,m=Math.min(d+l,o.x);p<f&&(d=a[p],d<m+l);)p++,m=Math.min(d+h,o.x);d=o.y-l+n,m+=i;var x=o.y+n;t.curve===os?Xh(e,m,x,!1):es(e,y,d,m,d,m,x)}else for(--f;0<=f;){for(p=Math.min(r.x,Math.max(a[f--]+h,o.x+l)),e.lineTo(p+i,o.y+n),y=p+i,d=Math.max(p-l,o.x);0<=f&&(p=a[f],p>d-l);)f--,d=Math.max(p-h,o.x);p=o.y-l+n,d+=i,m=o.y+n,t.curve===os?Xh(e,d,m,!1):es(e,y,p,d,p,d,m)}else if(O.B(r.x,o.x))if(r.y<o.y)for(p=0;p<f;){for(d=Math.max(r.y,Math.min(a[p++]-h,o.y-l)),e.lineTo(o.x+i,d+n),y=d+n,d=Math.min(d+l,o.y);p<f&&(m=a[p],m<d+l);)p++,d=Math.min(m+h,o.y);m=o.x-l+i,x=o.x+i,d+=n,t.curve===os?Xh(e,x,d,!1):es(e,m,y,m,d,x,d)}else for(--f;0<=f;){for(p=Math.min(r.y,Math.max(a[f--]+h,o.y+l)),e.lineTo(o.x+i,p+n),y=p+n,p=Math.max(p-l,o.y);0<=f&&(d=a[f],d>p-l);)f--,p=Math.max(d-h,o.y);d=o.x-l+i,m=o.x+i,p+=n,t.curve===os?Xh(e,m,p,!1):es(e,d,y,d,p,m,p)}}}e.lineTo(o.x+i,o.y+n)}function Sj(t,e,i,n){var r=t.diagram;if(r===null||e.D(i))return 0;for(r=r.layers;r.next();){var o=r.value;if(o!==null&&o.visible){o=o.Pa.s;for(var l=o.length,h=0;h<l;h++){var a=o[h];if(a instanceof K){if(a===t)return 0<n.length&&n.sort(function(p,d){return p-d}),n.length;if(a.isVisible()&&Pl(a)){var f=a.routeBounds;f.w()&&t.routeBounds.Xc(f)&&!t.usesSamePort(a)&&(f=a.path,f!==null&&f.Ed()&&kj(e,i,n,a))}}}}}return 0<n.length&&n.sort(function(p,d){return p-d}),n.length}function kj(t,e,i,n){for(var r=O.B(t.y,e.y),o=n.pointsCount,l=n.i(0),h=N.alloc(),a=1;a<o;a++){var f=n.i(a);if(a<o-1){var p=n.i(a+1);if(l.y===f.y&&f.y===p.y){if(f.x>l.x&&p.x>=f.x||f.x<l.x&&p.x<=f.x)continue}else if(l.x===f.x&&f.x===p.x&&(f.y>l.y&&p.y>=f.y||f.y<l.y&&p.y<=f.y))continue}t:{p=t.x;var d=t.y,y=e.x,m=e.y,x=l.x;l=l.y;var M=f.x,k=f.y;if(O.B(p,y)){if(!O.B(d,m)&&O.B(l,k)&&Math.min(d,m)<l&&Math.max(d,m)>l&&Math.min(x,M)<p&&Math.max(x,M)>p&&!O.B(x,M)){h.x=p,h.y=l,p=!0;break t}}else if(O.B(d,m)&&O.B(x,M)&&Math.min(p,y)<x&&Math.max(p,y)>x&&Math.min(l,k)<d&&Math.max(l,k)>d&&!O.B(l,k)){h.x=x,h.y=d,p=!0;break t}h.x=0,h.y=0,p=!1}p&&(r?i.push(h.x):i.push(h.y)),l=f}N.free(h)}function Pl(t){return t=t.curve,t===Kh||t===os}function jd(t,e){(e||Pl(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.Eh.contains(t)||t.ml.width===0&&t.ml.height===0||e.Eh.add(t,t.ml.copy()))}K.prototype.Xo=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var i=e.diagram;if(i!==null&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible){if(r===e){n=!0;var o=!1;r=r.Pa.s;for(var l=r.length,h=0;h<l;h++){var a=r[h];a instanceof K&&(a===this?o=!0:o&&vk(this,a,t))}}else if(n)for(o=r.Pa.s,r=o.length,l=0;l<r;l++)h=o[l],h instanceof K&&vk(this,h,t)}}}}};function vk(t,e,i){if(e!==null&&e.lk&&e.ed&&Pl(e)){var n=e.routeBounds;n.w()&&(t.routeBounds.Xc(n)||i.Xc(n))&&(t.usesSamePort(e)||e.pc())}}K.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Xa(r)||(e=this.i(e-1),t=t.i(i-1),e.Xa(t)||n.Xa(t)||e.Xa(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},K.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this.fromNode,i!==null){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;n!==null;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(i=i.findVisibleNode(),i===null||i===t)return!1}if(i=this.toNode,i!==null){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=i.findVisibleNode(),e===null||e===t)return!1}return!0},K.prototype.Yb=function(t){if(lt.prototype.Yb.call(this,t),t&&jd(this,!1),this.Sf!==null&&this.Sf.Sl(),this.wd!==null)for(var e=this.wd.iterator;e.next();)e.value.Yb(t)},K.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?Df:this.qk};function Ef(t){var e=t.ef;if(e!==null){var i=t.uf;if(i!==null&&isNaN(t.curviness)){for(var n=t.ff,r=t.vf,o=t=null,l=e.jb.s,h=l.length,a=0;a<h;a++){var f=l[a];(f.ef===e&&f.ff===n&&f.uf===i&&f.vf===r||f.ef===i&&f.ff===r&&f.uf===e&&f.vf===n)&&(o===null?o=f:(t===null&&(t=[],t.push(o)),t.push(f)))}if(t!==null){for(o=sk(e,i,n,r),o===null&&(o=new Dd(e,n,i,r),ok(e,o),ok(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Sf=o;o.Sl()}}}}function Af(t){var e=t.Sf;e!==null&&isNaN(t.curviness)&&(t.Sf=null,t=e.links.indexOf(t),0<=t&&(Tr(e.links,t),e.Sl()))}K.prototype.ph=function(){return!0},B.Object.defineProperties(K.prototype,{fromNode:{get:function(){return this.ef},set:function(t){var e=this.ef;if(e!==t){var i=this.fromPort;e!==null&&(this.uf!==e&&kd(e,this,i),Af(this),this.C(2)),this.ef=t,t!==null&&this.Yb(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),o(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.uf!==t&&Sd(t,this,r),Ef(this),this.C(1)),this.g("fromNode",e,t),_h(this)}}},fromPortId:{get:function(){return this.ff},set:function(t){var e=this.ff;if(e!==t){var i=this.fromPort;i!==null&&Wi(i),Af(this),this.ff=t;var n=this.fromPort;n!==null&&Wi(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.ri()&&l.xv(o,t)}i!==n&&(this.Wf=null,this.bb(),o=this.fromPortChanged,o!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),o(this,i,n),r!==null&&(r.aa=l))),Ef(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.ef;return t===null?null:t.ns(this.ff)}},fromPortChanged:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var i=this.toPort;e!==null&&(this.ef!==e&&kd(e,this,i),Af(this),this.C(2)),this.uf=t,t!==null&&this.Yb(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),o(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.ef!==t&&Sd(t,this,r),Ef(this),this.C(1)),this.g("toNode",e,t),_h(this)}}},toPortId:{get:function(){return this.vf},set:function(t){var e=this.vf;if(e!==t){var i=this.toPort;i!==null&&Wi(i),Af(this),this.vf=t;var n=this.toPort;n!==null&&Wi(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.ri()&&l.Cv(o,t)}i!==n&&(this.Wf=null,this.bb(),o=this.toPortChanged,o!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),o(this,i,n),r!==null&&(r.aa=l))),Ef(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.uf;return t===null?null:t.ns(this.vf)}},toPortChanged:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Xi:$e},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Wc(),this.ba.Xi=t,this.g("fromSpot",e,t),(e.Zc()||t.Zc())&&this.fromNode!==null&&Wi(this.fromPort),this.bb())}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Vi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",K,"fromEndSegmentLength"),this.Wc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),this.bb())}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Wi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Wc(),this.ba.Wi=t,this.pc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.ba!==null?this.ba.yj:$e},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Wc(),this.ba.yj=t,this.g("toSpot",e,t),(e.Zc()||t.Zc())&&this.toNode!==null&&Wi(this.toPort),this.bb())}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.wj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",K,"toEndSegmentLength"),this.Wc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),this.bb())}},toShortLength:{get:function(){return this.ba!==null?this.ba.xj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Wc(),this.ba.xj=t,this.pc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.wd===null?!1:0<this.wd.count}},labelNodes:{get:function(){return this.wd===null?_n:this.wd.iterator}},relinkableFrom:{get:function(){return(this.Qa&1)!==0},set:function(t){var e=(this.Qa&1)!==0;e!==t&&(this.Qa^=1,this.g("relinkableFrom",e,t),this.Vb())}},relinkableTo:{get:function(){return(this.Qa&2)!==0},set:function(t){var e=(this.Qa&2)!==0;e!==t&&(this.Qa^=2,this.g("relinkableTo",e,t),this.Vb())}},resegmentable:{get:function(){return(this.Qa&4)!==0},set:function(t){var e=(this.Qa&4)!==0;e!==t&&(this.Qa^=4,this.g("resegmentable",e,t),this.Vb())}},isTreeLink:{get:function(){return(this.Qa&8)!==0},set:function(t){var e=(this.Qa&8)!==0;e!==t&&(this.Qa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&Ff(this.fromNode),this.toNode!==null&&Ff(this.toNode))}},path:{get:function(){var t=this.Pb();return t instanceof vt?t:null}},routeBounds:{get:function(){this.vg();var t=this.ml,e=1/0,i=1/0,n=this.pointsCount;if(n===0)t.h(NaN,NaN,0,0);else{if(n===1)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(n===2){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Ye(r)}else if(this.computeCurve()===on&&3<=n&&!this.isOrthogonal)if(r=this.i(0),e=r.x,i=r.y,t.h(e,i,0,0),n===3){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),O.Dl(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var l=this.i(o-2);o+3>=n&&(o=n-1);var h=this.i(o-1),a=this.i(o);O.Dl(r.x,r.y,l.x,l.y,h.x,h.y,a.x,a.y,.5,t),e=Math.min(a.x,e),i=Math.min(a.y,i),r=a}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),i=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Ye(o),r=2;r<n;r++)o=this.i(r),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Ye(o);this.su.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.vg(),this.computeMidPoint(new N)}},midAngle:{get:function(){return this.vg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.cq===null){this.ed||Nd(this);for(var t=this.cq=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);O.$(n.x,r.x)?(n=r.y-n.y,0>n&&(n=-n)):O.$(n.y,r.y)?(n=r.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Bf(r)),t.push(n)}}return this.cq}},flattenedTotalLength:{get:function(){var t=this.vt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.vt=t}return t}},points:{get:function(){return this.Nb},set:function(t){var e=this.Nb;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2===0;if(n){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){n=!1;break}}if(n)for(i=new tt,n=0;n<t.length/2;n++)r=new N(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var o=t[r];if(!yt(o)||typeof o.x!="number"||isNaN(o.x)||typeof o.y!="number"||isNaN(o.y)){n=!1;break}}if(n)for(i=new tt,n=0;n<t.length;n++)r=t[n],i.add(new N(r.x,r.y).freeze())}}else if(t instanceof tt)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else I("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Nb=i,this.pc(),Nd(this),t=this.diagram,t!==null&&(t.pi||t.undoManager.isUndoingRedoing||t.As.add(this),t.animationManager.zb&&um(t.animationManager,this,i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Nb.count}},ed:{get:function(){return(this.Qa&16)!==0},set:function(t){(this.Qa&16)!==0!==t&&(this.Qa^=16)}},suspendsRouting:{get:function(){return(this.Qa&32)!==0},set:function(t){(this.Qa&32)!==0!==t&&(this.Qa^=32)}},computingPoints:{get:function(){return(this.Qa&64)!==0},set:function(t){(this.Qa&64)!==0!==t&&(this.Qa^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.qj.value&2)===2}},isAvoiding:{get:function(){return(this.qj.value&4)===4}},lk:{get:function(){return(this.Qa&128)!==0},set:function(t){(this.Qa&128)!==0!==t&&(this.Qa^=128)}},geometry:{get:function(){if(!this.lk){if(this.vg(),2>this.pointsCount)return this.lk=!0,this.ua;this.ua=this.makeGeometry()}return this.ua}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Hh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!Hh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.qk},set:function(t){var e=this.qk;e!==t&&(this.qk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.pc(),this.g("corner",e,t))}},curve:{get:function(){return this.Qm},set:function(t){var e=this.Qm;e!==t&&(this.Qm=t,this.bb(),this.pc(),jd(this,e===os||e===Kh||t===os||t===Kh),this.g("curve",e,t))}},curviness:{get:function(){return this.Rm},set:function(t){var e=this.Rm;e!==t&&(this.Rm=t,this.bb(),this.pc(),this.g("curviness",e,t))}},routing:{get:function(){return this.qj},set:function(t){var e=this.qj;e!==t&&(this.qj=t,this.Wf=null,this.bb(),jd(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.pc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.ri())return t.model.zc(this.data)}}}),K.prototype.invalidateOtherJumpOvers=K.prototype.Xo,K.prototype.findClosestSegment=K.prototype.gz,K.prototype.updateRoute=K.prototype.vg,K.prototype.invalidateRoute=K.prototype.bb,K.prototype.rollbackRoute=K.prototype.rv,K.prototype.commitRoute=K.prototype.zf,K.prototype.startRoute=K.prototype.uh,K.prototype.clearPoints=K.prototype.Fj,K.prototype.removePoint=K.prototype.pv,K.prototype.addPointAt=K.prototype.yf,K.prototype.addPoint=K.prototype.ne,K.prototype.insertPointAt=K.prototype.l,K.prototype.insertPoint=K.prototype.Mz,K.prototype.setPointAt=K.prototype.L,K.prototype.setPoint=K.prototype.cd,K.prototype.getPoint=K.prototype.i,K.prototype.getOtherPort=K.prototype.Ez,K.prototype.getOtherNode=K.prototype.To;var Pu=null,Nu=null,Rv=new Q(K,"Normal",1),Pj=new Q(K,"Orthogonal",2),Nj=new Q(K,"AvoidsNodes",6),xk=new Q(K,"AvoidsNodesStraight",7),Si=new Q(K,"None",0),on=new Q(K,"Bezier",9),os=new Q(K,"JumpGap",10),Kh=new Q(K,"JumpOver",11),Df=new Q(K,"End",17),Od=new Q(K,"Scale",18),Fd=new Q(K,"Stretch",19),If=new Q(K,"OrientAlong",21),Rf=new Q(K,"OrientPlus90",22),Bf=new Q(K,"OrientMinus90",23),Bv=new Q(K,"OrientOpposite",24),Ed=new Q(K,"OrientUpright",25),zf=new Q(K,"OrientPlus90Upright",26),Vf=new Q(K,"OrientMinus90Upright",27),Ad=new Q(K,"OrientUpright45",28),wk=16,Mk=14,Yf=8;K.className="Link",K.Normal=Rv,K.Orthogonal=Pj,K.AvoidsNodes=Nj,K.AvoidsNodesStraight=xk,K.None=Si,K.Bezier=on,K.JumpGap=os,K.JumpOver=Kh,K.End=Df,K.Scale=Od,K.Stretch=Fd,K.OrientAlong=If,K.OrientPlus90=Rf,K.OrientMinus90=Bf,K.OrientOpposite=Bv,K.OrientUpright=Ed,K.OrientPlus90Upright=zf,K.OrientMinus90Upright=Vf,K.OrientUpright45=Ad,K.EndSegmentStep=8,K.CurvinessStart=wk,K.SpacingMin=Mk,K.OrthoShortCut=Yf;function Dd(t,e,i,n){Le(this),this.Fe=this.qq=!1,this.Ds=t,this.Rx=e,this.cv=i,this.Sx=n,this.links=[]}Dd.prototype.Sl=function(){if(!this.qq){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.ow.add(this),this.Fe=t.undoManager.isUndoingRedoing))}this.qq=!0},Dd.prototype.Nv=function(){if(this.qq){this.qq=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=i===null||i.pi&&!this.Fe,this.Fe=!1,e.arrangeBundledLinks(t,i),t.length===1&&(e.Sf=null,t.length=0)}t.length===0&&(t=this.Ds,this!==null&&t.af!==null&&t.af.remove(this),t=this.cv,this!==null&&t.af!==null&&t.af.remove(this))}},Dd.className="LinkBundle";function Uf(t){Le(this),this.ay=this.group=null,this.vs=!0,this.abort=!1,this.Od=this.Nd=1,this.Fn=this.En=-1,this.qc=t.width,this.rc=t.height,this.ac=null,this.ei=this.di=0,this.Os=11,this.Kx=this.Jx=22}Uf.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Nd=Math.floor((t.x-this.qc)/this.qc)*this.qc,this.Od=Math.floor((e-this.rc)/this.rc)*this.rc,this.En=Math.ceil((i+2*this.qc)/this.qc)*this.qc,this.Fn=Math.ceil((n+2*this.rc)/this.rc)*this.rc,t=1+(Math.ceil((this.En-this.Nd)/this.qc)|0),e=1+(Math.ceil((this.Fn-this.Od)/this.rc)|0),this.ac===null||this.di<t-1||this.ei<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.ac=i,this.di=t-1,this.ei=e-1}if(t=zv,this.ac!==null)for(e=0;e<=this.di;e++)if(i=this.ac[e],i.fill)i.fill(t);else for(n=0;n<=this.ei;n++)i[n]=t}};function Wh(t,e,i){return t.Nd<=e&&e<=t.En&&t.Od<=i&&i<=t.Fn}function eo(t,e,i){return Wh(t,e,i)?(e-=t.Nd,e/=t.qc,i-=t.Od,i/=t.rc,t.ac[e|0][i|0]):zv}function Sk(t){if(t.ac!==null)for(var e=0;e<=t.di;e++)for(var i=t.ac[e],n=0;n<=t.ei;n++)i[n]>=Nl&&(i[n]=zv)}Uf.prototype.Yj=function(t,e,i,n){if(t>this.En||t+i<this.Nd||e>this.Fn||e+n<this.Od)return!0;t=(t-this.Nd)/this.qc|0,e=(e-this.Od)/this.rc|0,i=Math.max(0,i)/this.qc+1|0;var r=Math.max(0,n)/this.rc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=Math.min(t+i-1,this.di)|0,i=Math.min(e+r-1,this.ei)|0;t<=n;t++){r=this.ac[t];for(var o=e;o<=i;o++)if(r[o]===ss)return!1}return!0};function io(t,e,i,n,r,o,l,h,a){if(!(e<o||e>l||i<h||i>a)){var f=e|0,p=i|0,d=t.ac[f][p];if(d>=Nl&&d<$h)for(r?p+=n:f+=n,d+=1;o<=f&&f<=l&&h<=p&&p<=a&&!(d>=t.ac[f][p]);)t.ac[f][p]=d,d+=1,r?p+=n:f+=n;if(f=r?p:f,r)if(0<n)for(i+=n;i<f;i+=n)io(t,e,i,1,!r,o,l,h,a),io(t,e,i,-1,!r,o,l,h,a);else for(i+=n;i>f;i+=n)io(t,e,i,1,!r,o,l,h,a),io(t,e,i,-1,!r,o,l,h,a);else if(0<n)for(e+=n;e<f;e+=n)io(t,e,i,1,!r,o,l,h,a),io(t,e,i,-1,!r,o,l,h,a);else for(e+=n;e>f;e+=n)io(t,e,i,1,!r,o,l,h,a),io(t,e,i,-1,!r,o,l,h,a)}}function Id(t,e,i,n,r,o,l,h,a){e|=0,i|=0;var f=ss,p=Nl;for(t.ac[e][i]=p;f===ss&&e>o&&e<l&&i>h&&i<a;)p+=1,t.ac[e][i]=p,r?i+=n:e+=n,f=t.ac[e][i]}function Rd(t,e,i,n,r,o,l,h,a){e|=0,i|=0;var f=ss,p=$h;for(t.ac[e][i]=p;f===ss&&e>o&&e<l&&i>h&&i<a;)t.ac[e][i]=p,r?i+=n:e+=n,f=t.ac[e][i]}function kk(t,e,i,n,r,o,l){if(t.ac!==null){t.abort=!1;var h=e.x,a=e.y;if(Wh(t,h,a)){h-=t.Nd,h/=t.qc,a-=t.Od,a/=t.rc;var f=n.x,p=n.y;if(Wh(t,f,p))if(f-=t.Nd,f/=t.qc,p-=t.Od,p/=t.rc,1>=Math.abs(h-f)&&1>=Math.abs(a-p))t.abort=!0;else{var d=o.x;n=o.y,e=o.x+o.width;var y=o.y+o.height;d-=t.Nd,d/=t.qc,n-=t.Od,n/=t.rc,e-=t.Nd,e/=t.qc,y-=t.Od,y/=t.rc,o=Math.max(0,Math.min(t.di,d|0)),e=Math.min(t.di,Math.max(0,e|0)),d=Math.max(0,Math.min(t.ei,n|0)),y=Math.min(t.ei,Math.max(0,y|0)),n=t.ac,h|=0,a|=0,f|=0,p|=0;var m=i===0||i===90?1:-1;if(i=i===90||i===270,n[h][a]===ss?(Id(t,h,a,m,i,o,e,d,y),Id(t,h,a,1,!i,o,e,d,y),Id(t,h,a,-1,!i,o,e,d,y)):Id(t,h,a,m,i,h,a,h,a),n[f][p]===ss?(Rd(t,f,p,r===0||r===90?1:-1,r===90||r===270,o,e,d,y),Rd(t,f,p,1,!(r===90||r===270),o,e,d,y),Rd(t,f,p,-1,!(r===90||r===270),o,e,d,y)):Rd(t,f,p,m,i,f,p,f,p),i=Vt(),l&&Pk(t,f,p,r,h,a,i))for((i[0]!==f||i[1]!==p)&&(i.unshift(p),i.unshift(f)),(i[i.length-2]!==h||i[i.length-1]!==a)&&(i.push(h),i.push(a)),t=Nl,r=i[i.length-2],l=i[i.length-1],n[r][l]=t++,o=i.length-4;0<=o;o-=2)for(r=i[o+2],l=i[o+3],e=i[o],f=i[o+1];e>r?r++:e<r?r--:f>l?l++:f<l&&l--,n[r][l]=t++,r!==e||l!==f;);else io(t,h,a,1,!1,o,e,d,y),io(t,h,a,-1,!1,o,e,d,y),io(t,h,a,1,!0,o,e,d,y),io(t,h,a,-1,!0,o,e,d,y);zt(i)}}}}function Pk(t,e,i,n,r,o,l){for(var h=t.ac,a=e,f=i;;){if(a===r&&f===o)return!0;var p=a,d=f;if(n===0)if(p<r)p++;else break;else if(n===90)if(d<o)d++;else break;else if(n===180)if(p>r)p--;else break;else if(d>o)d--;else break;var y=h[p][d];if(y===0||y===Vv)break;a=p,f=d}for(;;){if(p=n,d=a,y=f,n===0?y<o?(p=90,y++):y>o&&(p=270,y--):n===90?d<r?(p=0,d++):d>r&&(p=180,d--):n===180?y<o?(p=90,y++):y>o&&(p=270,y--):d<r?(p=0,d++):d>r&&(p=180,d--),d=h[d][y],p!==n&&d!==0&&d!==Vv){if(l.push(a),l.push(f),Pk(t,a,f,p,r,o,l))return!0;l.pop(),l.pop()}if(h[a][f]=Vv,n===0){if(a===e)return!1;a--}else if(n===90){if(f===i)return!1;f--}else if(n===180){if(a===e)return!1;a++}else{if(f===i)return!1;f++}}}B.Object.defineProperties(Uf.prototype,{bounds:{get:function(){return new z(this.Nd,this.Od,this.En-this.Nd,this.Fn-this.Od)}},Ho:{get:function(){return this.qc},set:function(t){0<t&&t!==this.qc&&(this.qc=t,this.initialize(this.bounds))}},Go:{get:function(){return this.rc},set:function(t){0<t&&t!==this.rc&&(this.rc=t,this.initialize(this.bounds))}}});var ss=0,Nl=1,$h=999999,zv=$h+1,Vv=$h+2;Uf.className="PositionArray";function Cu(){Le(this),this.port=this.node=null,this.pe=[],this.ap=!1}Cu.prototype.toString=function(){for(var t=this.pe,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];n!==null&&(e+=`
  `+n.toString())}return e};function Cj(t,e,i,n){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==15&&(i-=15,0>i&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}Cu.prototype.Sl=function(){this.pe.length=0};function Nk(t,e){var i=t.pe;if(i.length===0){t:if(!t.ap){i=t.ap,t.ap=!0;var n=null,r=t.node,o=r instanceof gt?r:null;if(o===null||o.isSubGraphExpanded)var l=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.sx();else{if(!o.actualBounds.w()){t.ap=i;break t}n=o,l=n.Lu()}o=t.pe.length=0;var h=t.port.ga(ei,N.alloc()),a=t.port.ga(Kr,N.alloc());for(r=z.allocAt(h.x,h.y,0,0),r.Ye(a),N.free(h),N.free(a),h=N.allocAt(r.x+r.width/2,r.y+r.height/2),a=t.port.li(),l=l.iterator;l.next();){var f=l.value;if(f.isVisible()&&f.fromPort!==f.toPort){var p=f.fromPort===t.port||f.fromNode!==null&&f.fromNode.Td(n),d=f.computeSpot(p,t.port);if(d.Zc()&&(p=p?f.toPort:f.fromPort,p!==null)){var y=p.part;if(y!==null){var m=y.findVisibleNode();m!==null&&m!==y&&(y=m,p=y.port),p=f.computeOtherPoint(y,p),y=h.ab(p),y-=a,0>y?y+=360:360<=y&&(y-=360),d=Cj(r,d,y,f.isOrthogonal),d===0?(d=4,180<y&&(y-=360)):d===90?(d=8,270<y&&(y-=360)):d===180?d=2:(d=1,90>y&&(y+=360)),m=t.pe[o],m===void 0?(m=new Yv(f,y,d),t.pe[o]=m):(m.link=f,m.angle=y,m.Mc=d),m.hv.set(p),o++}}}}for(N.free(h),t.pe.sort(Cu.prototype.j),a=t.pe.length,n=-1,o=h=0;o<a;o++)l=t.pe[o],l!==void 0&&(l.Mc!==n&&(n=l.Mc,h=0),l.Uo=h,h++);for(n=-1,h=0,o=a-1;0<=o;o--)a=t.pe[o],a!==void 0&&(a.Mc!==n&&(n=a.Mc,h=a.Uo+1),a.Gl=h);if(o=t.pe,d=t.port,n=t.node.portSpreading,h=N.alloc(),a=N.alloc(),l=N.alloc(),f=N.alloc(),d.ga(ei,h),d.ga(oh,a),d.ga(Kr,l),d.ga(sh,f),m=y=p=d=0,n===jv)for(var x=0;x<o.length;x++){var M=o[x];if(M!==null){var k=M.link.computeThickness();switch(M.Mc){case 8:y+=k;break;case 2:m+=k;break;case 1:d+=k;break;default:case 4:p+=k}}}var S=x=0,C=1,T=M=0;for(k=0;k<o.length;k++){var L=o[k];if(L!==null){if(x!==L.Mc){switch(x=L.Mc,x){case 8:var j=l;S=f;break;case 2:j=f,S=h;break;case 1:j=h,S=a;break;default:case 4:j=a,S=l}switch(M=S.x-j.x,T=S.y-j.y,x){case 8:y>Math.abs(M)?(C=Math.abs(M)/y,y=Math.abs(M)):C=1;break;case 2:m>Math.abs(T)?(C=Math.abs(T)/m,m=Math.abs(T)):C=1;break;case 1:d>Math.abs(M)?(C=Math.abs(M)/d,d=Math.abs(M)):C=1;break;default:case 4:p>Math.abs(T)?(C=Math.abs(T)/p,p=Math.abs(T)):C=1}S=0}var A=L.Zo;if(n===jv){switch(L=L.link.computeThickness(),L*=C,A.set(j),x){case 8:A.x=j.x+M/2+y/2-S-L/2;break;case 2:A.y=j.y+T/2+m/2-S-L/2;break;case 1:A.x=j.x+M/2-d/2+S+L/2;break;default:case 4:A.y=j.y+T/2-p/2+S+L/2}S+=L}else{var Z=.5;n===Pd&&(Z=(L.Uo+1)/(L.Gl+1)),A.x=j.x+M*Z,A.y=j.y+T*Z}}}for(N.free(h),N.free(a),N.free(l),N.free(f),j=t.pe,o=0;o<j.length;o++)n=j[o],n!==null&&(n.Ju=t.computeEndSegmentLength(n));t.ap=i,z.free(r)}i=t.pe}for(t=0;t<i.length;t++)if(r=i[t],r!==null&&r.link===e)return r;return null}Cu.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Mc<e.Mc?-1:t.Mc>e.Mc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Cu.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,We,e.fromPort===this.port),n=t.Uo;if(0>n)return i;var r=t.Gl;if(1>=r||!e.isOrthogonal)return i;e=t.hv;var o=t.Zo;return(t.Mc===2||t.Mc===8)&&(n=r-1-n),((t=t.Mc===2||t.Mc===4)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(r-1-n)},Cu.className="Knot";function Yv(t,e,i){this.link=t,this.angle=e,this.Mc=i,this.hv=new N,this.Gl=this.Uo=0,this.Zo=new N,this.Ju=0}Yv.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Mc.toString()+":"+this.Uo.toString()+"/"+this.Gl.toString()+" "+this.Zo.toString()+" "+this.Ju.toString()+" "+this.hv.toString()},Yv.className="LinkInfo";function Wt(t){Le(this),this.m=this.H=null,this.Gh=this.sn=!0,this.yn=!1,this.Am=new N(0,0).freeze(),this.vn=!0,this.Em=this.un=null,this.xn=!1,this.j=null,t&&Object.assign(this,t)}Wt.prototype.cloneProtected=function(t){t.sn=this.sn,t.Gh=this.Gh,t.yn=this.yn,t.Am.assign(this.Am),t.vn=this.vn,t.un=this.un,t.Em=this.Em,t.xn=!0},Wt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Wt.prototype.qb=function(){},Wt.prototype.toString=function(){var t=Ns(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Wt.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Bc(),this.isOngoing&&t.pi||this.isInitial&&!t.pi)&&(this.isValidLayout=!1,t.Zb())}}},Wt.prototype.createNetwork=function(){return new _t(this)},Wt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof D?(e.lg(t.nodes,!0),e.lg(t.links,!0)):t instanceof gt?e.lg(t.memberParts):e.lg(t.iterator),e},Wt.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(i!==null&&(t=i.diagram,t!==null))break}try{t!==null&&t.Ea("Layout"),this.commitLayout()}finally{t!==null&&t.eb("Layout")}},Wt.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Wt.prototype.doLayout=function(t){var e=new q;t instanceof D?(Ds(this,e,t.nodes,!0,this.rh,!0,!1,!0),Ds(this,e,t.parts,!0,this.rh,!0,!1,!0)):t instanceof gt?Ds(this,e,t.memberParts,!1,this.rh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Ea("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.eb("Layout")),this.isValidLayout=!0},Wt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,o=0,l=0;for(t=t.iterator;t.next();){var h=t.value;Gf(h);var a=h.measuredBounds,f=a.width;a=a.height,h.moveTo(n,r),h instanceof gt&&(h.rh=!1),n+=Math.max(f,50)+20,l=Math.max(l,Math.max(a,50)),o>=e-1?(o=0,n=i,r+=l+20,l=0):o++}},Wt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,o=0,l=this.network.vertexes.iterator;l.next();){var h=l.value.node;if(!(h===null||h instanceof K)&&(Gf(h),this.rh(h))){var a=h.measuredBounds,f=a.width;a=a.height,h.moveTo(i,n),h instanceof gt&&(h.rh=!1),i+=Math.max(f,50)+20,o=Math.max(o,Math.max(a,50)),r>=t-1?(r=0,i=e,n+=o+20,o=0):r++}}},Wt.prototype.rh=function(t){return!!(!t.location.w()||t instanceof gt&&t.rh)};function Ds(t,e,i,n,r,o,l,h){for(i=i.iterator;i.next();){var a=i.value;n&&!a.isTopLevel||r!==null&&!r(a)||!a.canLayout()||(o&&a instanceof b?a.isLinkLabel||(a instanceof gt&&a.layout===null?Ds(t,e,a.memberParts,!1,r,o,l,h):(Gf(a),e.add(a))):l&&a instanceof K?e.add(a):!h||!a.Yc()||a instanceof b||(Gf(a),e.add(a)))}}function Gf(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Va()}Wt.prototype.ni=function(t,e){var i=this.boundsComputation;return i!==null?(e||(e=new z),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Wt.prototype.gx=function(t){var e=new q;return t instanceof D?(Ds(this,e,t.nodes,!0,null,!0,!0,!0),Ds(this,e,t.links,!0,null,!0,!0,!0),Ds(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof gt?Ds(this,e,t.memberParts,!1,null,!0,!0,!0):Ds(this,e,t.iterator,!1,null,!0,!0,!0),e},Wt.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,e!==null&&(i=e.ga(ei),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},B.Object.defineProperties(Wt.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.sn},set:function(t){this.sn!==t&&(this.sn=t)}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t,t||(this.xn=!0)}},isViewportSized:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t)&&this.C()}},isRouting:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t)}},isRealtime:{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t)}},isValidLayout:{get:function(){return this.xn},set:function(t){this.xn!==t&&(this.xn=t,t||(t=this.diagram,t!==null&&(t.xh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.Em},set:function(t){this.Em!==t&&(this.Em=t,this.C())}},arrangementOrigin:{get:function(){return this.Am},set:function(t){this.Am.D(t)||(this.Am.assign(t),this.C())}}}),Wt.prototype.collectParts=Wt.prototype.gx,Wt.prototype.getLayoutBounds=Wt.prototype.ni,Wt.prototype.invalidateLayout=Wt.prototype.C,Wt.className="Layout";function _t(t){Le(this),this.Rc=t,this.wf=new q,this.ye=new q,this.Es=new mt,this.zs=new mt}_t.prototype.clear=function(){if(this.wf)for(var t=this.wf.iterator;t.next();)t.value.clear();if(this.ye)for(t=this.ye.iterator;t.next();)t.value.clear();this.wf=new q,this.ye=new q,this.Es=new mt,this.zs=new mt},_t.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.wf.count+" edges: "+this.ye.count,1<t){for(var i=this.wf.iterator;i.next();)e+=`
    `+i.value.toString(t-1);for(i=this.ye.iterator;i.next();)e+=`
    `+i.value.toString(t-1)}return e},_t.prototype.createVertex=function(){return new me(this)},_t.prototype.createEdge=function(){return new $i(this)},_t.prototype.lg=function(t,e,i){if(t!==null){for(e===void 0&&(e=!1),i===void 0&&(i=null),i===null&&(i=function(l){if(l instanceof b)return!l.isLinkLabel;if(l instanceof K){var h=l.fromNode;return h===null||h.isLinkLabel?!1:(l=l.toNode,!(l===null||l.isLinkLabel))}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof b&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)){if(n instanceof gt&&n.layout===null)this.lg(n.memberParts,!1);else if(this.ki(n)===null){var r=this.createVertex();r.node=n,this.dh(r)}}}for(t.reset();t.next();)if(n=t.value,n instanceof K&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&this.Lo(n)===null){var o=n.fromNode;r=n.toNode,o!==null&&r!==null&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),o!==null&&r!==null&&this.Zj(o,r,n))}}},_t.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.ki(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.ki(e),t!==null)return t;e=e.containingGroup}return null},s=_t.prototype,s.dh=function(t){if(t!==null){this.wf.add(t);var e=t.node;e!==null&&this.Es.add(e,t),t.network=this}},s.Bl=function(t){if(t===null)return null;var e=this.ki(t);return e===null&&(e=this.createVertex(),e.node=t,this.dh(e)),e},s.Iu=function(t){if(t!==null&&Ck(this,t)){for(var e=t.tg,i=e.count-1;0<=i;i--){var n=e.M(i);this.Mj(n)}for(e=t.mg,t=e.count-1;0<=t;t--)i=e.M(t),this.Mj(i)}};function Ck(t,e){if(e===null)return!1;var i=t.wf.remove(e);return i&&(e=e.node,e!==null&&t.Es.remove(e)),i}s.az=function(t){t!==null&&(t=this.ki(t),t!==null&&this.Iu(t))},s.ki=function(t){return t===null?null:this.Es.I(t)},s.Bo=function(t){if(t!==null){Uv(this,t);var e=t.toVertex;e!==null&&e.Cl(t),e=t.fromVertex,e!==null&&e.zl(t)}};function Uv(t,e){if(e!==null){t.ye.add(e);var i=e.link;i!==null&&t.Lo(i)===null&&t.zs.add(i,e),e.network=t}}s.Gy=function(t){if(t===null)return null;var e=t.fromNode,i=t.toNode,n=this.Lo(t);return n===null?(n=this.createEdge(),n.link=t,e!==null&&(n.fromVertex=this.Bl(e)),i!==null&&(n.toVertex=this.Bl(i)),this.Bo(n)):(e!==null?n.fromVertex=this.Bl(e):n.fromVertex=null,i!==null?n.toVertex=this.Bl(i):n.toVertex=null),n},s.Mj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.Kl(t),e=t.fromVertex,e!==null&&e.Jl(t),Gv(this,t)}};function Gv(t,e){e!==null&&t.ye.remove(e)&&(e=e.link,e!==null&&t.zs.remove(e))}s.$y=function(t){t!==null&&(t=this.Lo(t),t!==null&&this.Mj(t))},s.Lo=function(t){return t===null?null:this.zs.I(t)},s.Zj=function(t,e,i){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Bo(n),n}return null},s.gm=function(t){if(t!==null){var e=t.fromVertex,i=t.toVertex;e!==null&&i!==null&&(e.Jl(t),i.Kl(t),t.gm(),e.Cl(t),i.zl(t))}},s.Ko=function(){for(var t=Vt(),e=this.ye.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Mj(t[i]);zt(t)},_t.prototype.deleteArtificialVertexes=function(){for(var t=Vt(),e=this.wf.iterator;e.next();){var i=e.value;i.node===null&&i.data===null&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Iu(t[e]);for(e=Vt(),i=this.ye.iterator;i.next();){var n=i.value;n.link===null&&n.data===null&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Mj(e[n]);zt(t),zt(e)};function Tj(t){for(var e=Vt(),i=t.ye.iterator;i.next();){var n=i.value;n.fromVertex!==null&&n.toVertex!==null||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Mj(e[n]);zt(e)}_t.prototype.by=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),Tj(this),this.Ko()),t=new tt;for(var e=!0;e;){e=!1;for(var i=this.wf.iterator;i.next();){var n=i.value;if(0<n.tg.count||0<n.mg.count){e=this.layout.createNetwork(),t.add(e),Xv(this,e,n),e=!0;break}}}return t.sort(function(r,o){return r===null||o===null||r===o?0:o.vertexes.count-r.vertexes.count}),t};function Xv(t,e,i){if(i!==null&&i.network!==e){Ck(t,i),e.dh(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(Gv(t,r),Uv(e,r),Xv(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)i=n.value,i.network!==e&&(Gv(t,i),Uv(e,i),Xv(t,e,i.toVertex))}}_t.prototype.fz=function(){for(var t=new q,e=this.wf.iterator;e.next();)t.add(e.value.node);for(e=this.ye.iterator;e.next();)t.add(e.value.link);return t},B.Object.defineProperties(_t.prototype,{layout:{get:function(){return this.Rc},set:function(t){t!==null&&(this.Rc=t)}},vertexes:{get:function(){return this.wf}},edges:{get:function(){return this.ye}}}),_t.prototype.findAllParts=_t.prototype.fz,_t.prototype.splitIntoSubNetworks=_t.prototype.by,_t.prototype.deleteSelfEdges=_t.prototype.Ko,_t.prototype.reverseEdge=_t.prototype.gm,_t.prototype.linkVertexes=_t.prototype.Zj,_t.prototype.findEdge=_t.prototype.Lo,_t.prototype.deleteLink=_t.prototype.$y,_t.prototype.deleteEdge=_t.prototype.Mj,_t.prototype.addLink=_t.prototype.Gy,_t.prototype.addEdge=_t.prototype.Bo,_t.prototype.findVertex=_t.prototype.ki,_t.prototype.deleteNode=_t.prototype.az,_t.prototype.deleteVertex=_t.prototype.Iu,_t.prototype.addNode=_t.prototype.Bl,_t.prototype.addVertex=_t.prototype.dh,_t.prototype.addParts=_t.prototype.lg,_t.className="LayoutNetwork";function me(t){Le(this),this.ob=t,this.j=new z(0,0,10,10).freeze(),this.m=new N(5,5).freeze(),this.Sh=this.ub=null,this.tg=new tt,this.mg=new tt}me.prototype.clear=function(){this.Sh=this.ub=null,this.tg=new tt,this.mg=new tt},me.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Oi(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.tg.iterator;n.next();){var r=n.value;i?i=!1:t+=",",t+=r.toString(0)}for(r="",i=!0,n=this.mg.iterator;n.next();){var o=n.value;i?i=!1:r+=",",r+=o.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},me.prototype.commit=function(){var t=this.ub;if(t!==null){var e=this.bounds,i=t.bounds;yt(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof gt)){i=z.alloc(),t.Va();var n=this.network.layout.ni(t,i),r=t.locationObject.ga(Rt);if(n.w()&&r.w()){t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),z.free(i);return}z.free(i)}t.moveTo(e.x,e.y)}},me.prototype.Cl=function(t){t!==null&&(this.tg.contains(t)||this.tg.add(t))},me.prototype.Kl=function(t){t!==null&&this.tg.remove(t)},me.prototype.zl=function(t){t!==null&&(this.mg.contains(t)||this.mg.add(t))},me.prototype.Jl=function(t){t!==null&&this.mg.remove(t)};function _v(t,e){return t=t.Sh,e=e.Sh,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}B.Object.defineProperties(me.prototype,{sourceEdgesArrayAccess:{get:function(){return this.tg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.mg._dataArray}},data:{get:function(){return this.ub},set:function(t){if(this.ub=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.m.h(n/2,e/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.Sh},set:function(t){if(this.Sh!==t){this.Sh=t,t.Va();var e=this.network.layout,i=z.alloc(),n=e.ni(t,i);e=n.x;var r=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,o,n),z.free(i),!(t instanceof gt)&&(t=t.locationObject.ga(Rt),t.w())){this.m.h(t.x-e,t.y-r);return}this.m.h(o/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.D(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.D(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ka(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ka(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ka(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ka(),e.height=t,e.freeze())}},network:{get:function(){return this.ob},set:function(t){this.ob=t}},sourceVertexes:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new q,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.tg.iterator}},destinationEdges:{get:function(){return this.mg.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.tg.count+this.mg.count}}}),me.prototype.deleteDestinationEdge=me.prototype.Jl,me.prototype.addDestinationEdge=me.prototype.zl,me.prototype.deleteSourceEdge=me.prototype.Kl,me.prototype.addSourceEdge=me.prototype.Cl,me.className="LayoutVertex",me.standardComparer=_v,me.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Sh;var i=e.Sh;if(t!==null){if(i!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(t[i]!==""&&t[i]!==void 0){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n))if(isNaN(r)){if(e[i].localeCompare(t[i])!==0)return e[i].localeCompare(t[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(e[i]!=="")return 1;return t[i]!==""&&t[i]!==void 0?-1:0}return 1}return i!==null?-1:0}return 1}return e!==null?-1:0};function $i(t){Le(this),this.nb=t,this.pd=this.jd=this.$k=this.ub=null}$i.prototype.clear=function(){this.pd=this.jd=this.$k=this.ub=null},$i.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Oi(this);return 0<t&&(e+=this.$k!==null?"("+this.$k.toString()+")":"",1<t&&(e+=" "+(this.jd?this.jd.toString():"null")+" --> "+(this.pd?this.pd.toString():"null"))),e},$i.prototype.gm=function(){var t=this.jd;this.jd=this.pd,this.pd=t},$i.prototype.commit=function(){},$i.prototype.Bx=function(t){return this.pd===t?this.jd:this.jd===t?this.pd:null},B.Object.defineProperties($i.prototype,{network:{get:function(){return this.nb},set:function(t){this.nb=t}},data:{get:function(){return this.ub},set:function(t){this.ub!==t&&(this.ub=t)}},link:{get:function(){return this.$k},set:function(t){this.$k!==t&&(this.$k=t)}},fromVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},toVertex:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this.pd=t)}}}),$i.prototype.getOtherVertex=$i.prototype.Bx,$i.className="LayoutEdge";function Ae(t){Wt.call(this),this.isViewportSized=!0,this.yo=this.zo=NaN,this.yg=new ct(NaN,NaN).freeze(),this.tf=new ct(10,10).freeze(),this.Jb=Xf,this.Qb=zd,this.md=_f,this.gd=Tk,t&&Object.assign(this,t)}V(Ae,Wt),Ae.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.zo=this.zo,t.yo=this.yo,t.yg.assign(this.yg),t.tf.assign(this.tf),t.Jb=this.Jb,t.Qb=this.Qb,t.md=this.md,t.gd=this.gd},Ae.prototype.qb=function(t){t.classType===Ae?t===_f||t===Yd||t===Hv||t===Vd?this.sorting=t:t===zd||t===pr?this.arrangement=t:t===Xf||t===Bd?this.alignment=t:I("Unknown enum value: "+t):Wt.prototype.qb.call(this,t)},Ae.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.gx(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.ph()||n.fromNode===null&&n.toNode===null){if(n.Va(),n instanceof gt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.Fa();if(r.length!==0){switch(this.sorting){case Vd:r.reverse();break;case _f:r.sort(this.comparer);break;case Yd:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var l=this.wrappingWidth;switch(isNaN(l)&&t!==null?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=o&&0>=l&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),t!==null&&t.Ea("Layout"),n=[],this.alignment){case Bd:var h=e,a=i,f=z.alloc(),p=Math.max(this.cellSize.width,1);if(!isFinite(p))for(var d=p=0;d<r.length;d++){var y=this.ni(r[d],f);p=Math.max(p,y.width)}if(p=Math.max(p+h,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(y=d=0;y<r.length;y++){var m=this.ni(r[y],f);d=Math.max(d,m.height)}d=Math.max(d+a,1),y=this.arrangement;for(var x=m=this.arrangementOrigin.x,M=this.arrangementOrigin.y,k=0,S=0,C=0;C<r.length;C++){var T=r[C],L=this.ni(T,f),j=Math.ceil((L.width+h)/p)*p,A=Math.ceil((L.height+a)/d)*d;switch(y){case pr:var Z=Math.abs(x-L.width);break;default:Z=x+L.width}switch((0<o&&k>o-1||0<l&&0<k&&Z-m>l)&&(n.push(new z(0,M,l+h,S)),k=0,x=m,M+=S,S=0),S=Math.max(S,A),y){case pr:L=-L.width;break;default:L=0}switch(T.moveTo(x+L,M),y){case pr:x-=j;break;default:x+=j}k++}n.push(new z(0,M,l+h,S)),z.free(f);break;case Xf:for(a=l,p=o,d=e,y=i,l=z.alloc(),m=Math.max(this.cellSize.width,1),o=M=f=0,h=N.alloc(),x=0;x<r.length;x++)S=r[x],k=this.ni(S,l),S=is(S,S.locationObject,S.locationSpot,h),f=Math.max(f,S.x),M=Math.max(M,k.width-S.x),o=Math.max(o,S.y);switch(x=this.arrangement,x){case pr:f+=d;break;default:M+=d}m=isFinite(m)?Math.max(m+d,1):Math.max(f+M,1);var it=S=this.arrangementOrigin.x;for(C=this.arrangementOrigin.y,M=0,a>=f&&(a-=f),f=T=0,j=Math.max(this.cellSize.height,1),L=o=0,A=!0,k=N.alloc(),Z=0;Z<r.length;Z++){var et=r[Z],H=this.ni(et,l),Y=is(et,et.locationObject,et.locationSpot,h);if(0<M)switch(x){case pr:it=(it-S-(H.width-Y.x))/m,it=O.$(Math.round(it),it)?Math.round(it):Math.floor(it),it=it*m+S;break;default:it=(it-S+Y.x)/m,it=O.$(Math.round(it),it)?Math.round(it):Math.ceil(it),it=it*m+S}else switch(x){case pr:T=it+Y.x+H.width;break;default:T=it-Y.x}switch(x){case pr:var dt=-(it+Y.x)+T;break;default:dt=it+H.width-Y.x-T}if(0<p&&M>p-1||0<a&&0<M&&dt>a){for(n.push(new z(0,A?C-o:C,a+d,L+o+y)),it=0;it<M&&Z!==M;it++){dt=r[Z-M+it];var ft=is(dt,dt.locationObject,dt.locationSpot,k);dt.moveTo(dt.position.x,dt.position.y+o-ft.y)}L+=y,C=A?C+L:C+(L+o),M=L=o=0,it=S,A=!1}switch(it===S&&(f=x===pr?Math.max(f,H.width-Y.x):Math.min(f,-Y.x)),o=Math.max(o,Y.y),L=Math.max(L,H.height-Y.y),isFinite(j)&&(L=Math.max(L,Math.max(H.height,j)-Y.y)),A?et.moveTo(it-Y.x,C-Y.y):et.moveTo(it-Y.x,C),x){case pr:it-=Y.x+d;break;default:it+=H.width-Y.x+d}M++}if(n.push(new z(0,C,a+d,(A?L:L+o)+y)),r.length!==M)for(a=0;a<M;a++)p=r[r.length-M+a],d=is(p,p.locationObject,p.locationSpot,h),p.moveTo(p.position.x,p.position.y+o-d.y);if(N.free(h),N.free(k),x===pr)for(r=0;r<n.length;r++)o=n[r],o.width+=f,o.x-=f;else for(r=0;r<n.length;r++)o=n[r],o.x>f&&(o.width+=o.x-f,o.x=f);z.free(l)}for(h=o=l=r=0;h<n.length;h++)a=n[h],r=Math.min(r,a.x),l=Math.min(l,a.y),o=Math.max(o,a.x+a.width);this.arrangement===pr?this.commitLayers(n,new N(r+e/2-(o+r),l-i/2)):this.commitLayers(n,new N(r-e/2,l-i/2)),t!==null&&t.eb("Layout"),this.isValidLayout=!0}},Ae.prototype.commitLayers=function(){};function Tk(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}B.Object.defineProperties(Ae.prototype,{wrappingWidth:{get:function(){return this.zo},set:function(t){this.zo!==t&&(0<t||isNaN(t))&&(this.zo=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.yo},set:function(t){this.yo!==t&&(0<t||isNaN(t))&&(this.yo=t,this.C())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||(this.yg.assign(t),this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf.D(t)||(this.tf.assign(t),this.C())}},alignment:{get:function(){return this.Jb},set:function(t){this.Jb===t||t!==Xf&&t!==Bd||(this.Jb=t,this.C())}},arrangement:{get:function(){return this.Qb},set:function(t){this.Qb===t||t!==zd&&t!==pr||(this.Qb=t,this.C())}},sorting:{get:function(){return this.md},set:function(t){this.md===t||t!==Hv&&t!==Vd&&t!==_f&&t!==Yd||(this.md=t,this.C())}},comparer:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t,this.C())}}});var Bd=new Q(Ae,"Position",0),Xf=new Q(Ae,"Location",1),zd=new Q(Ae,"LeftToRight",2),pr=new Q(Ae,"RightToLeft",3),Hv=new Q(Ae,"Forward",4),Vd=new Q(Ae,"Reverse",5),_f=new Q(Ae,"Ascending",6),Yd=new Q(Ae,"Descending",7);Ae.className="GridLayout",Ae.standardComparer=Tk,Ae.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(e[i]!==""&&e[i]!==void 0){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n))if(isNaN(r)){if(t[i].localeCompare(e[i])!==0)return t[i].localeCompare(e[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(t[i]!=="")return 1;return e[i]!==""&&e[i]!==void 0?-1:0}return 1}return e!==null?-1:0},Ae.Position=Bd,Ae.Location=Xf,Ae.LeftToRight=zd,Ae.RightToLeft=pr,Ae.Forward=Hv,Ae.Reverse=Vd,Ae.Ascending=_f,Ae.Descending=Yd;function Dt(){this.On=new q,this.Dn=new q,this.Pa=new q,this.cf=new mt,this.bf=new mt,this.aj=new mt,this.H=null,this.tp=!1}s=Dt.prototype,s.clear=function(){this.On.clear(),this.Dn.clear(),this.Pa.clear(),this.cf.clear(),this.bf.clear(),this.aj.clear()},s.Xe=function(t){this.H=t},s.oi=function(t){if(t instanceof b){if(this.On.add(t),t instanceof gt){var e=t.containingGroup;e===null?this.H.ai.add(t):e.gl.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof K?this.Dn.add(t):t instanceof Ct||this.Pa.add(t);e=t.data,e===null||t instanceof Ct||(t instanceof K?this.bf.add(e,t):this.cf.add(e,t))},s.oc=function(t){if(t.Ej(),t instanceof b){if(this.On.remove(t),t instanceof gt){var e=t.containingGroup;e===null?this.H.ai.remove(t):e.gl.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof K?this.Dn.remove(t):t instanceof Ct||this.Pa.remove(t);e=t.data,e===null||t instanceof Ct||(t instanceof K?this.bf.remove(e):this.cf.remove(e))},s.Wd=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var i=e.value,n=e.key;(!i.Yc()||i instanceof gt)&&I('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(e=t.groupTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof gt||I('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(e=t.linkTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof K||I('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(e=Vt(),i=t.selection.iterator;i.next();)(n=i.value.data)&&e.push(n);for(i=Vt(),t=t.highlighteds.iterator;t.next();)(n=t.value.data)&&i.push(n);for(t=Vt(),n=this.nodes.iterator;n.next();){var r=n.value;r.data!==null&&(t.push(r.data),t.push(r.location))}for(n=this.links.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(n=this.parts.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<e.length;n++)r=this.Kc(e[n]),r!==null&&(r.isSelected=!0);for(n=0;n<i.length;n++)r=this.Kc(i[n]),r!==null&&(r.isHighlighted=!0);for(n=0;n<t.length;n+=2)r=this.Kc(t[n]),r!==null&&(r.location=t[n+1]);zt(e),zt(i),zt(t)}},Dt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Dt.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(r){n.lb(r)&&Lk(i,r,!1)}),t.forEach(function(r){n.lb(r)&&i.resolveReferencesForData(r)}),e!==!1&&Ip(this.diagram,!1)};function Lk(t,e,i){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.cf.contains(e)){i===void 0&&(i=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.cf.contains(e)){var n=t.Ro(e),r=jk(t,e,n);if(r!==null&&(En(r),r=r.copy(),r!==null)){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Tf=n,r.ub=e,t.tp&&(r.Jg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=o,n=r;break t}}n=null}n!==null&&i&&t.resolveReferencesForData(e)}}Dt.prototype.insertLink=function(){return null},Dt.prototype.resolveReferencesForData=function(){},Dt.prototype.Ro=function(t){return this.H.model.Ro(t)};function jk(t,e,i){t=t.H;var n=t.model;return n.Xj()&&n.Yu(e)?(e=t.groupTemplateMap.I(i),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(Ek||(Ek=!0,kt('No Group template found for category "'+i+'"'),kt("  Using default group template")),e=t.oy))):(e=t.nodeTemplateMap.I(i),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(Fk||(Fk=!0,kt('No Node template found for category "'+i+'"'),kt("  Using default node template")),e=t.qy))),e}Dt.prototype.getLinkCategoryForData=function(){return""},Dt.prototype.setLinkCategoryForData=function(){},Dt.prototype.setFromNodeForLink=function(){},Dt.prototype.setToNodeForLink=function(){},Dt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,i=e.linkTemplateMap.I(t);return i===null&&(i=e.linkTemplateMap.I(""),i===null&&(Ak||(Ak=!0,kt('No Link template found for category "'+t+'"'),kt("  Using default link template")),i=e.py)),i},Dt.prototype.removeAllModeledParts=function(){this.Gs(this.diagram.model.nodeDataArray)},Dt.prototype.Gs=function(t){var e=this;t.forEach(function(i){e.ip(i)})},Dt.prototype.ip=function(t){t=this.Kc(t),t!==null&&(xm(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Dt.prototype.unresolveReferencesForPart=function(){},Dt.prototype.removeDataForLink=function(){},Dt.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.gc(t),t!==null?this.cf.I(t):null)},Dt.prototype.Ub=function(t){return t==null||(t=this.H.model.gc(t),t===null)?null:(t=this.cf.I(t),t instanceof b?t:null)},Dt.prototype.findLinkForKey=function(){return null},s=Dt.prototype,s.Kc=function(t){if(t===null)return null;var e=this.cf.I(t);return e!==null?e:e=this.bf.I(t)},s.ii=function(t){return t===null?null:(t=this.cf.I(t),t instanceof b?t:null)},s.Jc=function(t){return t===null?null:this.bf.I(t)},s.ms=function(t){for(var e=0;e<arguments.length;++e);e=new q;for(var i=this.On.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(yt(l)&&Kv(this,r,l)){e.add(n);break}}}return e.iterator},s.ls=function(t){for(var e=0;e<arguments.length;++e);e=new q;for(var i=this.Dn.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(yt(l)&&Kv(this,r,l)){e.add(n);break}}}return e.iterator};function Kv(t,e,i){for(var n in i){var r=e[n],o=i[n];if(Bt(o)){if(!Bt(r)||r.length<o.length)return!1;for(var l=0;l<r.length;l++){var h=o[l];if(h!==void 0&&!Ok(t,r[l],h))return!1}}else if(!Ok(t,r,o))return!1}return!0}function Ok(t,e,i){if(typeof i=="function"){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(yt(e)&&yt(i)){if(!Kv(t,e,i))return!1}else if(e!==i)return!1;return!0}Dt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.aa){e.aa=!1;try{var n=t.modelChange;if(n!=="")if(i===Jt){if(n==="nodeCategory"){var r=this.Kc(t.object),o=t.newValue;r!==null&&typeof o=="string"&&(r.category=o)}else n==="nodeDataArray"&&(this.Gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===Me){var l=t.newValue;n==="nodeDataArray"&&yt(l)&&Lk(this,l),e.isModified=!0}else if(i===Ne){var h=t.oldValue;n==="nodeDataArray"&&yt(h)&&this.ip(h),e.isModified=!0}else i===hr&&(n==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.rp(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.Wd());else if(i===Jt){var a=t.propertyName,f=t.object;f===e.model?(a==="nodeKeyProperty"||a==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Wd()):this.updateDataBindings(f,a),e.isModified=!0}else if(i===Me||i===Ne){var p=t.change===Me,d=p?t.newParam:t.oldParam,y=p?t.newValue:t.oldValue,m=this.aj.I(t.object);if(Array.isArray(m))for(t=0;t<m.length;t++){var x=m[t];if(p)od(x,y,d,!0);else if(!(0>d)){var M=d+Nf(x);x.oc(M,!0),sv(x,M,d)}}e.isModified=!0}}finally{e.aa=!0}}}}},Dt.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ma(t);for(e=this.nodes.iterator;e.next();)e.value.Ma(t);for(e=this.links.iterator;e.next();)e.value.Ma(t)},Dt.prototype.rp=function(){for(var t=this.H.model,e=new q,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),this.parts.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),r.forEach(function(l){Gk(t,l,!1)}),n=0;n<i.length;n++){var o=i[n];this.Kc(o)===null&&Uk(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Dt.prototype.refreshDataBoundLinks=function(){},Dt.prototype.updateRelationshipsFromData=function(){},Dt.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var i=this.Kc(t);if(i!==null)i.Ma(e);else{i=null;for(var n=this.aj.iterator;n.next();){for(var r=n.value,o=0;o<r.length;o++){var l=r[o].tx(t);l!==null&&(i===null&&(i=Vt()),i.push(l))}if(i!==null)break}if(i!==null){for(n=0;n<i.length;n++)i[n].Ma(e);zt(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function Wv(t,e){var i=e.Hh;if(Bt(i)){var n=t.aj.I(i);if(n===null)n=[],n.push(e),t.aj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function $v(t,e,i){wl(e,function(l){l=l.O.s;for(var h=l.length,a=0;a<h;a++)Nm(i,l[a])});var n=e.Hh;if(Bt(n)){var r=t.aj.I(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&t.aj.remove(n);break}}}}Dt.prototype.Kj=function(t,e,i){i===void 0&&(i=!1);var n=new mt;if(Bt(t))for(var r=0;r<t.length;r++)Ud(this,t[r],e,n,i);else for(t=t.iterator;t.next();)Ud(this,t.value,e,n,i);if(e!==null){i=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.Wm.dragsLink,r=new q;for(var o=new mt,l=n.iterator;l.next();){var h=l.value;if(h instanceof K)t||h.fromNode!==null&&h.toNode!==null||r.add(h);else if(h instanceof b&&h.data!==null&&i.Tl()){var a=h;h=l.key;var f=h.pg();f!==null&&(f=n.I(f),f!==null?(i.qe(a.data,i.wa(f.data)),a=e.Jc(a.data),h=h.kh(),h!==null&&a!==null&&o.add(h,a)):i.qe(a.data,void 0))}}if(0<r.count&&e.Is(r,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(e!==null&&this.H!==null&&(e=e.model,i=e.afterCopyFunction,i!==null)){var p=new mt;n.each(function(d){d.key.data!==null&&p.add(d.key.data,d.value.data)}),i(p,e,this.H.model)}for(e=n.iterator;e.next();)e.value.Ma();return n};function Ud(t,e,i,n,r){if(e===null||r&&!e.canCopy())return null;if(n.contains(e))return n.I(e);var o=t.copyPartData(e,i);if(!(o instanceof lt))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof b){for(var l=e.linksConnected;l.next();){var h=l.value;if(h.fromNode===e){var a=n.I(h);a!==null&&(a.fromNode=o)}h.toNode===e&&(h=n.I(h),h!==null&&(h.toNode=o))}if(e instanceof gt&&o instanceof gt)for(e=e.memberParts;e.next();)l=Ud(t,e.value,i,n,r),l instanceof K||l===null||(l.containingGroup=o)}else if(e instanceof K&&o instanceof K)for(l=e.fromNode,l!==null&&(l=n.I(l),l!==null&&(o.fromNode=l)),l=e.toNode,l!==null&&(l=n.I(l),l!==null&&(o.toNode=l)),e=e.labelNodes;e.next();)l=Ud(t,e.value,i,n,r),l!==null&&l instanceof b&&(l.labeledLink=o);return o}Dt.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(n!==null&&e!==null){var r=e.model;t instanceof K||(n=r.copyNodeData(n),yt(n)&&(r.xf(n),i=e.Kc(n)))}else En(t),i=t.copy(),i!==null&&(r=this.H,e!==null?e.add(i):n!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof K||(r=e.copyNodeData(n)),yt(r)&&(i.data=r)));return i},B.Object.defineProperties(Dt.prototype,{nodes:{get:function(){return this.On}},links:{get:function(){return this.Dn}},parts:{get:function(){return this.Pa}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.tp},set:function(t){this.tp=t}}}),Dt.prototype.updateAllRelationshipsFromData=Dt.prototype.rp,Dt.prototype.findLinksByExample=Dt.prototype.ls,Dt.prototype.findNodesByExample=Dt.prototype.ms,Dt.prototype.findLinkForData=Dt.prototype.Jc,Dt.prototype.findNodeForData=Dt.prototype.ii,Dt.prototype.findPartForData=Dt.prototype.Kc,Dt.prototype.findNodeForKey=Dt.prototype.Ub,Dt.prototype.removeModeledPart=Dt.prototype.ip,Dt.prototype.removeModeledParts=Dt.prototype.Gs,Dt.prototype.rebuildParts=Dt.prototype.Wd;var Fk=!1,Ek=!1,Ak=!1;Dt.className="PartManager";function Ce(t){Dt.apply(this,arguments)}V(Ce,Dt),Ce.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),Dk(this,t.linkDataArray)},Ce.prototype.addModeledParts=function(t){for(Dt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)_h(t.value);Ip(this.diagram,!1)};function Dk(t,e){e.forEach(function(i){Ik(t,i)}),Ip(t.diagram,!1)}function Ik(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.bf.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(n!==null){En(n);var r=n.copy();if(r!==null){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Tf=i,r.ub=e,i=t.diagram.model;var o=Hd(i,e,!0);o!==""&&(r.fromPortId=o),o=sn(i,e,!0),o!==void 0&&(o=t.Ub(o),o instanceof b&&(r.fromNode=o)),o=Hd(i,e,!1),o!==""&&(r.toPortId=o),o=sn(i,e,!1),o!==void 0&&(o=t.Ub(o),o instanceof b&&(r.toNode=o)),i=i.Ef(e),Array.isArray(i)&&i.forEach(function(l){l=t.Ub(l),l!==null&&(l.labeledLink=r)}),t.tp&&(r.Jg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}Ce.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Rk(this,t.linkDataArray),this.Gs(t.nodeDataArray)};function Rk(t,e){e.forEach(function(i){t.ip(i)})}Ce.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ps(t)},Ce.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.lp(t,e)},Ce.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.wv(t.data,i.wa(e!==null?e.data:null))},Ce.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Bv(t.data,i.wa(e!==null?e.data:null))},Ce.prototype.removeDataForLink=function(t){this.diagram.model.bm(t.data)},Ce.prototype.findPartForKey=function(t){var e=Dt.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.jh(t),t!==null)?this.bf.I(t):e},Ce.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.jh(t),t!==null?this.bf.I(t):null)},Ce.prototype.doModelChanged=function(t){var e=this;if(Dt.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.aa){i.aa=!1;try{var r=t.modelChange;if(r!==""){if(n===Jt){if(r==="linkFromKey"){var o=this.Jc(t.object);if(o!==null){var l=this.Ub(t.newValue);o.fromNode=l}}else if(r==="linkToKey"){var h=this.Jc(t.object);if(h!==null){var a=this.Ub(t.newValue);h.toNode=a}}else if(r==="linkFromPortId"){var f=this.Jc(t.object);if(f!==null){var p=t.newValue;typeof p=="string"&&(f.fromPortId=p)}}else if(r==="linkToPortId"){var d=this.Jc(t.object);if(d!==null){var y=t.newValue;typeof y=="string"&&(d.toPortId=y)}}else if(r==="nodeGroupKey"){var m=this.Kc(t.object);if(m!==null){var x=t.newValue;if(x!==void 0){var M=this.Ub(x);M instanceof gt?m.containingGroup=M:m.containingGroup=null}else m.containingGroup=null}}else if(r==="linkLabelKeys"){var k=this.Jc(t.object);if(k!==null){var S=t.oldValue,C=t.newValue;Array.isArray(S)&&S.forEach(function(Y){0<=C.indexOf(Y)||(Y=e.Ub(Y),Y!==null&&(Y.labeledLink=null))}),Array.isArray(C)&&C.forEach(function(Y){Y=e.Ub(Y),Y!==null&&(Y.labeledLink=k)})}}else if(r==="linkCategory"){var T=this.Jc(t.object),L=t.newValue;T!==null&&typeof L=="string"&&(T.category=L)}else r==="linkDataArray"&&(Rk(this,t.oldValue),Dk(this,t.newValue));i.isModified=!0}else if(n===Me){var j=t.newValue;if(r==="linkDataArray"&&typeof j=="object"&&j!==null)Ik(this,j);else if(r==="linkLabelKeys"&&Rs(j)){var A=this.Jc(t.object),Z=this.Ub(j);A!==null&&Z!==null&&(Z.labeledLink=A)}i.isModified=!0}else if(n===Ne){var it=t.oldValue;if(r==="linkDataArray"&&typeof it=="object"&&it!==null)this.ip(it);else if(r==="linkLabelKeys"&&Rs(it)){var et=this.Ub(it);et!==null&&(et.labeledLink=null)}i.isModified=!0}}else if(n===Jt){var H=t.propertyName;t.object!==i.model||H!=="linkFromKeyProperty"&&H!=="linkToKeyProperty"&&H!=="linkFromPortIdProperty"&&H!=="linkToPortIdProperty"&&H!=="linkLabelKeysProperty"&&H!=="nodeIsGroupProperty"&&H!=="nodeGroupKeyProperty"&&H!=="linkCategoryProperty"||i.undoManager.isUndoingRedoing||this.Wd(),i.isModified=!0}}finally{i.aa=!0}}}}},Ce.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new q,n=e.linkDataArray;n.forEach(function(o){i.add(o)});var r=[];this.links.each(function(o){o.data===null||i.contains(o.data)||r.push(o.data)}),r.forEach(function(o){$k(e,o,!1)}),n.forEach(function(o){t.Jc(o)===null&&Wk(e,o,!1)})},Ce.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;if(t instanceof K){var r=sn(n,e,!0);if(r=i.Ub(r),t.fromNode=r,r=sn(n,e,!1),r=i.Ub(r),t.toNode=r,e=n.Ef(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var o=t.labelNodes.first();if(n.wa(o.data)===r)return}r=new q().addAll(e);var l=new q;t.labelNodes.each(function(h){h.data!==null&&(h=n.wa(h.data),h!==void 0&&l.add(h))}),e=l.copy(),e.hp(r),r=r.copy(),r.hp(l),(0<e.count||0<r.count)&&(e.each(function(h){h=i.Ub(h),h!==null&&h.labeledLink===t&&(h.labeledLink=null)}),r.each(function(h){h=i.Ub(h),h!==null&&h.labeledLink!==t&&(h.labeledLink=t)}))}}else!(t instanceof Ct)&&(e=n.lh(e),e=i.findPartForKey(e),e===null||e instanceof gt)&&(t.containingGroup=e)}}},Ce.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(i!==void 0){var n=Hf(e,i),r=this.Kc(t);if(n!==null&&r!==null){n=n.iterator;for(var o={};n.next();){var l=n.value;e.lb(l)?r instanceof gt&&e.lh(l)===i&&(l=this.Kc(l),l!==null&&(l.containingGroup=r)):(o.link=this.Jc(l),o.link!==null&&r instanceof b&&(sn(e,l,!0)===i&&(o.link.fromNode=r),sn(e,l,!1)===i&&(o.link.toNode=r),l=e.Ef(l),Array.isArray(l)&&l.some(function(h){return function(a){return a===i?(r.labeledLink=h.link,!0):!1}}(o)))),o={link:o.link}}gr(e,i)}t=e.lh(t),t!==void 0&&(t=this.Ub(t),t instanceof gt&&(r.containingGroup=t))}},Ce.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof b){var i=e.wa(t.data);if(i!==void 0){for(var n=t.linksConnected;n.next();)dr(e,i,n.value.data);if(t.isLinkLabel&&(n=t.labeledLink,n!==null&&dr(e,i,n.data)),t instanceof gt)for(t=t.memberParts;t.next();)n=t.value.data,e.lb(n)&&dr(e,i,n)}}},Ce.prototype.copyPartData=function(t,e){var i=Dt.prototype.copyPartData.call(this,t,e);if(t instanceof K)if(t=t.data,t!==null&&e!==null){var n=e.model;t=n.Jo(t),typeof t=="object"&&t!==null&&(n.fi(t),i=e.Jc(t))}else i!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.Jo(t),typeof e=="object"&&e!==null&&(i.data=e)));return i},Ce.prototype.insertLink=function(t,e,i,n){var r=this.diagram,o=r.model,l=r.toolManager.findTool("Linking"),h="";if(t!==null&&(e===null&&(e=t),h=e.portId,h===null&&(h="")),e="",i!==null&&(n===null&&(n=i),e=n.portId,e===null&&(e="")),n=l.archetypeLinkData,n instanceof K){if(En(n),o=n.copy(),o!==null)return o.fromNode=t,o.fromPortId=h,o.toNode=i,o.toPortId=e,r.add(o),t=l.archetypeLabelNodeData,t instanceof b&&(En(t),t=t.copy(),t!==null&&(t.labeledLink=o,r.add(t))),o}else if(n!==null&&(n=o.Jo(n),typeof n=="object"&&n!==null))return t!==null&&Zh(o,n,o.wa(t.data),!0),Qh(o,n,h,!0),i!==null&&Zh(o,n,o.wa(i.data),!1),Qh(o,n,e,!1),o.fi(n),t=l.archetypeLabelNodeData,t===null||t instanceof b||(t=o.copyNodeData(t),typeof t=="object"&&t!==null&&(o.xf(t),t=o.wa(t),t!==void 0&&o.Bu(n,t))),r.Jc(n);return null},Ce.prototype.findLinkForKey=Ce.prototype.findLinkForKey,Ce.prototype.findPartForKey=Ce.prototype.findPartForKey,Ce.prototype.removeAllModeledParts=Ce.prototype.removeAllModeledParts,Ce.prototype.addModeledParts=Ce.prototype.addModeledParts,Ce.prototype.addAllModeledParts=Ce.prototype.addAllModeledParts,Ce.className="GraphLinksPartManager";function wn(){Dt.apply(this,arguments),this.Sg=null}V(wn,Dt);function Gd(t,e,i){if(e!==null&&i!==null&&i.kh()===null){var n=t.diagram.toolManager.findTool("Linking"),r=e,o=i;if(t.diagram.isTreePathToChildren||(r=i,o=e),(n===null||!ef(n,r,o,null,!0))&&(e=t.getLinkCategoryForData(i.data),n=t.findLinkTemplateForCategory(e),n!==null&&(En(n),n=n.copy(),n!==null))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,n.Tf=e,n.ub=i.data,n.fromNode=r,n.toNode=o,t.diagram.add(n),n.ub=null,n.data=i.data,t.diagram.skipsModelSourceBindings=l}}}wn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ss(t)},wn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ms(t,e)},wn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)n.qe(t.data,n.wa(e));else{var r=this.Sg;this.Sg=t,i!==null&&n.qe(i.data,void 0),n.qe(e,n.wa(t.toNode!==null?t.toNode.data:null)),this.Sg=r}},wn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.Sg;this.Sg=t,i!==null&&n.qe(i.data,void 0),n.qe(e,n.wa(t.fromNode!==null?t.fromNode.data:null)),this.Sg=r}else n.qe(t.data,n.wa(e))},wn.prototype.removeDataForLink=function(t){this.diagram.model.qe(t.data,void 0)},wn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.gc(t),t!==null?this.bf.I(t):null)},wn.prototype.doModelChanged=function(t){if(Dt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.aa){e.aa=!1;try{var n=t.modelChange;if(n!==""){if(i===Jt){if(n==="nodeParentKey"){var r=t.object,o=this.Ub(t.newValue),l=this.ii(r);if(this.Sg!==null)o!==null&&(this.Sg.data=r,this.Sg.category=this.getLinkCategoryForData(r));else if(l!==null){var h=l.kh();h!==null?o===null?e.remove(h):e.isTreePathToChildren?h.fromNode=o:h.toNode=o:Gd(this,o,l)}}else if(n==="parentLinkCategory"){var a=this.ii(t.object),f=t.newValue;if(a!==null&&typeof f=="string"){var p=a.kh();p!==null&&(p.category=f)}}e.isModified=!0}}else if(i===Jt){var d=t.propertyName;t.object===e.model&&d==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Wd()),e.isModified=!0}}finally{e.aa=!0}}}}},wn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;t instanceof b&&(e=n.mh(e),e=i.Ub(e),n=t.pg(),e!==n&&(n=t.kh(),e!==null?n!==null?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:Gd(this,e,t):n!==null&&xm(i,n,!1)))}}},wn.prototype.updateDataBindings=function(t,e){Dt.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Kc(t)!==null&&(t=this.Jc(t),t!==null&&t.Ma(e))},wn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(i!==void 0){var n=Hf(e,i),r=this.Kc(t);if(n!==null&&r!==null){for(n=n.iterator;n.next();){var o=n.value;e.lb(o)&&r instanceof b&&e.mh(o)===i&&Gd(this,r,this.ii(o))}gr(e,i)}t=e.mh(t),t!==void 0&&r instanceof b&&(t=this.Ub(t),Gd(this,t,r))}},wn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof b){var i=e.wa(t.data),n=this.Jc(t.data);if(n!==null){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(r!==null){var o=r.oc(-1,n,!1);0<=o&&this.diagram.cb(Ne,"parts",r,n,null,o,null),o=n.layerChanged,o!==null&&o(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.lb(r)&&dr(e,i,r)}},wn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),n!==null&&r!==null?(e.qe(r.data,e.wa(n.data)),r.kh()):null},wn.prototype.findLinkForKey=wn.prototype.findLinkForKey,wn.className="TreePartManager";function rt(t,e){this.kl=new q,this.il=new q,this.Wv=`,
  "insertedNodeKeys": `,this.my=`,
  "modifiedNodeData": `,this.Yv=`,
  "removedNodeKeys": `,this.vh=null,Le(this),this.Sm=this.xa="",this.Gg=!1,this.j={},this.Sc=[],this.kb=new mt,this.Th="key",this.Bk=this.bl=null,this.Jm=this.Km=!1,this.Mm=!0,this.xm=null,this.lj="category",this.Vf=new mt,this.Lt=new tt,this.Wg=!1,this.m=null,this.undoManager=new ie,t!==void 0&&(Bt(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}rt.prototype.cloneProtected=function(t){t.xa=this.xa,t.Sm=this.Sm,t.Gg=this.Gg,t.Th=this.Th,t.bl=this.bl,t.Bk=this.Bk,t.Km=this.Km,t.Jm=this.Jm,t.Mm=this.Mm,t.xm=this.xm,t.lj=this.lj},rt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},rt.prototype.clear=function(){this.Sc=[],this.kb.clear(),this.Vf.clear(),this.undoManager.clear()},rt.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.np();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Xi(r)}}return e},rt.prototype.xA=function(t){t.change!==hr&&I("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof ze?(zk(this,e),t=this.Qv(e,t.propertyName==="FinishedUndo"),this.vh=null,t):null},rt.prototype.Qv=function(t,e){var i=this,n=!1,r=new q,o=new q,l=new q,h=this.vh;t.changes.each(function(d){d.model===i&&(d.modelChange==="nodeDataArray"?d.change===Me?r.add(d.newValue):d.change===Ne&&l.add(d.oldValue):i.lb(d.object)?o.add(d.object):d.change!==Jt||i.modelData!==d.object&&d.propertyName!=="modelData"?d.object!==null&&(h&&h.contains(d.object)?h.get(d.object).each(function(y){i.lb(y)&&o.add(y)}):d.object instanceof rt||i.ri()&&i.Ic(d.object)||Vk(i,d.object).each(function(y){o.add(y)})):n=!0)});var a=this.il;a.clear(),r.each(function(d){a.add(i.wa(d)),e||o.add(d)});var f=this.kl;f.clear(),l.each(function(d){f.add(i.wa(d)),e&&o.add(d)}),t=i.cloneDeep(o.Fa());var p=null;return n&&(p===null&&(p={}),p.modelData=this.cloneDeep(this.modelData)),0<a.count&&(p===null&&(p={}),e?p.removedNodeKeys=a.Fa():p.insertedNodeKeys=a.Fa()),0<t.length&&(p===null&&(p={}),p.modifiedNodeData=t),0<f.count&&(p===null&&(p={}),e?p.insertedNodeKeys=f.Fa():p.removedNodeKeys=f.Fa()),f.clear(),a.clear(),p},rt.prototype.cloneDeep=function(t){return Jh(this,t,!0)};function Jh(t,e,i,n,r,o){function l(d,y){h?(d.__gohashid===void 0&&o.push(d),n.set(d,y)):(d=su++,n.set(d,y),r.set(d,e))}if(!yt(e))return e;o||(o=[]);var h=Object.isExtensible(e);if(n||(n=new mt),h){var a=n.get(e);if(a)return a}else for(r||(r=new mt),a=r.iterator;a.next();){var f=a.key;if(a.value===e&&(f=n.get(f)))return f}if(Array.isArray(e)){a=[],l(e,a);for(var p=0;p<e.length;p++)a.push(Jh(t,e[p],!1,n,r,o))}else if(e instanceof N||e instanceof ct||e instanceof z||e instanceof At||e instanceof ht)a=e.copy(),l(e,a);else{if(e instanceof Et||e instanceof $||e instanceof Q)return e;if(e instanceof tt)a=new tt().addAll(Jh(t,e.Fa(),!1,n,r,o)),l(e,a);else if(e instanceof q)a=new q().addAll(Jh(t,e.Fa(),!1,n,r,o)),l(e,a);else if(e instanceof mt)a=new mt().addAll(Jh(t,e.Fa(),!1,n,r,o)),l(e,a);else if(e instanceof Date)a=new Date(e.getTime()),l(e,a);else if(e instanceof RegExp)a=new RegExp(e),l(e,a),a.lastIndex=e.lastIndex;else if(typeof e.copy=="function")a=e.copy(),l(e,a);else for(p in a={},l(e,a),e)p!=="__gohashid"&&(a[p]=Jh(t,e[p],!1,n,r,o))}return i&&o.forEach(function(d){delete d.__gohashid}),a}s=rt.prototype,s.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},s.rm=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},s.gp=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function Bk(t,e){e=e.modelData,yt(e)&&(t.dm(e),t.modelData=e)}s.Rv=function(){var t=this.modelData,e=!1,i;for(i in t)if(!Yk(i,t[i])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+Jv(this,this.modelData)),t+`,
  "nodeDataArray": `+Is(this,this.nodeDataArray,!0)},s.kv=function(t){Bk(this,t),t=t.nodeDataArray,Bt(t)&&(this.dm(t),this.nodeDataArray=t)};function zk(t,e){function i(r,o){if((o=o.part)&&(o=o.data,r!==o)){var l=n.get(r);l===null?(l=new q,l.add(o),n.add(r,l)):l.add(o)}}var n=t.vh;n===null&&(n=new mt,e.changes.each(function(r){if(r.diagram!==null){var o=r.change;o===Jt?(r=r.object.panel)&&(o=r.data)&&i(o,r):(o===Me||o===Ne)&&(r=r.object,(o=r.itemArray)&&i(o,r))}}),t.vh=n)}function Vk(t,e){for(var i=new q,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];Xd(t,e,r,r,i)}return i}function Xd(t,e,i,n,r){if(Array.isArray(i))for(var o=0;o<i.length;o++){var l=i[o];if(l===e)return r.add(n),!0;if(Xd(t,e,l,n,r))return!0}else if(yt(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if(l=i[o],l===e)return r.add(n),!0;if(Xd(t,e,l,n,r))return!0}return!1}s.Pv=function(t,e){var i=this,n=!1,r=new q,o=new q,l=new q,h=this.vh;t.changes.each(function(p){p.model===i&&(p.modelChange==="nodeDataArray"?p.change===Me?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):i.lb(p.object)?o.add(p.object):p.change!==Jt||i.modelData!==p.object&&p.propertyName!=="modelData"?p.object!==null&&(h&&h.contains(p.object)?h.get(p.object).each(function(d){i.lb(d)&&o.add(d)}):p.object instanceof rt||i.ri()&&i.Ic(p.object)||Vk(i,p.object).each(function(d){o.add(d)})):n=!0)});var a=this.il;a.clear(),r.each(function(p){a.add(i.wa(p)),e||o.add(p)});var f=this.kl;return f.clear(),l.each(function(p){f.add(i.wa(p)),e&&o.add(p)}),t="",n&&(t+=`,
  "modelData": `+Jv(this,this.modelData)),0<a.count&&(t+=(e?this.Yv:this.Wv)+Is(this,a.Fa(),!0)),0<o.count&&(t+=this.my+Is(this,o.Fa(),!0)),0<f.count&&(t+=(e?this.Wv:this.Yv)+Is(this,f.Fa(),!0)),f.clear(),a.clear(),t},s.fp=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&I("applyIncrementalJson cannot change Model properties"),Bk(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new mt;if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r],l=this.wa(o);l!=null&&n.set(l,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){l=e[o];var h=this.gc(l);h===null&&(h=(h=n.get(l))?h:this.copyNodeData({}),this.km(h,l),this.xf(h))}if(Array.isArray(i)){for(e=i.length,n=0;n<e;n++)if(r=i[n],o=this.wa(r),o=this.gc(o),o!==null){for(var a in r)a==="__gohashid"||a===this.nodeKeyProperty||this.Wj()&&a===this.nodeIsGroupProperty||this.setDataProperty(o,a,r[a]);this.lm(r,o)}}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,a=0;a<i;a++)e=this.gc(t[a]),e!==null&&this.cm(e)},s.ey=function(t,e){t.change!==hr&&I("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof ze?(e===void 0&&(e=Kf(this,this)),zk(this,i),t=this.Pv(i,t.propertyName==="FinishedUndo"),this.vh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.rm()+t+"}"):'{ "incremental": 0 }'},s.yA=function(t,e){return this.ey(t,e)},s.np=function(t){return t===void 0&&(t=Kf(this,this)),'{ "class": '+this.quote(t)+this.rm()+this.Rv()+"}"},s.toJSON=function(t){return this.np(t)},s.Zw=function(t){var e=null;if(typeof t=="string")try{e=G.JSON.parse(t)}catch{}else typeof t=="object"?e=t:I("Unable to modify a Model from: "+t);var i=e.incremental;typeof i!="number"&&I("Unable to apply non-incremental changes to Model: "+t),i!==0&&(this.Ea("applyIncrementalJson"),this.fp(e),this.eb("applyIncrementalJson"))},s.Ny=function(t){return this.Zw(t)},rt.constructGraphLinksModel=function(){return new rt},s=rt.prototype,s.dm=function(t){if(Bt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(yt(n)){var r=i;n=this.dm(n),Array.isArray(t)?t[r]=n:I("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(yt(t)){for(e in t)if(i=t[e],yt(i)&&(i=this.dm(i),t[e]=i,e==="points"&&Array.isArray(i))){for(r=i.length%2===0,n=0;n<i.length;n++)if(typeof i[n]!="number"){r=!1;break}if(r){for(r=new tt,n=0;n<i.length/2;n++)r.add(new N(i[2*n],i[2*n+1]));r.freeze(),t[e]=r}}return Lj(t)}return t},s.sm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.sm(t.valueOf()):Bt(t)?Is(this,t):yt(t)?Jv(this,t):typeof t=="function"?"null":t.toString()};function Is(t,e,i){i===void 0&&(i=!1);var n=e.length;if(0>=n)return"[]";var r=new hl;r.add("["),i&&1<n&&r.add(`
`);for(var o=0;o<n;o++){var l=e[o];l!==void 0&&(0<o&&(r.add(","),i&&r.add(`
`)),r.add(t.sm(l)))}return i&&1<n&&r.add(`
`),r.add("]"),r.toString()}function Yk(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function ki(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Jv(t,e){var i=e;if(i instanceof N)e={class:"go.Point",x:ki(i.x),y:ki(i.y)};else if(i instanceof ct)e={class:"go.Size",width:ki(i.width),height:ki(i.height)};else if(i instanceof z)e={class:"go.Rect",x:ki(i.x),y:ki(i.y),width:ki(i.width),height:ki(i.height)};else if(i instanceof At)e={class:"go.Margin",top:ki(i.top),right:ki(i.right),bottom:ki(i.bottom),left:ki(i.left)};else if(i instanceof ht)i.sb()?e={class:"go.Spot",x:ki(i.x),y:ki(i.y),offsetX:ki(i.offsetX),offsetY:ki(i.offsetY)}:e={class:"go.Spot",enum:i.toString()};else if(i instanceof Et){if(e={class:"go.Brush",type:i.type.name},i.type===bo?e.color=i.color:(i.type===Co||i.type===vn)&&(e.start=i.start,e.end=i.end,i.type===vn&&(i.startRadius!==0&&(e.startRadius=ki(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=ki(i.endRadius)))),i.colorStops!==null){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof $?(e={class:"go.Geometry",type:i.type.name},i.startX!==0&&(e.startX=ki(i.startX)),i.startY!==0&&(e.startY=ki(i.startY)),i.endX!==0&&(e.endX=ki(i.endX)),i.endY!==0&&(e.endY=ki(i.endY)),i.spot1.D(ei)||(e.spot1=i.spot1),i.spot2.D(Kr)||(e.spot2=i.spot2),i.type===$.m&&(e.path=$.ia(i))):i instanceof Q&&(e={class:"go.EnumValue",classType:Kf(t,i.classType),name:i.name});n="{",i=!0;for(var r in e){var o=se(e,r);if(!Yk(r,o))if(i?i=!1:n+=",",n+=t.quote(r)+":",r==="points"&&o instanceof tt){var l="[";for(o=o.iterator;o.next();){var h=o.value;1<l.length&&(l+=","),l+=t.sm(h.x),l+=",",l+=t.sm(h.y)}l+="]",n+=l}else n+=t.sm(o)}return n+"}"}function Pi(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function Lj(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var i=t;if(e==="Point")i=new N(Pi(t.x),Pi(t.y));else if(e==="Size")i=new ct(Pi(t.width),Pi(t.height));else if(e==="Rect")i=new z(Pi(t.x),Pi(t.y),Pi(t.width),Pi(t.height));else if(e==="Margin")i=new At(Pi(t.top),Pi(t.right),Pi(t.bottom),Pi(t.left));else if(e==="Spot")typeof t.enum=="string"?i=X0(t.enum):i=new ht(Pi(t.x),Pi(t.y),Pi(t.offsetX),Pi(t.offsetY));else if(e==="Brush"){if(i=new Et,i.type=Xn(Et,t.type),typeof t.color=="string"&&(i.color=t.color),t.start instanceof ht&&(i.start=t.start),t.end instanceof ht&&(i.end=t.end),typeof t.startRadius=="number"&&(i.startRadius=Pi(t.startRadius)),typeof t.endRadius=="number"&&(i.endRadius=Pi(t.endRadius)),t=t.colorStops,yt(t))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else e==="Geometry"?(i=null,typeof t.path=="string"?i=$.parse(t.path):i=new $,i.type=Xn($,t.type),typeof t.startX=="number"&&(i.startX=Pi(t.startX)),typeof t.startY=="number"&&(i.startY=Pi(t.startY)),typeof t.endX=="number"&&(i.endX=Pi(t.endX)),typeof t.endY=="number"&&(i.endY=Pi(t.endY)),t.spot1 instanceof ht&&(i.spot1=t.spot1),t.spot2 instanceof ht&&(i.spot2=t.spot2)):e==="EnumValue"&&(n=t.classType,n.indexOf("go.")===0&&(n=n.substr(3)),n=Qv(n),typeof n=="function"&&(i=Xn(n,t.name)));return i}s.Pe=function(t){return this.Lt.add(t),this},s.ik=function(t){this.Lt.remove(t)},s.ds=function(t){this.skipsUndoManager||this.undoManager.Tu(t);for(var e=this.Lt,i=e.length,n=0;n<i;n++)e.M(n)(t)},s.cb=function(t,e,i,n,r,o,l){pe(this,"",t,e,i,n,r,o,l)},s.g=function(t,e,i,n,r){pe(this,"",Jt,t,this,e,i,n,r)},s.Fs=function(t,e,i,n,r,o){pe(this,"",Jt,e,t,i,n,r,o)};function pe(t,e,i,n,r,o,l,h,a){h===void 0&&(h=null),a===void 0&&(a=null);var f=new qt;f.model=t,f.change=i,f.modelChange=e,f.propertyName=n,f.object=r,f.oldValue=o,f.oldParam=h,f.newValue=l,f.newParam=a,t.ds(f)}rt.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Jt){var i=t.object,n=t.propertyName,r=t.I(e);n===this.nodeKeyProperty&&this.lb(i)&&(e=t.I(!e),e!==void 0&&this.kb.remove(e),r!==void 0&&this.kb.add(r,i)),Kt(i,n,r)}else t.change===Me?(i=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,yt(t)&&typeof i=="number"&&(n=this.wa(t),e?(this.Sc[i]===t&&Tr(this.Sc,i),n!==void 0&&this.kb.remove(n)):(this.Sc[i]!==t&&He(this.Sc,i,t),n!==void 0&&this.kb.add(n,t)))):t.modelChange===""?((n=t.object)&&!Bt(n)&&t.propertyName&&(n=se(t.object,t.propertyName)),Bt(n)&&typeof i=="number"&&(t=t.newValue,e?Tr(n,i):He(n,i,t))):I("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Ne?(i=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,yt(t)&&typeof i=="number"&&(n=this.wa(t),e?(this.Sc[i]!==t&&He(this.Sc,i,t),n!==void 0&&this.kb.add(n,t)):(this.Sc[i]===t&&Tr(this.Sc,i),n!==void 0&&this.kb.remove(n)))):t.modelChange===""?((n=t.object)&&!Bt(n)&&t.propertyName&&(n=se(t.object,t.propertyName)),Bt(n)&&typeof i=="number"&&(t=t.oldValue,e?He(n,i,t):Tr(n,i))):I("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==hr&&I("unknown ChangedEvent: "+t.toString())},rt.prototype.Ea=function(t){return this.undoManager.Ea(t)},rt.prototype.eb=function(t){return this.undoManager.eb(t)},rt.prototype.Kf=function(){return this.undoManager.Kf()},rt.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},s=rt.prototype,s.Ma=function(t,e){e===void 0&&(e=""),pe(this,"SourceChanged",hr,e,t,null,null)},s.wa=function(t){if(t!==null){var e=this.Th;if(e!==""&&(e=se(t,e),e!==void 0)){if(Rs(e))return e;I("Key value for node data "+t+" is not a number or a string: "+e)}}},s.km=function(t,e){if(t!==null){var i=this.Th;if(i!=="")if(this.lb(t)){var n=se(t,i);n!==e&&this.gc(e)===null&&(Kt(t,i,e),n!==void 0&&this.kb.remove(n),this.kb.add(e,t),pe(this,"nodeKey",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i),this.jp(n,e))}else Kt(t,i,e)}};function Rs(t){return typeof t=="number"||typeof t=="string"}s.lb=function(t){var e=this.wa(t);return e===void 0?!1:this.kb.I(e)===t},s.gc=function(t){return t===null&&I("Model.findNodeDataForKey:key must not be null"),t!==void 0&&Rs(t)?this.kb.I(t):null},s.$u=function(t){if(t!==null){var e=this.Th;if(e!==""){var i=this.wa(t);if(i===void 0||this.kb.contains(i)){var n=this.bl;if(n!==null&&(i=n(this,t),i!=null&&!this.kb.contains(i))){Kt(t,e,i);return}if(typeof i=="string"){for(n=2;this.kb.contains(i+n);)n++;Kt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.kb.count-1;this.kb.contains(i);)i--;Kt(t,e,i)}}}}},s.xf=function(t){t!==null&&(ou(t),this.lb(t)||Uk(this,t,!0))};function Uk(t,e,i){var n=t.wa(e);(n===void 0||t.kb.I(n)!==e)&&(t.$u(e),n=t.wa(e),n===void 0&&I("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(n,e),n=null,i&&(n=t.Sc.length,He(t.Sc,n,e)),pe(t,"nodeDataArray",Me,"nodeDataArray",t,null,e,null,n),t.fm(e),t.em(e))}s.Iy=function(t){if(Bt(t))for(var e=t.length,i=0;i<e;i++)this.xf(t[i]);else for(t=t.iterator;t.next();)this.xf(t.value)},s.cm=function(t){t!==null&&Gk(this,t,!0)};function Gk(t,e,i){var n=t.wa(e);if(n!==void 0&&t.kb.remove(n),n=null,i){t:if(i=t.Sc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;Tr(t.Sc,n)}pe(t,"nodeDataArray",Ne,"nodeDataArray",t,e,null,n,null),t.qp(e)}s.nA=function(t){if(Bt(t))for(var e=t.length,i=0;i<e;i++)this.cm(t[i]);else for(t=t.iterator;t.next();)this.cm(t.value)},s.aA=function(t){if(t!==this.nodeDataArray&&Bt(t)){var e=this.kl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.il;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.wa(o);if(l!==void 0){i.add(l);var h=this.gc(l);h!==o&&(h!==null?(this.Do(h,o),this.lm(o,h)):(o=this.cloneDeep(o),this.km(o,l),this.xf(o)))}else l=this.cloneDeep(o),this.xf(l),i.add(this.wa(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.gc(n))&&this.cm(n);e.clear(),i.clear()}},s.jp=function(t,e){e!==void 0&&(t=Hf(this,t),t instanceof q&&this.Vf.add(e,t))},s.Lv=function(){},s.fm=function(){},s.em=function(){},s.qp=function(){};function dr(t,e,i){if(e!==void 0){var n=t.Vf.I(e);n===null&&(n=new q,t.Vf.add(e,n)),n.add(i)}}function gr(t,e,i){if(e!==void 0){var n=t.Vf.I(e);n instanceof q&&(i==null?t.Vf.remove(e):(n.remove(i),n.count===0&&t.Vf.remove(e)))}}function Hf(t,e){return e===void 0?null:(t=t.Vf.I(e),t instanceof q?t:null)}s.Sy=function(t){t===void 0?this.Vf.clear():this.Vf.remove(t)},rt.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.Bk;return t=e!==null?e(t,this):_d(this,t,!0),yt(t)&&Le(t),t};function _d(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=_d(t,e[i],t.copiesArrayObjects);n.push(r)}return Le(n),n}if(i&&yt(e)){i=(i=e.constructor)?new i:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(n in e)if(n==="__gohashid")i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var o=se(e,n),l=Kf(t,o);l==="GraphObject"||l==="Diagram"||l==="Layer"||l==="RowColumnDefinition"||l==="AnimationManager"||l==="Tool"||l==="CommandHandler"||l==="Layout"||l==="InputEvent"||l==="DiagramEvent"||o instanceof rt||o instanceof ie||o instanceof ze||o instanceof qt||(o=_d(t,o,!1)),Kt(i,n,o)}return Le(i),i}return e instanceof N||e instanceof ct||e instanceof z||e instanceof ht||e instanceof At?e.copy():e}rt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.km(t,i);return}if(e===this.nodeCategoryProperty){this.jm(t,i);return}}else!Xk&&t instanceof ot&&(Xk=!0,kt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),kt("  Is that really your intent?"));var n=se(t,e);n!==i&&(Kt(t,e,i),this.Fs(t,e,n,i))},s=rt.prototype,s.set=function(t,e,i){this.setDataProperty(t,e,i)},s.Do=function(t,e){if(e){var i=this.lb(t),n;for(n in e)n==="__gohashid"||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},s.Dy=function(t,e){this.ts(t,-1,e)},s.ts=function(t,e,i){0>e&&(e=t.length),He(t,e,i),pe(this,"",Me,"",t,null,i,null,e)},s.ov=function(t,e){e===void 0&&(e=-1),t===this.Sc&&I("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var i=t[e];Tr(t,e),pe(this,"",Ne,"",t,i,null,e,null)},s.Ro=function(t){if(t===null)return"";var e=this.lj;if(e===""||(e=se(t,e),e===void 0))return"";if(typeof e=="string")return e;I("getCategoryForNodeData found a non-string category for "+t+": "+e)},s.jm=function(t,e){if(t!==null){var i=this.lj;if(i!=="")if(this.lb(t)){var n=se(t,i);n===void 0&&(n=""),n!==e&&(Kt(t,i,e),pe(this,"nodeCategory",Jt,i,t,n,e))}else Kt(t,i,e)}},s.lm=function(t,e){this.jm(e,this.Ro(t))},s.Tl=function(){return!1},s.Wj=function(){return!1},s.ri=function(){return!1},s.xs=function(){return!1},s.Xj=function(){return!1};function Zv(){return new rt}function Kf(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return Kf(t,e.constructor);return typeof e}function Qv(t){return Qn[t]?Qn[t]:G.go!==void 0&&G.go[t]?G.go[t]:null}function se(t,e){if(!t||!e)return null;try{if(typeof e=="function")var i=e(t);else typeof t.getAttribute=="function"?(i=t.getAttribute(e),i===null&&(i=void 0)):i=t[e]}catch{}return i}function Kt(t,e,i){if(t&&e)try{typeof e=="function"?e(t,i):typeof t.setAttribute=="function"?t.setAttribute(e,i):t[e]=i}catch{}}B.Object.defineProperties(rt.prototype,{name:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(this.xa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ma(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(e!==null&&e.Ux(this),this.m=t,t!==null&&t.Xw(this))}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t}},nodeKeyProperty:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(t===""&&I("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&I("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Th=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Sc},set:function(t){var e=this.Sc;if(e!==t){this.kb.clear(),this.Lv();for(var i=t.length,n=0;n<i;n++){var r=t[n];yt(r)||I("Model.nodeDataArray must only contain Objects, not: "+r),ou(r)}for(this.Sc=t,n=new tt,r=0;r<i;r++){var o=t[r],l=this.wa(o);l===void 0||this.kb.I(l)!==null?n.add(o):this.kb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.$u(r),o=this.wa(r),o!==void 0&&this.kb.add(o,r);for(pe(this,"nodeDataArray",Jt,"nodeDataArray",this,e,t),e=0;e<i;e++)n=t[e],this.fm(n),this.em(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Bk},set:function(t){var e=this.Bk;e!==t&&(this.Bk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Km},set:function(t){var e=this.Km;e!==t&&(this.Km=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Jm},set:function(t){var e=this.Jm;e!==t&&(this.Jm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Mm},set:function(t){var e=this.Mm;e!==t&&(this.Mm=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),rt.prototype.setCategoryForNodeData=rt.prototype.jm,rt.prototype.getCategoryForNodeData=rt.prototype.Ro,rt.prototype.removeArrayItem=rt.prototype.ov,rt.prototype.insertArrayItem=rt.prototype.ts,rt.prototype.addArrayItem=rt.prototype.Dy,rt.prototype.assignAllDataProperties=rt.prototype.Do,rt.prototype.set=rt.prototype.set,rt.prototype.clearUnresolvedReferences=rt.prototype.Sy,rt.prototype.mergeNodeDataArray=rt.prototype.aA,rt.prototype.removeNodeDataCollection=rt.prototype.nA,rt.prototype.removeNodeData=rt.prototype.cm,rt.prototype.addNodeDataCollection=rt.prototype.Iy,rt.prototype.addNodeData=rt.prototype.xf,rt.prototype.makeNodeDataKeyUnique=rt.prototype.$u,rt.prototype.findNodeDataForKey=rt.prototype.gc,rt.prototype.containsNodeData=rt.prototype.lb,rt.prototype.setKeyForNodeData=rt.prototype.km,rt.prototype.getKeyForNodeData=rt.prototype.wa,rt.prototype.updateTargetBindings=rt.prototype.Ma,rt.prototype.commit=rt.prototype.commit,rt.prototype.rollbackTransaction=rt.prototype.Kf,rt.prototype.commitTransaction=rt.prototype.eb,rt.prototype.startTransaction=rt.prototype.Ea,rt.prototype.raiseDataChanged=rt.prototype.Fs,rt.prototype.raiseChanged=rt.prototype.g,rt.prototype.raiseChangedEvent=rt.prototype.cb,rt.prototype.removeChangedListener=rt.prototype.ik,rt.prototype.addChangedListener=rt.prototype.Pe,rt.prototype.writeJsonValue=rt.prototype.sm,rt.prototype.replaceJsonObjects=rt.prototype.dm,rt.prototype.applyIncrementalJSON=rt.prototype.Ny,rt.prototype.applyIncrementalJson=rt.prototype.Zw,rt.prototype.toJSON=rt.prototype.toJSON,rt.prototype.toJson=rt.prototype.np,rt.prototype.toIncrementalJSON=rt.prototype.yA,rt.prototype.toIncrementalJson=rt.prototype.ey,rt.prototype.toIncrementalData=rt.prototype.xA,rt.prototype.clear=rt.prototype.clear;var Xk=!1,Qn={};rt.className="Model",rt.fromJSON=rt.fromJson=function(t,e){e===void 0&&(e=null);var i=null;if(typeof t=="string")try{i=G.JSON.parse(t)}catch{}else typeof t=="object"?i=t:I("Unable to construct a Model from: "+t);if(e===null){t=null;var n=i.class;if(typeof n=="string")try{var r=null;n.indexOf("go.")===0?(n=n.substr(3),r=Qv(n)):(r=Qv(n),r===null&&(r=G[n])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof rt?e=t:I("Unable to construct a Model of declared class: "+i.class)}return e===null&&(e=rt.constructGraphLinksModel()),e.gp(i),e.kv(i),e},rt.safePropertyValue=se,rt.safePropertySet=Kt,Qn.Brush=Et,Qn.ChangedEvent=qt,Qn.Geometry=$,Qn.Margin=At,Qn.Panel=_,Qn.Point=N,Qn.Rect=z,Qn.Size=ct,Qn.Spot=ht,Qn.Transaction=ze,Qn.UndoManager=ie;function ue(t,e,i,n){Le(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),i===void 0&&(i=null),this.j=-1,this.xd=null,this.xl=t,this.wl=this.to=0,this.Cr=null,this.wn=!1,this.sl=e,this.Im=i,n===void 0?(this.el=Hk,this.wk=null):(this.el=Wf,this.wk=n),this.st=new q}ue.prototype.copy=function(){var t=new ue;return t.xl=this.xl,t.to=this.to,t.wl=this.wl,t.Cr=this.Cr,t.wn=this.wn,t.sl=this.sl,t.Im=this.Im,t.el=this.el,t.wk=this.wk,t},s=ue.prototype,s.qb=function(t){t.classType===ue&&(this.mode=t)},s.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.Ai!==-1?" "+this.Ai:"")+" "+this.mode.name+")"},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.Mx=function(t){return t===void 0&&(t=null),this.mode=Wf,this.backConverter=t,this},s.cp=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},s.dA=function(){return this.sourceName=null,this.isToModel=!0,this};function _k(t,e,i){return t=t.sourceName,t===null||t===""?e:t==="/"?i.part:t==="."?i:t===".."?i.panel:e.fb(t)}s.Mv=function(t,e,i){var n=this.sl;if(i===void 0||n===""||n===i){i=this.xl;var r=this.Im;if(r===null&&i==="")kt("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(n!==""&&(o=se(e,n)),o!==void 0)if(r===null)i!==""&&Kt(t,i,o);else try{if(i!==""){var l=r(o,t);Kt(t,i,l)}else r(o,t)}catch{}}}},s.sp=function(t,e,i,n){if(this.el===Wf){var r=this.xl;if(i===void 0||r===i){i=this.sl;var o=this.wk,l=t;if(r!==""&&(l=se(t,r)),l!==void 0&&!this.st.contains(t))try{this.st.add(t);var h=n!==null?n.diagram:null,a=h!==null?h.model:null;if(o===null){if(i!=="")a!==null?a.setDataProperty(e,i,l):Kt(e,i,l);else if(a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var f=n.itemIndex,p=n.panel.itemArray;a.ov(p,f),a.ts(p,f,l)}}else try{if(i!==""){var d=o(l,e,a);a!==null?a.setDataProperty(e,i,d):Kt(e,i,d)}else{var y=o(l,e,a);if(y!==void 0&&a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var m=n.itemIndex,x=n.panel.itemArray;a.ov(x,m),a.ts(x,m,y)}}}catch{}}finally{this.st.remove(t)}}}},B.Object.defineProperties(ue.prototype,{Ai:{get:function(){return this.j},set:function(t){this._isFrozen&&nt(this),this.j=t}},targetProperty:{get:function(){return this.xl},set:function(t){this._isFrozen&&nt(this),this.xl=t}},sourceName:{get:function(){return this.Cr},set:function(t){this._isFrozen&&nt(this),this.Cr=t,t!==null&&(this.wn=!1)}},isToModel:{get:function(){return this.wn},set:function(t){this._isFrozen&&nt(this),this.wn=t}},sourceProperty:{get:function(){return this.sl},set:function(t){this._isFrozen&&nt(this),this.sl=t}},converter:{get:function(){return this.Im},set:function(t){this._isFrozen&&nt(this),this.Im=t}},backConverter:{get:function(){return this.wk},set:function(t){this._isFrozen&&nt(this),this.wk=t}},mode:{get:function(){return this.el},set:function(t){this._isFrozen&&nt(this),this.el=t}}}),ue.prototype.updateSource=ue.prototype.sp,ue.prototype.updateTarget=ue.prototype.Mv,ue.prototype.ofModel=ue.prototype.dA,ue.prototype.ofObject=ue.prototype.cp,ue.prototype.makeTwoWay=ue.prototype.Mx;var jj="Binding",Hk=new Q(ue,"OneWay",1),Wf=new Q(ue,"TwoWay",2);ue.className="Binding",ue.parseEnum=function(t,e){return function(i){return i=Xn(t,i),i===null?e:i}},ue.toString=Xi,ue.OneWay=Hk,ue.TwoWay=Wf;function Pt(t,e,i){rt.call(this),this.Vv=`,
  "insertedLinkKeys": `,this.ly=`,
  "modifiedLinkData": `,this.Xv=`,
  "removedLinkKeys": `,this.ld=[],this.$f=new q,this.wb=new mt,this.Jh="",this.Ri=this.Ak=this.cl=null,this.lf="from",this.mf="to",this.fj=this.ej="",this.dj="category",this.je="",this.jl="isGroup",this.Je="group",this.Lm=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(Bt(t)?this.nodeDataArray=t:i=t),i&&(Object.assign(this,i),t=i.Changed)&&(delete this.Changed,this.Pe(t))}V(Pt,rt),Pt.constructGraphLinksModel=rt.constructGraphLinksModel,Pt.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.Jh=this.Jh,t.cl=this.cl,t.Ak=this.Ak,t.lf=this.lf,t.mf=this.mf,t.ej=this.ej,t.fj=this.fj,t.dj=this.dj,t.je=this.je,t.jl=this.jl,t.Je=this.Je,t.Lm=this.Lm},s=Pt.prototype,s.clear=function(){rt.prototype.clear.call(this),this.ld=[],this.wb.clear(),this.$f.clear()},s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.np();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var i=t.length,n;for(n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Xi(r)}for(e+=`
 link data:`,t=this.linkDataArray,i=t.length,n=0;n<i;n++)r=t[n],e+=" "+sn(this,r,!0)+"-->"+sn(this,r,!1)}return e},s.Qv=function(t,e){this.linkKeyProperty===""&&I("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=rt.prototype.Qv.call(this,t,e),n=this,r=new q,o=new q,l=new q,h=this.vh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===Me?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):n.Ic(p.object)?o.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.Ic(d)&&o.add(d)}):p.object instanceof rt||n.lb(p.object)||Kk(n,p.object).each(function(d){o.add(d)})))});var a=this.il;a.clear(),r.each(function(p){a.add(n.zc(p)),e||o.add(p)});var f=this.kl;return f.clear(),l.each(function(p){f.add(n.zc(p)),e&&o.add(p)}),t=n.cloneDeep(o.Fa()),0<a.count&&(i===null&&(i={}),e?i.removedLinkKeys=a.Fa():i.insertedLinkKeys=a.Fa()),0<t.length&&(i===null&&(i={}),i.modifiedLinkData=t),0<f.count&&(i===null&&(i={}),e?i.insertedLinkKeys=f.Fa():i.removedLinkKeys=f.Fa()),f.clear(),a.clear(),i},s.rm=function(){var t=rt.prototype.rm.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},s.gp=function(t){rt.prototype.gp.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},s.Rv=function(){var t=rt.prototype.Rv.call(this),e=`,
  "linkDataArray": `+Is(this,this.linkDataArray,!0);return t+e},s.kv=function(t){rt.prototype.kv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.dm(t),this.linkDataArray=t)};function Kk(t,e){for(var i=new q,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];Xd(t,e,r,r,i)}return i}s.Pv=function(t,e){this.linkKeyProperty===""&&I("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=rt.prototype.Pv.call(this,t,e),n=this,r=new q,o=new q,l=new q,h=this.vh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===Me?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):n.Ic(p.object)?o.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.Ic(d)&&o.add(d)}):p.object instanceof rt||n.lb(p.object)||Kk(n,p.object).each(function(d){o.add(d)})))});var a=this.il;a.clear(),r.each(function(p){a.add(n.zc(p)),e||o.add(p)});var f=this.kl;return f.clear(),l.each(function(p){f.add(n.zc(p)),e&&o.add(p)}),t=i,0<a.count&&(t+=(e?this.Xv:this.Vv)+Is(this,a.Fa(),!0)),0<o.count&&(t+=this.ly+Is(this,o.Fa(),!0)),0<f.count&&(t+=(e?this.Vv:this.Xv)+Is(this,f.Fa(),!0)),f.clear(),a.clear(),t},s.fp=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&I("applyIncrementalJson cannot change Model properties"),rt.prototype.fp.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.jh(r);o===null&&(o=this.Jo({}),this.Ks(o,r),this.fi(o))}if(e=t.modifiedLinkData,Array.isArray(e)){for(i=e.length,n=0;n<i;n++)if(r=e[n],o=this.zc(r),o=this.jh(o),o!==null){for(var l in r)l!=="__gohashid"&&l!==this.linkKeyProperty&&this.setDataProperty(o,l,r[l]);Jk(this,r,o)}}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)i=this.jh(t[e]),i!==null&&this.bm(i)},Pt.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Jt){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.Ic(i)){var r=t.I(e);e=t.I(!e),e!==void 0&&this.wb.remove(e),r!==void 0&&this.wb.add(r,i),Kt(i,n,r);return}}else if(t.change===Me){if(i=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,yt(t)&&typeof i=="number"&&(n=this.zc(t),e?(this.$f.remove(t),this.ld[i]===t&&this.ld.splice(i,1),n!==void 0&&this.wb.remove(n)):(this.$f.add(t),this.ld[i]!==t&&this.ld.splice(i,0,t),n!==void 0&&this.wb.add(n,t)));return}if(t.modelChange==="linkLabelKeys"){n=this.Ef(t.object),Array.isArray(n)&&typeof i=="number"&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue));return}}else if(t.change===Ne){if(i=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,yt(t)&&typeof i=="number"&&(n=this.zc(t),e?(this.$f.add(t),this.ld[i]!==t&&this.ld.splice(i,0,t),n!==void 0&&this.wb.add(n,t)):(this.$f.remove(t),this.ld[i]===t&&this.ld.splice(i,1),n!==void 0&&this.wb.remove(n)));return}if(t.modelChange==="linkLabelKeys"){n=this.Ef(t.object),Array.isArray(n)&&typeof i=="number"&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)));return}}rt.prototype.changeState.call(this,t,e)}},s=Pt.prototype,s.Vl=function(t){if(t!==void 0){var e=this.Ri;if(e!==null){var i=this.gc(t);i===null&&(i=this.copyNodeData(e),Kt(i,this.nodeKeyProperty,t),this.xf(i))}return t}},s.zx=function(t){return sn(this,t,!0)},s.wv=function(t,e){Zh(this,t,e,!0)},s.Cx=function(t){return sn(this,t,!1)},s.Bv=function(t,e){Zh(this,t,e,!1)};function sn(t,e,i){if(e!==null&&(t=i?t.lf:t.mf,t!==""&&(t=se(e,t),t!==void 0))){if(Rs(t))return t;I((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Zh(t,e,i,n){if(i===null&&(i=void 0),e!==null){var r=n?t.lf:t.mf;if(r!=="")if(i=t.Vl(i),t.Ic(e)){var o=se(e,r);o!==i&&(gr(t,o,e),Kt(e,r,i),t.gc(i)===null&&dr(t,i,e),pe(t,n?"linkFromKey":"linkToKey",Jt,r,e,o,i),typeof r=="string"&&t.Ma(e,r))}else Kt(e,r,i)}}s.Ax=function(t){return Hd(this,t,!0)},s.xv=function(t,e){Qh(this,t,e,!0)},s.Ex=function(t){return Hd(this,t,!1)},s.Cv=function(t,e){Qh(this,t,e,!1)};function Hd(t,e,i){return e===null||(t=i?t.ej:t.fj,t==="")?"":(e=se(e,t),e===void 0?"":e)}function Qh(t,e,i,n){if(e!==null){var r=n?t.ej:t.fj;if(r!=="")if(t.Ic(e)){var o=se(e,r);o===void 0&&(o=""),o!==i&&(Kt(e,r,i),pe(t,n?"linkFromPortId":"linkToPortId",Jt,r,e,o,i),typeof r=="string"&&t.Ma(e,r))}else Kt(e,r,i)}}s.Ef=function(t){if(t===null)return Kd;var e=this.je;return e===""?Kd:(t=se(t,e),t===void 0?Kd:t)},s.Ls=function(t,e){if(t!==null){var i=this.je;if(i!=="")if(this.Ic(t)){var n=se(t,i);if(n===void 0&&(n=Kd),n!==e){if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)gr(this,n[o],t);for(Kt(t,i,e),r=e.length,o=0;o<r;o++){var l=e[o];this.gc(l)===null&&dr(this,l,t)}pe(this,"linkLabelKeys",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i)}}else Kt(t,i,e)}},s.Bu=function(t,e){if(e!=null&&t!==null){var i=this.je;if(i!==""){var n=se(t,i);if(n===void 0)i=[],i.push(e),this.Ls(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.Ic(t)&&(this.gc(e)===null&&dr(this,e,t),pe(this,"linkLabelKeys",Me,i,t,null,e,null,r)))}else I(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},s.Tx=function(t,e){if(e!=null&&t!==null){var i=this.je;if(i!==""){var n=se(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.Ic(t)&&(gr(this,e,t),pe(this,"linkLabelKeys",Ne,i,t,e,null,r,null)))}else n!==void 0&&I(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},s.zc=function(t){if(t!==null){var e=this.Jh;if(e!==""&&(e=se(t,e),e!==void 0)){if(Rs(e))return e;I("Key value for link data "+t+" is not a number or a string: "+e)}}},s.Ks=function(t,e){if(t!==null){var i=this.Jh;if(i!=="")if(this.Ic(t)){var n=se(t,i);n!==e&&this.jh(e)===null&&(Kt(t,i,e),n!==void 0&&this.wb.remove(n),this.wb.add(e,t),pe(this,"linkKey",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else Kt(t,i,e)}},s.jh=function(t){return t===null&&I("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&Rs(t)?this.wb.I(t):null},s.Bs=function(t){if(t!==null){var e=this.Jh;if(e!==""){var i=this.zc(t);if(i===void 0||this.wb.contains(i)){var n=this.cl;if(n!==null&&(i=n(this,t),i!=null&&!this.wb.contains(i))){Kt(t,e,i);return}if(typeof i=="string"){for(n=2;this.wb.contains(i+n);)n++;Kt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.wb.count-1;this.wb.contains(i);)i--;Kt(t,e,i)}}}}},s.Ic=function(t){return t===null?!1:this.$f.contains(t)},s.fi=function(t){t!==null&&(ou(t),this.Ic(t)||Wk(this,t,!0))};function Wk(t,e,i){if(t.linkKeyProperty!==""){var n=t.zc(e);if(n!==void 0&&t.wb.I(n)===e)return;t.Bs(e),n=t.zc(e),n===void 0&&I("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.wb.add(n,e)}t.$f.add(e),n=null,i&&(n=t.ld.length,t.ld.splice(n,0,e)),pe(t,"linkDataArray",Me,"linkDataArray",t,null,e,null,n),qv(t,e)}s.Hy=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.fi(t[i]);else for(t=t.iterator;t.next();)this.fi(t.value)},s.bm=function(t){t!==null&&$k(this,t,!0)};function $k(t,e,i){t.$f.remove(e);var n=t.zc(e);if(n!==void 0&&t.wb.remove(n),n=null,i){if(n=t.ld.indexOf(e),0>n)return;t.ld.splice(n,1)}if(pe(t,"linkDataArray",Ne,"linkDataArray",t,e,null,n,null),i=sn(t,e,!0),gr(t,i,e),i=sn(t,e,!1),gr(t,i,e),n=t.Ef(e),Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],gr(t,i,e)}s.lA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.bm(t[i]);else for(t=t.iterator;t.next();)this.bm(t.value)},s.$z=function(t){if(this.linkKeyProperty===""&&I("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Bt(t)){var e=this.kl;e.clear(),e.addAll(this.wb.iteratorKeys);var i=this.il;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.zc(o);if(l!==void 0){i.add(l);var h=this.jh(l);h!==o&&(h!==null?(this.Do(h,o),Jk(this,o,h)):(o=this.cloneDeep(o),this.Ks(o,l),this.fi(o)))}else l=this.cloneDeep(o),this.fi(l),i.add(this.zc(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.jh(n))&&this.bm(n);e.clear(),i.clear()}};function qv(t,e){var i=sn(t,e,!0);i=t.Vl(i),t.gc(i)===null&&dr(t,i,e),i=sn(t,e,!1),i=t.Vl(i),t.gc(i)===null&&dr(t,i,e);var n=t.Ef(e);if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],t.gc(i)===null&&dr(t,i,e)}s.Jo=function(t){if(t===null)return null;var e=this.Ak;return t=e!==null?e(t,this):_d(this,t,!0),yt(t)&&(Le(t),this.lf!==""&&Kt(t,this.lf,void 0),this.mf!==""&&Kt(t,this.mf,void 0),this.je!==""&&Kt(t,this.je,[])),t},s.Yu=function(t){if(t===null)return!1;var e=this.jl;return e===""?!1:!!se(t,e)},s.lh=function(t){if(t!==null){var e=this.Je;if(e!==""&&(e=se(t,e),e!==void 0)){if(Rs(e))return e;I("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},s.mp=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Je;if(i!=="")if(this.lb(t)){var n=se(t,i);n!==e&&(gr(this,n,t),Kt(t,i,e),this.gc(e)===null&&dr(this,e,t),pe(this,"nodeGroupKey",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else Kt(t,i,e)}},Pt.prototype.copyNodeData=function(t){return t===null?null:(t=rt.prototype.copyNodeData.call(this,t),this.Ij||this.Je===""||se(t,this.Je)===void 0||Kt(t,this.Je,void 0),t)},Pt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.km(t,i);return}if(e===this.nodeCategoryProperty){this.jm(t,i);return}if(e===this.nodeGroupKeyProperty){this.mp(t,i);return}}else if(this.Ic(t)){if(e===this.linkFromKeyProperty){Zh(this,t,i,!0);return}if(e===this.linkToKeyProperty){Zh(this,t,i,!1);return}if(e===this.linkFromPortIdProperty){Qh(this,t,i,!0);return}if(e===this.linkToPortIdProperty){Qh(this,t,i,!1);return}if(e===this.linkKeyProperty){this.Ks(t,i);return}if(e===this.linkCategoryProperty){this.lp(t,i);return}if(e===this.linkLabelKeysProperty){this.Ls(t,i);return}}var n=se(t,e);n!==i&&(Kt(t,e,i),this.Fs(t,e,n,i))},s=Pt.prototype,s.Do=function(t,e){if(e){var i=this.lb(t),n=this.Ic(t),r;for(r in e)r==="__gohashid"||i&&r===this.nodeKeyProperty||i&&r===this.nodeIsGroupProperty&&se(t,r)===e[r]||n&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},s.jp=function(t,e){rt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.qv(i.value,t,e);for(i=this.$f.iterator;i.next();){var n=i.value,r=t,o=e;if(sn(this,n,!0)===r){var l=this.lf;Kt(n,l,o),pe(this,"linkFromKey",Jt,l,n,r,o),typeof l=="string"&&this.Ma(n,l)}if(sn(this,n,!1)===r&&(l=this.mf,Kt(n,l,o),pe(this,"linkToKey",Jt,l,n,r,o),typeof l=="string"&&this.Ma(n,l)),l=this.Ef(n),Array.isArray(l))for(var h=l.length,a=this.je,f=0;f<h;f++)l[f]===r&&(l[f]=o,pe(this,"linkLabelKeys",Me,a,n,r,o,f,f))}},s.qv=function(t,e,i){if(this.lh(t)===e){var n=this.Je;Kt(t,n,i),pe(this,"nodeGroupKey",Jt,n,t,e,i),typeof n=="string"&&this.Ma(t,n)}},s.Lv=function(){rt.prototype.Lv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)qv(this,t[i])},s.fm=function(t){rt.prototype.fm.call(this,t),t=this.wa(t);var e=Hf(this,t);if(e!==null){var i=Vt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)){if(this.lh(n)===t){var r=this.Je;pe(this,"nodeGroupKey",Jt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)}}else if(sn(this,n,!0)===t&&(r=this.lf,pe(this,"linkFromKey",Jt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)),sn(this,n,!1)===t&&(r=this.mf,pe(this,"linkToKey",Jt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)),r=this.Ef(n),Array.isArray(r))for(var o=r.length,l=this.je,h=0;h<o;h++)r[h]===t&&(pe(this,"linkLabelKeys",Me,l,n,t,t,h,h),i.push(n))}for(e=0;e<i.length;e++)gr(this,t,i[e]);zt(i)}},s.em=function(t){rt.prototype.em.call(this,t);var e=this.lh(t);this.gc(e)===null&&dr(this,e,t)},s.qp=function(t){rt.prototype.qp.call(this,t);var e=this.lh(t);gr(this,e,t)},s.ps=function(t){if(t===null)return"";var e=this.dj;if(e===""||(e=se(t,e),e===void 0))return"";if(typeof e=="string")return e;I("getCategoryForLinkData found a non-string category for "+t+": "+e)},Pt.prototype.getLinkCategoryForData=function(t){return this.ps(t)},Pt.prototype.lp=function(t,e){if(t!==null){var i=this.dj;if(i!=="")if(this.Ic(t)){var n=se(t,i);n===void 0&&(n=""),n!==e&&(Kt(t,i,e),pe(this,"linkCategory",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else Kt(t,i,e)}},Pt.prototype.setLinkCategoryForData=function(t,e){this.lp(t,e)},s=Pt.prototype,s.lm=function(t,e){rt.prototype.lm.call(this,t,e),this.mp(e,this.lh(t))};function Jk(t,e,i){t.lp(i,t.ps(e)),t.wv(i,t.zx(e)),t.Bv(i,t.Cx(e)),t.Ls(i,t.Ef(e)),t.xv(i,t.Ax(e)),t.Cv(i,t.Ex(e))}s.Wj=function(){return!0},s.ri=function(){return!0},s.xs=function(){return!0},s.Xj=function(){return!0},B.Object.defineProperties(Pt.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ld},set:function(t){var e=this.ld;if(e!==t){this.wb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];yt(r)||I("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),ou(r)}if(this.ld=t,this.linkKeyProperty!==""){for(n=new tt,r=0;r<i;r++){var o=t[r],l=this.zc(o);l===void 0||this.wb.I(l)!==null?n.add(o):this.wb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.Bs(r),o=this.zc(r),o!==void 0&&this.wb.add(o,r)}for(n=new q,r=0;r<i;r++)n.add(t[r]);for(this.$f=n,pe(this,"linkDataArray",Jt,"linkDataArray",this,e,t),e=0;e<i;e++)qv(this,t[e])}}},linkKeyProperty:{get:function(){return this.Jh},set:function(t){var e=this.Jh;if(e!==t){this.Jh=t,this.wb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],o=this.zc(r);o===void 0&&(this.Bs(r),o=this.zc(r)),o!==void 0&&this.wb.add(o,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.cl},set:function(t){var e=this.cl;e!==t&&(this.cl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(this.Ak=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.jl},set:function(t){var e=this.jl;e!==t&&(this.jl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Je},set:function(t){var e=this.Je;e!==t&&(this.Je=t,this.g("nodeGroupKeyProperty",e,t))}},Ij:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},linkCategoryProperty:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Pt.prototype.setCategoryForLinkData=Pt.prototype.lp,Pt.prototype.getCategoryForLinkData=Pt.prototype.ps,Pt.prototype.assignAllDataProperties=Pt.prototype.Do,Pt.prototype.setGroupKeyForNodeData=Pt.prototype.mp,Pt.prototype.getGroupKeyForNodeData=Pt.prototype.lh,Pt.prototype.isGroupForNodeData=Pt.prototype.Yu,Pt.prototype.copyLinkData=Pt.prototype.Jo,Pt.prototype.mergeLinkDataArray=Pt.prototype.$z,Pt.prototype.removeLinkDataCollection=Pt.prototype.lA,Pt.prototype.removeLinkData=Pt.prototype.bm,Pt.prototype.addLinkDataCollection=Pt.prototype.Hy,Pt.prototype.addLinkData=Pt.prototype.fi,Pt.prototype.containsLinkData=Pt.prototype.Ic,Pt.prototype.makeLinkDataKeyUnique=Pt.prototype.Bs,Pt.prototype.findLinkDataForKey=Pt.prototype.jh,Pt.prototype.setKeyForLinkData=Pt.prototype.Ks,Pt.prototype.getKeyForLinkData=Pt.prototype.zc,Pt.prototype.removeLabelKeyForLinkData=Pt.prototype.Tx,Pt.prototype.addLabelKeyForLinkData=Pt.prototype.Bu,Pt.prototype.setLabelKeysForLinkData=Pt.prototype.Ls,Pt.prototype.getLabelKeysForLinkData=Pt.prototype.Ef,Pt.prototype.setToPortIdForLinkData=Pt.prototype.Cv,Pt.prototype.getToPortIdForLinkData=Pt.prototype.Ex,Pt.prototype.setFromPortIdForLinkData=Pt.prototype.xv,Pt.prototype.getFromPortIdForLinkData=Pt.prototype.Ax,Pt.prototype.setToKeyForLinkData=Pt.prototype.Bv,Pt.prototype.getToKeyForLinkData=Pt.prototype.Cx,Pt.prototype.setFromKeyForLinkData=Pt.prototype.wv,Pt.prototype.getFromKeyForLinkData=Pt.prototype.zx,Pt.prototype.clear=Pt.prototype.clear;var Kd=Object.freeze([]);Pt.className="GraphLinksModel",Qn.GraphLinksModel=Pt,rt.constructGraphLinksModel=rt.constructGraphLinksModel=function(){return new Pt},rt.initDiagramModel=Zv=function(){return new Pt};function Ni(t,e){rt.call(this),this.Ke="parent",this.Nm=!1,this.nj="parentLinkCategory",t!==void 0&&(Bt(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}V(Ni,rt),Ni.constructGraphLinksModel=rt.constructGraphLinksModel,Ni.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.Ke=this.Ke,t.Nm=this.Nm,t.nj=this.nj},s=Ni.prototype,s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.np();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Xi(r)}}return e},s.rm=function(){var t=rt.prototype.rm.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},s.gp=function(t){rt.prototype.gp.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},s.fp=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&I("applyIncrementalJson cannot change Model properties"),rt.prototype.fp.call(this,t)},s.Vl=function(t){return t},s.mh=function(t){if(t!==null){var e=this.Ke;if(e!==""&&(e=se(t,e),e!==void 0)){if(Rs(e))return e;I("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},s.qe=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Ke;if(i!=="")if(e=this.Vl(e),this.lb(t)){var n=se(t,i);n!==e&&(gr(this,n,t),Kt(t,i,e),this.gc(e)===null&&dr(this,e,t),pe(this,"nodeParentKey",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else Kt(t,i,e)}},s.ss=function(t){if(t===null)return"";var e=this.nj;return e===""||(e=se(t,e),e===void 0)?"":typeof e=="string"?e:(I("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Ni.prototype.getLinkCategoryForData=function(t){return this.ss(t)},Ni.prototype.Ms=function(t,e){if(t!==null){var i=this.nj;if(i!=="")if(this.lb(t)){var n=se(t,i);n===void 0&&(n=""),n!==e&&(Kt(t,i,e),pe(this,"parentLinkCategory",Jt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else Kt(t,i,e)}},Ni.prototype.setLinkCategoryForData=function(t,e){this.Ms(t,e)},Ni.prototype.copyNodeData=function(t){return t===null?null:(t=rt.prototype.copyNodeData.call(this,t),this.Jj||this.Ke===""||se(t,this.Ke)===void 0||Kt(t,this.Ke,void 0),t)},Ni.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.km(t,i);return}if(e===this.nodeCategoryProperty){this.jm(t,i);return}if(e===this.nodeParentKeyProperty){this.qe(t,i);return}}var n=se(t,e);n!==i&&(Kt(t,e,i),this.Fs(t,e,n,i))},s=Ni.prototype,s.jp=function(t,e){rt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.qv(i.value,t,e)},s.qv=function(t,e,i){if(this.mh(t)===e){var n=this.Ke;Kt(t,n,i),pe(this,"nodeParentKey",Jt,n,t,e,i),typeof n=="string"&&this.Ma(t,n)}},s.fm=function(t){rt.prototype.fm.call(this,t),t=this.wa(t);var e=Hf(this,t);if(e!==null){var i=Vt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)&&this.mh(n)===t){var r=this.Ke;pe(this,"nodeParentKey",Jt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)}}for(e=0;e<i.length;e++)gr(this,t,i[e]);zt(i)}},s.em=function(t){rt.prototype.em.call(this,t);var e=this.mh(t);e=this.Vl(e),this.gc(e)===null&&dr(this,e,t)},s.qp=function(t){rt.prototype.qp.call(this,t);var e=this.mh(t);gr(this,e,t)},s.lm=function(t,e){rt.prototype.lm.call(this,t,e),this.Ms(e,this.ss(t)),this.qe(e,this.mh(t))},s.Tl=function(){return!0},s.xs=function(){return!0},B.Object.defineProperties(Ni.prototype,{nodeParentKeyProperty:{get:function(){return this.Ke},set:function(t){var e=this.Ke;e!==t&&(this.Ke=t,this.g("nodeParentKeyProperty",e,t))}},Jj:{get:function(){return this.Nm},set:function(t){this.Nm!==t&&(this.Nm=t)}},parentLinkCategoryProperty:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Ni.prototype.setParentLinkCategoryForNodeData=Ni.prototype.Ms,Ni.prototype.getParentLinkCategoryForNodeData=Ni.prototype.ss,Ni.prototype.setParentKeyForNodeData=Ni.prototype.qe,Ni.prototype.getParentKeyForNodeData=Ni.prototype.mh,Ni.className="TreeModel",Qn.TreeModel=Ni;function Zt(t){Wt.call(this),this.lw=this.Zm=this.kc=0,this.Wp=360,this.kw=qn,this.Ti=0,this.Zv=new N,this.Jp=this.me=0,this.Xr=new Qf,this.gt=this.mj=0,this.wy=600,this.eo=NaN,this.Cm=1,this.ro=0,this.ul=360,this.Qb=qn,this.K=Ci,this.md=bh,this.gd=_v,this.tf=6,this.Nn=bd,t&&Object.assign(this,t)}V(Zt,Wt),Zt.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.eo=this.eo,t.Cm=this.Cm,t.ro=this.ro,t.ul=this.ul,t.Qb=this.Qb,t.K=this.K,t.md=this.md,t.gd=this.gd,t.tf=this.tf,t.Nn=this.Nn},Zt.prototype.qb=function(t){t.classType===Zt?t===Qd||t===qd||t===Jd||t===Zd||t===bh?this.sorting=t:t===Cl||t===qh||t===Ci||t===zs?this.direction=t:t===ls||t===Bs||t===qn||t===bn?this.arrangement=t:(t===Tu||t===bd)&&(this.nodeDiameterFormula=t):Wt.prototype.qb.call(this,t)},Zt.prototype.createNetwork=function(){return new ta(this)},Zt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var i=new tt,n=this.sort(e),r,o,l=this.Jp,h=this.arrangement,a=this.nodeDiameterFormula,f=this.radius;(!isFinite(f)||0>=f)&&(f=NaN);var p=this.aspectRatio;(!isFinite(p)||0>=p)&&(p=1);var d=this.startAngle;isFinite(d)||(d=0);var y=this.sweepAngle;if((!isFinite(y)||360<y||1>y)&&(y=360),e=this.spacing,isFinite(e)||(e=NaN),h===bn&&a===Tu?h=qn:h===bn&&a!==Tu&&(h=this.arrangement),(this.direction===Cl||this.direction===qh)&&this.sorting!==bh){for(a=0;!(a>=n.length)&&(t.add(n.M(a)),!(a+1>=n.length));a+=2)i.add(n.M(a+1));this.direction===Cl?(this.arrangement===bn&&t.reverse(),n=new tt,n.addAll(t),n.addAll(i)):(this.arrangement===bn&&i.reverse(),n=new tt,n.addAll(i),n.addAll(t))}a=n.length;for(var m=o=r=0;m<n.length;m++){var x=d+y*o*(this.direction===Ci?1:-1)/a,M=n.M(m).diameter;isNaN(M)&&(M=Vs(n.M(m),x)),360>y&&(m===0||m===n.length-1)&&(M/=2),r+=M,o++}if(isNaN(f)||h===bn){if(isNaN(e)&&(e=6),h!==qn&&h!==bn){for(o=-1/0,l=0;l<a;l++)m=n.M(l),r=n.M(l===a-1?0:l+1),isNaN(m.diameter)&&Vs(m,0),isNaN(r.diameter)&&Vs(r,0),o=Math.max(o,(m.diameter+r.diameter)/2);l=o+e,h===ls?f=(o+e)/(2*Math.PI/a):f=Wd(this,l*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180)}else f=Wd(this,r+(360<=y?a:a-1)*(h!==bn?e:1.6*e),p,d*Math.PI/180,y*Math.PI/180);o=f*p}else if(o=f*p,m=bv(this,f,o,d*Math.PI/180,y*Math.PI/180),isNaN(e))(h===qn||h===bn)&&(e=(m-r)/(360<=y?a:a-1));else if(h===qn||h===bn)m=(m-r)/(360<=y?a:a-1),m<e?(f=Wd(this,r+e*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180),o=f*p):e=m;else{for(l=-1/0,r=0;r<a;r++)x=n.M(r),M=n.M(r===a-1?0:r+1),isNaN(x.diameter)&&Vs(x,0),isNaN(M.diameter)&&Vs(M,0),l=Math.max(l,(x.diameter+M.diameter)/2);l+=e,r=Wd(this,l*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180),r>f?(f=r,o=f*p):l=m/(360<=y?a:a-1)}if(this.kw=h,this.kc=f,this.Zm=p,this.lw=d,this.Wp=y,this.Ti=e,this.me=o,this.Jp=l,e=n,n=this.kw,h=this.kc,f=this.lw,p=this.Wp,d=this.Ti,y=this.me,a=this.Jp,this.direction!==Cl&&this.direction!==qh||n!==bn)if(this.direction===Cl||this.direction===qh){switch(l=0,n){case Bs:l=180*$d(this,h,y,f,a)/Math.PI;break;case qn:a=e=0,l=t.first(),l!==null&&(e=Vs(l,Math.PI/2)),l=i.first(),l!==null&&(a=Vs(l,Math.PI/2)),l=180*$d(this,h,y,f,d+(e+a)/2)/Math.PI;break;case ls:l=p/e.length}if(this.direction===Cl){switch(n){case Bs:Zf(this,t,f,zs);break;case qn:Jf(this,t,f,zs);break;case ls:$f(this,t,p/2,f,zs)}switch(n){case Bs:Zf(this,i,f+l,Ci);break;case qn:Jf(this,i,f+l,Ci);break;case ls:$f(this,i,p/2,f+l,Ci)}}else{switch(n){case Bs:Zf(this,i,f,zs);break;case qn:Jf(this,i,f,zs);break;case ls:$f(this,i,p/2,f,zs)}switch(n){case Bs:Zf(this,t,f+l,Ci);break;case qn:Jf(this,t,f+l,Ci);break;case ls:$f(this,t,p/2,f+l,Ci)}}}else switch(n){case Bs:Zf(this,e,f,this.direction);break;case qn:Jf(this,e,f,this.direction);break;case ls:$f(this,e,p,f,this.direction);break;case bn:Zk(this,e,p,f,this.direction)}else Zk(this,e,p,f-p/2,Ci)}this.updateParts(),this.network=null,this.isValidLayout=!0};function $f(t,e,i,n,r){var o=t.Wp,l=t.kc;t=t.me,n=n*Math.PI/180,i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=n+(r===Ci?a*i/(360<=o?h:h-1):-(a*i)/h),p=e.M(a),d=l*Math.tan(f)/t;d=Math.sqrt((l*l+t*t*d*d)/(1+d*d)),p.centerX=d*Math.cos(f),p.centerY=d*Math.sin(f),p.actualAngle=180*f/Math.PI}}function Jf(t,e,i,n){var r=t.kc,o=t.me,l=t.Ti;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=e.M(a),p=e.M(a===h-1?0:a+1),d=o*Math.sin(i);f.centerX=r*Math.cos(i),f.centerY=d,f.actualAngle=180*i/Math.PI,isNaN(f.diameter)&&Vs(f,0),isNaN(p.diameter)&&Vs(p,0),f=$d(t,r,o,n===Ci?i:-i,(f.diameter+p.diameter)/2+l),i+=n===Ci?f:-f}}function Zf(t,e,i,n){var r=t.kc,o=t.me,l=t.Jp;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=e.M(a);f.centerX=r*Math.cos(i),f.centerY=o*Math.sin(i),f.actualAngle=180*i/Math.PI,f=$d(t,r,o,n===Ci?i:-i,l),i+=n===Ci?f:-f}}function Zk(t,e,i,n,r){var o=t.Wp;if(t.mj=0,t.Xr=new Qf,360>i){for(o=n+(r===Ci?o:-o);0>o;)o+=360;o%=360,180<o&&(o-=360),o*=Math.PI/180,t.gt=o,qk(t,e,i,n,r)}else Qk(t,e,i,n,r);t.Xr.commit(e)}function Qk(t,e,i,n,r){var o=t.kc,l=t.Ti,h=t.Zm,a=o*Math.cos(n*Math.PI/180),f=t.me*Math.sin(n*Math.PI/180),p=e.Fa();if(p.length===3)p[0].centerX=o,p[0].centerY=0,p[1].centerX=p[0].centerX-p[0].width/2-p[1].width/2-l,p[1].y=p[0].y,p[2].centerX=(p[0].centerX+p[1].centerX)/2,p[2].y=p[0].y-p[2].height-l;else if(p.length===4)p[0].centerX=o,p[0].centerY=0,p[2].centerX=-p[0].centerX,p[2].centerY=p[0].centerY,p[1].centerX=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-l,p[3].centerX=0,p[3].y=Math.max(p[0].y+p[0].height+l,p[2].y+p[2].height+l);else{o=N.alloc();for(var d=0;d<p.length&&(p[d].centerX=a,p[d].centerY=f,!(d>=p.length-1));d++)bk(t,a,f,p,d,r,o)||tP(t,a,f,p,d,r,o),a=o.x,f=o.y;if(N.free(o),t.mj++,!(23<t.mj)){a=p[0].centerX,f=p[0].centerY,o=p[p.length-1].centerX,d=p[p.length-1].centerY;var y=Math.abs(a-o)-((p[0].width+p[p.length-1].width)/2+l),m=Math.abs(f-d)-((p[0].height+p[p.length-1].height)/2+l);l=0,1>Math.abs(m)?Math.abs(a-o)<(p[0].width+p[p.length-1].width)/2&&(l=0):l=0<m?m:1>Math.abs(y)?0:y,a=Math.abs(o)>Math.abs(d)?0<o!=f>d:0<d!=a<o,(a=r===Ci?a:!a)&&(l=-Math.abs(l),l=Math.min(l,-p[p.length-1].width),l=Math.min(l,-p[p.length-1].height)),t.Xr.compare(l,p),1<Math.abs(l)&&(t.kc=8>t.mj?t.kc-l/(2*Math.PI):5>p.length&&10<l?t.kc/2:t.kc-(0<l?1.7:-2.3),t.me=t.kc*h,Qk(t,e,i,n,r))}}}function qk(t,e,i,n,r){for(var o=t.kc,l=t.me,h=t.Zm,a=o*Math.cos(n*Math.PI/180),f=l*Math.sin(n*Math.PI/180),p=N.alloc(),d=e.Fa(),y=0;y<d.length&&(d[y].centerX=a,d[y].centerY=f,!(y>=d.length-1));y++)bk(t,a,f,d,y,r,p)||tP(t,a,f,d,y,r,p),a=p.x,f=p.y;if(N.free(p),t.mj++,!(23<t.mj)){if(a=Math.atan2(f,a),a=r===Ci?t.gt-a:a-t.gt,a=Math.abs(a)<Math.abs(a-2*Math.PI)?a:a-2*Math.PI,o=a*(o+l)/2,l=t.Xr,Math.abs(o)<Math.abs(l.Pl))for(l.Pl=o,l.mk=[],l.tm=[],a=0;a<d.length;a++)l.mk[a]=d[a].bounds.x,l.tm[a]=d[a].bounds.y;1<Math.abs(o)&&(t.kc=8>t.mj?t.kc-o/(2*Math.PI):t.kc-(0<o?1.7:-2.3),t.me=t.kc*h,qk(t,e,i,n,r))}}function bk(t,e,i,n,r,o,l){var h=t.kc,a=t.me,f=0;t=(n[r].width+n[r+1].width)/2+t.Ti;var p=!1;if(0<=i!=(o===Ci)){if(o=e+t,o>h){if(o=e-t,o<-h)return l.x=o,l.y=f,!1;p=!0}}else if(o=e-t,o<-h){if(o=e+t,o>h)return l.x=o,l.y=f,!1;p=!0}return f=Math.sqrt(1-Math.min(1,o*o/(h*h)))*a,0>i!==p&&(f=-f),Math.abs(i-f)>(n[r].height+n[r+1].height)/2?(l.x=o,l.y=f,!1):(l.x=o,l.y=f,!0)}function tP(t,e,i,n,r,o,l){var h=t.kc,a=t.me,f=0;if(t=(n[r].height+n[r+1].height)/2+t.Ti,n=!1,0<=e!=(o===Ci)){if(o=i-t,o<-a){if(o=i+t,o>a){l.x=f,l.y=o;return}n=!0}}else if(o=i+t,o>a){if(o=i-t,o<-a){l.x=f,l.y=o;return}n=!0}f=Math.sqrt(1-Math.min(1,o*o/(a*a)))*h,0>e!==n&&(f=-f),l.x=f,l.y=o}Zt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Zt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new N(0,0):(i.x=this.arrangementOrigin.x+this.kc,i.y=this.arrangementOrigin.y+this.me);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Va(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.re(i.re(t)),this.group.move(e),this.Zv=e.re(t))},Zt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function bv(t,e,i,n,r){var o=t.wy;if(.001>Math.abs(t.Zm-1))return n!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,h=n!==void 0&&r!==void 0?r/(o+1):Math.PI/(2*(o+1)),a=0,f=0;f<=o;f++){n!==void 0&&r!==void 0?a=n+f*r/o:a=f*Math.PI/(2*o);var p=Math.sin(a);l+=Math.sqrt(1-t*t*p*p)*h}return n!==void 0&&r!==void 0?(e>i?e:i)*l:4*(e>i?e:i)*l}function Wd(t,e,i,n,r){return e/(n!==void 0&&r!==void 0?bv(t,1,i,n,r):bv(t,1,i))}function $d(t,e,i,n,r){if(.001>Math.abs(t.Zm-1))return r/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var h=0;;h++){var a=Math.sin(n+h*t);if(l+=(e>i?e:i)*Math.sqrt(1-o*o*a*a)*t,l>=r)return h*t}}Zt.prototype.sort=function(t){switch(this.sorting){case Jd:break;case Zd:t.reverse();break;case Qd:t.sort(this.comparer);break;case qd:t.sort(this.comparer),t.reverse();break;case bh:return this.ak(Oj(t));default:I("Invalid sorting type.")}return t};function Oj(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new tt;for(var n=0;n<t.length;n++){var r=-1,o=-1;if(n===0)for(var l=0;l<t.length;l++){var h=t.M(l).edgesCount;h>r&&(r=h,o=l)}else for(l=0;l<t.length;l++)h=e[l],h>r&&(r=h,o=l);for(i.add(t.M(o)),e[o]=-1,o=t.M(o),l=o.sourceEdges;l.next();)r=t.indexOf(l.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=e[r]&&e[r]++}return i}Zt.prototype.ak=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.M(i);e[i]=[];for(var r,o=n.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)r=t.indexOf(n.value.fromVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var l=[],h=[];n=[],r=new tt;for(var a=0,f=0;f<e.length;f++){var p=e[f].length;if(p===1)n.push(f);else if(p===0)r.add(t.M(f));else{if(a===0)i.push(f);else{for(var d=p=1/0,y=-1,m=[],x=0;x<i.length;x++)0>e[i[x]].indexOf(i[x===i.length-1?0:x+1])&&m.push(x===i.length-1?0:x+1);if(m.length===0)for(x=0;x<i.length;x++)m.push(x);for(x=0;x<m.length;x++){for(var M=m[x],k=e[f],S=0,C=0;C<l.length;C++){var T=o[l[C]],L=o[h[C]];if(T<L){var j=T;T=L}else j=L;if(j<M&&M<=T)for(L=0;L<k.length;L++){var A=k[L];0>i.indexOf(A)||j<o[A]&&o[A]<T||j===o[A]||T===o[A]||S++}else for(L=0;L<k.length;L++)A=k[L],0>i.indexOf(A)||j<o[A]&&o[A]<T&&j!==o[A]&&T!==o[A]&&S++}for(k=S,C=S=0;C<e[f].length;C++)j=i.indexOf(e[f][C]),0<=j&&(j=Math.abs(M-(j>=M?j+1:j)),S+=j<i.length+1-j?j:i.length+1-j);for(C=0;C<l.length;C++)j=o[l[C]],T=o[h[C]],j>=M&&j++,T>=M&&T++,j>T&&(L=T,T=j,j=L),T-j<(i.length+2)/2==(j<M&&M<=T)&&S++;(k<p||k===p&&S<d)&&(p=k,d=S,y=M)}for(i.splice(y,0,f),p=0;p<i.length;p++)o[i[p]]=p;for(p=0;p<e[f].length;p++)d=e[f][p],0<=i.indexOf(d)&&(l.push(f),h.push(d))}a++}}for(l=i.length;;){for(o=!0,h=0;h<n.length;h++)if(a=n[h],f=e[a][0],p=i.indexOf(f),0<=p){for(y=d=0;y<e[f].length;y++)m=i.indexOf(e[f][y]),0>m||m===p||(x=m>p?m-p:p-m,d+=m<p!=x>l-x?1:-1);i.splice(0>d?p:p+1,0,a),n.splice(h,1),h--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.M(i[e]));return r},B.Object.defineProperties(Zt.prototype,{radius:{get:function(){return this.eo},set:function(t){this.eo!==t&&(0<t||isNaN(t))&&(this.eo=t,this.C())}},aspectRatio:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&0<t&&(this.Cm=t,this.C())}},startAngle:{get:function(){return this.ro},set:function(t){this.ro!==t&&(this.ro=t,this.C())}},sweepAngle:{get:function(){return this.ul},set:function(t){this.ul!==t&&(0<t&&360>=t?this.ul=t:this.ul=360,this.C())}},arrangement:{get:function(){return this.Qb},set:function(t){this.Qb===t||t!==bn&&t!==qn&&t!==Bs&&t!==ls||(this.Qb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Ci&&t!==zs&&t!==Cl&&t!==qh||(this.K=t,this.C())}},sorting:{get:function(){return this.md},set:function(t){this.md===t||t!==Jd&&t!==Zd&&t!==Qd&&!qd&&t!==bh||(this.md=t,this.C())}},comparer:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t,this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf!==t&&(this.tf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.Nn},set:function(t){this.Nn===t||t!==bd&&t!==Tu||(this.Nn=t,this.C())}},actualXRadius:{get:function(){return this.kc}},actualYRadius:{get:function(){return this.me}},actualSpacing:{get:function(){return this.Ti}},actualCenter:{get:function(){return this.Zv}}});var qn=new Q(Zt,"ConstantSpacing",0),Bs=new Q(Zt,"ConstantDistance",1),ls=new Q(Zt,"ConstantAngle",2),bn=new Q(Zt,"Packed",3),Ci=new Q(Zt,"Clockwise",4),zs=new Q(Zt,"Counterclockwise",5),Cl=new Q(Zt,"BidirectionalLeft",6),qh=new Q(Zt,"BidirectionalRight",7),Jd=new Q(Zt,"Forwards",8),Zd=new Q(Zt,"Reverse",9),Qd=new Q(Zt,"Ascending",10),qd=new Q(Zt,"Descending",11),bh=new Q(Zt,"Optimized",12),bd=new Q(Zt,"Pythagorean",13),Tu=new Q(Zt,"Circular",14);Zt.className="CircularLayout",Zt.ConstantSpacing=qn,Zt.ConstantDistance=Bs,Zt.ConstantAngle=ls,Zt.Packed=bn,Zt.Clockwise=Ci,Zt.Counterclockwise=zs,Zt.BidirectionalLeft=Cl,Zt.BidirectionalRight=qh,Zt.Forwards=Jd,Zt.Reverse=Zd,Zt.Ascending=Qd,Zt.Descending=qd,Zt.Optimized=bh,Zt.Pythagorean=bd,Zt.Circular=Tu;function Qf(){this.Pl=-1/0,this.tm=this.mk=null}Qf.prototype.compare=function(t,e){if(0<t&&0>this.Pl||Math.abs(t)<Math.abs(this.Pl)&&!(0>t&&0<this.Pl))for(this.Pl=t,this.mk=[],this.tm=[],t=0;t<e.length;t++)this.mk[t]=e[t].bounds.x,this.tm[t]=e[t].bounds.y},Qf.prototype.commit=function(t){if(this.mk!==null&&this.tm!==null)for(var e=0;e<this.mk.length;e++){var i=t.M(e);i.x=this.mk[e],i.y=this.tm[e]}},Qf.className="VertexArrangement";function ta(t){_t.call(this,t)}V(ta,_t),ta.prototype.createVertex=function(){return new qf(this)},ta.prototype.createEdge=function(){return new tg(this)},ta.className="CircularNetwork";function qf(t){me.call(this,t),this.u=this.Si=NaN}V(qf,me);function Vs(t,e){var i=t.network;if(i===null)return NaN;if(i=i.layout,i===null)return NaN;if(i.arrangement===bn)if(i.nodeDiameterFormula===Tu)t.Si=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),i===0)return t.width;if(e===0)return t.height;t.Si=Math.min(t.height/i,t.width/e)}else t.Si=i.nodeDiameterFormula===Tu?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Si}B.Object.defineProperties(qf.prototype,{diameter:{get:function(){return this.Si},set:function(t){this.Si!==t&&(this.Si=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),qf.className="CircularVertex";function tg(t){$i.call(this,t)}V(tg,$i),tg.className="CircularEdge";function Ye(t){Wt.call(this),this.ah=null,this.An=0,this.$d=new ct(100,100).freeze(),this.Bm=!1,this.sf=!0,this.td=!1,this.dl=100,this.$m=1,this.Zf=1e3,this.In=10,this.fo=Math,this.Hk=.05,this.Gk=50,this.Ek=150,this.Fk=0,this.Vm=10,this.Um=5,t&&Object.assign(this,t)}V(Ye,Wt),Ye.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.$d.assign(this.$d),t.Bm=this.Bm,t.sf=this.sf,t.td=this.td,t.dl=this.dl,t.$m=this.$m,t.Zf=this.Zf,t.In=this.In,t.fo=this.fo,t.Hk=this.Hk,t.Gk=this.Gk,t.Ek=this.Ek,t.Fk=this.Fk,t.Vm=this.Vm,t.Um=this.Um},Ye.prototype.createNetwork=function(){return new Lu(this)},Ye.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Ko();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Cu(),this.An=0,this.needsClusterLayout()){e=this.network,i=e.by();for(var n=i.iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Vd=o.vertexes.count,o.sh=1,o.Hj=null,o.We=null}eP(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var h=l.count,a=!0;o=r=0;for(var f=Vt(),p=0;p<h+e.vertexes.count+2;p++)f[p]=null;h=0,l.reset();for(var d=z.alloc();l.next();)if(p=l.value,this.computeBounds(p,d),a)a=!1,r=d.x+d.width/2,o=d.y+d.height/2,f[0]=new N(d.x+d.width+n.width,d.y),f[1]=new N(d.x,d.y+d.height+n.height),h=2;else{var y=iP(f,h,r,o,d.width,d.height,n),m=f[y],x=new N(m.x+d.width+n.width,m.y),M=new N(m.x,m.y+d.height+n.height);for(y+1<h&&f.splice(y+1,0,null),f[y]=x,f[y+1]=M,h++,y=m.x-d.x,m=m.y-d.y,p=p.vertexes.iterator;p.next();)x=p.value,x.centerX+=y,x.centerY+=m}for(z.free(d),p=e.vertexes.iterator;p.next();)l=p.value,y=l.bounds,2>h?(r=y.x+y.width/2,o=y.y+y.height/2,f[0]=new N(y.x+y.width+n.width,y.y),f[1]=new N(y.x,y.y+y.height+n.height),h=2):(a=iP(f,h,r,o,y.width,y.height,n),d=f[a],m=new N(d.x+y.width+n.width,d.y),y=new N(d.x,d.y+y.height+n.height),a+1<h&&f.splice(a+1,0,null),f[a]=m,f[a+1]=y,h++,l.centerX=d.x+l.width/2,l.centerY=d.y+l.height/2);for(zt(f),n=i.iterator;n.next();){for(i=n.value,r=i.vertexes.iterator;r.next();)e.dh(r.value);for(i=i.edges.iterator;i.next();)e.Bo(i.value)}}rP(this,t),this.updateParts()}this.dl=t,this.network=null,this.isValidLayout=!0},Ye.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Xc(i)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},Ye.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.dd(n.bounds)}return e};function eP(t,e,i){if(Fj(t,e)){var n=t.Zf;t.Zf*=1+1/(e+1);var r=Ej(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,eP(t,e+1,i),rP(t,o),Aj(t,r),e=r.vertexes.Fa(),e.sort(function(l,h){return l===null||h===null||l===h?0:h.Vd-l.Vd}),i=0;i<e.length;i++)Dj(t,e[i]);t.Zf=n}}function Fj(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.ah=t.network.vertexes.Fa(),t=t.ah,t.sort(function(i,n){return i===null||n===null||i===n?0:n.Vd-i.Vd}),e=t.length-1;0<=e&&1>=t[e].Vd;)e--;return 1<t.length-e}function Ej(t,e){for(var i=t.network,n=new Lu(t),r=0;r<t.ah.length;r++){var o=t.ah[r];if(1<o.Vd){n.dh(o);var l=new oP;l.Rs=o.Vd,l.Ss=o.width,l.Qs=o.height,l.Sv=o.focus.x,l.Tv=o.focus.y,o.We===null&&(o.We=new tt),o.We.add(l),o.sv=o.We.count-1}else break}for(o=i.edges.iterator;o.next();){var h=o.value;r=h.fromVertex,l=h.toVertex,r.network===n&&l.network===n?n.Bo(h):r.network===n?(h=r.Hj,h===null&&(h=new tt,r.Hj=h),h.add(l),r.Vd--,r.sh+=l.sh):l.network===n&&(h=l.Hj,h===null&&(h=new tt,l.Hj=h),h.add(r),l.Vd--,l.sh+=r.sh)}for(r=n.edges.iterator;r.next();)o=r.value,o.length*=Math.max(1,O.sqrt((o.fromVertex.sh+o.toVertex.sh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){r=e.value;var a=r.Hj;if(a!==null&&0<a.count&&(l=r.We.M(r.We.count-1).Rs-r.Vd,!(0>=l))){for(var f=h=0,p=a.count-l;p<a.count;p++){var d=a.M(p),y=null;for(o=d.edges.iterator;o.next();){var m=o.value;if(m.Bx(d)===r){y=m;break}}y!==null&&(f+=y.length,h+=d.width*d.height)}o=r.centerX,a=r.centerY,p=r.width,d=r.height,y=r.focus,m=p*d,1>m&&(m=1),h=O.sqrt((h+m+f*f*4/(l*l))/m),l=(h-1)*p/2,h=(h-1)*d/2,r.bounds=new z(o-y.x-l,a-y.y-h,p+2*l,d+2*h),r.focus=new N(y.x+l,y.y+h)}}return t.network=n,i}function Aj(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,n.We!==null){var r=n.We.M(n.sv);n.Vd=r.Rs;var o=r.Sv,l=r.Tv;n.bounds=new z(n.centerX-o,n.centerY-l,r.Ss,r.Qs),n.focus=new N(o,l),n.sv--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}function Dj(t,e){var i=e.Hj;if(i!==null&&i.count!==0){var n=e.centerX,r=e.centerY,o=e.width,l=e.height;e.We!==null&&0<e.We.count&&(l=e.We.M(0),o=l.Ss,l=l.Qs),o=O.sqrt(o*o+l*l)/2;for(var h=!1,a=l=0,f=0,p=e.vertexes.iterator;p.next();){var d=p.value;1>=d.Vd?a++:(h=!0,f++,l+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(a!==0){for(0<f&&(l/=f),f=e=0,e=h?2*Math.PI/(a+1):2*Math.PI/a,a%2===0&&(f=e/2),1<i.count&&i.sort(function(m,x){return m===null||x===null||m===x?0:x.width*x.height-m.width*m.height}),h=a%2===0?0:1,i=i.iterator;i.next();)if(a=i.value,!(1<a.Vd||t.isFixed(a))){for(p=null,d=a.edges.iterator;d.next();){p=d.value;break}d=a.width;var y=a.height;d=O.sqrt(d*d+y*y)/2,p=o+p.length+d,d=l+(e*(h/2>>1)+f)*(h%2===0?1:-1),a.centerX=n+p*Math.cos(d),a.centerY=r+p*Math.sin(d),h++}}}}function iP(t,e,i,n,r,o,l){var h=9e19,a=-1,f=0;t:for(;f<e;f++){var p=t[f],d=p.x-i,y=p.y-n;if(d=d*d+y*y,d<h){for(y=f-1;0<=y;y--)if(t[y].y>p.y&&t[y].x-p.x<r+l.width)continue t;for(y=f+1;y<e;y++)if(t[y].x>p.x&&t[y].y-p.y<o+l.height)continue t;a=f,h=d}}return a}Ye.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ye.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.Mu();e.next();){var i=e.value;if(i.category==="Comment"&&i.isVisible()){var n=this.network.ki(i);n===null&&(n=this.network.Bl(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){i=o;break}}if(i===null){for(r=n.sourceEdges;r.next();)if(o=r.value,o.fromVertex===t){i=o;break}}i===null&&(i=this.network.Zj(t,n,null)),i.length=this.defaultCommentSpringLength}}};function nP(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var o=e.bounds,l=o.x;e=o.y;var h=o.width;return o=o.height,n+r<l?t>e+o?(i=n+r-l,t=t-e-o,O.sqrt(i*i+t*t)):t+i<e?(n=n+r-l,t=t+i-e,O.sqrt(n*n+t*t)):l-(n+r):n>l+h?t>e+o?(i=n-l-h,t=t-e-o,O.sqrt(i*i+t*t)):t+i<e?(n=n-l-h,t=t+i-e,O.sqrt(n*n+t*t)):n-(l+h):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function rP(t,e){for(t.ah=null,e=t.An+e;t.An<e&&(t.An++,Ij(t)););t.ah=null}function Ij(t){t.ah===null&&(t.ah=t.network.vertexes.Fa());var e=t.ah;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,o=i=i.centerY,l=1;l<e.length;l++){var h=e[l];h.forceX=0,h.forceY=0;var a=h.centerX;h=h.centerY,n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,h),o=Math.max(o,h)}(r=r-n>o-i)?e.sort(function(M,k){return M===null||k===null||M===k?0:M.centerX-k.centerX}):e.sort(function(M,k){return M===null||k===null||M===k?0:M.centerY-k.centerY}),i=t.Zf;var f=n=h=0;for(o=0;o<e.length;o++){l=e[o],n=l.bounds,h=l.focus,a=n.x+h.x;var p=n.y+h.y;n=l.charge*t.electricalFieldX(a,p),f=l.charge*t.electricalFieldY(a,p),n+=l.mass*t.gravitationalFieldX(a,p),f+=l.mass*t.gravitationalFieldY(a,p),l.forceX+=n,l.forceY+=f;for(var d=o+1;d<e.length;d++){var y=e[d];if(y!==l){n=y.bounds,h=y.focus,f=n.x+h.x;var m=n.y+h.y;if(a-f>i||f-a>i){if(r)break}else if(p-m>i||m-p>i){if(!r)break}else{var x=nP(l,y);1>x?(n=t.randomNumberGenerator,n===null&&(t.randomNumberGenerator=n=new eg),x=n.random(),h=n.random(),a>f?(n=Math.abs(y.bounds.right-l.bounds.x),n=(1+n)*x):a<f?(n=Math.abs(y.bounds.x-l.bounds.right),n=-(1+n)*x):(n=Math.max(y.width,l.width),n=(1+n)*x-n/2),p>m?(f=Math.abs(y.bounds.bottom-l.bounds.y),f=(1+f)*h):a<f?(f=Math.abs(y.bounds.y-l.bounds.bottom),f=-(1+f)*h):(f=Math.max(y.height,l.height),f=(1+f)*h-f/2)):(h=-(l.charge*y.charge)/(x*x),n=(f-a)/x*h,f=(m-p)/x*h),l.forceX+=n,l.forceY+=f,y.forceX-=n,y.forceY-=f}}}}for(r=t.network.edges.iterator;r.next();)h=r.value,i=h.fromVertex,o=h.toVertex,l=i.bounds,a=i.focus,n=l.x+a.x,l=l.y+a.y,p=o.bounds,d=o.focus,a=p.x+d.x,p=p.y+d.y,d=nP(i,o),1>d?(d=t.randomNumberGenerator,d===null&&(t.randomNumberGenerator=d=new eg),h=d.random(),d=d.random(),n=(n>a?1:-1)*(1+(o.width>i.width?o.width:i.width))*h,f=(l>p?1:-1)*(1+(o.height>i.height?o.height:i.height))*d):(h=h.stiffness*(d-h.length),n=(a-n)/d*h,f=(p-l)/d*h),i.forceX+=n,i.forceY+=f,o.forceX-=n,o.forceY-=f;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}Ye.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},Ye.prototype.moveFixedVertex=function(){},Ye.prototype.commitLayout=function(){this.yv(),this.commitNodes(),this.isRouting&&this.commitLinks()},Ye.prototype.yv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=$e,e.toSpot=$e)}},Ye.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=z.alloc();this.computeBounds(this.network,i),e=this.arrangementOrigin,t=e.x-i.x,e=e.y-i.y,z.free(i)}i=z.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;(t!==0||e!==0)&&(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}z.free(i)},Ye.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ye.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Hk:t},Ye.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Gk:t},Ye.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Ek:t},Ye.prototype.electricalFieldX=function(){return 0},Ye.prototype.electricalFieldY=function(){return 0},Ye.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Fk:t},Ye.prototype.gravitationalFieldX=function(){return 0},Ye.prototype.gravitationalFieldY=function(){return 0},Ye.prototype.isFixed=function(t){return t.isFixed},B.Object.defineProperties(Ye.prototype,{currentIteration:{get:function(){return this.An}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.Bm},set:function(t){this.Bm!==t&&(this.Bm=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},maxIterations:{get:function(){return this.dl},set:function(t){this.dl!==t&&0<=t&&(this.dl=t,this.C())}},epsilonDistance:{get:function(){return this.$m},set:function(t){this.$m!==t&&0<t&&(this.$m=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.In},set:function(t){this.In!==t&&1<t&&(this.In=t,this.C())}},randomNumberGenerator:{get:function(){return this.fo},set:function(t){this.fo!==t&&(t!==null&&typeof t.random!="function"&&I('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.fo=t)}},defaultSpringStiffness:{get:function(){return this.Hk},set:function(t){this.Hk!==t&&(this.Hk=t,this.C())}},defaultSpringLength:{get:function(){return this.Gk},set:function(t){this.Gk!==t&&(this.Gk=t,this.C())}},defaultElectricalCharge:{get:function(){return this.Ek},set:function(t){this.Ek!==t&&(this.Ek=t,this.C())}},defaultGravitationalMass:{get:function(){return this.Fk},set:function(t){this.Fk!==t&&(this.Fk=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,this.C())}}}),Ye.className="ForceDirectedLayout";function oP(){this.Tv=this.Sv=this.Qs=this.Ss=this.Rs=0}oP.className="ForceDirectedSubnet";function Lu(t){_t.call(this,t)}V(Lu,_t),Lu.prototype.createVertex=function(){return new bf(this)},Lu.prototype.createEdge=function(){return new tc(this)},Lu.className="ForceDirectedNetwork";function bf(t){me.call(this,t),this.ia=!1,this.Ha=this.u=NaN,this.sh=this.Vd=this.V=this.F=0,this.We=this.Hj=null,this.sv=0}V(bf,me),B.Object.defineProperties(bf.prototype,{isFixed:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}}}),bf.className="ForceDirectedVertex";function tc(t){$i.call(this,t),this.j=this.m=NaN}V(tc,$i),B.Object.defineProperties(tc.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),tc.className="ForceDirectedEdge";function eg(){var t=0;this.seed=t,this.gy=48271,this.iy=2147483647,this.Q=44488.07041494893,this.jy=3399,this.hy=1/2147483647,this.random()}eg.prototype.random=function(){var t=this.seed%this.Q*this.gy-this.seed/this.Q*this.jy;return 0<t?this.seed=t:this.seed=t+this.iy,this.seed*this.hy},eg.className="RandomNumberGenerator";function It(t){Wt.call(this),this.jc=this.ie=25,this.K=0,this.Dk=sg,this.Zk=lg,this.Qk=ug,this.bj=4,this.rk=hg,this.bg=15,this.sf=!0,this.Cn=4,this.Ra=this.Iq=this.Ia=-1,this.Md=this.Hn=0,this.Ta=this.Kd=this.Ld=this.he=this.sc=null,this.Kn=0,this.Jn=this.kj=null,this.le=0,this.fl=null,this.Rf=new N,this.He=[],this.He.length=100,this.xw=this.ve=0,t&&Object.assign(this,t)}V(It,Wt),It.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.ie=this.ie,t.jc=this.jc,t.K=this.K,t.Dk=this.Dk,t.Zk=this.Zk,t.Qk=this.Qk,t.bj=this.bj,t.rk=this.rk,t.bg=this.bg,t.sf=this.sf,t.Cn=this.Cn,t.ve=this.ve},It.prototype.qb=function(t){t.classType===It?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:I("Unknown enum value: "+t):Wt.prototype.qb.call(this,t)},It.prototype.createNetwork=function(){return new ia(this)},It.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Iq=-1,this.Md=this.Hn=0,this.fl=this.Jn=this.kj=null,t=0;t<this.He.length;t++)this.He[t]=null;if(0<this.network.vertexes.count){for(this.network.Ko(),this.cycleRemoveOption!==ic&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ia=-1,this.assignLayers(),t.reset();t.next();)this.Ia=Math.max(this.Ia,t.value.layer);this.cycleRemoveOption===ic&&this.removeCycles(),t=this.network;for(var e=[],i=t.edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){n=e[i];var r=n.fromVertex,o=n.toVertex;if(!(n.valid||(r.node===null&&r.data===null||o.node===null&&o.data===null)&&r.layer===o.layer)){var l=0,h=0,a=0,f=0;if(n.link!==null){if(h=n.link,h===null)continue;var p=r.node;if(l=o.node,p===null||l===null)continue;var d=h.fromNode;a=h.toNode;for(var y=h.fromPort;y!==null&&!y.Ed();)y=y.panel;for(h=h.toPort;h!==null&&!h.Ed();)h=h.panel;if(n.rev){f=d;var m=y;d=a,y=h,a=f,h=m}var x=r.focus;f=o.focus;var M=n.rev?o.bounds:r.bounds;m=N.alloc(),p!==d?M.w()&&d.isVisible()?d.actualBounds.w()?(is(d,y,Rt,m),m.x+=d.actualBounds.x-M.x,m.y+=d.actualBounds.y-M.y):(is(d,y,Rt,m),m.w()||m.assign(x)):m.assign(x):M.w()?(is(d,y,Rt,m),m.w()||m.assign(x)):m.assign(x),d=n.rev?r.bounds:o.bounds,p=N.alloc(),l!==a?d.w()&&a.isVisible()?a.actualBounds.w()?(is(a,h,Rt,p),p.x+=a.actualBounds.x-d.x,p.y+=a.actualBounds.y-d.y):(is(a,h,Rt,p),p.w()||p.assign(f)):p.assign(f):d.w()?(is(a,h,Rt,p),p.w()||p.assign(f)):p.assign(f),this.K===90||this.K===270?(l=Math.round((m.x-x.x)/this.jc),a=m.x,h=Math.round((p.x-f.x)/this.jc),f=p.x):(l=Math.round((m.y-x.y)/this.jc),a=m.y,h=Math.round((p.y-f.y)/this.jc),f=p.y),N.free(m),N.free(p),n.portFromColOffset=l,n.portFromPos=a,n.portToColOffset=h,n.portToPos=f}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(m=r.layer,p=o.layer,d=0,M=n.link,M!==null){var k=M.fromPort,S=M.toPort;if(k!==null&&S!==null){var C=M.fromNode;if(y=M.toNode,C!==null&&y!==null){var T=og(this,!0),L=og(this,!1),j=this.setsPortSpots?T:M.computeSpot(!0,k);x=this.setsPortSpots?L:M.computeSpot(!1,S);var A=M.isOrthogonal;j.Zc()&&j.Hf(L)&&x.Zc()&&x.Hf(T)?d=0:(T=M.getLinkPoint(C,k,j,!0,A,y,S,N.alloc()),L=M.getLinkDirection(C,k,T,j,!0,A,y,S),N.free(T),j.ys()||L!==dP(this,n,!0)?this.setsPortSpots&&C!==null&&C.ports.count===1&&n.rev&&(d+=1):d+=1,j=M.getLinkPoint(y,S,x,!1,A,C,k,N.alloc()),M=M.getLinkDirection(y,S,j,x,!1,A,C,k),N.free(j),x.ys()||M!==dP(this,n,!1)?this.setsPortSpots&&y!==null&&y.ports.count===1&&n.rev&&(d+=2):d+=2)}}}if(y=d,d=y===1||y===3,(y=y===2||y===3)&&(x=t.createVertex(),x.node=null,x.Dj=1,x.layer=m,x.near=r,t.dh(x),r=t.Zj(r,x,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=l,r.portToColOffset=0,r.portFromPos=a,r.portToPos=0,r=x),M=1,d&&M--,m-p>M&&0<m){for(n.valid=!1,x=t.createVertex(),x.node=null,x.Dj=2,x.layer=m-1,t.dh(x),r=t.Zj(r,x,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=y?0:l,r.portToColOffset=0,r.portFromPos=y?0:a,r.portToPos=0,r=x,m--;m-p>M&&0<m;)x=t.createVertex(),x.node=null,x.Dj=3,x.layer=m-1,t.dh(x),r=t.Zj(r,x,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=x,m--;r=t.Zj(x,o,n.link),r.valid=!d,d&&(x.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=h,r.portFromPos=0,r.portToPos=f}else n.valid=!0}}for(t=this.sc=[],e=0;e<=this.Ia;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Iq=-1,i=this.Md=this.Hn=0;i<=this.Ia;i++)t[i]>t[this.Md]&&(this.Iq=t[i]-1,this.Md=i),t[i]<t[this.Hn]&&(this.Hn=i);for(this.fl=[],i=0;i<t.length;i++)this.fl[i]=[];for(e.reset();e.next();)t=e.value,this.fl[t.layer][t.index]=t;for(this.Ra=-1,t=0;t<=this.Ia;t++){for(e=Ys(this,t),i=0,n=this.sc[t],o=0;o<n;o++)r=e[o],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ra=Math.max(this.Ra,i-1),Us(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},It.prototype.linkMinLength=function(){return 1};function t1(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}It.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},It.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var i=e?t.ev:t.dv;return i!==null?i:(i=this.K,i===90||i===270?e?t.ev=t.focus.x/this.jc+1|0:t.dv=(t.bounds.width-t.focus.x)/this.jc+1|0:e?t.ev=t.focus.y/this.jc+1|0:t.dv=(t.bounds.height-t.focus.y)/this.jc+1|0)};function Di(t){t.kj===null&&(t.kj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.kj[e]=n.layer,e++,t.kj[e]=n.column,e++,t.kj[e]=n.index,e++}return t.kj}function Mn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function sP(t,e,i){var n=Ys(t,e),r=t.sc[e];(t.Jn===null||t.Jn.length<r*r)&&(t.Jn=[]);for(var o=t.Jn,l=0;l<r;l++){var h=0,a=n[l],f=a.near;if(f!==null&&f.layer===a.layer)if(a=f.index,a>l)for(var p=l+1;p<a;p++){var d=n[p];d.near===f&&d.Dj===f.Dj||h++}else for(p=l-1;p>a;p--)d=n[p],d.near===f&&d.Dj===f.Dj||h++;var y;if(0<=i)for(a=n[l].sourceEdgesArrayAccess,f=0;f<a.length;f++){var m=a[f];if(m.valid&&m.fromVertex.layer!==e)for(d=m.fromVertex.index,p=m.portToPos,m=m.portFromPos,y=f+1;y<a.length;y++){var x=a[y];if(x.valid&&x.fromVertex.layer!==e){var M=x.fromVertex.index,k=x.portToPos;x=x.portFromPos,p<k&&(d>M||d===M&&m>x)&&h++,k<p&&(M>d||M===d&&x>m)&&h++}}}if(0>=i){for(a=n[l].destinationEdgesArrayAccess,f=0;f<a.length;f++)if(m=a[f],m.valid&&m.toVertex.layer!==e)for(d=m.toVertex.index,p=m.portToPos,m=m.portFromPos,y=f+1;y<a.length;y++)x=a[y],x.valid&&x.toVertex.layer!==e&&(M=x.toVertex.index,k=x.portToPos,x=x.portFromPos,m<x&&(d>M||d===M&&p>k)&&h++,x<m&&(M>d||M===d&&k>p)&&h++)}for(o[l*r+l]=h,a=l+1;a<r;a++){var S=0,C=0;if(0<=i){h=n[l].sourceEdgesArrayAccess;var T=n[a].sourceEdgesArrayAccess;for(f=0;f<h.length;f++)if(m=h[f],m.valid&&m.fromVertex.layer!==e)for(d=m.fromVertex.index,m=m.portFromPos,y=0;y<T.length;y++)x=T[y],x.valid&&x.fromVertex.layer!==e&&(M=x.fromVertex.index,x=x.portFromPos,(d<M||d===M&&m<x)&&C++,(M<d||M===d&&x<m)&&S++)}if(0>=i){for(h=n[l].destinationEdgesArrayAccess,T=n[a].destinationEdgesArrayAccess,f=0;f<h.length;f++)if(m=h[f],m.valid&&m.toVertex.layer!==e)for(d=m.toVertex.index,p=m.portToPos,y=0;y<T.length;y++)x=T[y],x.valid&&x.toVertex.layer!==e&&(M=x.toVertex.index,k=x.portToPos,(d<M||d===M&&p<k)&&C++,(M<d||M===d&&k<p)&&S++)}o[l*r+a]=S,o[a*r+l]=C}}return Us(t,e,n),o}It.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ia;e++)for(var i=sP(this,e,1),n=this.sc[e],r=0;r<n;r++)for(var o=r;o<n;o++)t+=i[r*n+o];return t};function ig(t){for(var e=0,i=0;i<=t.Ia;i++){for(var n=t,r=i,o=Ys(n,r),l=n.sc[r],h=0,a=0;a<l;a++){var f=o[a].destinationEdgesArrayAccess;if(f!==null)for(var p=0;p<f.length;p++){var d=f[p];if(d.valid&&d.toVertex.layer!==r){var y=d.fromVertex.column+d.portFromColOffset,m=d.toVertex.column+d.portToColOffset;h+=(Math.abs(y-m)+1)*t1(d)}}}Us(n,r,o),e+=h}return e}It.prototype.normalize=function(){var t=1/0;this.Ra=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ra=Math.max(this.Ra,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ra-=t};function e1(t,e,i){for(var n=Ys(t,e),r=t.sc[e],o=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var f=null;0<=i&&(f=h.destinationEdgesArrayAccess);var p=0,d=0,y=h.near;if(y!==null&&y.layer===h.layer&&(p+=y.column-1,d++),a!==null)for(y=0;y<a.length;y++){h=a[y];var m=h.fromVertex;h.valid&&!h.rev&&m.layer!==e&&(p+=m.column,d++)}if(f!==null)for(a=0;a<f.length;a++)h=f[a],y=h.toVertex,h.valid&&!h.rev&&y.layer!==e&&(p+=y.column,d++);o[l]=d===0?-1:p/d}return Us(t,e,n),o}function lP(t,e,i){for(var n=Ys(t,e),r=t.sc[e],o=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var f=null;0<=i&&(f=h.destinationEdgesArrayAccess);var p=0,d=[],y=h.near;if(y!==null&&y.layer===h.layer&&(d[p]=y.column-1,p++),h=void 0,a!==null)for(y=0;y<a.length;y++){h=a[y];var m=h.fromVertex;h.valid&&!h.rev&&m.layer!==e&&(d[p]=m.column+h.portFromColOffset,p++)}if(f!==null)for(a=0;a<f.length;a++)h=f[a],y=h.toVertex,h.valid&&!h.rev&&y.layer!==e&&(d[p]=y.column+h.portToColOffset,p++);p===0?o[l]=-1:(d.sort(function(x,M){return x-M}),f=p>>1,o[l]=p&1?d[f]:d[f-1]+d[f]>>1)}return Us(t,e,n),o}function ec(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();){var h=l.value,a=h.toVertex,f=e.layer-a.layer;h=t.linkMinLength(h),f===h&&ec(t,a,i,n,r,o)}if(o)for(l=e.sourceEdges;l.next();)h=l.value,a=h.fromVertex,f=a.layer-e.layer,h=t.linkMinLength(h),f===h&&ec(t,a,i,n,r,o)}}function i1(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();)i1(t,l.value.toVertex,i,n,r,o);if(o)for(e=e.sourceEdges;e.next();)i1(t,e.value.fromVertex,i,n,r,o)}}It.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Dk){default:case o1:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;Rj(t)!==null;){for(r=uP(t);r!==null;)n[i]=r,i--,r.valid=!1,r=uP(t);for(r=hP(t);r!==null;)n[e]=r,e++,r.valid=!1,r=hP(t);r=null;for(var o=0,l=this.network.vertexes.iterator;l.next();){var h=l.value;if(h.valid){for(var a=0,f=h.destinationEdges;f.next();)f.value.toVertex.valid&&a++;f=0;for(var p=h.sourceEdges;p.next();)p.value.fromVertex.valid&&f++;(r===null||o<a-f)&&(r=h,o=a-f)}}r!==null&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.gm(e),e.rev=!0);break;case sg:for(n=this.network.vertexes.iterator;n.next();)t=n.value,t.Ll=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Kn=0,n.reset();n.next();)e=n.value,e.sourceEdges.count===0&&n1(this,e);for(n.reset();n.next();)e=n.value,e.Ll===-1&&n1(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,r=n.toVertex,o=r.finish,r.Ll<e.Ll&&i<o&&(this.network.gm(n),n.rev=!0));break;case ic:for(t=this.network,e=t.vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)i=e.value,r=n[i.layer],r===void 0?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if(r=n[i],!r||r.length===0)e++;else if(0<i)for(o=0;o<r.length;o++)r[o].layer-=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.layer<e.toVertex.layer&&(t.gm(e),e.rev=!0)}}};function Rj(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function uP(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function hP(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function n1(t,e){e.Ll=t.Kn,t.Kn++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;r.Ll===-1&&(n.forest=!0,n1(t,r))}e.finish=t.Kn,t.Kn++}It.prototype.assignLayers=function(){switch(this.Zk){case s1:aP(this);break;case l1:for(var t,e=this.network.vertexes.iterator;e.next();)t=cP(this,e.value),this.Ia=Math.max(t,this.Ia);for(e.reset();e.next();)t=e.value,t.layer=this.Ia-t.layer;break;default:case lg:for(aP(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&pP(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ia=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.Ia=Math.max(this.Ia,i.layer)}}};function aP(t){for(var e=t.network.vertexes.iterator;e.next();){var i=fP(t,e.value);t.Ia=Math.max(i,t.Ia)}}function fP(t,e){var i=0;if(e.layer===-1){for(var n=e.destinationEdges;n.next();){var r=n.value,o=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,fP(t,o)+r)}e.layer=i}else i=e.layer;return i}function cP(t,e){var i=0;if(e.layer===-1){for(var n=e.sourceEdges;n.next();){var r=n.value,o=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,cP(t,o)+r)}e.layer=i}else i=e.layer;return i}function pP(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)pP(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,o=0;o<r;o++){var l=n[o],h=l.fromVertex,a=l.toVertex;l=t.linkMinLength(l),h.layer-a.layer>l&&ec(t,h,0,-1,!0,!1)}for(ec(t,e,1,-1,!0,!0);e.component!==0;){for(o=0,n=1/0,h=0,a=null,l=t.network.vertexes.iterator;l.next();){var f=l.value;if(f.component===1){var p=0,d=!1,y=f.sourceEdgesArrayAccess;r=y.length;for(var m=0;m<r;m++){var x=y[m],M=x.fromVertex;p+=1,M.component!==1&&(o+=1,M=M.layer-f.layer,x=t.linkMinLength(x),n=Math.min(n,M-x))}for(y=f.destinationEdgesArrayAccess,r=y.length,m=0;m<r;m++)x=y[m].toVertex,--p,x.component!==1?--o:d=!0;(a===null||p<h)&&!d&&(a=f,h=p)}}if(0<o){for(i.reset();i.next();)r=i.value,r.component===1&&(r.layer+=n);e.component=0}else a.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(ec(t,e,1,-1,!0,!1);e.component!==0;){for(n=0,r=1/0,o=0,h=null,a=t.network.vertexes.iterator;a.next();)if(l=a.value,l.component===1){for(f=0,p=!1,y=l.sourceEdgesArrayAccess,d=y.length,m=0;m<d;m++)x=y[m].fromVertex,f+=1,x.component!==1?n+=1:p=!0;for(y=l.destinationEdgesArrayAccess,d=y.length,m=0;m<d;m++)x=y[m],M=x.toVertex,--f,M.component!==1&&(--n,M=l.layer-M.layer,x=t.linkMinLength(x),r=Math.min(r,M-x));(h===null||f>o)&&!p&&(h=l,o=f)}if(0>n){for(i.reset();i.next();)n=i.value,n.component===1&&(n.layer-=r);e.component=0}else h.component=0}}}function dP(t,e,i){return t.K===90?i&&!e.rev||!i&&e.rev?270:90:t.K===180?i&&!e.rev||!i&&e.rev?0:180:t.K===270?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}It.prototype.initializeIndices=function(){switch(this.Qk){default:case h1:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.sc[i],this.sc[i]++}break;case ug:for(t=this.network.vertexes.iterator,e=this.Ia;0<=e;e--)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&gP(this,i);break;case u1:for(t=this.network.vertexes.iterator,e=0;e<=this.Ia;e++)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&yP(this,i)}};function gP(t,e){var i=e.layer;for(e.index=t.sc[i],t.sc[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];r.portFromColOffset>o.portFromColOffset&&(i=!0,e[n]=o,e[n+1]=r)}}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.toVertex,n.index===-1&&gP(t,n))}function yP(t,e){var i=e.layer;e.index=t.sc[i],t.sc[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r.portToColOffset>o.portToColOffset&&(n=!0,e[i]=o,e[i+1]=r)}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.fromVertex,n.index===-1&&yP(t,n))}It.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=Di(this),i,n;for(i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)ng(this,n,1),An(this,n,1);var r=this.countCrossings();for(r<t&&(t=r,e=Di(this)),n=this.Ia;0<=n;n--)ng(this,n,-1),An(this,n,-1);r=this.countCrossings(),r<t&&(t=r,e=Di(this))}for(Mn(this,e),i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)ng(this,n,0),An(this,n,0);for(r=this.countCrossings(),r<t&&(t=r,e=Di(this)),n=this.Ia;0<=n;n--)ng(this,n,0),An(this,n,0);r=this.countCrossings(),r<t&&(t=r,e=Di(this))}Mn(this,e);var o,l,h;switch(this.rk){case a1:break;case f1:for(h=t+1;(n=this.countCrossings())<h;)for(h=n,i=this.Ia;0<=i;i--)for(l=0;l<=i;l++){for(o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,-1)||o;for(r=this.countCrossings(),r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,1)||o;for(r=this.countCrossings(),r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,1)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,-1)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,0)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,0)||o;r>=t?Mn(this,e):(t=r,e=Di(this))}break;default:case hg:for(i=this.Ia,l=0,h=t+1;(n=this.countCrossings())<h;){for(h=n,o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,-1)||o;for(r=this.countCrossings(),r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,1)||o;for(r=this.countCrossings(),r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,1)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,-1)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=An(this,n,0)||o;for(r>=t?Mn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=An(this,n,0)||o;r>=t?Mn(this,e):(t=r,e=Di(this))}}Mn(this,e)};function ng(t,e,i){var n=Ys(t,e),r=t.sc[e],o=lP(t,e,i),l=e1(t,e,i);for(i=0;i<r;i++)l[i]===-1&&(l[i]=n[i].column),o[i]===-1&&(o[i]=n[i].column);for(var h=!0,a;h;)for(h=!1,i=0;i<r-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&l[i+1]<l[i])&&(h=!0,a=o[i],o[i]=o[i+1],o[i+1]=a,a=l[i],l[i]=l[i+1],l[i+1]=a,a=n[i],n[i]=n[i+1],n[i+1]=a);for(i=o=0;i<r;i++)a=n[i],a.index=i,o+=t.nodeMinColumnSpace(a,!0),a.column=o,o+=1,o+=t.nodeMinColumnSpace(a,!1);Us(t,e,n)}function An(t,e,i){var n=Ys(t,e),r=t.sc[e];i=sP(t,e,i);var o,l=[];for(o=0;o<r;o++)l[o]=-1;var h=[];for(o=0;o<r;o++)h[o]=-1;for(var a=!1,f=!0;f;)for(f=!1,o=0;o<r-1;o++){var p=i[n[o].index*r+n[o+1].index],d=i[n[o+1].index*r+n[o].index],y=0,m=0,x=n[o].column,M=n[o+1].column,k=t.nodeMinColumnSpace(n[o],!0),S=t.nodeMinColumnSpace(n[o],!1),C=t.nodeMinColumnSpace(n[o+1],!0),T=t.nodeMinColumnSpace(n[o+1],!1);k=x-k+C,S=M-S+T;var L=n[o].sourceEdges.iterator;for(L.reset();L.next();)if(C=L.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C<o&&(y+=2*(o-C),m+=2*(o+1-C)),C===o+1&&(y+=1),C>o+1&&(y+=4*(C-o),m+=4*(C-(o+1)))}for(L=n[o].destinationEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C===o+1&&(m+=1)}for(L=n[o+1].sourceEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C<o&&(y+=2*(o+1-C),m+=2*(o-C)),C===o&&(m+=1),C>o+1&&(y+=4*(C-(o+1)),m+=4*(C-o))}for(L=n[o+1].destinationEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C===o&&(y+=1)}C=T=0,L=l[n[o].index];var j=h[n[o].index],A=l[n[o+1].index],Z=h[n[o+1].index];L!==-1&&(T+=Math.abs(L-x),C+=Math.abs(L-S)),j!==-1&&(T+=Math.abs(j-x),C+=Math.abs(j-S)),A!==-1&&(T+=Math.abs(A-M),C+=Math.abs(A-k)),Z!==-1&&(T+=Math.abs(Z-M),C+=Math.abs(Z-k)),(m<y-.5||m===y&&d<p-.5||m===y&&d===p&&C<T-.5)&&(f=a=!0,n[o].column=S,n[o+1].column=k,p=n[o],n[o]=n[o+1],n[o+1]=p)}for(o=0;o<r;o++)n[o].index=o;return Us(t,e,n),a}It.prototype.straightenAndPack=function(){if(this.ve===0){var t=(this.bg&1)!==0,e=(this.bg&_j)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.Ia;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(r.reset();r.next();)o=r.value,e=o.layer,n=o.column,o.column=(8*(this.Ra-i[e])>>1)+8*n;this.Ra*=8}if(this.bg&2)for(i=!0;i;){for(i=!1,e=this.Md+1;e<=this.Ia;e++)i=ea(this,e,1)||i;for(e=this.Md-1;0<=e;e--)i=ea(this,e,-1)||i;i=ea(this,this.Md,0)||i}if(this.bg&4){for(e=this.Md+1;e<=this.Ia;e++)r1(this,e,1);for(e=this.Md-1;0<=e;e--)r1(this,e,-1);r1(this,this.Md,0)}if(t&&(mP(this,-1),mP(this,1)),this.bg&2)for(i=!0;i;){for(i=!1,i=ea(this,this.Md,0)||i,e=this.Md+1;e<=this.Ia;e++)i=ea(this,e,0)||i;for(e=this.Md-1;0<=e;e--)i=ea(this,e,0)||i}}else Yj(this)};function ea(t,e,i){for(var n=!1;Bj(t,e,i);)n=!0;return n}function Bj(t,e,i){var n,r=Ys(t,e),o=t.sc[e],l=e1(t,e,-1);if(0<i)for(n=0;n<o;n++)l[n]=-1;var h=e1(t,e,1);if(0>i)for(n=0;n<o;n++)h[n]=-1;for(var a=!1,f=!0;f;)for(f=!1,n=0;n<o;n++){var p=r[n].column,d=t.nodeMinColumnSpace(r[n],!0),y=t.nodeMinColumnSpace(r[n],!1),m=0;0>n-1||p-r[n-1].column-1>d+t.nodeMinColumnSpace(r[n-1],!1)?m=p-1:m=p,d=n+1>=o||r[n+1].column-p-1>y+t.nodeMinColumnSpace(r[n+1],!0)?p+1:p;var x=y=0,M=0;if(0>=i)for(var k=r[n].sourceEdges.iterator;k.next();){var S=k.value,C=S.fromVertex;if(S.valid&&C.layer!==e){var T=t1(S),L=S.portFromColOffset;S=S.portToColOffset,C=C.column,y+=(Math.abs(p+S-(C+L))+1)*T,x+=(Math.abs(m+S-(C+L))+1)*T,M+=(Math.abs(d+S-(C+L))+1)*T}}if(0<=i)for(k=r[n].destinationEdges.iterator;k.next();)S=k.value,C=S.toVertex,S.valid&&C.layer!==e&&(T=t1(S),L=S.portFromColOffset,S=S.portToColOffset,C=C.column,y+=(Math.abs(p+L-(C+S))+1)*T,x+=(Math.abs(m+L-(C+S))+1)*T,M+=(Math.abs(d+L-(C+S))+1)*T);S=L=T=0,k=l[r[n].index],C=h[r[n].index],k!==-1&&(T+=Math.abs(k-p),L+=Math.abs(k-m),S+=Math.abs(k-d)),C!==-1&&(T+=Math.abs(C-p),L+=Math.abs(C-m),S+=Math.abs(C-d)),x<y||x===y&&L<T?(f=a=!0,r[n].column=m):(M<y||M===y&&S<T)&&(f=a=!0,r[n].column=d)}return Us(t,e,r),t.normalize(),a}function r1(t,e,i){var n=Ys(t,e),r=t.sc[e],o=lP(t,e,i),l=[];for(i=0;i<r;i++)l[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<r;i++){var h=n[i].column,a=t.nodeMinColumnSpace(n[i],!0),f=t.nodeMinColumnSpace(n[i],!1),p=0;if(l[i]===-1)if(i===0&&i===r-1)p=h;else if(i===0){var d=n[i+1].column;d-h===f+t.nodeMinColumnSpace(n[i+1],!0)?p=h-1:p=h}else i===r-1?(d=n[i-1].column,p=h-d===a+t.nodeMinColumnSpace(n[i-1],!1)?h+1:h):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,p=(a+f)/2|0);else i===0&&i===r-1?p=l[i]:i===0?(d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,p=Math.min(l[i],f)):i===r-1?(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,p=Math.max(l[i],a)):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,a<l[i]&&l[i]<f?p=l[i]:a>=l[i]?p=a:f<=l[i]&&(p=f));p!==h&&(o=!0,n[i].column=p)}Us(t,e,n),t.normalize()}function zj(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),l=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(--i.column,t=!0);return t}function Vj(t,e){var i=e+1,n,r=[],o=[];for(n=0;n<=t.Ia;n++)r[n]=!1,o[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){n=l.value;var h=n.column-t.nodeMinColumnSpace(n,!0),a=n.column+t.nodeMinColumnSpace(n,!1);h<=e&&a>=e&&(r[n.layer]=!0),h<=i&&a>=i&&(o[n.layer]=!0)}for(h=!0,i=!1,n=0;n<=t.Ia;n++)h=h&&!(r[n]&&o[n]);if(h)for(l.reset();l.next();)t=l.value,t.column>e&&(--t.column,i=!0);return i}function mP(t,e){for(var i=0;i<=t.Ra;i++)for(;zj(t,i););for(t.normalize(),i=0;i<t.Ra;i++)for(;Vj(t,i););t.normalize();var n;if(0<e)for(i=0;i<=t.Ra;i++){var r=Di(t),o=ig(t);for(n=o+1;o<n;){n=o,vP(t,i,1);var l=ig(t);l>o?Mn(t,r):l<o&&(o=l,r=Di(t))}}if(0>e)for(i=t.Ra;0<=i;i--)for(r=Di(t),o=ig(t),n=o+1;o<n;)n=o,vP(t,i,-1),l=ig(t),l>o?Mn(t,r):l<o&&(o=l,r=Di(t));t.normalize()}function vP(t,e,i){t.le=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.le)}if(0>i)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.le);for(t.le++,n.reset();n.next();)e=n.value,e.component===-1&&(i1(t,e,t.le,-1,!0,!0),t.le++);var o;for(e=[],o=0;o<t.le*t.le;o++)e[o]=!1;for(r=[],o=0;o<(t.Ia+1)*(t.Ra+1);o++)r[o]=-1;for(n.reset();n.next();){o=n.value;for(var l=o.layer,h=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),a=Math.min(t.Ra,o.column+t.nodeMinColumnSpace(o,!1));h<=a;h++)r[l*(t.Ra+1)+h]=o.component}for(o=0;o<=t.Ia;o++){if(0<i)for(l=0;l<t.Ra;l++)r[o*(t.Ra+1)+l]!==-1&&r[o*(t.Ra+1)+l+1]!==-1&&r[o*(t.Ra+1)+l]!==r[o*(t.Ra+1)+l+1]&&(e[r[o*(t.Ra+1)+l]*t.le+r[o*(t.Ra+1)+l+1]]=!0);if(0>i)for(l=t.Ra;0<l;l--)r[o*(t.Ra+1)+l]!==-1&&r[o*(t.Ra+1)+l-1]!==-1&&r[o*(t.Ra+1)+l]!==r[o*(t.Ra+1)+l-1]&&(e[r[o*(t.Ra+1)+l]*t.le+r[o*(t.Ra+1)+l-1]]=!0)}for(r=[],o=0;o<t.le;o++)r[o]=!0;for(l=[],l.push(0);l.length!==0;)if(a=l[l.length-1],l.pop(),r[a])for(r[a]=!1,o=0;o<t.le;o++)e[a*t.le+o]&&l.splice(0,0,o);if(0<i)for(n.reset();n.next();)t=n.value,r[t.component]&&--t.column;if(0>i)for(n.reset();n.next();)i=n.value,r[i.component]&&(i.column+=1)}function Yj(t){for(var e=Vt(),i=t.fl.length,n=0;n<=i;n++)e[n]=[];for(n=t.network.vertexes.iterator;n.next();){var r=n.value;e[i-r.layer][r.index]=r}i=new q,Uj(e,i);var o=null,l=null,h=null,a=null,f=(t.ve&1)!==0,p=(t.ve&2)!==0,d=(t.ve&4)!==0,y=(t.ve&8)!==0;for(f&&(t.verticalAlignment(e,i,!0),o=rg(t,e,!0,!1)),e.reverse(),d&&(t.verticalAlignment(e,i,!1),h=rg(t,e,!1,!1)),n=c(e),r=n.next();!r.done;r=n.next())r.value.reverse();y&&(t.verticalAlignment(e,i,!1),a=rg(t,e,!1,!0)),e.reverse(),p&&(t.verticalAlignment(e,i,!0),l=rg(t,e,!0,!0)),zt(e),t.u(o,l,h,a),t.network.vertexes.each(function(m){var x=Vt();f&&x.push(o.get(m)),p&&x.push(l.get(m)),d&&x.push(h.get(m)),y&&x.push(a.get(m)),x.sort(function(k,S){return k-S});var M=x.length;M=(x[Math.floor((M-1)/2)]+x[Math.ceil((M-1)/2)])/2,zt(x),m.yc=M})}function Uj(t,e){for(var i=t.length,n=1;n<i-1;n++)for(var r=0,o=0,l=t[n],h=t[n+1],a=0;o<h.length;a++){var f=h[a];t:{if(f.node===null){var p=c1(f);if(0<p.length){p=p[0].node===null;break t}}p=!1}var d=p;if(a===h.length-1||d){for(p=l.length-1,d&&(p=c1(f)[0].index);o<=a;){if(f=h[o],!f.bo){d=[];for(var y=c(f.sourceEdgesArrayAccess),m=y.next();!m.done;m=y.next())m=m.value,m.valid&&d.push(m);f.bo=d}for(f=c(f.bo),d=f.next();!d.done;d=f.next())d=d.value,y=d.fromVertex.index,(y<r||y>p)&&e.add(d);o++}r=p}}}It.prototype.verticalAlignment=function(t,e,i){Gj(t),t=c(t);for(var n=t.next();!n.done;n=t.next()){var r=-1;n=c(n.value);for(var o=n.next();!o.done;o=n.next()){o=o.value;var l=i?c1(o):Hj(o),h=l.length;if(0<h){l.sort(function(d,y){return d.vi-y.vi});var a=(h-1)/2;for(h=Math.floor(a),a=Math.ceil(a);h<=a;h++)if(o.align===o){var f=l[h],p=void 0;p=i?ag(f,o):ag(o,f),!e.contains(p)&&r<f.vi&&(f.align=o,o.root=f.root,o.align=f.root,r=f.vi)}}}}};function Gj(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++){var r=i[n];r.root=r,r.align=r,r.Uz=e,r.vi=n}}function rg(t,e,i,n){for(var r=t.K===90||t.K===270,o=c(e),l=o.next();!l.done;l=o.next()){var h=c(l.value);for(l=h.next();!l.done;l=h.next())l=l.value,l.sd=l,l.shift=1/0,l.yc=NaN,l.qg=0}for(l=t.K===90||t.K===270,o=c(e),h=o.next();!h.done;h=o.next()){h=c(h.value);for(var a=h.next();!a.done;a=h.next())if(a=a.value,a.root===a){for(var f=0,p=a;p.align!==a;){var d=p.align,y=l?p.width:p.height,m=l?d.width:d.height;if(i){var x=ag(p,d),M=x.portFromPos,k=x.portToPos;x.link!==null&&(p.node&&p.node!==x.link.fromNode&&(M=l?p.focusX:p.focusY),d.node&&d.node!==x.link.toNode&&(k=l?d.focusX:d.focusY))}else x=ag(d,p),M=x.portToPos,k=x.portFromPos,x.link!==null&&(p.node&&p.node!==x.link.toNode&&(M=l?p.focusX:p.focusY),d.node&&d.node!==x.link.fromNode&&(k=l?d.focusX:d.focusY));y=n?p.qg+(y-M)-(m-k):p.qg+M-k,d.qg=y,f=Math.min(f,y),p=p.align}p=a;do p.qg=p.qg-f,p=p.align;while(p!==a)}}for(i=c(e),l=i.next();!l.done;l=i.next())for(o=c(l.value),l=o.next();!l.done;l=o.next())l=l.value,l.root===l&&xP(t,l,e);for(i=0;i<e.length;i++)if(!(0>=e[i].length)&&(l=e[i][0],l.sd===l)){l.sd.shift===1/0&&(l.sd.shift=0),l=i,h=0;do{for(o=e[l][h];o.align!==o.root;)o=o.align,l++,0<o.vi&&(h=wP(o,e),h.sd.shift=Math.min(h.sd.shift,o.sd.shift+o.yc+o.qg-(h.yc+h.qg+(r?h.width:h.height)+t.columnSpacing)));h=o.vi+1}while(l<e.length&&h<e[l].length&&o.sd===e[l][h].sd)}for(t=new mt,e=c(e),l=e.next();!l.done;l=e.next())for(i=c(l.value),l=i.next();!l.done;l=i.next())l=l.value,l.yc=l.yc+l.sd.shift+l.qg,o=r?l.width:l.height,t.add(l,n?-l.yc-o:l.yc);return t}function xP(t,e,i){if(isNaN(e.yc)){e.yc=0;var n=e;do{if(0<n.vi){var r=wP(n,i),o=r.root;xP(t,o,i),e.sd===e&&(e.sd=o.sd);var l=t.K===90||t.K===270?r.width:r.height;e.sd===o.sd&&(e.yc=Math.max(e.yc,o.yc+r.qg+l-n.qg+t.columnSpacing))}n=n.align}while(n!==e);for(;n.align!==e;)n=n.align,n.yc=e.yc,n.sd=e.sd}}function wP(t,e){var i=t.Uz;return t=t.vi,1>t&&I("Could not determine previous vertex in layer"),e[i][t-1]}It.prototype.u=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];i=-1;for(var n=Vt(),r=Vt(),o=1/0,l=0;4>l;l++)if(e[l]){var h=Xj(this,e[l],n,r,l);h<o&&(i=l,o=h)}for(o={},l=0;4>l;o={delta:o.delta},l++)e[l]&&(o.delta=l===0||l===2?n[i]-n[l]:r[i]-r[l],o.delta!==0&&e[l].each(function(a){return function(f){f.value+=a.delta}}(o)));zt(n),zt(r)};function Xj(t,e,i,n,r){if(!e||e.count===0)return i[r]=0,n[r]=0,1/0;var o=1/0,l=-1/0;return e.each(function(h){var a=h.key;h=h.value,a=t.K===90||t.K===270?a.width:a.height,h<o&&(o=h),h+a>l&&(l=h+a)}),i[r]=o,n[r]=l,l-o}It.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=og(this,!0),e=og(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;n!==null&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Gu(),this.isRouting&&this.commitLinks()};function og(t,e){return t.K===270?e?Tn:jn:t.K===90?e?jn:Tn:t.K===180?e?Ln:_i:e?_i:Ln}It.prototype.commitNodes=function(){this.he=[],this.Ld=[],this.Kd=[],this.Ta=[];for(var t=0;t<=this.Ia;t++)this.he[t]=0,this.Ld[t]=0,this.Kd[t]=0,this.Ta[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.he[i]=Math.max(this.he[i],this.nodeMinLayerSpace(e,!0)),this.Ld[i]=Math.max(this.Ld[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.ie;for(var n=0;n<=this.Ia;n++){var r=i;0>=this.he[n]+this.Ld[n]&&(r=0),0<n&&(e+=r/2),this.K===90||this.K===0?(e+=this.Ld[n],this.Kd[n]=e,e+=this.he[n]):(e+=this.he[n],this.Kd[n]=e,e+=this.Ld[n]),n<this.Ia&&(e+=r/2),this.Ta[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.Ia;n++)this.K===270?this.Kd[n]=e.y+this.Kd[n]:this.K===90?(this.Kd[n]=e.y+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]):this.K===180?this.Kd[n]=e.x+this.Kd[n]:(this.Kd[n]=e.x+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]);i=this.ve!==0,t.reset(),n=this.K===270||this.K===90;for(var o=1/0,l=r=1/0,h=-1/0;t.next();){var a=t.value,f=a.layer,p=a.column|0;n?(l=e.x+this.jc*p,f=this.Kd[f]):(l=this.Kd[f],f=e.y+this.jc*p),a.centerX=l,a.centerY=f,i&&isFinite(a.yc)&&(n?a.node?a.x=e.x+a.yc:a.centerX=e.x+a.yc:a.node?a.y=e.y+a.yc:a.centerY=e.y+a.yc),o=Math.min(a.x,o),r=Math.min(a.y,r),n?(l=o,h=Math.max(h,a.bounds.right)):(l=r,h=Math.max(h,a.bounds.bottom))}for(this.xw=h-l,o=e.x-o,e=e.y-r,this.Rf=new N(i&&n?0:o,i&&!n?0:e),t.reset();t.next();)i=t.value,i.x+=o,i.y+=e,i.commit()},It.prototype.Gu=function(){for(var t=0,e=this.ie,i=0;i<=this.Ia;i++)t+=this.he[i],t+=this.Ld[i];t+=this.Ia*e,e=[],i=this.ve!==0?this.xw:this.jc*this.Ra;for(var n=this.maxLayer;0<=n;n--)this.K===270?n===0?e.push(new z(0,0,i,Math.abs(this.Ta[0]))):e.push(new z(0,this.Ta[n-1],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===90?n===0?e.push(new z(0,this.Ta[0],i,Math.abs(this.Ta[0]-t))):e.push(new z(0,this.Ta[n],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===180?n===0?e.push(new z(0,0,Math.abs(this.Ta[0]),i)):e.push(new z(this.Ta[n-1],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i)):n===0?e.push(new z(this.Ta[0],0,Math.abs(this.Ta[0]-t),i)):e.push(new z(this.Ta[n],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i));this.commitLayers(e,this.Rf)},It.prototype.commitLayers=function(){},It.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.uh(),e.Fj(),e.zf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.vg();for(t.reset();t.next();){var i=t.value;if(e=i.link,e!==null){e.uh();var n=e,r=n.fromNode,o=n.toNode,l=n.fromPort,h=n.toPort;if(r!==null){var a=r.findVisibleNode();a!==null&&a!==r&&(r=a,l=a.port)}o!==null&&(a=o.findVisibleNode(),a!==null&&a!==o&&(o=a,h=a.port));var f=e.computeSpot(!0,l);a=e.computeSpot(!1,h);var p=i.fromVertex,d=i.toVertex;if(i.valid)e.curve===on&&e.pointsCount===4&&(p.column===d.column&&this.alignOption===0?(i=e.getLinkPoint(r,l,f,!0,!1,o,h),h=e.getLinkPoint(o,h,a,!1,!1,r,l),i.w()||i.set(r.actualBounds.center),h.w()||h.set(o.actualBounds.center),e.Fj(),e.yf(i.x,i.y),e.yf((2*i.x+h.x)/3,(2*i.y+h.y)/3),e.yf((i.x+2*h.x)/3,(i.y+2*h.y)/3),e.yf(h.x,h.y)):(i=n=!1,l!==null&&f===We&&(n=!0),h!==null&&a===We&&(i=!0),(n||i)&&(a=null,n&&(a=e.getLinkPointFromPoint(r,l,l.ga(Rt),e.i(3),!0),a.w()||a.set(r.actualBounds.center),e.L(0,a.x,a.y)),r=null,i&&(r=e.getLinkPointFromPoint(o,h,h.ga(Rt),e.i(0),!1),r.w()||r.set(o.actualBounds.center),e.L(3,r.x,r.y)),a&&(o=e.i(2),e.L(1,(2*a.x+o.x)/3,(2*a.y+o.y)/3)),r&&(o=e.i(1),e.L(2,(2*r.x+o.x)/3,(2*r.y+o.y)/3))))),e.zf();else if(p.layer===d.layer)e.zf();else{var y=!1,m=!1,x=this.ie,M=e.firstPickIndex+1;if(e.isOrthogonal){m=!0;var k=e.pointsCount;4<k&&e.points.removeRange(2,k-3)}else if(e.curve===on)y=!0,k=e.pointsCount,4<k&&e.points.removeRange(2,k-3),k===4&&(M=2);else{k=e.pointsCount;var S=f===We,C=a===We;2<k&&S&&C?e.points.removeRange(1,k-2):3<k&&S&&!C?e.points.removeRange(1,k-3):3<k&&!S&&C?e.points.removeRange(2,k-2):4<k&&!S&&!C&&e.points.removeRange(2,k-3)}if(i.rev){for(;d!==null&&p!==d;){var T=k=null;for(S=d.sourceEdges.iterator;S.next()&&(C=S.value,C.link!==i.link||(k=C.fromVertex,T=C.toVertex,k.node!==null)););if(k===null)break;if(k!==p){S=e.i(M-1).x,C=e.i(M-1).y;var L=k.centerX,j=k.centerY;if(m)this.K===180||this.K===0?M===e.firstPickIndex+1?(e.l(M++,S,C),e.l(M++,S,j)):(T!==null?T.centerY:C)!==j&&(T=this.Ta[k.layer-1]+this.Rf.x,e.l(M++,T,C),e.l(M++,T,j)):M===e.firstPickIndex+1?(e.l(M++,S,C),e.l(M++,L,C)):(T!==null?T.centerX:S)!==L&&(T=this.Ta[k.layer-1]+this.Rf.y,e.l(M++,S,T),e.l(M++,L,T));else if(M===e.firstPickIndex+1){T=Math.max(10,this.he[d.layer]);var A=Math.max(10,this.Ld[d.layer]);if(y)this.K===180?L<=d.bounds.x?(d=d.bounds.x,e.l(M++,d-T,j),e.l(M++,d,j),e.l(M++,d+A,j)):(e.l(M++,L-T,j),e.l(M++,L,j),e.l(M++,L+A,j)):this.K===90?j>=d.bounds.bottom?(d=d.bounds.y+d.bounds.height,e.l(M++,L,d+A),e.l(M++,L,d),e.l(M++,L,d-T)):(e.l(M++,L,j+A),e.l(M++,L,j),e.l(M++,L,j-T)):this.K===270?j<=d.bounds.y?(d=d.bounds.y,e.l(M++,L,d-T),e.l(M++,L,d),e.l(M++,L,d+A)):(e.l(M++,L,j-T),e.l(M++,L,j),e.l(M++,L,j+A)):this.K===0&&(L>=d.bounds.right?(d=d.bounds.x+d.bounds.width,e.l(M++,d+A,j),e.l(M++,d,j),e.l(M++,d-T,j)):(e.l(M++,L+A,j),e.l(M++,L,j),e.l(M++,L-T,j)));else{e.l(M++,S,C);var Z=0;this.K===180||this.K===0?((this.K===180?L>=d.bounds.right:L<=d.bounds.x)&&(Z=(this.K===0?-T:A)/2),e.l(M++,S+Z,j)):((this.K===270?j>=d.bounds.bottom:j<=d.bounds.y)&&(Z=(this.K===90?-T:A)/2),e.l(M++,L,C+Z)),e.l(M++,L,j)}}else T=Math.max(10,this.he[k.layer]),A=Math.max(10,this.Ld[k.layer]),y?this.K===180?(e.l(M++,L-T-x,j),e.l(M++,Math.min(L-T+x/2,L),j),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,Math.max(L+A-x/2,L),j),e.l(M++,L+A+x,j)):this.K===90?(e.l(M++,L,j+A+x),e.l(M++,L,Math.max(j+A-x/2,j)),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,L,Math.min(j-T+x/2,j)),e.l(M++,L,j-T-x)):this.K===270?(e.l(M++,L,j-T-x),e.l(M++,L,Math.min(j-T+x/2,j)),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,L,Math.max(j+A-x/2,j)),e.l(M++,L,j+A+x)):(e.l(M++,L+A+x,j),e.l(M++,Math.max(L+A-x/2,L),j),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,Math.min(L-T+x/2,L),j),e.l(M++,L-T-x,j)):e.l(M++,L,j)}d=k}(h===null||f!==We||m)&&(S=e.i(M-1).x,C=e.i(M-1).y,L=e.i(M).x,j=e.i(M).y,m?(x=this.Ld[p.layer],this.K===180||this.K===0?(m=C,m>=p.bounds.y&&m<=p.bounds.bottom&&(this.K===180?L>=p.bounds.x:L<=p.bounds.right)&&(d=p.centerX+(this.K===180?-x:x),m<p.bounds.y+p.bounds.height/2?m=p.bounds.y-this.jc/2:m=p.bounds.bottom+this.jc/2,e.l(M++,d,C),e.l(M++,d,m)),e.l(M++,L,m)):(m=S,m>=p.bounds.x&&m<=p.bounds.right&&(this.K===270?j>=p.bounds.y:j<=p.bounds.bottom)&&(d=p.centerY+(this.K===270?-x:x),m<p.bounds.x+p.bounds.width/2?m=p.bounds.x-this.jc/2:m=p.bounds.right+this.jc/2,e.l(M++,S,d),e.l(M++,m,d)),e.l(M++,m,j)),e.l(M++,L,j)):y?(T=Math.max(10,this.he[p.layer]),A=Math.max(10,this.Ld[p.layer]),this.K===180&&L>=p.bounds.x?(d=p.bounds.x+p.bounds.width,e.L(M-2,d,C),e.L(M-1,d+A,C)):this.K===90&&j<=p.bounds.bottom?(d=p.bounds.y,e.L(M-2,S,d),e.L(M-1,S,d-T)):this.K===270&&j>=p.bounds.y?(d=p.bounds.y+p.bounds.height,e.L(M-2,S,d),e.L(M-1,S,d+A)):this.K===0&&L<=p.bounds.right&&(d=p.bounds.x,e.L(M-2,d,C),e.L(M-1,d-T,C))):(T=Math.max(10,this.he[p.layer]),A=Math.max(10,this.Ld[p.layer]),m=0,this.K===180||this.K===0?((this.K===180?L<=p.bounds.x:L>=p.bounds.right)&&(m=(this.K===0?A:-T)/2),e.l(M++,L+m,C)):((this.K===270?j<=p.bounds.y:j>=p.bounds.bottom)&&(m=(this.K===90?A:-T)/2),e.l(M++,S,j+m)),e.l(M++,L,j)))}else{for(;p!==null&&p!==d;){for(T=k=null,p=p.destinationEdges.iterator;p.next()&&(S=p.value,S.link!==i.link||(k=S.toVertex,T=S.fromVertex,T.node!==null&&(T=null),k.node!==null)););if(k===null)break;k!==d&&(S=e.i(M-1).x,C=e.i(M-1).y,L=k.centerX,j=k.centerY,m?this.K===180||this.K===0?(T!==null?T.centerY:C)!==j&&(T=this.Ta[k.layer]+this.Rf.x,M===e.firstPickIndex+1&&(T=this.K===0?Math.max(T,S):Math.min(T,S)),e.l(M++,T,C),e.l(M++,T,j)):(T!==null?T.centerX:S)!==L&&(T=this.Ta[k.layer]+this.Rf.y,M===e.firstPickIndex+1&&(T=this.K===90?Math.max(T,C):Math.min(T,C)),e.l(M++,S,T),e.l(M++,L,T)):(T=Math.max(10,this.he[k.layer]),A=Math.max(10,this.Ld[k.layer]),y?this.K===180?(e.l(M++,L+A+x,j),e.l(M++,Math.max(L+A-x/2,L),j),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,Math.min(L-T+x/2,L),j),e.l(M++,L-T-x,j)):this.K===90?(e.l(M++,L,j-T-x),e.l(M++,L,Math.min(j-T+x/2,j)),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,L,Math.max(j+A-x/2,j)),e.l(M++,L,j+A+x)):this.K===270?(e.l(M++,L,j+A+x),e.l(M++,L,Math.max(j+A-x/2,j)),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,L,Math.min(j-T+x/2,j)),e.l(M++,L,j-T-x)):(e.l(M++,L-T-x,j),e.l(M++,Math.min(L-T+x/2,L),j),e.l(M++,L,j),e.l(M++,L,j),e.l(M++,Math.max(L+A-x/2,L),j),e.l(M++,L+A+x,j)):this.K===180?(e.l(M++,L+A,j),e.l(M++,L-T,j)):this.K===90?(e.l(M++,L,j-T),e.l(M++,L,j+A)):this.K===270?(e.l(M++,L,j+A),e.l(M++,L,j-T)):(e.l(M++,L-T,j),e.l(M++,L+A,j)))),p=k}m&&(S=e.i(M-1).x,C=e.i(M-1).y,L=e.i(M).x,j=e.i(M).y,this.K===180||this.K===0?C!==j&&(T=this.K===0?Math.min(Math.max((L+S)/2,this.Ta[d.layer]+this.Rf.x),L):Math.max(Math.min((L+S)/2,this.Ta[d.layer]+this.Rf.x),L),e.l(M++,T,C),e.l(M++,T,j)):S!==L&&(T=this.K===90?Math.min(Math.max((j+C)/2,this.Ta[d.layer]+this.Rf.y),j):Math.max(Math.min((j+C)/2,this.Ta[d.layer]+this.Rf.y),j),e.l(M++,S,T),e.l(M++,L,T)))}n!==null&&y&&4<=e.pointsCount&&(l!==null&&(l=f===We?e.getLinkPointFromPoint(r,l,l.ga(Rt),e.i(3),!0):e.i(0),f===We&&(f=e.i(2),n=e.i(3),this.direction===90||this.direction===270?(e.L(1,(l.x+f.x)/2,f.y),e.L(2,n.x,(f.y+n.y)/2)):(e.L(1,f.x,(l.y+f.y)/2),e.L(2,(f.x+n.x)/2,n.y))),l.w()||l.set(r.actualBounds.center),e.L(0,l.x,l.y)),h!==null&&(r=a===We?e.getLinkPointFromPoint(o,h,h.ga(Rt),e.i(e.pointsCount-4),!1):e.i(e.pointsCount-1),a===We&&(h=e.i(e.pointsCount-3),a=e.i(e.pointsCount-4),this.direction===90||this.direction===270?(e.L(e.pointsCount-2,(r.x+h.x)/2,h.y),e.L(e.pointsCount-2,a.x,(h.y+a.y)/2)):(e.L(e.pointsCount-2,h.x,(r.y+h.y)/2),e.L(e.pointsCount-3,(h.x+a.x)/2,a.y))),r.w()||r.set(o.actualBounds.center),e.L(e.pointsCount-1,r.x,r.y))),e.zf(),i.commit()}}}this.avoidOrthogonalOverlaps()},It.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var i=e.value.link;i!==null&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(n!==null&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var o=n.i(r),l=n.i(r+1);if(this.B(o.y,l.y)&&!this.B(o.x,l.x)){var h=new Gs;h.layer=Math.floor(o.y/2);var a=n.i(0),f=n.i(n.pointsCount-1);if(h.first=a.x*a.x+a.y,h.ic=f.x*f.x+f.y,h.rd=Math.min(o.x,l.x),h.Hc=Math.max(o.x,l.x),h.index=r,h.link=n,r+2<n.pointsCount){a=n.i(r-1),f=n.i(r+2);var p=0;a.y<o.y?p=f.y<o.y?3:o.x<l.x?2:1:a.y>o.y&&(p=f.y>o.y?0:l.x<o.x?2:1),h.j=p}i.push(h)}}}if(1<i.length)for(i.sort(this.Yx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Hc,r=t+1;r<n&&i[r].rd<l;)l=Math.max(l,i[r].Hc),r++;if(l=r-o,1<l){for(this.zi(i,this.Js,o,o+l),p=1,h=i[o].ic,a=o;a<r;a++)f=i[a],f.ic!==h&&(p++,h=f.ic);this.zi(i,this.Xx,o,o+l);var d=1;for(h=i[o].first,a=o;a<r;a++)f=i[a],f.first!==h&&(d++,h=f.first);for(a=!0,f=d,p<d?(a=!1,f=p,h=i[o].ic,this.zi(i,this.Js,o,o+l)):h=i[o].first,p=0,d=o;d<r;d++){var y=i[d];(a?y.first:y.ic)!==h&&(p++,h=a?y.first:y.ic);var m=y.link;o=m.i(y.index),l=m.i(y.index+1);var x=this.linkSpacing*(p-(f-1)/2);e++,m.uh(),m.L(y.index,o.x,o.y+x),m.L(y.index+1,l.x,l.y+x),m.zf()}}o=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(n=t.value,n!==null&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)o=n.i(r),l=n.i(r+1),this.B(o.x,l.x)&&!this.B(o.y,l.y)&&(h=new Gs,h.layer=Math.floor(o.x/2),a=n.i(0),f=n.i(n.pointsCount-1),h.first=a.x+a.y*a.y,h.ic=f.x+f.y*f.y,h.rd=Math.min(o.y,l.y),h.Hc=Math.max(o.y,l.y),h.index=r,h.link=n,r+2<n.pointsCount&&(a=n.i(r-1),f=n.i(r+2),p=0,a.x<o.x?p=f.x<o.x?3:o.y<l.y?2:1:a.x>o.x&&(p=f.x>o.x?0:l.y<o.y?2:1),h.j=p),i.push(h));if(1<i.length)for(i.sort(this.Yx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Hc,r=t+1;r<n&&i[r].rd<l;)l=Math.max(l,i[r].Hc),r++;if(l=r-o,1<l){for(this.zi(i,this.Js,o,o+l),p=1,h=i[o].ic,a=o;a<r;a++)f=i[a],f.ic!==h&&(p++,h=f.ic);for(this.zi(i,this.Xx,o,o+l),d=1,h=i[o].first,a=o;a<r;a++)f=i[a],f.first!==h&&(d++,h=f.first);for(a=!0,f=d,p<d?(a=!1,f=p,h=i[o].ic,this.zi(i,this.Js,o,o+l)):h=i[o].first,p=0,d=o;d<r;d++)y=i[d],(a?y.first:y.ic)!==h&&(p++,h=a?y.first:y.ic),m=y.link,o=m.i(y.index),l=m.i(y.index+1),x=this.linkSpacing*(p-(f-1)/2),e++,m.uh(),m.L(y.index,o.x+x,o.y),m.L(y.index+1,l.x+x,l.y),m.zf()}o=r}t=n}}}},s=It.prototype,s.Yx=function(t,e){return t instanceof Gs&&e instanceof Gs&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.rd<e.rd?-1:t.rd>e.rd?1:t.Hc<e.Hc?-1:t.Hc>e.Hc?1:0:0},s.Xx=function(t,e){return t instanceof Gs&&e instanceof Gs&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Hc<e.Hc?-1:t.Hc>e.Hc?1:0:0},s.Js=function(t,e){return t instanceof Gs&&e instanceof Gs&&t!==e?t.ic<e.ic?-1:t.ic>e.ic||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Hc<e.Hc?-1:t.Hc>e.Hc?1:0:0},s.B=function(t,e){return t-=e,-1<t&&1>t},s.zi=function(t,e,i,n){var r=t.length,o=n-i;if(!(1>=o))if((0>i||i>=r-1)&&I("not in range 0 <= from < length: "+i),o===2)n=t[i],r=t[i+1],0<e(n,r)&&(t[i]=r,t[i+1]=n);else if(i===0)if(n>=r)t.sort(e);else for(i=t.slice(0,n),i.sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for(n=t.slice(i),n.sort(e),e=i;e<r;e++)t[e]=n[e-i];else for(r=t.slice(i,n),r.sort(e),e=i;e<n;e++)t[e]=r[e-i]};function Ys(t,e){var i=t.sc[e];if(i>=t.He.length){for(var n=[],r=0;r<t.He.length;r++)n[r]=t.He[r];t.He=n}for(t.He[i]===void 0||t.He[i]===null?n=[]:(n=t.He[i],t.He[i]=null),t=t.fl[e],e=0;e<t.length;e++)i=t[e],n[i.index]=i;return n}function Us(t,e,i){t.He[t.sc[e]]=i}B.Object.defineProperties(It.prototype,{layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&0<=t&&(this.ie=t,this.C())}},columnSpacing:{get:function(){return this.jc},set:function(t){this.jc!==t&&0<t&&(this.jc=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.C()):I("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Dk},set:function(t){this.Dk===t||t!==o1&&t!==sg&&t!==ic||(this.Dk=t,this.C())}},layeringOption:{get:function(){return this.Zk},set:function(t){this.Zk===t||t!==lg&&t!==s1&&t!==l1||(this.Zk=t,this.C())}},initializeOption:{get:function(){return this.Qk},set:function(t){this.Qk===t||t!==ug&&t!==u1&&t!==h1||(this.Qk=t,this.C())}},iterations:{get:function(){return this.bj},set:function(t){this.bj!==t&&0<=t&&(this.bj=t,this.C())}},aggressiveOption:{get:function(){return this.rk},set:function(t){this.rk===t||t!==a1&&t!==hg&&t!==f1||(this.rk=t,this.C())}},packOption:{get:function(){return this.bg},set:function(t){this.bg!==t&&0<=t&&8>t&&(this.bg=t,this.C())}},alignOption:{get:function(){return this.ve},set:function(t){this.ve!==t&&0<=t&&16>t&&(this.ve=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},linkSpacing:{get:function(){return this.Cn},set:function(t){this.Cn!==t&&0<=t&&(this.Cn=t,this.C())}},maxLayer:{get:function(){return this.Ia}},maxIndex:{get:function(){return this.Iq}},maxColumn:{get:function(){return this.Ra}},minIndexLayer:{get:function(){return this.Hn}},maxIndexLayer:{get:function(){return this.Md}}});var sg=new Q(It,"CycleDepthFirst",0),o1=new Q(It,"CycleGreedy",1),ic=new Q(It,"CycleFromLayers",2),lg=new Q(It,"LayerOptimalLinkLength",0),s1=new Q(It,"LayerLongestPathSink",1),l1=new Q(It,"LayerLongestPathSource",2),ug=new Q(It,"InitDepthFirstOut",0),u1=new Q(It,"InitDepthFirstIn",1),h1=new Q(It,"InitNaive",2),a1=new Q(It,"AggressiveNone",0),hg=new Q(It,"AggressiveLess",1),f1=new Q(It,"AggressiveMore",2),_j=8;It.className="LayeredDigraphLayout",It.CycleDepthFirst=sg,It.CycleGreedy=o1,It.CycleFromLayers=ic,It.LayerOptimalLinkLength=lg,It.LayerLongestPathSink=s1,It.LayerLongestPathSource=l1,It.InitDepthFirstOut=ug,It.InitDepthFirstIn=u1,It.InitNaive=h1,It.AggressiveNone=a1,It.AggressiveLess=hg,It.AggressiveMore=f1,It.PackNone=0,It.PackExpand=1,It.PackStraighten=2,It.PackMedian=4,It.PackAll=15,It.AlignNone=0,It.AlignUpperLeft=1,It.AlignUpperRight=2,It.AlignLowerLeft=4,It.AlignLowerRight=8,It.AlignAll=15;function Gs(){this.index=this.Hc=this.rd=this.ic=this.first=this.layer=0,this.link=null,this.j=0}Gs.className="SegInfo";function ia(t){_t.call(this,t)}V(ia,_t),ia.prototype.createVertex=function(){return new Sn(this)},ia.prototype.createEdge=function(){return new nc(this)},ia.className="LayeredDigraphNetwork";function Sn(t){me.call(this,t),this.$n=this.bo=this.ao=this.co=null,this.Za=this.Ag=this.Ig=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.Ll=NaN,this.Dj=0,this.dv=this.ev=null}V(Sn,me);function MP(t,e){return t.index-e.index}function ag(t,e){if(!t.$n){for(var i=[],n=c(t.destinationEdgesArrayAccess),r=n.next();!r.done;r=n.next())r=r.value,r.valid&&i.push(r);t.$n=i}for(t=c(t.$n),i=t.next();!i.done;i=t.next())if(i=i.value,i.toVertex===e)return i;I("Unable to find destination edge to given vertex")}function c1(t){if(!t.co){for(var e=[],i=c(t.sourceEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,n.valid&&e.push(n.fromVertex);e.sort(MP),t.co=e}return t.co}function Hj(t){if(!t.ao){for(var e=[],i=c(t.destinationEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,n.valid&&e.push(n.toVertex);e.sort(MP),t.ao=e}return t.ao}Sn.prototype.Cl=function(t){me.prototype.Cl.call(this,t),this.bo=this.co=null},Sn.prototype.Kl=function(t){me.prototype.Kl.call(this,t),this.bo=this.co=null},Sn.prototype.zl=function(t){me.prototype.zl.call(this,t),this.$n=this.ao=null},Sn.prototype.Jl=function(t){me.prototype.Jl.call(this,t),this.$n=this.ao=null},B.Object.defineProperties(Sn.prototype,{layer:{get:function(){return this.Ig},set:function(t){this.Ig!==t&&(this.Ig=t)}},column:{get:function(){return this.Ag},set:function(t){this.Ag!==t&&(this.Ag=t)}},index:{get:function(){return this.Za},set:function(t){this.Za!==t&&(this.Za=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Sn.prototype.deleteDestinationEdge=Sn.prototype.Jl,Sn.prototype.addDestinationEdge=Sn.prototype.zl,Sn.prototype.deleteSourceEdge=Sn.prototype.Kl,Sn.prototype.addSourceEdge=Sn.prototype.Cl,Sn.className="LayeredDigraphVertex";function nc(t){$i.call(this,t),this.j=this.ia=this.Ha=!1,this.V=this.u=NaN,this.F=this.m=0}V(nc,$i),B.Object.defineProperties(nc.prototype,{fromVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},toVertex:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this.pd=t)}},valid:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},rev:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),nc.className="LayeredDigraphEdge";function Mt(t){Wt.call(this),this.Tb=new q,this.Wn=dg,this.ud=no,this.vo=yg,this.Bq=k1,this.$v=[],this.td=!0,this.Qb=mg,this.$d=new ct(10,10).freeze();var e=new Eu(this);this.W=new Dn(e),this.Y=new Dn(e),this.ru=[],t&&Object.assign(this,t)}V(Mt,Wt),Mt.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.Wn=this.Wn,t.vo=this.vo,t.Bq=this.Bq,t.td=this.td,t.Qb=this.Qb,t.$d.assign(this.$d),t.W.copyInheritedPropertiesFrom(this.W),t.Y.copyInheritedPropertiesFrom(this.Y)},Mt.prototype.qb=function(t){t.classType===Mt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:I("Unknown enum value: "+t):Wt.prototype.qb.call(this,t)},Mt.prototype.createNetwork=function(){return new Eu(this)},Mt.prototype.makeNetwork=function(t){function e(n){if(n instanceof b)return!n.isLinkLabel&&n.category!=="Comment";if(n instanceof K){var r=n.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(n=n.toNode,!(n===null||n.isLinkLabel||n.category==="Comment"))}return!1}var i=this.createNetwork();return t instanceof D?(i.lg(t.nodes,!0,e),i.lg(t.links,!0,e)):t instanceof gt?i.lg(t.memberParts,!1,e):i.lg(t.iterator,!1,e),i},Mt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==vg&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof D&&(e=t),this.path===dg&&e!==null?this.ud=e.isTreePathToChildren?no:Ou:this.ud=this.path===dg?no:this.path,0<this.network.vertexes.count){for(this.network.Ko(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Tb.count){for(t=new q,e=this.Tb.iterator;e.next();){var i=e.value;i instanceof b?(i=this.network.ki(i),i!==null&&t.add(i)):i instanceof Dn&&t.add(i)}this.Tb=t}for(this.Tb.count===0&&this.findRoots(),t=this.Tb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,p1(this,e));for(e=this.network.vertexes,t=null;t=Kj(e),0<t.count;)e=SP(this,t),e!==null&&this.Tb.add(e),e.initialized=!0,p1(this,e),e=t;for(t=this.Tb.iterator;t.next();)e=t.value,e instanceof Dn&&PP(this,e);for(t=this.Tb.iterator;t.next();)e=t.value,e instanceof Dn&&NP(this,e);for(t=this.Tb.iterator;t.next();)e=t.value,e instanceof Dn&&CP(this,e);if(this.Cu(),this.layerStyle===xg){for(t=[],e=this.network.vertexes.iterator;e.next();){i=e.value;var n=i.parent;n===null&&(n=i),n=n.angle===0||n.angle===180;var r=t[i.level];r===void 0&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.$v=t,e=this.network.vertexes.iterator;e.next();)i=e.value,n=i.parent,n===null&&(n=i),n.angle===0||n.angle===180?(n.angle===180&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(n.angle===270&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===P1)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,i=e.angle===0||e.angle===180,n=-1,r=0;r<e.children.length;r++){var o=e.children[r];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(r=0;r<e.children.length;r++)o=e.children[r],i?(e.angle===180&&(o.focusX+=n-o.width),o.width=n):(e.angle===270&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Tb.iterator;t.next();)e=t.value,e instanceof Dn&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Tb=new q,this.isValidLayout=!0};function Kj(t){var e=new q;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}Mt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ud){case no:i.sourceEdges.count===0&&this.Tb.add(i);break;case Ou:i.destinationEdges.count===0&&this.Tb.add(i);break;default:I("Unhandled path value "+this.ud.toString())}}this.Tb.count===0&&(t=SP(this,t),t!==null&&this.Tb.add(t))};function SP(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.ud){case no:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case Ou:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:I("Unhandled path value "+t.ud.toString())}}return n}function p1(t,e){if(e!==null){switch(t.ud){case no:if(0<e.destinationEdges.count){for(var i=new tt,n=e.destinationVertexes;n.next();){var r=n.value;kP(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.Fa())}break;case Ou:if(0<e.sourceEdges.count){for(i=new tt,n=e.sourceVertexes;n.next();)r=n.value,kP(t,e,r)&&i.add(r);0<i.count&&(e.children=i.Fa())}break;default:I("Unhandled path value"+t.ud.toString())}for(i=e.children,n=i.length,r=0;r<n;r++){var o=i[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Tb.remove(o)}for(e=0;e<n;e++)p1(t,i[e])}}function kP(t,e,i){if(i.initialized){if(e===null)var n=!1;else{for(n=e.parent;n!==null&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}Mt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=r=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}};function PP(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===so&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,o=e.children,l=o.length,h=0;h<l;h++){var a=o[h];PP(t,a),i+=a.descendantCount+1,n=Math.max(n,a.maxChildrenCount),r=Math.max(r,a.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function Wj(t,e){switch(t.vo){default:case yg:return e.parent!==null?e.parent:t.W;case M1:return e.parent===null?t.W:e.parent.parent===null?t.Y:e.parent;case w1:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.Y:t.W;case x1:var i=!0;if(e.childrenCount===0)i=!1;else for(var n=e.children,r=n.length,o=0;o<r;o++)if(0<n[o].childrenCount){i=!1;break}return i&&e.parent!==null?t.Y:e.parent!==null?e.parent:t.W}}Mt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(Wj(this,t)),t.parent!==null&&t.parent.alignment===so){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2===0?n!==i.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function NP(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var i=e.length,n=0;n<i;n++)NP(t,e[n])}}Mt.prototype.assignTreeVertexValues=function(){};function CP(t,e){if(e!==null){e.alignment!==so&&t.sortTreeVertexChildren(e),e=e.children;for(var i=e.length,n=0;n<i;n++)CP(t,e[n])}}Mt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case na:break;case oc:t.children.reverse();break;case sc:t.children.sort(t.comparer);break;case lc:t.children.sort(t.comparer),t.children.reverse();break;default:I("Unhandled sorting value "+t.sorting.toString())}},Mt.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Mt.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;i!==null&&(n=i.angle,r=i.alignment,r=Xs(r)),e=e===90||e===270,n=n===90||n===270,i=t.childrenCount===0;var o=0,l=0,h=0,a=t.commentSpacing;if(t.node!==null)for(var f=t.node.Mu();f.next();){var p=f.value;p.category==="Comment"&&p.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(p),p.Va(),p=p.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(o=Math.max(o,p.width),l+=p.height+Math.abs(h)):(o+=p.width+Math.abs(h),l=Math.max(l,p.height)),h=a)}t.comments!==null&&(e&&!i||!r&&!n&&i||r&&n&&i?(o+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=z.allocAt(0,0,t.bounds.width+o,t.bounds.height+l),t.bounds=r,z.free(r))};function Xs(t){return t===us||t===so||t===hs||t===jo}function rc(t){return t===us||t===so}function d1(t){var e=t.parent;if(e!==null){var i=e.alignment;if(Xs(i)){if(rc(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2===0}if(i===hs)return!0}}return!1}Mt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,o=!1;i!==null&&(r=i.angle,o=i.alignment,o=Xs(o)),n=n===90||n===270,i=r===90||r===270;for(var l=t.childrenCount===0,h=d1(t),a=0,f=t.comments,p=f.length,d=N.alloc(),y=0;y<p;y++){var m=f[y],x=m.measuredBounds;if(n&&!l||!o&&!i&&l||o&&i&&l){if(135<r&&!o||i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-x.width,t.bounds.y+a),m.move(d),m=m.Sd();m.next();){var M=m.value;M.fromSpot=Ln,M.toSpot=_i}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+a),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=_i,M.toSpot=Ln;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+a),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=_i,M.toSpot=Ln;else for(d.h(t.bounds.x+t.commentMargin-x.width,t.bounds.y+a),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=Ln,M.toSpot=_i;a=0<=t.commentSpacing?a+(x.height+t.commentSpacing):a+(t.commentSpacing-x.height)}else{if(135<r&&!o||!i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y-t.commentMargin-x.height),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=Tn,M.toSpot=jn;else for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y-t.commentMargin),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=jn,M.toSpot=Tn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y+t.commentMargin),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=jn,M.toSpot=Tn;else for(d.h(t.bounds.x+a,t.bounds.y+t.commentMargin-x.height),m.move(d),m=m.Sd();m.next();)M=m.value,M.fromSpot=Tn,M.toSpot=jn;a=0<=t.commentSpacing?a+(x.width+t.commentSpacing):a+(t.commentSpacing-x.width)}}if(N.free(d),e=a-t.commentSpacing-(n?e.height:e.width),this.ud===no)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},Mt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case gg:TP(this,t);break;case uc:if(t.alignment===so)TP(this,t);else if(t.childrenCount===0)n=t.parent,i=!1,e=0,n!==null&&(e=n.angle,i=n.alignment,i=Xs(i)),n=d1(t),t.S.h(0,0),t.Da.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||i)&&!n?t.la.h(0,0):e===180&&!i||(e===90||e===270)&&n?t.la.h(t.width-2*t.focus.x,0):t.la.h(0,t.height-2*t.focus.y),t.Yo=null,t.kp=null;else{var r=tr(t);e=r===90||r===270;var o=0,l=t.children,h=l.length;for(i=0;i<h;i++)n=l[i],o=Math.max(o,e?n.Da.width:n.Da.height);var a=t.alignment;n=a===ro;var f=a===oo,p=Xs(a),d=Math.max(0,t.breadthLimit);i=this.computeLayerSpacing(t);var y=t.nodeSpacing,m=this.computeNodeIndent(t),x=t.rowSpacing,M=0;(n||f||t.hm||t.im&&t.maxGenerationCount===1)&&(M=Math.max(0,t.rowIndent)),n=t.width;var k=t.height,S=0,C=0,T=0,L=null,j=null,A=0,Z=0,it=0,et=0,H=0,Y=0,dt=0,ft=0;if(p&&!rc(a)&&135<r&&l.reverse(),rc(a))if(1<h)for(var Tt=0;Tt<h;Tt++)Tt%2===0&&Tt!==h-1&&(ft=Math.max(ft,e?l[Tt].Da.width:l[Tt].Da.height));else h===1&&(ft=e?l[0].Da.width:l[0].Da.height);if(p){switch(a){case us:C=135>r?LP(this,t,l,ft,S,C):jP(this,t,l,ft,S,C),ft=C.x,S=C.width,C=C.height;break;case hs:for(L=0;L<h;L++)j=l[L],d=j.Da,T=Y===0?0:x,e?(j.S.h(o-d.width,et+T),S=Math.max(S,d.width),C=Math.max(C,et+T+d.height),et+=T+d.height):(j.S.h(it+T,o-d.height),S=Math.max(S,it+T+d.width),C=Math.max(C,d.height),it+=T+d.width),Y++;break;case jo:for(L=0;L<h;L++)j=l[L],o=j.Da,d=Y===0?0:x,e?(j.S.h(y/2+t.focus.x,et+d),S=Math.max(S,o.width),C=Math.max(C,et+d+o.height),et+=d+o.height):(j.S.h(it+d,y/2+t.focus.y),S=Math.max(S,it+d+o.width),C=Math.max(C,o.height),it+=d+o.width),Y++}L=Bi(this,2),j=Bi(this,2),e?(L[0].h(0,0),L[1].h(0,C),j[0].h(S,0)):(L[0].h(0,0),L[1].h(S,0),j[0].h(0,C)),j[1].h(S,C)}else for(Tt=0;Tt<h;Tt++){var Ut=l[Tt],ke=Ut.Da;if(e){0<d&&0<Y&&it+y+ke.width>d&&(it<o&&Tl(t,a,o-it,0,dt,Tt-1),H++,Y=0,dt=Tt,T=C,it=0,et=135<r?-C-x:C+x),cg(this,Ut,0,et);var Te=0;if(Y===0)L=Ut.Yo,j=Ut.kp,A=ke.width,Z=ke.height,(L===null||j===null||r!==tr(Ut))&&(L=Bi(this,2),j=Bi(this,2),L[0].h(0,0),L[1].h(0,Z),j[0].h(A,0),j[1].h(A,Z));else{var ri=Vt();Z=OP(this,t,Ut,L,j,A,Z,ri),Te=Z.x,L=ri[0],j=ri[1],A=Z.width,Z=Z.height,zt(ri),it<ke.width&&0>Te&&(ju(t,-Te,0,dt,Tt-1),pg(L,-Te,0),pg(j,-Te,0),Te=0)}Ut.S.h(Te,et),S=Math.max(S,A),C=Math.max(C,T+(H===0?0:x)+ke.height),it=A}else 0<d&&0<Y&&et+y+ke.height>d&&(et<o&&Tl(t,a,0,o-et,dt,Tt-1),H++,Y=0,dt=Tt,T=S,et=0,it=135<r?-S-x:S+x),cg(this,Ut,it,0),Te=0,Y===0?(L=Ut.Yo,j=Ut.kp,A=ke.width,Z=ke.height,(L===null||j===null||r!==tr(Ut))&&(L=Bi(this,2),j=Bi(this,2),L[0].h(0,0),L[1].h(A,0),j[0].h(0,Z),j[1].h(A,Z))):(ri=Vt(),Z=OP(this,t,Ut,L,j,A,Z,ri),Te=Z.x,L=ri[0],j=ri[1],A=Z.width,Z=Z.height,zt(ri),et<ke.height&&0>Te&&(ju(t,0,-Te,dt,Tt-1),pg(L,0,-Te),pg(j,0,-Te),Te=0)),Ut.S.h(it,Te),C=Math.max(C,Z),S=Math.max(S,T+(H===0?0:x)+ke.width),et=Z;Y++}switch(0<H&&(e?(C+=Math.max(0,i),it<S&&Tl(t,a,S-it,0,dt,h-1),0<M&&(f||ju(t,M,0,0,h-1),S+=M)):(S+=Math.max(0,i),et<C&&Tl(t,a,0,C-et,dt,h-1),0<M&&(f||ju(t,0,M,0,h-1),C+=M))),M=f=0,a){case ra:e?f+=S/2-t.focus.x-m/2:M+=C/2-t.focus.y-m/2;break;case Fu:0<H?e?f+=S/2-t.focus.x-m/2:M+=C/2-t.focus.y-m/2:e?(ft=l[0].S.x+l[0].la.x,f+=ft+(l[h-1].S.x+l[h-1].la.x+2*l[h-1].focus.x-ft)/2-t.focus.x-m/2):(ft=l[0].S.y+l[0].la.y,M+=ft+(l[h-1].S.y+l[h-1].la.y+2*l[h-1].focus.y-ft)/2-t.focus.y-m/2);break;case ro:e?(f-=m,S+=m):(M-=m,C+=m);break;case oo:e?(f+=S-t.width+m,S+=m):(M+=C-t.height+m,C+=m);break;case us:e?1<h?f+=ft+y/2-t.focus.x:f+=l[0].focus.x-t.focus.x+l[0].la.x:1<h?M+=ft+y/2-t.focus.y:M+=l[0].focus.y-t.focus.y+l[0].la.y;break;case hs:e?f+=S+y/2-t.focus.x:M+=C+y/2-t.focus.y;break;case jo:break;default:C=this.customAlignment(t,f,M,S,C),f=C[0],M=C[1],S=C[2],C=C[3]}for(m=0;m<h;m++)ft=l[m],e?ft.S.h(ft.S.x+ft.la.x-f,ft.S.y+(135<r?(p?-C:-ft.Da.height)+ft.la.y-i:k+i+ft.la.y)):ft.S.h(ft.S.x+(135<r?(p?-S:-ft.Da.width)+ft.la.x-i:n+i+ft.la.x),ft.S.y+ft.la.y-M);if(h=l=0,p?e?(S=g1(t,S,f),0>f&&(f=0),135<r&&(M+=C+i),C+=k+i,a===jo&&(l+=y/2+t.focus.x),h+=k+i):(135<r&&(f+=S+i),S+=n+i,C=y1(t,C,M),0>M&&(M=0),a===jo&&(h+=y/2+t.focus.y),l+=n+i):e?(t.comments===null?n>S&&(S=m1(a,n-S,0),l=S.x,h=S.y,S=n,f=0):S=g1(t,S,f),0>f&&(l-=f,f=0),135<r&&(M+=C+i),C=Math.max(Math.max(C,k),C+k+i),h+=k+i):(135<r&&(f+=S+i),S=Math.max(Math.max(S,n),S+n+i),t.comments===null?k>C&&(C=m1(a,0,k-C),l=C.x,h=C.y,C=k,M=0):C=y1(t,C,M),0>M&&(h-=M,M=0),l+=n+i),0<H)r=Bi(this,4),H=Bi(this,4),e?(r[2].h(0,k+i),r[3].h(r[2].x,C),H[2].h(S,r[2].y),H[3].h(H[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(S,r[2].y),H[2].h(r[2].x,C),H[3].h(r[3].x,H[2].y));else{for(r=Bi(this,L.length+2),H=Bi(this,j.length+2),a=0;a<L.length;a++)p=L[a],r[a+2].h(p.x+l,p.y+h);for(a=0;a<j.length;a++)p=j[a],H[a+2].h(p.x+l,p.y+h)}e?(r[0].h(f,0),r[1].h(r[0].x,k),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),H[0].h(f+n,0),H[1].h(H[0].x,k),H[2].y<H[1].y&&(H[2].x<H[0].x?H[2].assign(H[1]):H[1].assign(H[2])),H[3].y<H[2].y&&(H[3].x<H[0].x?H[3].assign(H[2]):H[2].assign(H[3])),r[2].y-=i/2,H[2].y-=i/2):(r[0].h(0,M),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),H[0].h(0,M+k),H[1].h(n,H[0].y),H[2].x<H[1].x&&(H[2].y<H[0].y?H[2].assign(H[1]):H[1].assign(H[2])),H[3].x<H[2].x&&(H[3].y<H[0].y?H[3].assign(H[2]):H[2].assign(H[3])),r[2].x-=i/2,H[2].x-=i/2),yr(this,L),yr(this,j),t.Yo=r,t.kp=H,t.la.h(f,M),t.Da.h(S,C)}break;default:I("Unhandled compaction value "+t.compaction.toString())}}};function TP(t,e){if(e.childrenCount===0){var i=!1,n=0;e.parent!==null&&(n=e.parent.angle,i=e.parent.alignment,i=Xs(i));var r=d1(e);e.S.h(0,0),e.Da.h(e.width,e.height),e.parent===null||e.comments===null||(n!==180&&n!==270||i)&&!r?e.la.h(0,0):n===180&&!i||(n===90||n===270)&&r?e.la.h(e.width-2*e.focus.x,0):e.la.h(0,e.height-2*e.focus.y)}else{n=tr(e),i=n===90||n===270;var o=0;r=e.children;for(var l=r.length,h=0;h<l;h++){var a=r[h];o=Math.max(o,i?a.Da.width:a.Da.height)}var f=e.alignment,p=f===ro,d=f===oo;h=Xs(f);var y=Math.max(0,e.breadthLimit);a=t.computeLayerSpacing(e);var m=e.nodeSpacing,x=t.computeNodeIndent(e),M=p||d?0:x/2,k=e.rowSpacing,S=0;(p||d||e.hm||e.im&&e.maxGenerationCount===1)&&(S=Math.max(0,e.rowIndent)),p=e.width;var C=e.height,T=0,L=0,j=0,A=0,Z=0,it=0,et=0,H=0,Y=0,dt=0;if(h&&!rc(f)&&135<n&&r.reverse(),rc(f))if(1<l)for(var ft=0;ft<l;ft++){var Tt=r[ft],Ut=Tt.Da;ft%2===0&&ft!==l-1?Y=Math.max(Y,(i?Ut.width:Ut.height)+t.computeBusNodeSpacing(Tt)-m):ft%2!==0&&(dt=Math.max(dt,(i?Ut.width:Ut.height)+t.computeBusNodeSpacing(Tt)-m))}else l===1&&(Y=i?r[0].Da.width:r[0].Da.height);if(h)switch(f){case us:case so:L=135>n?LP(t,e,r,Y,T,L):jP(t,e,r,Y,T,L),Y=L.x,T=L.width,L=L.height;break;case hs:for(y=0;y<l;y++)M=r[y],j=M.Da,dt=et===0?0:k,i?(M.S.h(o-j.width,Z+dt),T=Math.max(T,j.width),L=Math.max(L,Z+dt+j.height),Z+=dt+j.height):(M.S.h(A+dt,o-j.height),T=Math.max(T,A+dt+j.width),L=Math.max(L,j.height),A+=dt+j.width),et++;break;case jo:for(o=0;o<l;o++)y=r[o],M=y.Da,j=et===0?0:k,i?(y.S.h(m/2+e.focus.x,Z+j),T=Math.max(T,M.width),L=Math.max(L,Z+j+M.height),Z+=j+M.height):(y.S.h(A+j,m/2+e.focus.y),T=Math.max(T,A+j+M.width),L=Math.max(L,M.height),A+=j+M.width),et++}else for(dt=0;dt<l;dt++)ft=r[dt],Tt=ft.Da,i?(0<y&&0<et&&A+m+Tt.width>y&&(A<o&&Tl(e,f,o-A,0,H,dt-1),it++,et=0,H=dt,j=L,A=0,Z=135<n?-L-k:L+k),Ut=et===0?M:m,cg(t,ft,0,Z),ft.S.h(A+Ut,Z),T=Math.max(T,A+Ut+Tt.width),L=Math.max(L,j+(it===0?0:k)+Tt.height),A+=Ut+Tt.width):(0<y&&0<et&&Z+m+Tt.height>y&&(Z<o&&Tl(e,f,0,o-Z,H,dt-1),it++,et=0,H=dt,j=T,Z=0,A=135<n?-T-k:T+k),Ut=et===0?M:m,cg(t,ft,A,0),ft.S.h(A,Z+Ut),L=Math.max(L,Z+Ut+Tt.height),T=Math.max(T,j+(it===0?0:k)+Tt.width),Z+=Ut+Tt.height),et++;switch(0<it&&(i?(L+=Math.max(0,a),A<T&&Tl(e,f,T-A,0,H,l-1),0<S&&(d||ju(e,S,0,0,l-1),T+=S)):(T+=Math.max(0,a),Z<L&&Tl(e,f,0,L-Z,H,l-1),0<S&&(d||ju(e,0,S,0,l-1),L+=S))),S=d=0,f){case ra:i?d+=T/2-e.focus.x-x/2:S+=L/2-e.focus.y-x/2;break;case Fu:0<it?i?d+=T/2-e.focus.x-x/2:S+=L/2-e.focus.y-x/2:i?(t=r[0].S.x+r[0].la.x,d+=t+(r[l-1].S.x+r[l-1].la.x+2*r[l-1].focus.x-t)/2-e.focus.x-x/2):(t=r[0].S.y+r[0].la.y,S+=t+(r[l-1].S.y+r[l-1].la.y+2*r[l-1].focus.y-t)/2-e.focus.y-x/2);break;case ro:i?(d-=x,T+=x):(S-=x,L+=x);break;case oo:i?(d+=T-e.width+x,T+=x):(S+=L-e.height+x,L+=x);break;case us:case so:i?1<l?d+=Y+m/2-e.focus.x:d+=r[0].focus.x-e.focus.x+r[0].la.x:1<l?S+=Y+m/2-e.focus.y:S+=r[0].focus.y-e.focus.y+r[0].la.y;break;case hs:i?d+=T+m/2-e.focus.x:S+=L+m/2-e.focus.y;break;case jo:break;default:t=t.customAlignment(e,d,S,T,L),d=t[0],S=t[1],T=t[2],L=t[3]}for(t=0;t<l;t++)x=r[t],i?x.S.h(x.S.x+x.la.x-d,x.S.y+(135<n?(h?-L:-x.Da.height)+x.la.y-a:C+a+x.la.y)):x.S.h(x.S.x+(135<n?(h?-T:-x.Da.width)+x.la.x-a:p+a+x.la.x),x.S.y+x.la.y-S);i?(T=g1(e,T,d),0>d&&(d=0),135<n&&(S+=L+a),L=Math.max(Math.max(L,C),L+C+a)):(135<n&&(d+=T+a),T=Math.max(Math.max(T,p),T+p+a),L=y1(e,L,S),0>S&&(S=0)),e.la.h(d,S),e.Da.h(T,L)}}Mt.prototype.customAlignment=function(t,e,i,n,r){return[e,i,n,r]};function LP(t,e,i,n,r,o){var l=i.length;if(l===0)return new z(n,0,r,o);if(l===1)return e=i[0],r=e.Da.width,o=e.Da.height,new z(n,0,r,o);for(var h=e.nodeSpacing,a=e.rowSpacing,f=tr(e)===90,p=0,d=0,y=0,m=0;m<l;m++)if(!(m%2!==0||1<l&&m===l-1)){var x=i[m],M=x.Da,k=p===0?0:a;if(f){var S=t.computeBusNodeSpacing(x)-h;x.S.h(n-(M.width+S),y+k),r=Math.max(r,M.width+S),o=Math.max(o,y+k+M.height),y+=k+M.height}else S=t.computeBusNodeSpacing(x)-h,x.S.h(d+k,n-(M.height+S)),o=Math.max(o,M.height+S),r=Math.max(r,d+k+M.width),d+=k+M.width;p++}for(p=0,x=d,m=y,f?(d=n+h,y=0):(d=0,y=n+h),M=0;M<l;M++)if(M%2!==0){k=i[M],S=k.Da;var C=p===0?0:a;if(f){var T=t.computeBusNodeSpacing(k)-h;k.S.h(d+T,y+C),r=Math.max(r,d+S.width+T),o=Math.max(o,y+C+S.height),y+=C+S.height}else T=t.computeBusNodeSpacing(k)-h,k.S.h(d+C,y+T),r=Math.max(r,d+C+S.width),o=Math.max(o,y+S.height+T),d+=C+S.width;p++}return 1<l&&l%2===1&&(i=i[l-1],l=i.Da,t=t.computeBusLastRowSpacing(i,f?Math.max(Math.abs(m),Math.abs(y)):Math.max(Math.abs(x),Math.abs(d))),f?(i.S.h(n+h/2-i.focus.x-i.la.x,o+t),f=n+h/2-i.focus.x-i.la.x,r=Math.max(r,f+l.width),0>f&&(r-=f),o=Math.max(o,Math.max(m,y)+t+l.height),0>i.S.x&&(n=fg(e,i.S.x,!1,n,h))):(i.S.h(r+t,n+h/2-i.focus.y-i.la.y),r=Math.max(r,Math.max(x,d)+t+l.width),y=n+h/2-i.focus.y-i.la.y,o=Math.max(o,y+l.height),0>y&&(o-=y),0>i.S.y&&(n=fg(e,i.S.y,!0,n,h)))),new z(n,0,r,o)}function jP(t,e,i,n,r,o){var l=i.length;if(l===0)return new z(n,0,r,o);if(l===1)return i=i[0],r=i.Da.width,o=i.Da.height,new z(n,0,r,o);for(var h=e.nodeSpacing,a=e.rowSpacing,f=tr(e)===270,p=0,d=0,y=0,m=0;m<l;m++)if(!(m%2!==0||1<l&&m===l-1)){var x=i[m],M=x.Da,k=p===0?0:a;if(f){var S=t.computeBusNodeSpacing(x)-h;y-=k+M.height,x.S.h(n-(M.width+S),y),r=Math.max(r,M.width+S),o=Math.max(o,Math.abs(y))}else S=t.computeBusNodeSpacing(x)-h,d-=k+M.width,x.S.h(d,n-(M.height+S)),o=Math.max(o,M.height+S),r=Math.max(r,Math.abs(d));p++}for(p=0,x=d,m=y,f?(d=n+h,y=0):(d=0,y=n+h),M=0;M<l;M++)if(M%2!==0){k=i[M],S=k.Da;var C=p===0?0:a;if(f){var T=t.computeBusNodeSpacing(k)-h;y-=C+S.height,k.S.h(d+T,y),r=Math.max(r,d+S.width+T),o=Math.max(o,Math.abs(y))}else T=t.computeBusNodeSpacing(k)-h,d-=C+S.width,k.S.h(d,y+T),o=Math.max(o,y+S.height+T),r=Math.max(r,Math.abs(d));p++}for(1<l&&l%2===1&&(a=i[l-1],p=a.Da,t=t.computeBusLastRowSpacing(a,f?Math.max(Math.abs(m),Math.abs(y)):Math.max(Math.abs(x),Math.abs(d))),f?(a.S.h(n+h/2-a.focus.x-a.la.x,-o-p.height-t),d=n+h/2-a.focus.x-a.la.x,r=Math.max(r,d+p.width),0>d&&(r-=d),o=Math.max(o,Math.abs(Math.min(m,y))+t+p.height),0>a.S.x&&(n=fg(e,a.S.x,!1,n,h))):(a.S.h(-r-p.width-t,n+h/2-a.focus.y-a.la.y),r=Math.max(r,Math.abs(Math.min(x,d))+t+p.width),y=n+h/2-a.focus.y-a.la.y,o=Math.max(o,y+p.height),0>y&&(o-=y),0>a.S.y&&(n=fg(e,a.S.y,!0,n,h)))),e=0;e<l;e++)h=i[e],f?h.S.h(h.S.x,h.S.y+o):h.S.h(h.S.x+r,h.S.y);return new z(n,0,r,o)}Mt.prototype.computeBusNodeSpacing=function(t){return t.parent===null?0:t.parent.nodeSpacing},Mt.prototype.computeBusLastRowSpacing=function(t){return t.parent===null?0:t.parent.rowSpacing};function fg(t,e,i,n,r){t=t.children;for(var o=t.length,l=0;l<o;l++)i?t[l].S.h(t[l].S.x,t[l].S.y-e):t[l].S.h(t[l].S.x-e,t[l].S.y);return e=t[o-1],Math.max(n,i?e.la.y+e.focus.y-r/2:e.la.x+e.focus.x-r/2)}function g1(t,e,i){switch(t.alignment){case Fu:case ra:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case ro:return t.width>e?t.width:e;case oo:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case us:case so:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case hs:return t.width-t.focus.x+t.nodeSpacing/2+e;case jo:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function y1(t,e,i){switch(t.alignment){case Fu:case ra:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case ro:return t.height>e?t.height:e;case oo:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case us:case so:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case hs:return t.height-t.focus.y+t.nodeSpacing/2+e;case jo:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function m1(t,e,i){switch(t){case ra:e/=2,i/=2;break;case Fu:e/=2,i/=2;break;case ro:i=e=0;break;case oo:break;default:I("Unhandled alignment value "+t.toString())}return new N(e,i)}function Tl(t,e,i,n,r,o){e=m1(e,i,n),ju(t,e.x,e.y,r,o)}function ju(t,e,i,n,r){if(e!==0||i!==0)for(t=t.children;n<=r;n++){var o=t[n].S;o.x+=e,o.y+=i}}function cg(t,e,i,n){var r=e.parent;switch(t.ud){case no:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(i,n);break;case Ou:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(i,n);break;default:I("Unhandled path value "+t.ud.toString())}}function pg(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function OP(t,e,i,n,r,o,l,h){var a=tr(e),f=a===90||a===270,p=e.nodeSpacing;e=n;var d=r;n=o;var y=l,m=i.Yo,x=i.kp;l=i.Da;var M=f?Math.max(y,l.height):Math.max(n,l.width);if((m===null||a!==tr(i))&&(m=Bi(t,2),x=Bi(t,2),f?(m[0].h(0,0),m[1].h(0,l.height),x[0].h(l.width,0),x[1].h(x[0].x,m[1].y)):(m[0].h(0,0),m[1].h(l.width,0),x[0].h(0,l.height),x[1].h(m[1].x,x[0].y))),f){if(y=9999999,!(d===null||2>d.length||m===null||2>m.length))for(r=i=0;i<d.length&&r<m.length;){o=d[i];var k=m[r];a=k.x,f=k.y,a+=n;var S=o;i+1<d.length&&(S=d[i+1]);var C=k;k=C.x,C=C.y,r+1<m.length&&(C=m[r+1],k=C.x,C=C.y,k+=n);var T=y;o.y===f?T=a-o.x:o.y>f&&o.y<C?T=a+(o.y-f)/(C-f)*(k-a)-o.x:f>o.y&&f<S.y&&(T=a-(o.x+(f-o.y)/(S.y-o.y)*(S.x-o.x))),T<y&&(y=T),S.y<=o.y?i++:C<=f?r++:(S.y<=C&&i++,C<=S.y&&r++)}if(y=n-y,y+=p,i=m,r=y,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Bi(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].y<e[0].y;)f=i[o++],p[n++].h(f.x+r,f.y);for(;a<e.length;)f=e[a++],p[n++].h(f.x,f.y);for(a=e[e.length-1].y;o<i.length&&i[o].y<=a;)o++;for(;o<i.length&&i[o].y>a;)f=i[o++],p[n++].h(f.x+r,f.y);for(i=Bi(t,n),a=0;a<n;a++)i[a].assign(p[a]);yr(t,p),n=i}if(o=x,a=y,d===null||2>d.length||o===null||2>o.length)r=null;else{for(p=Bi(t,d.length+o.length),r=f=i=0;i<d.length&&d[i].y<o[0].y;)S=d[i++],p[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],p[r++].h(S.x+a,S.y);for(o=o[o.length-1].y;i<d.length&&d[i].y<=o;)i++;for(;i<d.length&&d[i].y>o;)a=d[i++],p[r++].h(a.x,a.y);for(o=Bi(t,r),i=0;i<r;i++)o[i].assign(p[i]);yr(t,p),r=o}return o=Math.max(0,y)+l.width,l=M,yr(t,e),yr(t,m),yr(t,d),yr(t,x),h[0]=n,h[1]=r,new z(y,0,o,l)}if(n=9999999,!(d===null||2>d.length||m===null||2>m.length))for(r=i=0;i<d.length&&r<m.length;)o=d[i],k=m[r],a=k.x,f=k.y,f+=y,S=o,i+1<d.length&&(S=d[i+1]),C=k,k=C.x,C=C.y,r+1<m.length&&(C=m[r+1],k=C.x,C=C.y,C+=y),T=n,o.x===a?T=f-o.y:o.x>a&&o.x<k?T=f+(o.x-a)/(k-a)*(C-f)-o.y:a>o.x&&a<S.x&&(T=f-(o.y+(a-o.x)/(S.x-o.x)*(S.y-o.y))),T<n&&(n=T),S.x<=o.x?i++:k<=a?r++:(S.x<=k&&i++,k<=S.x&&r++);if(y-=n,y+=p,i=m,r=y,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Bi(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].x<e[0].x;)f=i[o++],p[n++].h(f.x,f.y+r);for(;a<e.length;)f=e[a++],p[n++].h(f.x,f.y);for(a=e[e.length-1].x;o<i.length&&i[o].x<=a;)o++;for(;o<i.length&&i[o].x>a;)f=i[o++],p[n++].h(f.x,f.y+r);for(i=Bi(t,n),a=0;a<n;a++)i[a].assign(p[a]);yr(t,p),n=i}if(o=x,a=y,d===null||2>d.length||o===null||2>o.length)r=null;else{for(p=Bi(t,d.length+o.length),r=f=i=0;i<d.length&&d[i].x<o[0].x;)S=d[i++],p[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],p[r++].h(S.x,S.y+a);for(o=o[o.length-1].x;i<d.length&&d[i].x<=o;)i++;for(;i<d.length&&d[i].x>o;)a=d[i++],p[r++].h(a.x,a.y);for(o=Bi(t,r),i=0;i<r;i++)o[i].assign(p[i]);yr(t,p),r=o}return o=M,l=Math.max(0,y)+l.height,yr(t,e),yr(t,m),yr(t,d),yr(t,x),h[0]=n,h[1]=r,new z(y,0,o,l)}function Bi(t,e){if(t=t.ru[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var i=0;i<e;i++)t[i]=new N;return t}function yr(t,e){var i=e.length,n=t.ru[i];n===void 0&&(n=[],t.ru[i]=n),n.push(e)}Mt.prototype.arrangeTrees=function(){if(this.Qb===vg)for(var t=this.Tb.iterator;t.next();){var e=t.value;if(e instanceof Dn){var i=e.node;if(i!==null){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),v1(this,e,i,n)}}}else{for(t=[],e=this.Tb.iterator;e.next();)i=e.value,i instanceof Dn&&t.push(i);switch(this.sorting){case na:break;case oc:t.reverse();break;case sc:t.sort(this.comparer);break;case lc:t.sort(this.comparer),t.reverse();break;default:I("Unhandled sorting value "+this.sorting.toString())}for(i=this.arrangementOrigin,e=i.x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(v1(this,r,e+r.la.x,i+r.la.y),this.Qb){case mg:i+=r.Da.height+this.$d.height;break;case S1:e+=r.Da.width+this.$d.width;break;default:I("Unhandled arrangement value "+this.Qb.toString())}}}};function v1(t,e,i,n){if(e!==null){e.x=i,e.y=n,e=e.children;for(var r=e.length,o=0;o<r;o++){var l=e[o];v1(t,l,i+l.S.x,n+l.S.y)}}}Mt.prototype.commitLayout=function(){this.yv(),this.commitNodes(),this.Gu(),this.isRouting&&this.commitLinks()},Mt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Mt.prototype.Gu=function(){if(this.layerStyle===xg){for(var t=this.$v,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;i===null?i=r.bounds.copy():i.dd(r.bounds);var o=e[r.level];o===void 0?o=this.computeLayerSpacing(r):o=Math.max(o,this.computeLayerSpacing(r)),e[r.level]=o}for(n=0;n<e.length;n++)e[n]===void 0&&(e[n]=0);if(this.angle===90||this.angle===270?(i.Ac(this.nodeSpacing/2,this.layerSpacing),n=new N(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Ac(this.layerSpacing,this.nodeSpacing/2),n=new N(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=this.angle===90||this.angle===270?i.width:i.height,o=0,this.angle===180||this.angle===270)for(var l=0;l<t.length;l++)o+=t[l]+e[l];for(l=0;l<t.length;l++){var h=t[l]+e[l];this.angle===270?(o-=h,r.push(new z(0,o,i,h))):this.angle===90?(r.push(new z(0,o,i,h)),o+=h):this.angle===180?(o-=h,r.push(new z(o,0,h,i))):(r.push(new z(o,0,h,i)),o+=h)}this.commitLayers(r,n)}},Mt.prototype.commitLayers=function(){},Mt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Mt.prototype.yv=function(){for(var t=this.Tb.iterator;t.next();){var e=t.value;e instanceof Dn&&FP(this,e)}};function FP(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var i=e.length,n=0;n<i;n++)FP(t,e[n])}}Mt.prototype.setPortSpots=function(t){var e=t.alignment;if(Xs(e)){var i=this.ud===no,n=tr(t);switch(n){case 0:var r=_i;break;case 90:r=jn;break;case 180:r=Ln;break;default:r=Tn}var o=t.children,l=o.length;switch(e){case us:case so:for(e=0;e<l;e++){var h=o[e];if(h=(i?h.sourceEdges:h.destinationEdges).first(),h!==null&&(h=h.link,h!==null)){var a=n===90||n===270?Ln:Tn;if(l===1||e===l-1&&l%2===1)switch(n){case 0:a=Ln;break;case 90:a=Tn;break;case 180:a=_i;break;default:a=jn}else e%2===0&&(a=n===90||n===270?_i:jn);i?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=a)):(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=r))}}break;case hs:for(n=n===90||n===270?_i:jn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)));break;case jo:for(n=n===90||n===270?Ln:Tn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)))}}else if(i=tr(t),this.ud===no){for(r=t.destinationEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Wb())switch(i){case 0:n.fromSpot=_i;break;case 90:n.fromSpot=jn;break;case 180:n.fromSpot=Ln;break;default:n.fromSpot=Tn}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Wb())switch(i){case 0:n.toSpot=Ln;break;case 90:n.toSpot=Tn;break;case 180:n.toSpot=_i;break;default:n.toSpot=jn}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Wb())switch(i){case 0:n.toSpot=_i;break;case 90:n.toSpot=jn;break;case 180:n.toSpot=Ln;break;default:n.toSpot=Tn}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Wb())switch(i){case 0:n.fromSpot=Ln;break;case 90:n.fromSpot=Tn;break;case 180:n.fromSpot=_i;break;default:n.fromSpot=jn}else n.fromSpot=t.childPortSpot}};function tr(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}Mt.prototype.computeLayerSpacing=function(t){var e=tr(t);e=e===90||e===270;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i},Mt.prototype.computeNodeIndent=function(t){var e=tr(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=e===90||e===270?t.width*n:t.height*n}return i=Math.max(0,i)},B.Object.defineProperties(Mt.prototype,{roots:{get:function(){return this.Tb},set:function(t){this.Tb!==t&&(this.Tb=t,this.C())}},path:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t,this.C())}},treeStyle:{get:function(){return this.vo},set:function(t){this.Qb===t||t!==yg&&t!==w1&&t!==x1&&t!==M1||(this.vo=t,this.C())}},layerStyle:{get:function(){return this.Bq},set:function(t){this.Qb===t||t!==k1&&t!==P1&&t!==xg||(this.Bq=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},arrangement:{get:function(){return this.Qb},set:function(t){this.Qb===t||t!==mg&&t!==S1&&t!==vg||(this.Qb=t,this.C())}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},rootDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.C())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.C())}},sorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==na&&t!==oc&&t!==sc&&!lc||(this.W.sorting=t,this.C())}},comparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.C())}},angle:{get:function(){return this.W.angle},set:function(t){this.W.angle!==t&&(t===0||t===90||t===180||t===270?(this.W.angle=t,this.C()):I("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.C())}},nodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==gg&&t!==uc||(this.W.compaction=t,this.C())}},breadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.D(t)||(this.W.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.D(t)||(this.W.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==na&&t!==oc&&t!==sc&&!lc||(this.Y.sorting=t,this.C())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.C())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.Y.angle=t,this.C())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==gg&&t!==uc||(this.Y.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.D(t)||(this.Y.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.D(t)||(this.Y.childPortSpot=t,this.C())}}});var dg=new Q(Mt,"PathDefault",-1),no=new Q(Mt,"PathDestination",0),Ou=new Q(Mt,"PathSource",1),na=new Q(Mt,"SortingForwards",10),oc=new Q(Mt,"SortingReverse",11),sc=new Q(Mt,"SortingAscending",12),lc=new Q(Mt,"SortingDescending",13),ra=new Q(Mt,"AlignmentCenterSubtrees",20),Fu=new Q(Mt,"AlignmentCenterChildren",21),ro=new Q(Mt,"AlignmentStart",22),oo=new Q(Mt,"AlignmentEnd",23),us=new Q(Mt,"AlignmentBus",24),so=new Q(Mt,"AlignmentBusBranching",25),hs=new Q(Mt,"AlignmentTopLeftBus",26),jo=new Q(Mt,"AlignmentBottomRightBus",27),gg=new Q(Mt,"CompactionNone",30),uc=new Q(Mt,"CompactionBlock",31),yg=new Q(Mt,"StyleLayered",40),x1=new Q(Mt,"StyleLastParents",41),w1=new Q(Mt,"StyleAlternating",42),M1=new Q(Mt,"StyleRootOnly",43),mg=new Q(Mt,"ArrangementVertical",50),S1=new Q(Mt,"ArrangementHorizontal",51),vg=new Q(Mt,"ArrangementFixedRoots",52),k1=new Q(Mt,"LayerIndividual",60),P1=new Q(Mt,"LayerSiblings",61),xg=new Q(Mt,"LayerUniform",62);Mt.className="TreeLayout",Mt.PathDefault=dg,Mt.PathDestination=no,Mt.PathSource=Ou,Mt.SortingForwards=na,Mt.SortingReverse=oc,Mt.SortingAscending=sc,Mt.SortingDescending=lc,Mt.AlignmentCenterSubtrees=ra,Mt.AlignmentCenterChildren=Fu,Mt.AlignmentStart=ro,Mt.AlignmentEnd=oo,Mt.AlignmentBus=us,Mt.AlignmentBusBranching=so,Mt.AlignmentTopLeftBus=hs,Mt.AlignmentBottomRightBus=jo,Mt.CompactionNone=gg,Mt.CompactionBlock=uc,Mt.StyleLayered=yg,Mt.StyleLastParents=x1,Mt.StyleAlternating=w1,Mt.StyleRootOnly=M1,Mt.ArrangementVertical=mg,Mt.ArrangementHorizontal=S1,Mt.ArrangementFixedRoots=vg,Mt.LayerIndividual=k1,Mt.LayerSiblings=P1,Mt.LayerUniform=xg;function Eu(t){_t.call(this,t)}V(Eu,_t),Eu.prototype.createVertex=function(){return new Dn(this)},Eu.prototype.createEdge=function(){return new oa(this)},Eu.className="TreeNetwork";function Dn(t){me.call(this,t),this.V=!1,this.hb=null,this.u=[],this.nb=this.Ha=this.F=this.ia=0,this.td=null,this.S=new N(0,0),this.Da=new ct(0,0),this.la=new N(0,0),this.im=this.hm=this.qA=!1,this.kp=this.Yo=null,this.md=na,this.gd=_v,this.Kb=0,this.Jb=Fu,this.Vq=this.Uq=0,this.Wq=20,this.ie=50,this.Aq=0,this.Hp=uc,this.Ap=0,this.nr=25,this.Gp=this.mr=10,this.Fp=20,this.xr=!0,this.dr=$e,this.wr=!0,this.Dp=$e}V(Dn,me),Dn.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.md=t.sorting,this.gd=t.comparer,this.Kb=t.angle,this.Jb=t.alignment,this.Uq=t.nodeIndent,this.Vq=t.nodeIndentPastParent,this.Wq=t.nodeSpacing,this.ie=t.layerSpacing,this.Aq=t.layerSpacingParentOverlap,this.Hp=t.compaction,this.Ap=t.breadthLimit,this.nr=t.rowSpacing,this.mr=t.rowIndent,this.Gp=t.commentSpacing,this.Fp=t.commentMargin,this.xr=t.setsPortSpot,this.dr=t.portSpot,this.wr=t.setsChildPortSpot,this.Dp=t.childPortSpot)},B.Object.defineProperties(Dn.prototype,{initialized:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},parent:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.u=t}}},level:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},maxGenerationCount:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},comments:{get:function(){return this.td},set:function(t){if(this.td!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.td=t}}},sorting:{get:function(){return this.md},set:function(t){this.md!==t&&(this.md=t)}},comparer:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}},angle:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t)}},alignment:{get:function(){return this.Jb},set:function(t){this.Jb!==t&&(this.Jb=t)}},nodeIndent:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},nodeIndentPastParent:{get:function(){return this.Vq},set:function(t){this.Vq!==t&&(this.Vq=t)}},nodeSpacing:{get:function(){return this.Wq},set:function(t){this.Wq!==t&&(this.Wq=t)}},layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&(this.ie=t)}},layerSpacingParentOverlap:{get:function(){return this.Aq},set:function(t){this.Aq!==t&&(this.Aq=t)}},compaction:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}},breadthLimit:{get:function(){return this.Ap},set:function(t){this.Ap!==t&&(this.Ap=t)}},rowSpacing:{get:function(){return this.nr},set:function(t){this.nr!==t&&(this.nr=t)}},rowIndent:{get:function(){return this.mr},set:function(t){this.mr!==t&&(this.mr=t)}},commentSpacing:{get:function(){return this.Gp},set:function(t){this.Gp!==t&&(this.Gp=t)}},commentMargin:{get:function(){return this.Fp},set:function(t){this.Fp!==t&&(this.Fp=t)}},setsPortSpot:{get:function(){return this.xr},set:function(t){this.xr!==t&&(this.xr=t)}},portSpot:{get:function(){return this.dr},set:function(t){this.dr.D(t)||(this.dr=t)}},setsChildPortSpot:{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t)}},childPortSpot:{get:function(){return this.Dp},set:function(t){this.Dp.D(t)||(this.Dp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Da},set:function(t){this.Da.set(t)}},subtreeOffset:{get:function(){return this.la},set:function(t){this.la.set(t)}}}),Dn.className="TreeVertex";function oa(t){$i.call(this,t),this.$t=new N(0,0)}V(oa,$i),oa.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ud){case no:i=this.fromVertex,n=this.toVertex;break;case Ou:i=this.toVertex,n=this.fromVertex;break;default:I("Unhandled path value "+e.ud.toString())}if(i!==null&&n!==null){var r=this.$t;if(r.x!==0||r.y!==0||i.qA){n=i.bounds;var o=tr(i),l=e.computeLayerSpacing(i),h=i.rowSpacing;t.vg();var a=t.curve===on,f=t.isOrthogonal,p;if(t.uh(),f||a){for(p=2;4<t.pointsCount;)t.pv(2);var d=t.i(1),y=t.i(2)}else{for(p=1;3<t.pointsCount;)t.pv(1);d=t.i(0),y=t.i(t.pointsCount-1)}var m=t.i(t.pointsCount-1);o===0?(i.alignment===oo?(o=n.bottom+r.y,r.y===0&&d.y>m.y+i.rowIndent&&(o=Math.min(o,Math.max(d.y,o-e.computeNodeIndent(i))))):i.alignment===ro?(o=n.top+r.y,r.y===0&&d.y<m.y-i.rowIndent&&(o=Math.max(o,Math.min(d.y,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,a?(t.l(p,d.x,o),p++,t.l(p,n.right+l,o),p++,t.l(p,n.right+l+(r.x-h)/3,o),p++,t.l(p,n.right+l+2*(r.x-h)/3,o),p++,t.l(p,n.right+l+(r.x-h),o),p++,t.l(p,y.x,o)):(f&&(t.l(p,n.right+l/2,d.y),p++),t.l(p,n.right+l/2,o),p++,t.l(p,n.right+l+r.x-(f?h/2:h),o),p++,f&&t.l(p,t.i(p-1).x,y.y))):o===90?(i.alignment===oo?(o=n.right+r.x,r.x===0&&d.x>m.x+i.rowIndent&&(o=Math.min(o,Math.max(d.x,o-e.computeNodeIndent(i))))):i.alignment===ro?(o=n.left+r.x,r.x===0&&d.x<m.x-i.rowIndent&&(o=Math.max(o,Math.min(d.x,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,a?(t.l(p,o,d.y),p++,t.l(p,o,n.bottom+l),p++,t.l(p,o,n.bottom+l+(r.y-h)/3),p++,t.l(p,o,n.bottom+l+2*(r.y-h)/3),p++,t.l(p,o,n.bottom+l+(r.y-h)),p++,t.l(p,o,y.y)):(f&&(t.l(p,d.x,n.bottom+l/2),p++),t.l(p,o,n.bottom+l/2),p++,t.l(p,o,n.bottom+l+r.y-(f?h/2:h)),p++,f&&t.l(p,y.x,t.i(p-1).y))):o===180?(i.alignment===oo?(o=n.bottom+r.y,r.y===0&&d.y>m.y+i.rowIndent&&(o=Math.min(o,Math.max(d.y,o-e.computeNodeIndent(i))))):i.alignment===ro?(o=n.top+r.y,r.y===0&&d.y<m.y-i.rowIndent&&(o=Math.max(o,Math.min(d.y,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,a?(t.l(p,d.x,o),p++,t.l(p,n.left-l,o),p++,t.l(p,n.left-l+(r.x+h)/3,o),p++,t.l(p,n.left-l+2*(r.x+h)/3,o),p++,t.l(p,n.left-l+(r.x+h),o),p++,t.l(p,y.x,o)):(f&&(t.l(p,n.left-l/2,d.y),p++),t.l(p,n.left-l/2,o),p++,t.l(p,n.left-l+r.x+(f?h/2:h),o),p++,f&&t.l(p,t.i(p-1).x,y.y))):o===270?(i.alignment===oo?(o=n.right+r.x,r.x===0&&d.x>m.x+i.rowIndent&&(o=Math.min(o,Math.max(d.x,o-e.computeNodeIndent(i))))):i.alignment===ro?(o=n.left+r.x,r.x===0&&d.x<m.x-i.rowIndent&&(o=Math.max(o,Math.min(d.x,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,a?(t.l(p,o,d.y),p++,t.l(p,o,n.top-l),p++,t.l(p,o,n.top-l+(r.y+h)/3),p++,t.l(p,o,n.top-l+2*(r.y+h)/3),p++,t.l(p,o,n.top-l+(r.y+h)),p++,t.l(p,o,y.y)):(f&&(t.l(p,d.x,n.top-l/2),p++),t.l(p,o,n.top-l/2),p++,t.l(p,o,n.top-l+r.y+(f?h/2:h)),p++,f&&t.l(p,y.x,t.i(p-1).y))):I("Invalid angle "+o),t.zf()}else r=n,t=this.link,n=this.network.layout,e=tr(i),e!==tr(r)&&(l=n.computeLayerSpacing(i),h=i.bounds,i=r.bounds,e===0&&i.left-h.right<l+1||e===90&&i.top-h.bottom<l+1||e===180&&h.left-i.right<l+1||e===270&&h.top-i.bottom<l+1||(t.vg(),i=t.curve===on,r=t.isOrthogonal,n=Xs(this.fromVertex.alignment),t.uh(),e===0?(e=h.right+l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,e-20,t.i(1).y),t.l(2,e-20,i),t.l(3,e,i),t.l(4,e+20,i),t.L(5,t.i(5).x,i)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):t.pointsCount===4?t.l(2,e,t.i(2).y):t.pointsCount===3?t.L(1,e,t.i(2).y):t.pointsCount===2&&t.l(1,e,t.i(1).y)):e===90?(e=h.bottom+l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,e-20),t.l(2,i,e-20),t.l(3,i,e),t.l(4,i,e+20),t.L(5,i,t.i(5).y)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):t.pointsCount===4?t.l(2,t.i(2).x,e):t.pointsCount===3?t.L(1,t.i(2).x,e):t.pointsCount===2&&t.l(1,t.i(1).x,e)):e===180?(e=h.left-l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,e+20,t.i(1).y),t.l(2,e+20,i),t.l(3,e,i),t.l(4,e-20,i),t.L(5,t.i(5).x,i)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):t.pointsCount===4?t.l(2,e,t.i(2).y):t.pointsCount===3?t.L(1,e,t.i(2).y):t.pointsCount===2&&t.l(1,e,t.i(1).y)):e===270&&(e=h.top-l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,e+20),t.l(2,i,e+20),t.l(3,i,e),t.l(4,i,e-20),t.L(5,i,t.i(5).y)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):t.pointsCount===4?t.l(2,t.i(2).x,e):t.pointsCount===3?t.L(1,t.i(2).x,e):t.pointsCount===2&&t.l(1,t.i(1).x,e)),t.zf()))}}},B.Object.defineProperties(oa.prototype,{fromVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},toVertex:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this.pd=t)}},relativePoint:{get:function(){return this.$t},set:function(t){this.$t.set(t)}}}),oa.className="TreeEdge",bt.prototype.initializeStandardTools=function(){this.gb("Action",new _o,this.mouseDownTools),this.gb("Relinking",new On,this.mouseDownTools),this.gb("LinkReshaping",new ge,this.mouseDownTools),this.gb("Rotating",new en,this.mouseDownTools),this.gb("Resizing",new vi,this.mouseDownTools),this.gb("Linking",new Ri,this.mouseMoveTools),this.gb("Dragging",new te,this.mouseMoveTools),this.gb("DragSelecting",new Wr,this.mouseMoveTools),this.gb("Panning",new $r,this.mouseMoveTools),this.gb("ContextMenu",new Hi,this.mouseUpTools),this.gb("TextEditing",new $t,this.mouseUpTools),this.gb("ClickCreating",new cl,this.mouseUpTools),this.gb("ClickSelecting",new gh,this.mouseUpTools)},Fr("Horizontal",new $p),Fr("Spot",new Zp),Fr("Table",new qp),Fr("Viewbox",new ed),Fr("TableRow",new bp),Fr("TableColumn",new td),Fr("Graduated",new Pf),Fr("Grid",new kf),Rp.add("GraphLinksModel",Ce),Rp.add("TreeModel",wn);var wg=G.go,N1={get licenseKey(){return D.licenseKey},set licenseKey(t){D.licenseKey=t},get version(){return D.version},Group:gt,EnumValue:Q,List:tt,Set:q,Map:mt,Point:N,Size:ct,Rect:z,Margin:At,Spot:ht,Geometry:$,PathFigure:Ee,PathSegment:jt,InputEvent:pn,DiagramEvent:au,ChangedEvent:qt,Model:rt,GraphLinksModel:Pt,TreeModel:Ni,Binding:ue,Transaction:ze,UndoManager:ie,CommandHandler:Yt,Tool:Lt,DraggingTool:te,DraggingInfo:Ls,DraggingOptions:Th,LinkingBaseTool:Je,LinkingTool:Ri,RelinkingTool:On,LinkReshapingTool:ge,ResizingTool:vi,RotatingTool:en,ClickSelectingTool:gh,ActionTool:_o,ClickCreatingTool:cl,HTMLInfo:Ho,ContextMenuTool:Hi,DragSelectingTool:Wr,PanningTool:$r,TextEditingTool:$t,ToolManager:bt,Animation:ii,AnimationManager:dn,AnimationTrigger:Jr,Layer:ni,Diagram:D,Palette:zp,Overview:Zr,Brush:Et,GraphObject:ot,Panel:_,RowColumnDefinition:ce,Shape:vt,TextBlock:Xt,Picture:Ei,Part:lt,Adornment:Ct,Node:b,Link:K,Placeholder:Mi,Layout:Wt,LayoutNetwork:_t,LayoutVertex:me,LayoutEdge:$i,GridLayout:Ae,PanelLayout:ye,CircularLayout:Zt,CircularNetwork:ta,CircularVertex:qf,CircularEdge:tg,ForceDirectedLayout:Ye,ForceDirectedNetwork:Lu,ForceDirectedVertex:bf,ForceDirectedEdge:tc,LayeredDigraphLayout:It,LayeredDigraphNetwork:ia,LayeredDigraphVertex:Sn,LayeredDigraphEdge:nc,TreeLayout:Mt,TreeNetwork:Eu,TreeVertex:Dn,TreeEdge:oa};typeof wg=="object"&&wg.version&&kt("WARNING: a `go` object on the root object is already defined.  "+("Debug"in wg?"debug ":"")+"version: "+wg.version+", replaced with version: "+N1.version),D.prototype.go=N1,G.go=N1,typeof ly<"u"&&typeof ly.exports=="object"&&(ly.exports=typeof global<"u"?global.go:self.go)})();const St=typeof global<"u"?global.go:self.go;St.Group;St.EnumValue;St.List;St.Set;St.Map;const lC=St.Point;St.Size;St.Rect;St.Margin;const oD=St.Spot;St.Geometry;St.PathFigure;St.PathSegment;St.InputEvent;St.DiagramEvent;St.ChangedEvent;St.Model;const wM=St.GraphLinksModel;St.TreeModel;const Nc=St.Binding;St.Transaction;St.UndoManager;St.CommandHandler;St.Tool;St.DraggingTool;St.DraggingInfo;St.LinkingBaseTool;St.LinkingTool;St.RelinkingTool;St.LinkReshapingTool;St.ResizingTool;St.RotatingTool;St.ClickSelectingTool;St.ActionTool;St.ClickCreatingTool;St.HTMLInfo;St.ContextMenuTool;St.DragSelectingTool;St.PanningTool;St.TextEditingTool;St.ToolManager;St.Animation;St.AnimationManager;St.AnimationTrigger;St.Layer;const Ba=St.Diagram;St.Palette;const sD=St.Overview;St.Brush;const lD=St.GraphObject;St.Panel;St.RowColumnDefinition;const dx=St.Shape,uD=St.TextBlock;St.TextBlockMetrics;St.Picture;St.Part;St.Adornment;const hD=St.Node,aD=St.Link;St.Placeholder;St.Layout;St.LayoutNetwork;St.LayoutVertex;St.LayoutEdge;St.GridLayout;St.PanelLayout;St.CircularLayout;St.CircularNetwork;St.CircularVertex;St.CircularEdge;St.ForceDirectedLayout;St.ForceDirectedNetwork;St.ForceDirectedVertex;St.ForceDirectedEdge;St.LayeredDigraphLayout;St.LayeredDigraphNetwork;St.LayeredDigraphVertex;St.LayeredDigraphEdge;St.TreeLayout;St.TreeNetwork;St.TreeVertex;St.TreeEdge;St.version;var pw=function(s,u){return pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(c[v]=g[v])},pw(s,u)};function MM(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");pw(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}/*! Copyright (C) 1998-2023 by Northwoods Software Corporation. All Rights Reserved. */var fD=function(s){MM(u,s);function u(c){var g=s.call(this,c)||this;return g.wasCleared=!1,g.modelChangedListener=null,g.divRef=ve.createRef(),g}return u.prototype.getDiagram=function(){return this.divRef.current===null?null:Ba.fromDiv(this.divRef.current)},u.prototype.clear=function(){var c=this.getDiagram();c!==null&&(c.clear(),this.wasCleared=!0)},u.prototype.componentDidMount=function(){var c=this;if(this.divRef.current!==null){var g=this.props.initDiagram();g.div=this.divRef.current,this.modelChangedListener=function(v){if(v.isTransactionFinished&&v.model&&!v.model.isReadOnly&&c.props.onModelChange){var w=v.model.toIncrementalData(v);w!==null&&c.props.onModelChange(w)}},g.addModelChangedListener(this.modelChangedListener),g.delayInitialization(function(){c.mergeData(g,!0)})}},u.prototype.componentWillUnmount=function(){var c=this.getDiagram();c!==null&&(c.div=null,this.modelChangedListener!==null&&(c.removeModelChangedListener(this.modelChangedListener),this.modelChangedListener=null))},u.prototype.shouldComponentUpdate=function(c,g){return c.divClassName!==this.props.divClassName||c.style!==this.props.style?!0:!(c.skipsDiagramUpdate||c.nodeDataArray===this.props.nodeDataArray&&c.linkDataArray===this.props.linkDataArray&&c.modelData===this.props.modelData)},u.prototype.componentDidUpdate=function(c,g){var v=this;if(!(c.nodeDataArray===this.props.nodeDataArray&&c.linkDataArray===this.props.linkDataArray&&c.modelData===this.props.modelData)){var w=this.getDiagram();w!==null&&(this.wasCleared?w.delayInitialization(function(){v.mergeData(w,!0),v.wasCleared=!1}):this.mergeData(w,!1))}},u.prototype.mergeData=function(c,g){var v=this,w=c.model;w.commit(function(P){v.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,v.props.modelData),P.mergeNodeDataArray(v.props.nodeDataArray),v.props.linkDataArray!==void 0&&P instanceof wM&&P.mergeLinkDataArray(v.props.linkDataArray)},g?"initial merge":"merge data")},u.prototype.render=function(){return ve.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u}(ve.Component);(function(s){MM(u,s);function u(c){var g=s.call(this,c)||this;return g.divRef=ve.createRef(),g}return u.prototype.getOverview=function(){return this.divRef.current===null?null:Ba.fromDiv(this.divRef.current)},u.prototype.componentDidMount=function(){if(this.divRef.current!==null){var c;this.props.initOverview!==void 0?c=this.props.initOverview():(c=new sD,c.contentAlignment=oD.Center),c.div=this.divRef.current,c.observed=this.props.observedDiagram}},u.prototype.componentWillUnmount=function(){var c=this.getOverview();c!==null&&(c.div=null,c.observed=null)},u.prototype.shouldComponentUpdate=function(c,g){return c.divClassName!==this.props.divClassName||c.style!==this.props.style?!0:c.observedDiagram!==this.props.observedDiagram},u.prototype.componentDidUpdate=function(c,g){if(c.observedDiagram!==this.props.observedDiagram){var v=this.getOverview();v!==null&&(v.observed=this.props.observedDiagram)}},u.prototype.render=function(){return ve.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u})(ve.Component);(function(s){MM(u,s);function u(c){var g=s.call(this,c)||this;return g.wasCleared=!1,g.divRef=ve.createRef(),g}return u.prototype.getPalette=function(){return this.divRef.current===null?null:Ba.fromDiv(this.divRef.current)},u.prototype.clear=function(){var c=this.getPalette();c!==null&&(c.clear(),this.wasCleared=!0)},u.prototype.componentDidMount=function(){var c=this;if(this.divRef.current!==null){var g=this.props.initPalette();g.div=this.divRef.current,g.delayInitialization(function(){c.mergeData(g,!0)})}},u.prototype.componentWillUnmount=function(){var c=this.getPalette();c!==null&&(c.div=null)},u.prototype.shouldComponentUpdate=function(c,g){return c.divClassName!==this.props.divClassName||c.style!==this.props.style?!0:!(c.nodeDataArray===this.props.nodeDataArray&&c.linkDataArray===this.props.linkDataArray&&c.modelData===this.props.modelData)},u.prototype.componentDidUpdate=function(c,g){var v=this;if(!(c.nodeDataArray===this.props.nodeDataArray&&c.linkDataArray===this.props.linkDataArray&&c.modelData===this.props.modelData)){var w=this.getPalette();w!==null&&(this.wasCleared?w.delayInitialization(function(){v.mergeData(w,!0),v.wasCleared=!1}):this.mergeData(w,!1))}},u.prototype.mergeData=function(c,g){var v=this,w=c.model;w.commit(function(P){v.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,v.props.modelData),P.mergeNodeDataArray(v.props.nodeDataArray),v.props.linkDataArray!==void 0&&P instanceof wM&&P.mergeLinkDataArray(v.props.linkDataArray)},g?"initial merge":"merge data")},u.prototype.render=function(){return ve.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u})(ve.Component);class cD extends ve.Component{constructor(c){super(c);AP(this,"diagramRef");this.diagramRef=ve.createRef()}componentDidMount(){if(!this.diagramRef.current)return;const c=this.diagramRef.current.getDiagram();c instanceof Ba&&c.addDiagramListener("ChangedSelection",this.props.onDiagramEvent)}componentWillUnmount(){if(!this.diagramRef.current)return;const c=this.diagramRef.current.getDiagram();c instanceof Ba&&c.removeDiagramListener("ChangedSelection",this.props.onDiagramEvent)}initDiagram(){const c=lD.make,g=c(Ba,{"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},model:new wM({linkKeyProperty:"key",makeUniqueKeyFunction:(v,w)=>{let P=w.key||1;for(;v.findNodeDataForKey(P);)P++;return w.key=P,P},makeUniqueLinkKeyFunction:(v,w)=>{let P=w.key||-1;for(;v.findLinkDataForKey(P);)P--;return w.key=P,P}})});return g.nodeTemplate=c(hD,"Auto",new Nc("location","loc",lC.parse).makeTwoWay(lC.stringify),c(dx,"RoundedRectangle",{name:"SHAPE",fill:"white",strokeWidth:0,portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer"},new Nc("fill","color")),c(uD,{margin:8,editable:!0,font:"400 .875rem Roboto, sans-serif"},new Nc("text").makeTwoWay())),g.linkTemplate=c(aD,new Nc("relinkableFrom","canRelink").ofModel(),new Nc("relinkableTo","canRelink").ofModel(),c(dx),c(dx,{toArrow:"Standard"})),g}clear(){var c;(c=this.diagramRef.current)==null||c.clear(),this.props.onClear&&this.props.onClear()}render(){return Br.jsx(fD,{ref:this.diagramRef,divClassName:"diagram-component",initDiagram:this.initDiagram,nodeDataArray:this.props.nodeDataArray,linkDataArray:this.props.linkDataArray,modelData:this.props.modelData,onModelChange:this.props.onModelChange,skipsDiagramUpdate:this.props.skipsDiagramUpdate})}}function pD(){console.clear(),ve.useState(!0);const[s,u]=ve.useState({canRelink:!0}),[c,g]=ve.useState(!1),[v,w]=ve.useState(null),[P,F]=ve.useState({}),[E,R]=ve.useState([{key:0,text:"Alpha",color:"lightblue",loc:"0 0"},{key:1,text:"Beta",color:"orange",loc:"150 0"},{key:2,text:"Gamma",color:"lightgreen",loc:"0 150"},{key:3,text:"Delta",color:"pink",loc:"150 150"}]),[V,B]=ve.useState([{key:-1,from:0,to:1},{key:-2,from:0,to:2},{key:-3,from:1,to:1},{key:-4,from:2,to:3},{key:-5,from:3,to:0}]);function J(X){var W;switch(X.name){case"ChangedSelection":{const I=(W=X.subject.first())==null?void 0:W.data;I&&F(I);break}}}function st(X){X.insertedNodeKeys,X.modifiedNodeData,X.removedNodeKeys,X.insertedLinkKeys,X.modifiedLinkData,X.removedLinkKeys,X.modelData,console.log(X)}function ut(X){const W=X.target.checked;u({canRelink:W}),g(!1)}function G(){R([{key:0,text:"Epsilon*",color:"lightblue",loc:E[0].loc},{key:1,text:"Zeta*",color:"orange",loc:E[1].loc},{key:2,text:"Eta*",color:"lightgreen",loc:E[2].loc},{key:3,text:"Theta*",color:"pink",loc:E[3].loc}]),B([{key:-1,from:0,to:1},{key:-2,from:0,to:2},{key:-3,from:1,to:1},{key:-4,from:2,to:3},{key:-5,from:3,to:0}]),g(!1)}ve.useEffect(()=>{},[]);function Ot(){var nt;const X=((nt=P==null?void 0:P.loc)==null?void 0:nt.split(" "))??[];X[0]=`x: ${X[0]??"?"}, `,X[1]=`y: ${X[1]??"?"}`;const U=Br.jsxs("small",{children:["KEY: ",(P==null?void 0:P.key)??"?"]}),W=Br.jsxs("small",{children:["TEXT: ",P.text??"?"]}),I=Br.jsxs("p",{children:["LOC: ",X]});return Br.jsx("div",{className:"App",children:Br.jsxs("div",{children:[Br.jsxs("label",{children:["Allow Relinking?",Br.jsx("input",{type:"checkbox",id:"relink",checked:s.canRelink,onChange:ut})]}),Br.jsx("div",{children:[U,W,I]}),Br.jsx(cD,{ref:at=>w(at),nodeDataArray:E,linkDataArray:V,modelData:s,skipsDiagramUpdate:c,onDiagramEvent:J,onModelChange:st,onClear:G})]})})}return Ot()}gx.createRoot(document.getElementById("root")).render(Br.jsx(gO.StrictMode,{children:Br.jsx(hA,{store:rD,children:Br.jsx(pD,{})})}))});export default dD();
//# sourceMappingURL=index-fe36c03a.js.map
